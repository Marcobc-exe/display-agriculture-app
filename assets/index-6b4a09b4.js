function dx(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var nY=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Td(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var hx={exports:{}},Sd={},px={exports:{}},ce={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fc=Symbol.for("react.element"),m2=Symbol.for("react.portal"),y2=Symbol.for("react.fragment"),v2=Symbol.for("react.strict_mode"),_2=Symbol.for("react.profiler"),b2=Symbol.for("react.provider"),E2=Symbol.for("react.context"),w2=Symbol.for("react.forward_ref"),x2=Symbol.for("react.suspense"),T2=Symbol.for("react.memo"),S2=Symbol.for("react.lazy"),o_=Symbol.iterator;function P2(t){return t===null||typeof t!="object"?null:(t=o_&&t[o_]||t["@@iterator"],typeof t=="function"?t:null)}var gx={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},mx=Object.assign,yx={};function pa(t,e,n){this.props=t,this.context=e,this.refs=yx,this.updater=n||gx}pa.prototype.isReactComponent={};pa.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};pa.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function vx(){}vx.prototype=pa.prototype;function M0(t,e,n){this.props=t,this.context=e,this.refs=yx,this.updater=n||gx}var k0=M0.prototype=new vx;k0.constructor=M0;mx(k0,pa.prototype);k0.isPureReactComponent=!0;var a_=Array.isArray,_x=Object.prototype.hasOwnProperty,N0={current:null},bx={key:!0,ref:!0,__self:!0,__source:!0};function Ex(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)_x.call(e,r)&&!bx.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:fc,type:t,key:s,ref:o,props:i,_owner:N0.current}}function A2(t,e){return{$$typeof:fc,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function F0(t){return typeof t=="object"&&t!==null&&t.$$typeof===fc}function C2(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var l_=/\/+/g;function np(t,e){return typeof t=="object"&&t!==null&&t.key!=null?C2(""+t.key):e.toString(36)}function $u(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case fc:case m2:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+np(o,0):r,a_(i)?(n="",t!=null&&(n=t.replace(l_,"$&/")+"/"),$u(i,e,n,"",function(c){return c})):i!=null&&(F0(i)&&(i=A2(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(l_,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",a_(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+np(s,a);o+=$u(s,e,n,l,i)}else if(l=P2(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+np(s,a++),o+=$u(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function qc(t,e,n){if(t==null)return t;var r=[],i=0;return $u(t,r,"","",function(s){return e.call(n,s,i++)}),r}function L2(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Ut={current:null},Gu={transition:null},R2={ReactCurrentDispatcher:Ut,ReactCurrentBatchConfig:Gu,ReactCurrentOwner:N0};ce.Children={map:qc,forEach:function(t,e,n){qc(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return qc(t,function(){e++}),e},toArray:function(t){return qc(t,function(e){return e})||[]},only:function(t){if(!F0(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ce.Component=pa;ce.Fragment=y2;ce.Profiler=_2;ce.PureComponent=M0;ce.StrictMode=v2;ce.Suspense=x2;ce.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=R2;ce.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=mx({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=N0.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)_x.call(e,l)&&!bx.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:fc,type:t.type,key:i,ref:s,props:r,_owner:o}};ce.createContext=function(t){return t={$$typeof:E2,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:b2,_context:t},t.Consumer=t};ce.createElement=Ex;ce.createFactory=function(t){var e=Ex.bind(null,t);return e.type=t,e};ce.createRef=function(){return{current:null}};ce.forwardRef=function(t){return{$$typeof:w2,render:t}};ce.isValidElement=F0;ce.lazy=function(t){return{$$typeof:S2,_payload:{_status:-1,_result:t},_init:L2}};ce.memo=function(t,e){return{$$typeof:T2,type:t,compare:e===void 0?null:e}};ce.startTransition=function(t){var e=Gu.transition;Gu.transition={};try{t()}finally{Gu.transition=e}};ce.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};ce.useCallback=function(t,e){return Ut.current.useCallback(t,e)};ce.useContext=function(t){return Ut.current.useContext(t)};ce.useDebugValue=function(){};ce.useDeferredValue=function(t){return Ut.current.useDeferredValue(t)};ce.useEffect=function(t,e){return Ut.current.useEffect(t,e)};ce.useId=function(){return Ut.current.useId()};ce.useImperativeHandle=function(t,e,n){return Ut.current.useImperativeHandle(t,e,n)};ce.useInsertionEffect=function(t,e){return Ut.current.useInsertionEffect(t,e)};ce.useLayoutEffect=function(t,e){return Ut.current.useLayoutEffect(t,e)};ce.useMemo=function(t,e){return Ut.current.useMemo(t,e)};ce.useReducer=function(t,e,n){return Ut.current.useReducer(t,e,n)};ce.useRef=function(t){return Ut.current.useRef(t)};ce.useState=function(t){return Ut.current.useState(t)};ce.useSyncExternalStore=function(t,e,n){return Ut.current.useSyncExternalStore(t,e,n)};ce.useTransition=function(){return Ut.current.useTransition()};ce.version="18.2.0";px.exports=ce;var A=px.exports;const Wt=Td(A),Mg=dx({__proto__:null,default:Wt},[A]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var O2=A,I2=Symbol.for("react.element"),M2=Symbol.for("react.fragment"),k2=Object.prototype.hasOwnProperty,N2=O2.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,F2={key:!0,ref:!0,__self:!0,__source:!0};function wx(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)k2.call(e,r)&&!F2.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:I2,type:t,key:s,ref:o,props:i,_owner:N2.current}}Sd.Fragment=M2;Sd.jsx=wx;Sd.jsxs=wx;hx.exports=Sd;var N=hx.exports,xx={exports:{}},bn={},Tx={exports:{}},Sx={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(D,G){var Y=D.length;D.push(G);e:for(;0<Y;){var re=Y-1>>>1,ee=D[re];if(0<i(ee,G))D[re]=G,D[Y]=ee,Y=re;else break e}}function n(D){return D.length===0?null:D[0]}function r(D){if(D.length===0)return null;var G=D[0],Y=D.pop();if(Y!==G){D[0]=Y;e:for(var re=0,ee=D.length,tt=ee>>>1;re<tt;){var he=2*(re+1)-1,Re=D[he],ke=he+1,ue=D[ke];if(0>i(Re,Y))ke<ee&&0>i(ue,Re)?(D[re]=ue,D[ke]=Y,re=ke):(D[re]=Re,D[he]=Y,re=he);else if(ke<ee&&0>i(ue,Y))D[re]=ue,D[ke]=Y,re=ke;else break e}}return G}function i(D,G){var Y=D.sortIndex-G.sortIndex;return Y!==0?Y:D.id-G.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,f=null,d=3,h=!1,p=!1,g=!1,E=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(D){for(var G=n(c);G!==null;){if(G.callback===null)r(c);else if(G.startTime<=D)r(c),G.sortIndex=G.expirationTime,e(l,G);else break;G=n(c)}}function b(D){if(g=!1,v(D),!p)if(n(l)!==null)p=!0,q(T);else{var G=n(c);G!==null&&J(b,G.startTime-D)}}function T(D,G){p=!1,g&&(g=!1,m(R),R=-1),h=!0;var Y=d;try{for(v(G),f=n(l);f!==null&&(!(f.expirationTime>G)||D&&!M());){var re=f.callback;if(typeof re=="function"){f.callback=null,d=f.priorityLevel;var ee=re(f.expirationTime<=G);G=t.unstable_now(),typeof ee=="function"?f.callback=ee:f===n(l)&&r(l),v(G)}else r(l);f=n(l)}if(f!==null)var tt=!0;else{var he=n(c);he!==null&&J(b,he.startTime-G),tt=!1}return tt}finally{f=null,d=Y,h=!1}}var S=!1,P=null,R=-1,O=5,L=-1;function M(){return!(t.unstable_now()-L<O)}function j(){if(P!==null){var D=t.unstable_now();L=D;var G=!0;try{G=P(!0,D)}finally{G?U():(S=!1,P=null)}}else S=!1}var U;if(typeof y=="function")U=function(){y(j)};else if(typeof MessageChannel<"u"){var V=new MessageChannel,X=V.port2;V.port1.onmessage=j,U=function(){X.postMessage(null)}}else U=function(){E(j,0)};function q(D){P=D,S||(S=!0,U())}function J(D,G){R=E(function(){D(t.unstable_now())},G)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(D){D.callback=null},t.unstable_continueExecution=function(){p||h||(p=!0,q(T))},t.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<D?Math.floor(1e3/D):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(D){switch(d){case 1:case 2:case 3:var G=3;break;default:G=d}var Y=d;d=G;try{return D()}finally{d=Y}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(D,G){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var Y=d;d=D;try{return G()}finally{d=Y}},t.unstable_scheduleCallback=function(D,G,Y){var re=t.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?re+Y:re):Y=re,D){case 1:var ee=-1;break;case 2:ee=250;break;case 5:ee=1073741823;break;case 4:ee=1e4;break;default:ee=5e3}return ee=Y+ee,D={id:u++,callback:G,priorityLevel:D,startTime:Y,expirationTime:ee,sortIndex:-1},Y>re?(D.sortIndex=Y,e(c,D),n(l)===null&&D===n(c)&&(g?(m(R),R=-1):g=!0,J(b,Y-re))):(D.sortIndex=ee,e(l,D),p||h||(p=!0,q(T))),D},t.unstable_shouldYield=M,t.unstable_wrapCallback=function(D){var G=d;return function(){var Y=d;d=G;try{return D.apply(this,arguments)}finally{d=Y}}}})(Sx);Tx.exports=Sx;var D2=Tx.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Px=A,mn=D2;function z(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Ax=new Set,Sl={};function Is(t,e){jo(t,e),jo(t+"Capture",e)}function jo(t,e){for(Sl[t]=e,t=0;t<e.length;t++)Ax.add(e[t])}var Vr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),kg=Object.prototype.hasOwnProperty,B2=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,c_={},u_={};function z2(t){return kg.call(u_,t)?!0:kg.call(c_,t)?!1:B2.test(t)?u_[t]=!0:(c_[t]=!0,!1)}function U2(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function j2(t,e,n,r){if(e===null||typeof e>"u"||U2(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function jt(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var xt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){xt[t]=new jt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];xt[e]=new jt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){xt[t]=new jt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){xt[t]=new jt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){xt[t]=new jt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){xt[t]=new jt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){xt[t]=new jt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){xt[t]=new jt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){xt[t]=new jt(t,5,!1,t.toLowerCase(),null,!1,!1)});var D0=/[\-:]([a-z])/g;function B0(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(D0,B0);xt[e]=new jt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(D0,B0);xt[e]=new jt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(D0,B0);xt[e]=new jt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){xt[t]=new jt(t,1,!1,t.toLowerCase(),null,!1,!1)});xt.xlinkHref=new jt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){xt[t]=new jt(t,1,!1,t.toLowerCase(),null,!0,!0)});function z0(t,e,n,r){var i=xt.hasOwnProperty(e)?xt[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(j2(e,n,i,r)&&(n=null),r||i===null?z2(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Zr=Px.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Zc=Symbol.for("react.element"),uo=Symbol.for("react.portal"),fo=Symbol.for("react.fragment"),U0=Symbol.for("react.strict_mode"),Ng=Symbol.for("react.profiler"),Cx=Symbol.for("react.provider"),Lx=Symbol.for("react.context"),j0=Symbol.for("react.forward_ref"),Fg=Symbol.for("react.suspense"),Dg=Symbol.for("react.suspense_list"),V0=Symbol.for("react.memo"),fi=Symbol.for("react.lazy"),Rx=Symbol.for("react.offscreen"),f_=Symbol.iterator;function La(t){return t===null||typeof t!="object"?null:(t=f_&&t[f_]||t["@@iterator"],typeof t=="function"?t:null)}var Ke=Object.assign,rp;function Qa(t){if(rp===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);rp=e&&e[1]||""}return`
`+rp+t}var ip=!1;function sp(t,e){if(!t||ip)return"";ip=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{ip=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Qa(t):""}function V2(t){switch(t.tag){case 5:return Qa(t.type);case 16:return Qa("Lazy");case 13:return Qa("Suspense");case 19:return Qa("SuspenseList");case 0:case 2:case 15:return t=sp(t.type,!1),t;case 11:return t=sp(t.type.render,!1),t;case 1:return t=sp(t.type,!0),t;default:return""}}function Bg(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case fo:return"Fragment";case uo:return"Portal";case Ng:return"Profiler";case U0:return"StrictMode";case Fg:return"Suspense";case Dg:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Lx:return(t.displayName||"Context")+".Consumer";case Cx:return(t._context.displayName||"Context")+".Provider";case j0:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case V0:return e=t.displayName||null,e!==null?e:Bg(t.type)||"Memo";case fi:e=t._payload,t=t._init;try{return Bg(t(e))}catch{}}return null}function $2(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Bg(e);case 8:return e===U0?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ki(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Ox(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function G2(t){var e=Ox(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Qc(t){t._valueTracker||(t._valueTracker=G2(t))}function Ix(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Ox(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function wf(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function zg(t,e){var n=e.checked;return Ke({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function d_(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=ki(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Mx(t,e){e=e.checked,e!=null&&z0(t,"checked",e,!1)}function Ug(t,e){Mx(t,e);var n=ki(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?jg(t,e.type,n):e.hasOwnProperty("defaultValue")&&jg(t,e.type,ki(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function h_(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function jg(t,e,n){(e!=="number"||wf(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Ja=Array.isArray;function Ao(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+ki(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Vg(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(z(91));return Ke({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function p_(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(z(92));if(Ja(n)){if(1<n.length)throw Error(z(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:ki(n)}}function kx(t,e){var n=ki(e.value),r=ki(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function g_(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Nx(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function $g(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Nx(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Jc,Fx=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Jc=Jc||document.createElement("div"),Jc.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Jc.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Pl(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var cl={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},W2=["Webkit","ms","Moz","O"];Object.keys(cl).forEach(function(t){W2.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),cl[e]=cl[t]})});function Dx(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||cl.hasOwnProperty(t)&&cl[t]?(""+e).trim():e+"px"}function Bx(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=Dx(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var H2=Ke({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Gg(t,e){if(e){if(H2[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(z(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(z(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(z(61))}if(e.style!=null&&typeof e.style!="object")throw Error(z(62))}}function Wg(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Hg=null;function $0(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Xg=null,Co=null,Lo=null;function m_(t){if(t=pc(t)){if(typeof Xg!="function")throw Error(z(280));var e=t.stateNode;e&&(e=Rd(e),Xg(t.stateNode,t.type,e))}}function zx(t){Co?Lo?Lo.push(t):Lo=[t]:Co=t}function Ux(){if(Co){var t=Co,e=Lo;if(Lo=Co=null,m_(t),e)for(t=0;t<e.length;t++)m_(e[t])}}function jx(t,e){return t(e)}function Vx(){}var op=!1;function $x(t,e,n){if(op)return t(e,n);op=!0;try{return jx(t,e,n)}finally{op=!1,(Co!==null||Lo!==null)&&(Vx(),Ux())}}function Al(t,e){var n=t.stateNode;if(n===null)return null;var r=Rd(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(z(231,e,typeof n));return n}var Yg=!1;if(Vr)try{var Ra={};Object.defineProperty(Ra,"passive",{get:function(){Yg=!0}}),window.addEventListener("test",Ra,Ra),window.removeEventListener("test",Ra,Ra)}catch{Yg=!1}function X2(t,e,n,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(u){this.onError(u)}}var ul=!1,xf=null,Tf=!1,Kg=null,Y2={onError:function(t){ul=!0,xf=t}};function K2(t,e,n,r,i,s,o,a,l){ul=!1,xf=null,X2.apply(Y2,arguments)}function q2(t,e,n,r,i,s,o,a,l){if(K2.apply(this,arguments),ul){if(ul){var c=xf;ul=!1,xf=null}else throw Error(z(198));Tf||(Tf=!0,Kg=c)}}function Ms(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Gx(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function y_(t){if(Ms(t)!==t)throw Error(z(188))}function Z2(t){var e=t.alternate;if(!e){if(e=Ms(t),e===null)throw Error(z(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return y_(i),t;if(s===r)return y_(i),e;s=s.sibling}throw Error(z(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(z(189))}}if(n.alternate!==r)throw Error(z(190))}if(n.tag!==3)throw Error(z(188));return n.stateNode.current===n?t:e}function Wx(t){return t=Z2(t),t!==null?Hx(t):null}function Hx(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Hx(t);if(e!==null)return e;t=t.sibling}return null}var Xx=mn.unstable_scheduleCallback,v_=mn.unstable_cancelCallback,Q2=mn.unstable_shouldYield,J2=mn.unstable_requestPaint,rt=mn.unstable_now,eL=mn.unstable_getCurrentPriorityLevel,G0=mn.unstable_ImmediatePriority,Yx=mn.unstable_UserBlockingPriority,Sf=mn.unstable_NormalPriority,tL=mn.unstable_LowPriority,Kx=mn.unstable_IdlePriority,Pd=null,mr=null;function nL(t){if(mr&&typeof mr.onCommitFiberRoot=="function")try{mr.onCommitFiberRoot(Pd,t,void 0,(t.current.flags&128)===128)}catch{}}var Kn=Math.clz32?Math.clz32:sL,rL=Math.log,iL=Math.LN2;function sL(t){return t>>>=0,t===0?32:31-(rL(t)/iL|0)|0}var eu=64,tu=4194304;function el(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Pf(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=el(a):(s&=o,s!==0&&(r=el(s)))}else o=n&~i,o!==0?r=el(o):s!==0&&(r=el(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Kn(e),i=1<<n,r|=t[n],e&=~i;return r}function oL(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function aL(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Kn(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=oL(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function qg(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function qx(){var t=eu;return eu<<=1,!(eu&4194240)&&(eu=64),t}function ap(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function dc(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Kn(e),t[e]=n}function lL(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Kn(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function W0(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Kn(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Te=0;function Zx(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Qx,H0,Jx,eT,tT,Zg=!1,nu=[],wi=null,xi=null,Ti=null,Cl=new Map,Ll=new Map,hi=[],cL="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function __(t,e){switch(t){case"focusin":case"focusout":wi=null;break;case"dragenter":case"dragleave":xi=null;break;case"mouseover":case"mouseout":Ti=null;break;case"pointerover":case"pointerout":Cl.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ll.delete(e.pointerId)}}function Oa(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=pc(e),e!==null&&H0(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function uL(t,e,n,r,i){switch(e){case"focusin":return wi=Oa(wi,t,e,n,r,i),!0;case"dragenter":return xi=Oa(xi,t,e,n,r,i),!0;case"mouseover":return Ti=Oa(Ti,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return Cl.set(s,Oa(Cl.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Ll.set(s,Oa(Ll.get(s)||null,t,e,n,r,i)),!0}return!1}function nT(t){var e=cs(t.target);if(e!==null){var n=Ms(e);if(n!==null){if(e=n.tag,e===13){if(e=Gx(n),e!==null){t.blockedOn=e,tT(t.priority,function(){Jx(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Wu(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Qg(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Hg=r,n.target.dispatchEvent(r),Hg=null}else return e=pc(n),e!==null&&H0(e),t.blockedOn=n,!1;e.shift()}return!0}function b_(t,e,n){Wu(t)&&n.delete(e)}function fL(){Zg=!1,wi!==null&&Wu(wi)&&(wi=null),xi!==null&&Wu(xi)&&(xi=null),Ti!==null&&Wu(Ti)&&(Ti=null),Cl.forEach(b_),Ll.forEach(b_)}function Ia(t,e){t.blockedOn===e&&(t.blockedOn=null,Zg||(Zg=!0,mn.unstable_scheduleCallback(mn.unstable_NormalPriority,fL)))}function Rl(t){function e(i){return Ia(i,t)}if(0<nu.length){Ia(nu[0],t);for(var n=1;n<nu.length;n++){var r=nu[n];r.blockedOn===t&&(r.blockedOn=null)}}for(wi!==null&&Ia(wi,t),xi!==null&&Ia(xi,t),Ti!==null&&Ia(Ti,t),Cl.forEach(e),Ll.forEach(e),n=0;n<hi.length;n++)r=hi[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<hi.length&&(n=hi[0],n.blockedOn===null);)nT(n),n.blockedOn===null&&hi.shift()}var Ro=Zr.ReactCurrentBatchConfig,Af=!0;function dL(t,e,n,r){var i=Te,s=Ro.transition;Ro.transition=null;try{Te=1,X0(t,e,n,r)}finally{Te=i,Ro.transition=s}}function hL(t,e,n,r){var i=Te,s=Ro.transition;Ro.transition=null;try{Te=4,X0(t,e,n,r)}finally{Te=i,Ro.transition=s}}function X0(t,e,n,r){if(Af){var i=Qg(t,e,n,r);if(i===null)yp(t,e,r,Cf,n),__(t,r);else if(uL(i,t,e,n,r))r.stopPropagation();else if(__(t,r),e&4&&-1<cL.indexOf(t)){for(;i!==null;){var s=pc(i);if(s!==null&&Qx(s),s=Qg(t,e,n,r),s===null&&yp(t,e,r,Cf,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else yp(t,e,r,null,n)}}var Cf=null;function Qg(t,e,n,r){if(Cf=null,t=$0(r),t=cs(t),t!==null)if(e=Ms(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Gx(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Cf=t,null}function rT(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(eL()){case G0:return 1;case Yx:return 4;case Sf:case tL:return 16;case Kx:return 536870912;default:return 16}default:return 16}}var mi=null,Y0=null,Hu=null;function iT(){if(Hu)return Hu;var t,e=Y0,n=e.length,r,i="value"in mi?mi.value:mi.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return Hu=i.slice(t,1<r?1-r:void 0)}function Xu(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function ru(){return!0}function E_(){return!1}function En(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?ru:E_,this.isPropagationStopped=E_,this}return Ke(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ru)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ru)},persist:function(){},isPersistent:ru}),e}var ga={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},K0=En(ga),hc=Ke({},ga,{view:0,detail:0}),pL=En(hc),lp,cp,Ma,Ad=Ke({},hc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:q0,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ma&&(Ma&&t.type==="mousemove"?(lp=t.screenX-Ma.screenX,cp=t.screenY-Ma.screenY):cp=lp=0,Ma=t),lp)},movementY:function(t){return"movementY"in t?t.movementY:cp}}),w_=En(Ad),gL=Ke({},Ad,{dataTransfer:0}),mL=En(gL),yL=Ke({},hc,{relatedTarget:0}),up=En(yL),vL=Ke({},ga,{animationName:0,elapsedTime:0,pseudoElement:0}),_L=En(vL),bL=Ke({},ga,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),EL=En(bL),wL=Ke({},ga,{data:0}),x_=En(wL),xL={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},TL={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},SL={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function PL(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=SL[t])?!!e[t]:!1}function q0(){return PL}var AL=Ke({},hc,{key:function(t){if(t.key){var e=xL[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Xu(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?TL[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:q0,charCode:function(t){return t.type==="keypress"?Xu(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Xu(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),CL=En(AL),LL=Ke({},Ad,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),T_=En(LL),RL=Ke({},hc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:q0}),OL=En(RL),IL=Ke({},ga,{propertyName:0,elapsedTime:0,pseudoElement:0}),ML=En(IL),kL=Ke({},Ad,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),NL=En(kL),FL=[9,13,27,32],Z0=Vr&&"CompositionEvent"in window,fl=null;Vr&&"documentMode"in document&&(fl=document.documentMode);var DL=Vr&&"TextEvent"in window&&!fl,sT=Vr&&(!Z0||fl&&8<fl&&11>=fl),S_=String.fromCharCode(32),P_=!1;function oT(t,e){switch(t){case"keyup":return FL.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function aT(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ho=!1;function BL(t,e){switch(t){case"compositionend":return aT(e);case"keypress":return e.which!==32?null:(P_=!0,S_);case"textInput":return t=e.data,t===S_&&P_?null:t;default:return null}}function zL(t,e){if(ho)return t==="compositionend"||!Z0&&oT(t,e)?(t=iT(),Hu=Y0=mi=null,ho=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return sT&&e.locale!=="ko"?null:e.data;default:return null}}var UL={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function A_(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!UL[t.type]:e==="textarea"}function lT(t,e,n,r){zx(r),e=Lf(e,"onChange"),0<e.length&&(n=new K0("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var dl=null,Ol=null;function jL(t){_T(t,0)}function Cd(t){var e=mo(t);if(Ix(e))return t}function VL(t,e){if(t==="change")return e}var cT=!1;if(Vr){var fp;if(Vr){var dp="oninput"in document;if(!dp){var C_=document.createElement("div");C_.setAttribute("oninput","return;"),dp=typeof C_.oninput=="function"}fp=dp}else fp=!1;cT=fp&&(!document.documentMode||9<document.documentMode)}function L_(){dl&&(dl.detachEvent("onpropertychange",uT),Ol=dl=null)}function uT(t){if(t.propertyName==="value"&&Cd(Ol)){var e=[];lT(e,Ol,t,$0(t)),$x(jL,e)}}function $L(t,e,n){t==="focusin"?(L_(),dl=e,Ol=n,dl.attachEvent("onpropertychange",uT)):t==="focusout"&&L_()}function GL(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Cd(Ol)}function WL(t,e){if(t==="click")return Cd(e)}function HL(t,e){if(t==="input"||t==="change")return Cd(e)}function XL(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Jn=typeof Object.is=="function"?Object.is:XL;function Il(t,e){if(Jn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!kg.call(e,i)||!Jn(t[i],e[i]))return!1}return!0}function R_(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function O_(t,e){var n=R_(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=R_(n)}}function fT(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?fT(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function dT(){for(var t=window,e=wf();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=wf(t.document)}return e}function Q0(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function YL(t){var e=dT(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&fT(n.ownerDocument.documentElement,n)){if(r!==null&&Q0(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=O_(n,s);var o=O_(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var KL=Vr&&"documentMode"in document&&11>=document.documentMode,po=null,Jg=null,hl=null,em=!1;function I_(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;em||po==null||po!==wf(r)||(r=po,"selectionStart"in r&&Q0(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),hl&&Il(hl,r)||(hl=r,r=Lf(Jg,"onSelect"),0<r.length&&(e=new K0("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=po)))}function iu(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var go={animationend:iu("Animation","AnimationEnd"),animationiteration:iu("Animation","AnimationIteration"),animationstart:iu("Animation","AnimationStart"),transitionend:iu("Transition","TransitionEnd")},hp={},hT={};Vr&&(hT=document.createElement("div").style,"AnimationEvent"in window||(delete go.animationend.animation,delete go.animationiteration.animation,delete go.animationstart.animation),"TransitionEvent"in window||delete go.transitionend.transition);function Ld(t){if(hp[t])return hp[t];if(!go[t])return t;var e=go[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in hT)return hp[t]=e[n];return t}var pT=Ld("animationend"),gT=Ld("animationiteration"),mT=Ld("animationstart"),yT=Ld("transitionend"),vT=new Map,M_="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ui(t,e){vT.set(t,e),Is(e,[t])}for(var pp=0;pp<M_.length;pp++){var gp=M_[pp],qL=gp.toLowerCase(),ZL=gp[0].toUpperCase()+gp.slice(1);Ui(qL,"on"+ZL)}Ui(pT,"onAnimationEnd");Ui(gT,"onAnimationIteration");Ui(mT,"onAnimationStart");Ui("dblclick","onDoubleClick");Ui("focusin","onFocus");Ui("focusout","onBlur");Ui(yT,"onTransitionEnd");jo("onMouseEnter",["mouseout","mouseover"]);jo("onMouseLeave",["mouseout","mouseover"]);jo("onPointerEnter",["pointerout","pointerover"]);jo("onPointerLeave",["pointerout","pointerover"]);Is("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Is("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Is("onBeforeInput",["compositionend","keypress","textInput","paste"]);Is("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Is("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Is("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var tl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),QL=new Set("cancel close invalid load scroll toggle".split(" ").concat(tl));function k_(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,q2(r,e,void 0,t),t.currentTarget=null}function _T(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;k_(i,a,c),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;k_(i,a,c),s=l}}}if(Tf)throw t=Kg,Tf=!1,Kg=null,t}function Be(t,e){var n=e[sm];n===void 0&&(n=e[sm]=new Set);var r=t+"__bubble";n.has(r)||(bT(e,t,2,!1),n.add(r))}function mp(t,e,n){var r=0;e&&(r|=4),bT(n,t,r,e)}var su="_reactListening"+Math.random().toString(36).slice(2);function Ml(t){if(!t[su]){t[su]=!0,Ax.forEach(function(n){n!=="selectionchange"&&(QL.has(n)||mp(n,!1,t),mp(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[su]||(e[su]=!0,mp("selectionchange",!1,e))}}function bT(t,e,n,r){switch(rT(e)){case 1:var i=dL;break;case 4:i=hL;break;default:i=X0}n=i.bind(null,e,n,t),i=void 0,!Yg||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function yp(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=cs(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}$x(function(){var c=s,u=$0(n),f=[];e:{var d=vT.get(t);if(d!==void 0){var h=K0,p=t;switch(t){case"keypress":if(Xu(n)===0)break e;case"keydown":case"keyup":h=CL;break;case"focusin":p="focus",h=up;break;case"focusout":p="blur",h=up;break;case"beforeblur":case"afterblur":h=up;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=w_;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=mL;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=OL;break;case pT:case gT:case mT:h=_L;break;case yT:h=ML;break;case"scroll":h=pL;break;case"wheel":h=NL;break;case"copy":case"cut":case"paste":h=EL;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=T_}var g=(e&4)!==0,E=!g&&t==="scroll",m=g?d!==null?d+"Capture":null:d;g=[];for(var y=c,v;y!==null;){v=y;var b=v.stateNode;if(v.tag===5&&b!==null&&(v=b,m!==null&&(b=Al(y,m),b!=null&&g.push(kl(y,b,v)))),E)break;y=y.return}0<g.length&&(d=new h(d,p,null,n,u),f.push({event:d,listeners:g}))}}if(!(e&7)){e:{if(d=t==="mouseover"||t==="pointerover",h=t==="mouseout"||t==="pointerout",d&&n!==Hg&&(p=n.relatedTarget||n.fromElement)&&(cs(p)||p[$r]))break e;if((h||d)&&(d=u.window===u?u:(d=u.ownerDocument)?d.defaultView||d.parentWindow:window,h?(p=n.relatedTarget||n.toElement,h=c,p=p?cs(p):null,p!==null&&(E=Ms(p),p!==E||p.tag!==5&&p.tag!==6)&&(p=null)):(h=null,p=c),h!==p)){if(g=w_,b="onMouseLeave",m="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(g=T_,b="onPointerLeave",m="onPointerEnter",y="pointer"),E=h==null?d:mo(h),v=p==null?d:mo(p),d=new g(b,y+"leave",h,n,u),d.target=E,d.relatedTarget=v,b=null,cs(u)===c&&(g=new g(m,y+"enter",p,n,u),g.target=v,g.relatedTarget=E,b=g),E=b,h&&p)t:{for(g=h,m=p,y=0,v=g;v;v=Hs(v))y++;for(v=0,b=m;b;b=Hs(b))v++;for(;0<y-v;)g=Hs(g),y--;for(;0<v-y;)m=Hs(m),v--;for(;y--;){if(g===m||m!==null&&g===m.alternate)break t;g=Hs(g),m=Hs(m)}g=null}else g=null;h!==null&&N_(f,d,h,g,!1),p!==null&&E!==null&&N_(f,E,p,g,!0)}}e:{if(d=c?mo(c):window,h=d.nodeName&&d.nodeName.toLowerCase(),h==="select"||h==="input"&&d.type==="file")var T=VL;else if(A_(d))if(cT)T=HL;else{T=GL;var S=$L}else(h=d.nodeName)&&h.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(T=WL);if(T&&(T=T(t,c))){lT(f,T,n,u);break e}S&&S(t,d,c),t==="focusout"&&(S=d._wrapperState)&&S.controlled&&d.type==="number"&&jg(d,"number",d.value)}switch(S=c?mo(c):window,t){case"focusin":(A_(S)||S.contentEditable==="true")&&(po=S,Jg=c,hl=null);break;case"focusout":hl=Jg=po=null;break;case"mousedown":em=!0;break;case"contextmenu":case"mouseup":case"dragend":em=!1,I_(f,n,u);break;case"selectionchange":if(KL)break;case"keydown":case"keyup":I_(f,n,u)}var P;if(Z0)e:{switch(t){case"compositionstart":var R="onCompositionStart";break e;case"compositionend":R="onCompositionEnd";break e;case"compositionupdate":R="onCompositionUpdate";break e}R=void 0}else ho?oT(t,n)&&(R="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(R="onCompositionStart");R&&(sT&&n.locale!=="ko"&&(ho||R!=="onCompositionStart"?R==="onCompositionEnd"&&ho&&(P=iT()):(mi=u,Y0="value"in mi?mi.value:mi.textContent,ho=!0)),S=Lf(c,R),0<S.length&&(R=new x_(R,t,null,n,u),f.push({event:R,listeners:S}),P?R.data=P:(P=aT(n),P!==null&&(R.data=P)))),(P=DL?BL(t,n):zL(t,n))&&(c=Lf(c,"onBeforeInput"),0<c.length&&(u=new x_("onBeforeInput","beforeinput",null,n,u),f.push({event:u,listeners:c}),u.data=P))}_T(f,e)})}function kl(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Lf(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Al(t,n),s!=null&&r.unshift(kl(t,s,i)),s=Al(t,e),s!=null&&r.push(kl(t,s,i))),t=t.return}return r}function Hs(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function N_(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,i?(l=Al(n,s),l!=null&&o.unshift(kl(n,l,a))):i||(l=Al(n,s),l!=null&&o.push(kl(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var JL=/\r\n?/g,eR=/\u0000|\uFFFD/g;function F_(t){return(typeof t=="string"?t:""+t).replace(JL,`
`).replace(eR,"")}function ou(t,e,n){if(e=F_(e),F_(t)!==e&&n)throw Error(z(425))}function Rf(){}var tm=null,nm=null;function rm(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var im=typeof setTimeout=="function"?setTimeout:void 0,tR=typeof clearTimeout=="function"?clearTimeout:void 0,D_=typeof Promise=="function"?Promise:void 0,nR=typeof queueMicrotask=="function"?queueMicrotask:typeof D_<"u"?function(t){return D_.resolve(null).then(t).catch(rR)}:im;function rR(t){setTimeout(function(){throw t})}function vp(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Rl(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Rl(e)}function Si(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function B_(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var ma=Math.random().toString(36).slice(2),ur="__reactFiber$"+ma,Nl="__reactProps$"+ma,$r="__reactContainer$"+ma,sm="__reactEvents$"+ma,iR="__reactListeners$"+ma,sR="__reactHandles$"+ma;function cs(t){var e=t[ur];if(e)return e;for(var n=t.parentNode;n;){if(e=n[$r]||n[ur]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=B_(t);t!==null;){if(n=t[ur])return n;t=B_(t)}return e}t=n,n=t.parentNode}return null}function pc(t){return t=t[ur]||t[$r],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function mo(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(z(33))}function Rd(t){return t[Nl]||null}var om=[],yo=-1;function ji(t){return{current:t}}function Ue(t){0>yo||(t.current=om[yo],om[yo]=null,yo--)}function Me(t,e){yo++,om[yo]=t.current,t.current=e}var Ni={},It=ji(Ni),Xt=ji(!1),_s=Ni;function Vo(t,e){var n=t.type.contextTypes;if(!n)return Ni;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Yt(t){return t=t.childContextTypes,t!=null}function Of(){Ue(Xt),Ue(It)}function z_(t,e,n){if(It.current!==Ni)throw Error(z(168));Me(It,e),Me(Xt,n)}function ET(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(z(108,$2(t)||"Unknown",i));return Ke({},n,r)}function If(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Ni,_s=It.current,Me(It,t),Me(Xt,Xt.current),!0}function U_(t,e,n){var r=t.stateNode;if(!r)throw Error(z(169));n?(t=ET(t,e,_s),r.__reactInternalMemoizedMergedChildContext=t,Ue(Xt),Ue(It),Me(It,t)):Ue(Xt),Me(Xt,n)}var Or=null,Od=!1,_p=!1;function wT(t){Or===null?Or=[t]:Or.push(t)}function oR(t){Od=!0,wT(t)}function Vi(){if(!_p&&Or!==null){_p=!0;var t=0,e=Te;try{var n=Or;for(Te=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Or=null,Od=!1}catch(i){throw Or!==null&&(Or=Or.slice(t+1)),Xx(G0,Vi),i}finally{Te=e,_p=!1}}return null}var vo=[],_o=0,Mf=null,kf=0,Cn=[],Ln=0,bs=null,Fr=1,Dr="";function rs(t,e){vo[_o++]=kf,vo[_o++]=Mf,Mf=t,kf=e}function xT(t,e,n){Cn[Ln++]=Fr,Cn[Ln++]=Dr,Cn[Ln++]=bs,bs=t;var r=Fr;t=Dr;var i=32-Kn(r)-1;r&=~(1<<i),n+=1;var s=32-Kn(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Fr=1<<32-Kn(e)+i|n<<i|r,Dr=s+t}else Fr=1<<s|n<<i|r,Dr=t}function J0(t){t.return!==null&&(rs(t,1),xT(t,1,0))}function ey(t){for(;t===Mf;)Mf=vo[--_o],vo[_o]=null,kf=vo[--_o],vo[_o]=null;for(;t===bs;)bs=Cn[--Ln],Cn[Ln]=null,Dr=Cn[--Ln],Cn[Ln]=null,Fr=Cn[--Ln],Cn[Ln]=null}var hn=null,fn=null,$e=!1,Wn=null;function TT(t,e){var n=Rn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function j_(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,hn=t,fn=Si(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,hn=t,fn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=bs!==null?{id:Fr,overflow:Dr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Rn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,hn=t,fn=null,!0):!1;default:return!1}}function am(t){return(t.mode&1)!==0&&(t.flags&128)===0}function lm(t){if($e){var e=fn;if(e){var n=e;if(!j_(t,e)){if(am(t))throw Error(z(418));e=Si(n.nextSibling);var r=hn;e&&j_(t,e)?TT(r,n):(t.flags=t.flags&-4097|2,$e=!1,hn=t)}}else{if(am(t))throw Error(z(418));t.flags=t.flags&-4097|2,$e=!1,hn=t}}}function V_(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;hn=t}function au(t){if(t!==hn)return!1;if(!$e)return V_(t),$e=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!rm(t.type,t.memoizedProps)),e&&(e=fn)){if(am(t))throw ST(),Error(z(418));for(;e;)TT(t,e),e=Si(e.nextSibling)}if(V_(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(z(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){fn=Si(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}fn=null}}else fn=hn?Si(t.stateNode.nextSibling):null;return!0}function ST(){for(var t=fn;t;)t=Si(t.nextSibling)}function $o(){fn=hn=null,$e=!1}function ty(t){Wn===null?Wn=[t]:Wn.push(t)}var aR=Zr.ReactCurrentBatchConfig;function $n(t,e){if(t&&t.defaultProps){e=Ke({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}var Nf=ji(null),Ff=null,bo=null,ny=null;function ry(){ny=bo=Ff=null}function iy(t){var e=Nf.current;Ue(Nf),t._currentValue=e}function cm(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Oo(t,e){Ff=t,ny=bo=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Ht=!0),t.firstContext=null)}function Nn(t){var e=t._currentValue;if(ny!==t)if(t={context:t,memoizedValue:e,next:null},bo===null){if(Ff===null)throw Error(z(308));bo=t,Ff.dependencies={lanes:0,firstContext:t}}else bo=bo.next=t;return e}var us=null;function sy(t){us===null?us=[t]:us.push(t)}function PT(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,sy(e)):(n.next=i.next,i.next=n),e.interleaved=n,Gr(t,r)}function Gr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var di=!1;function oy(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function AT(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Ur(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Pi(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,de&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Gr(t,n)}return i=r.interleaved,i===null?(e.next=e,sy(r)):(e.next=i.next,i.next=e),r.interleaved=e,Gr(t,n)}function Yu(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,W0(t,n)}}function $_(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Df(t,e,n,r){var i=t.updateQueue;di=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var u=t.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(s!==null){var f=i.baseState;o=0,u=c=l=null,a=s;do{var d=a.lane,h=a.eventTime;if((r&d)===d){u!==null&&(u=u.next={eventTime:h,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=t,g=a;switch(d=e,h=n,g.tag){case 1:if(p=g.payload,typeof p=="function"){f=p.call(h,f,d);break e}f=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=g.payload,d=typeof p=="function"?p.call(h,f,d):p,d==null)break e;f=Ke({},f,d);break e;case 2:di=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,d=i.effects,d===null?i.effects=[a]:d.push(a))}else h={eventTime:h,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=h,l=f):u=u.next=h,o|=d;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;d=a,a=d.next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}while(1);if(u===null&&(l=f),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);ws|=o,t.lanes=o,t.memoizedState=f}}function G_(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(z(191,i));i.call(r)}}}var CT=new Px.Component().refs;function um(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Ke({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Id={isMounted:function(t){return(t=t._reactInternals)?Ms(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=zt(),i=Ci(t),s=Ur(r,i);s.payload=e,n!=null&&(s.callback=n),e=Pi(t,s,i),e!==null&&(qn(e,t,i,r),Yu(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=zt(),i=Ci(t),s=Ur(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Pi(t,s,i),e!==null&&(qn(e,t,i,r),Yu(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=zt(),r=Ci(t),i=Ur(n,r);i.tag=2,e!=null&&(i.callback=e),e=Pi(t,i,r),e!==null&&(qn(e,t,r,n),Yu(e,t,r))}};function W_(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!Il(n,r)||!Il(i,s):!0}function LT(t,e,n){var r=!1,i=Ni,s=e.contextType;return typeof s=="object"&&s!==null?s=Nn(s):(i=Yt(e)?_s:It.current,r=e.contextTypes,s=(r=r!=null)?Vo(t,i):Ni),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Id,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function H_(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Id.enqueueReplaceState(e,e.state,null)}function fm(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs=CT,oy(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Nn(s):(s=Yt(e)?_s:It.current,i.context=Vo(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(um(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Id.enqueueReplaceState(i,i.state,null),Df(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function ka(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(z(309));var r=n.stateNode}if(!r)throw Error(z(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;a===CT&&(a=i.refs={}),o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(z(284));if(!n._owner)throw Error(z(290,t))}return t}function lu(t,e){throw t=Object.prototype.toString.call(e),Error(z(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function X_(t){var e=t._init;return e(t._payload)}function RT(t){function e(m,y){if(t){var v=m.deletions;v===null?(m.deletions=[y],m.flags|=16):v.push(y)}}function n(m,y){if(!t)return null;for(;y!==null;)e(m,y),y=y.sibling;return null}function r(m,y){for(m=new Map;y!==null;)y.key!==null?m.set(y.key,y):m.set(y.index,y),y=y.sibling;return m}function i(m,y){return m=Li(m,y),m.index=0,m.sibling=null,m}function s(m,y,v){return m.index=v,t?(v=m.alternate,v!==null?(v=v.index,v<y?(m.flags|=2,y):v):(m.flags|=2,y)):(m.flags|=1048576,y)}function o(m){return t&&m.alternate===null&&(m.flags|=2),m}function a(m,y,v,b){return y===null||y.tag!==6?(y=Pp(v,m.mode,b),y.return=m,y):(y=i(y,v),y.return=m,y)}function l(m,y,v,b){var T=v.type;return T===fo?u(m,y,v.props.children,b,v.key):y!==null&&(y.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===fi&&X_(T)===y.type)?(b=i(y,v.props),b.ref=ka(m,y,v),b.return=m,b):(b=ef(v.type,v.key,v.props,null,m.mode,b),b.ref=ka(m,y,v),b.return=m,b)}function c(m,y,v,b){return y===null||y.tag!==4||y.stateNode.containerInfo!==v.containerInfo||y.stateNode.implementation!==v.implementation?(y=Ap(v,m.mode,b),y.return=m,y):(y=i(y,v.children||[]),y.return=m,y)}function u(m,y,v,b,T){return y===null||y.tag!==7?(y=ms(v,m.mode,b,T),y.return=m,y):(y=i(y,v),y.return=m,y)}function f(m,y,v){if(typeof y=="string"&&y!==""||typeof y=="number")return y=Pp(""+y,m.mode,v),y.return=m,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Zc:return v=ef(y.type,y.key,y.props,null,m.mode,v),v.ref=ka(m,null,y),v.return=m,v;case uo:return y=Ap(y,m.mode,v),y.return=m,y;case fi:var b=y._init;return f(m,b(y._payload),v)}if(Ja(y)||La(y))return y=ms(y,m.mode,v,null),y.return=m,y;lu(m,y)}return null}function d(m,y,v,b){var T=y!==null?y.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return T!==null?null:a(m,y,""+v,b);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Zc:return v.key===T?l(m,y,v,b):null;case uo:return v.key===T?c(m,y,v,b):null;case fi:return T=v._init,d(m,y,T(v._payload),b)}if(Ja(v)||La(v))return T!==null?null:u(m,y,v,b,null);lu(m,v)}return null}function h(m,y,v,b,T){if(typeof b=="string"&&b!==""||typeof b=="number")return m=m.get(v)||null,a(y,m,""+b,T);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Zc:return m=m.get(b.key===null?v:b.key)||null,l(y,m,b,T);case uo:return m=m.get(b.key===null?v:b.key)||null,c(y,m,b,T);case fi:var S=b._init;return h(m,y,v,S(b._payload),T)}if(Ja(b)||La(b))return m=m.get(v)||null,u(y,m,b,T,null);lu(y,b)}return null}function p(m,y,v,b){for(var T=null,S=null,P=y,R=y=0,O=null;P!==null&&R<v.length;R++){P.index>R?(O=P,P=null):O=P.sibling;var L=d(m,P,v[R],b);if(L===null){P===null&&(P=O);break}t&&P&&L.alternate===null&&e(m,P),y=s(L,y,R),S===null?T=L:S.sibling=L,S=L,P=O}if(R===v.length)return n(m,P),$e&&rs(m,R),T;if(P===null){for(;R<v.length;R++)P=f(m,v[R],b),P!==null&&(y=s(P,y,R),S===null?T=P:S.sibling=P,S=P);return $e&&rs(m,R),T}for(P=r(m,P);R<v.length;R++)O=h(P,m,R,v[R],b),O!==null&&(t&&O.alternate!==null&&P.delete(O.key===null?R:O.key),y=s(O,y,R),S===null?T=O:S.sibling=O,S=O);return t&&P.forEach(function(M){return e(m,M)}),$e&&rs(m,R),T}function g(m,y,v,b){var T=La(v);if(typeof T!="function")throw Error(z(150));if(v=T.call(v),v==null)throw Error(z(151));for(var S=T=null,P=y,R=y=0,O=null,L=v.next();P!==null&&!L.done;R++,L=v.next()){P.index>R?(O=P,P=null):O=P.sibling;var M=d(m,P,L.value,b);if(M===null){P===null&&(P=O);break}t&&P&&M.alternate===null&&e(m,P),y=s(M,y,R),S===null?T=M:S.sibling=M,S=M,P=O}if(L.done)return n(m,P),$e&&rs(m,R),T;if(P===null){for(;!L.done;R++,L=v.next())L=f(m,L.value,b),L!==null&&(y=s(L,y,R),S===null?T=L:S.sibling=L,S=L);return $e&&rs(m,R),T}for(P=r(m,P);!L.done;R++,L=v.next())L=h(P,m,R,L.value,b),L!==null&&(t&&L.alternate!==null&&P.delete(L.key===null?R:L.key),y=s(L,y,R),S===null?T=L:S.sibling=L,S=L);return t&&P.forEach(function(j){return e(m,j)}),$e&&rs(m,R),T}function E(m,y,v,b){if(typeof v=="object"&&v!==null&&v.type===fo&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case Zc:e:{for(var T=v.key,S=y;S!==null;){if(S.key===T){if(T=v.type,T===fo){if(S.tag===7){n(m,S.sibling),y=i(S,v.props.children),y.return=m,m=y;break e}}else if(S.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===fi&&X_(T)===S.type){n(m,S.sibling),y=i(S,v.props),y.ref=ka(m,S,v),y.return=m,m=y;break e}n(m,S);break}else e(m,S);S=S.sibling}v.type===fo?(y=ms(v.props.children,m.mode,b,v.key),y.return=m,m=y):(b=ef(v.type,v.key,v.props,null,m.mode,b),b.ref=ka(m,y,v),b.return=m,m=b)}return o(m);case uo:e:{for(S=v.key;y!==null;){if(y.key===S)if(y.tag===4&&y.stateNode.containerInfo===v.containerInfo&&y.stateNode.implementation===v.implementation){n(m,y.sibling),y=i(y,v.children||[]),y.return=m,m=y;break e}else{n(m,y);break}else e(m,y);y=y.sibling}y=Ap(v,m.mode,b),y.return=m,m=y}return o(m);case fi:return S=v._init,E(m,y,S(v._payload),b)}if(Ja(v))return p(m,y,v,b);if(La(v))return g(m,y,v,b);lu(m,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,y!==null&&y.tag===6?(n(m,y.sibling),y=i(y,v),y.return=m,m=y):(n(m,y),y=Pp(v,m.mode,b),y.return=m,m=y),o(m)):n(m,y)}return E}var Go=RT(!0),OT=RT(!1),gc={},yr=ji(gc),Fl=ji(gc),Dl=ji(gc);function fs(t){if(t===gc)throw Error(z(174));return t}function ay(t,e){switch(Me(Dl,e),Me(Fl,t),Me(yr,gc),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:$g(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=$g(e,t)}Ue(yr),Me(yr,e)}function Wo(){Ue(yr),Ue(Fl),Ue(Dl)}function IT(t){fs(Dl.current);var e=fs(yr.current),n=$g(e,t.type);e!==n&&(Me(Fl,t),Me(yr,n))}function ly(t){Fl.current===t&&(Ue(yr),Ue(Fl))}var We=ji(0);function Bf(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var bp=[];function cy(){for(var t=0;t<bp.length;t++)bp[t]._workInProgressVersionPrimary=null;bp.length=0}var Ku=Zr.ReactCurrentDispatcher,Ep=Zr.ReactCurrentBatchConfig,Es=0,Ye=null,ct=null,pt=null,zf=!1,pl=!1,Bl=0,lR=0;function Tt(){throw Error(z(321))}function uy(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Jn(t[n],e[n]))return!1;return!0}function fy(t,e,n,r,i,s){if(Es=s,Ye=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Ku.current=t===null||t.memoizedState===null?dR:hR,t=n(r,i),pl){s=0;do{if(pl=!1,Bl=0,25<=s)throw Error(z(301));s+=1,pt=ct=null,e.updateQueue=null,Ku.current=pR,t=n(r,i)}while(pl)}if(Ku.current=Uf,e=ct!==null&&ct.next!==null,Es=0,pt=ct=Ye=null,zf=!1,e)throw Error(z(300));return t}function dy(){var t=Bl!==0;return Bl=0,t}function ar(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return pt===null?Ye.memoizedState=pt=t:pt=pt.next=t,pt}function Fn(){if(ct===null){var t=Ye.alternate;t=t!==null?t.memoizedState:null}else t=ct.next;var e=pt===null?Ye.memoizedState:pt.next;if(e!==null)pt=e,ct=t;else{if(t===null)throw Error(z(310));ct=t,t={memoizedState:ct.memoizedState,baseState:ct.baseState,baseQueue:ct.baseQueue,queue:ct.queue,next:null},pt===null?Ye.memoizedState=pt=t:pt=pt.next=t}return pt}function zl(t,e){return typeof e=="function"?e(t):e}function wp(t){var e=Fn(),n=e.queue;if(n===null)throw Error(z(311));n.lastRenderedReducer=t;var r=ct,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,c=s;do{var u=c.lane;if((Es&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var f={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=f,o=r):l=l.next=f,Ye.lanes|=u,ws|=u}c=c.next}while(c!==null&&c!==s);l===null?o=r:l.next=a,Jn(r,e.memoizedState)||(Ht=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,Ye.lanes|=s,ws|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function xp(t){var e=Fn(),n=e.queue;if(n===null)throw Error(z(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);Jn(s,e.memoizedState)||(Ht=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function MT(){}function kT(t,e){var n=Ye,r=Fn(),i=e(),s=!Jn(r.memoizedState,i);if(s&&(r.memoizedState=i,Ht=!0),r=r.queue,hy(DT.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||pt!==null&&pt.memoizedState.tag&1){if(n.flags|=2048,Ul(9,FT.bind(null,n,r,i,e),void 0,null),mt===null)throw Error(z(349));Es&30||NT(n,e,i)}return i}function NT(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ye.updateQueue,e===null?(e={lastEffect:null,stores:null},Ye.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function FT(t,e,n,r){e.value=n,e.getSnapshot=r,BT(e)&&zT(t)}function DT(t,e,n){return n(function(){BT(e)&&zT(t)})}function BT(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Jn(t,n)}catch{return!0}}function zT(t){var e=Gr(t,1);e!==null&&qn(e,t,1,-1)}function Y_(t){var e=ar();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:zl,lastRenderedState:t},e.queue=t,t=t.dispatch=fR.bind(null,Ye,t),[e.memoizedState,t]}function Ul(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Ye.updateQueue,e===null?(e={lastEffect:null,stores:null},Ye.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function UT(){return Fn().memoizedState}function qu(t,e,n,r){var i=ar();Ye.flags|=t,i.memoizedState=Ul(1|e,n,void 0,r===void 0?null:r)}function Md(t,e,n,r){var i=Fn();r=r===void 0?null:r;var s=void 0;if(ct!==null){var o=ct.memoizedState;if(s=o.destroy,r!==null&&uy(r,o.deps)){i.memoizedState=Ul(e,n,s,r);return}}Ye.flags|=t,i.memoizedState=Ul(1|e,n,s,r)}function K_(t,e){return qu(8390656,8,t,e)}function hy(t,e){return Md(2048,8,t,e)}function jT(t,e){return Md(4,2,t,e)}function VT(t,e){return Md(4,4,t,e)}function $T(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function GT(t,e,n){return n=n!=null?n.concat([t]):null,Md(4,4,$T.bind(null,e,t),n)}function py(){}function WT(t,e){var n=Fn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&uy(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function HT(t,e){var n=Fn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&uy(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function XT(t,e,n){return Es&21?(Jn(n,e)||(n=qx(),Ye.lanes|=n,ws|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Ht=!0),t.memoizedState=n)}function cR(t,e){var n=Te;Te=n!==0&&4>n?n:4,t(!0);var r=Ep.transition;Ep.transition={};try{t(!1),e()}finally{Te=n,Ep.transition=r}}function YT(){return Fn().memoizedState}function uR(t,e,n){var r=Ci(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},KT(t))qT(e,n);else if(n=PT(t,e,n,r),n!==null){var i=zt();qn(n,t,r,i),ZT(n,e,r)}}function fR(t,e,n){var r=Ci(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(KT(t))qT(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,Jn(a,o)){var l=e.interleaved;l===null?(i.next=i,sy(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=PT(t,e,i,r),n!==null&&(i=zt(),qn(n,t,r,i),ZT(n,e,r))}}function KT(t){var e=t.alternate;return t===Ye||e!==null&&e===Ye}function qT(t,e){pl=zf=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function ZT(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,W0(t,n)}}var Uf={readContext:Nn,useCallback:Tt,useContext:Tt,useEffect:Tt,useImperativeHandle:Tt,useInsertionEffect:Tt,useLayoutEffect:Tt,useMemo:Tt,useReducer:Tt,useRef:Tt,useState:Tt,useDebugValue:Tt,useDeferredValue:Tt,useTransition:Tt,useMutableSource:Tt,useSyncExternalStore:Tt,useId:Tt,unstable_isNewReconciler:!1},dR={readContext:Nn,useCallback:function(t,e){return ar().memoizedState=[t,e===void 0?null:e],t},useContext:Nn,useEffect:K_,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,qu(4194308,4,$T.bind(null,e,t),n)},useLayoutEffect:function(t,e){return qu(4194308,4,t,e)},useInsertionEffect:function(t,e){return qu(4,2,t,e)},useMemo:function(t,e){var n=ar();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=ar();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=uR.bind(null,Ye,t),[r.memoizedState,t]},useRef:function(t){var e=ar();return t={current:t},e.memoizedState=t},useState:Y_,useDebugValue:py,useDeferredValue:function(t){return ar().memoizedState=t},useTransition:function(){var t=Y_(!1),e=t[0];return t=cR.bind(null,t[1]),ar().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Ye,i=ar();if($e){if(n===void 0)throw Error(z(407));n=n()}else{if(n=e(),mt===null)throw Error(z(349));Es&30||NT(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,K_(DT.bind(null,r,s,t),[t]),r.flags|=2048,Ul(9,FT.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=ar(),e=mt.identifierPrefix;if($e){var n=Dr,r=Fr;n=(r&~(1<<32-Kn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Bl++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=lR++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},hR={readContext:Nn,useCallback:WT,useContext:Nn,useEffect:hy,useImperativeHandle:GT,useInsertionEffect:jT,useLayoutEffect:VT,useMemo:HT,useReducer:wp,useRef:UT,useState:function(){return wp(zl)},useDebugValue:py,useDeferredValue:function(t){var e=Fn();return XT(e,ct.memoizedState,t)},useTransition:function(){var t=wp(zl)[0],e=Fn().memoizedState;return[t,e]},useMutableSource:MT,useSyncExternalStore:kT,useId:YT,unstable_isNewReconciler:!1},pR={readContext:Nn,useCallback:WT,useContext:Nn,useEffect:hy,useImperativeHandle:GT,useInsertionEffect:jT,useLayoutEffect:VT,useMemo:HT,useReducer:xp,useRef:UT,useState:function(){return xp(zl)},useDebugValue:py,useDeferredValue:function(t){var e=Fn();return ct===null?e.memoizedState=t:XT(e,ct.memoizedState,t)},useTransition:function(){var t=xp(zl)[0],e=Fn().memoizedState;return[t,e]},useMutableSource:MT,useSyncExternalStore:kT,useId:YT,unstable_isNewReconciler:!1};function Ho(t,e){try{var n="",r=e;do n+=V2(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Tp(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function dm(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var gR=typeof WeakMap=="function"?WeakMap:Map;function QT(t,e,n){n=Ur(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Vf||(Vf=!0,wm=r),dm(t,e)},n}function JT(t,e,n){n=Ur(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){dm(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){dm(t,e),typeof r!="function"&&(Ai===null?Ai=new Set([this]):Ai.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function q_(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new gR;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=LR.bind(null,t,e,n),e.then(t,t))}function Z_(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Q_(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Ur(-1,1),e.tag=2,Pi(n,e,1))),n.lanes|=1),t)}var mR=Zr.ReactCurrentOwner,Ht=!1;function Dt(t,e,n,r){e.child=t===null?OT(e,null,n,r):Go(e,t.child,n,r)}function J_(t,e,n,r,i){n=n.render;var s=e.ref;return Oo(e,i),r=fy(t,e,n,r,s,i),n=dy(),t!==null&&!Ht?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Wr(t,e,i)):($e&&n&&J0(e),e.flags|=1,Dt(t,e,r,i),e.child)}function e1(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!wy(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,eS(t,e,s,r,i)):(t=ef(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Il,n(o,r)&&t.ref===e.ref)return Wr(t,e,i)}return e.flags|=1,t=Li(s,r),t.ref=e.ref,t.return=e,e.child=t}function eS(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Il(s,r)&&t.ref===e.ref)if(Ht=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(Ht=!0);else return e.lanes=t.lanes,Wr(t,e,i)}return hm(t,e,n,r,i)}function tS(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Me(wo,an),an|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Me(wo,an),an|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Me(wo,an),an|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,Me(wo,an),an|=r;return Dt(t,e,i,n),e.child}function nS(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function hm(t,e,n,r,i){var s=Yt(n)?_s:It.current;return s=Vo(e,s),Oo(e,i),n=fy(t,e,n,r,s,i),r=dy(),t!==null&&!Ht?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Wr(t,e,i)):($e&&r&&J0(e),e.flags|=1,Dt(t,e,n,i),e.child)}function t1(t,e,n,r,i){if(Yt(n)){var s=!0;If(e)}else s=!1;if(Oo(e,i),e.stateNode===null)Zu(t,e),LT(e,n,r),fm(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=Nn(c):(c=Yt(n)?_s:It.current,c=Vo(e,c));var u=n.getDerivedStateFromProps,f=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&H_(e,o,r,c),di=!1;var d=e.memoizedState;o.state=d,Df(e,r,o,i),l=e.memoizedState,a!==r||d!==l||Xt.current||di?(typeof u=="function"&&(um(e,n,u,r),l=e.memoizedState),(a=di||W_(e,n,a,r,d,l,c))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,AT(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:$n(e.type,a),o.props=c,f=e.pendingProps,d=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=Nn(l):(l=Yt(n)?_s:It.current,l=Vo(e,l));var h=n.getDerivedStateFromProps;(u=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||d!==l)&&H_(e,o,r,l),di=!1,d=e.memoizedState,o.state=d,Df(e,r,o,i);var p=e.memoizedState;a!==f||d!==p||Xt.current||di?(typeof h=="function"&&(um(e,n,h,r),p=e.memoizedState),(c=di||W_(e,n,c,r,d,p,l)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,p,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,p,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=p),o.props=r,o.state=p,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),r=!1)}return pm(t,e,n,r,s,i)}function pm(t,e,n,r,i,s){nS(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&U_(e,n,!1),Wr(t,e,s);r=e.stateNode,mR.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Go(e,t.child,null,s),e.child=Go(e,null,a,s)):Dt(t,e,a,s),e.memoizedState=r.state,i&&U_(e,n,!0),e.child}function rS(t){var e=t.stateNode;e.pendingContext?z_(t,e.pendingContext,e.pendingContext!==e.context):e.context&&z_(t,e.context,!1),ay(t,e.containerInfo)}function n1(t,e,n,r,i){return $o(),ty(i),e.flags|=256,Dt(t,e,n,r),e.child}var gm={dehydrated:null,treeContext:null,retryLane:0};function mm(t){return{baseLanes:t,cachePool:null,transitions:null}}function iS(t,e,n){var r=e.pendingProps,i=We.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Me(We,i&1),t===null)return lm(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Fd(o,r,0,null),t=ms(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=mm(n),e.memoizedState=gm,t):gy(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return yR(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Li(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=Li(a,s):(s=ms(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?mm(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=gm,r}return s=t.child,t=s.sibling,r=Li(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function gy(t,e){return e=Fd({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function cu(t,e,n,r){return r!==null&&ty(r),Go(e,t.child,null,n),t=gy(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function yR(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=Tp(Error(z(422))),cu(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Fd({mode:"visible",children:r.children},i,0,null),s=ms(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Go(e,t.child,null,o),e.child.memoizedState=mm(o),e.memoizedState=gm,s);if(!(e.mode&1))return cu(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(z(419)),r=Tp(s,r,void 0),cu(t,e,o,r)}if(a=(o&t.childLanes)!==0,Ht||a){if(r=mt,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Gr(t,i),qn(r,t,i,-1))}return Ey(),r=Tp(Error(z(421))),cu(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=RR.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,fn=Si(i.nextSibling),hn=e,$e=!0,Wn=null,t!==null&&(Cn[Ln++]=Fr,Cn[Ln++]=Dr,Cn[Ln++]=bs,Fr=t.id,Dr=t.overflow,bs=e),e=gy(e,r.children),e.flags|=4096,e)}function r1(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),cm(t.return,e,n)}function Sp(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function sS(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Dt(t,e,r.children,n),r=We.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&r1(t,n,e);else if(t.tag===19)r1(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Me(We,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Bf(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Sp(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Bf(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Sp(e,!0,n,null,s);break;case"together":Sp(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Zu(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Wr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),ws|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(z(153));if(e.child!==null){for(t=e.child,n=Li(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Li(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function vR(t,e,n){switch(e.tag){case 3:rS(e),$o();break;case 5:IT(e);break;case 1:Yt(e.type)&&If(e);break;case 4:ay(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Me(Nf,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Me(We,We.current&1),e.flags|=128,null):n&e.child.childLanes?iS(t,e,n):(Me(We,We.current&1),t=Wr(t,e,n),t!==null?t.sibling:null);Me(We,We.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return sS(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Me(We,We.current),r)break;return null;case 22:case 23:return e.lanes=0,tS(t,e,n)}return Wr(t,e,n)}var oS,ym,aS,lS;oS=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};ym=function(){};aS=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,fs(yr.current);var s=null;switch(n){case"input":i=zg(t,i),r=zg(t,r),s=[];break;case"select":i=Ke({},i,{value:void 0}),r=Ke({},r,{value:void 0}),s=[];break;case"textarea":i=Vg(t,i),r=Vg(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Rf)}Gg(n,r);var o;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Sl.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var l=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Sl.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Be("scroll",t),s||a===l||(s=[])):(s=s||[]).push(c,l))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};lS=function(t,e,n,r){n!==r&&(e.flags|=4)};function Na(t,e){if(!$e)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function St(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function _R(t,e,n){var r=e.pendingProps;switch(ey(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return St(e),null;case 1:return Yt(e.type)&&Of(),St(e),null;case 3:return r=e.stateNode,Wo(),Ue(Xt),Ue(It),cy(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(au(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Wn!==null&&(Sm(Wn),Wn=null))),ym(t,e),St(e),null;case 5:ly(e);var i=fs(Dl.current);if(n=e.type,t!==null&&e.stateNode!=null)aS(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(z(166));return St(e),null}if(t=fs(yr.current),au(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[ur]=e,r[Nl]=s,t=(e.mode&1)!==0,n){case"dialog":Be("cancel",r),Be("close",r);break;case"iframe":case"object":case"embed":Be("load",r);break;case"video":case"audio":for(i=0;i<tl.length;i++)Be(tl[i],r);break;case"source":Be("error",r);break;case"img":case"image":case"link":Be("error",r),Be("load",r);break;case"details":Be("toggle",r);break;case"input":d_(r,s),Be("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Be("invalid",r);break;case"textarea":p_(r,s),Be("invalid",r)}Gg(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&ou(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&ou(r.textContent,a,t),i=["children",""+a]):Sl.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Be("scroll",r)}switch(n){case"input":Qc(r),h_(r,s,!0);break;case"textarea":Qc(r),g_(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Rf)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Nx(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[ur]=e,t[Nl]=r,oS(t,e,!1,!1),e.stateNode=t;e:{switch(o=Wg(n,r),n){case"dialog":Be("cancel",t),Be("close",t),i=r;break;case"iframe":case"object":case"embed":Be("load",t),i=r;break;case"video":case"audio":for(i=0;i<tl.length;i++)Be(tl[i],t);i=r;break;case"source":Be("error",t),i=r;break;case"img":case"image":case"link":Be("error",t),Be("load",t),i=r;break;case"details":Be("toggle",t),i=r;break;case"input":d_(t,r),i=zg(t,r),Be("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Ke({},r,{value:void 0}),Be("invalid",t);break;case"textarea":p_(t,r),i=Vg(t,r),Be("invalid",t);break;default:i=r}Gg(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?Bx(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&Fx(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Pl(t,l):typeof l=="number"&&Pl(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Sl.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Be("scroll",t):l!=null&&z0(t,s,l,o))}switch(n){case"input":Qc(t),h_(t,r,!1);break;case"textarea":Qc(t),g_(t);break;case"option":r.value!=null&&t.setAttribute("value",""+ki(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Ao(t,!!r.multiple,s,!1):r.defaultValue!=null&&Ao(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Rf)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return St(e),null;case 6:if(t&&e.stateNode!=null)lS(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(z(166));if(n=fs(Dl.current),fs(yr.current),au(e)){if(r=e.stateNode,n=e.memoizedProps,r[ur]=e,(s=r.nodeValue!==n)&&(t=hn,t!==null))switch(t.tag){case 3:ou(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&ou(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[ur]=e,e.stateNode=r}return St(e),null;case 13:if(Ue(We),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if($e&&fn!==null&&e.mode&1&&!(e.flags&128))ST(),$o(),e.flags|=98560,s=!1;else if(s=au(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(z(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(z(317));s[ur]=e}else $o(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;St(e),s=!1}else Wn!==null&&(Sm(Wn),Wn=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||We.current&1?ut===0&&(ut=3):Ey())),e.updateQueue!==null&&(e.flags|=4),St(e),null);case 4:return Wo(),ym(t,e),t===null&&Ml(e.stateNode.containerInfo),St(e),null;case 10:return iy(e.type._context),St(e),null;case 17:return Yt(e.type)&&Of(),St(e),null;case 19:if(Ue(We),s=e.memoizedState,s===null)return St(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)Na(s,!1);else{if(ut!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Bf(t),o!==null){for(e.flags|=128,Na(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Me(We,We.current&1|2),e.child}t=t.sibling}s.tail!==null&&rt()>Xo&&(e.flags|=128,r=!0,Na(s,!1),e.lanes=4194304)}else{if(!r)if(t=Bf(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Na(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!$e)return St(e),null}else 2*rt()-s.renderingStartTime>Xo&&n!==1073741824&&(e.flags|=128,r=!0,Na(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=rt(),e.sibling=null,n=We.current,Me(We,r?n&1|2:n&1),e):(St(e),null);case 22:case 23:return by(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?an&1073741824&&(St(e),e.subtreeFlags&6&&(e.flags|=8192)):St(e),null;case 24:return null;case 25:return null}throw Error(z(156,e.tag))}function bR(t,e){switch(ey(e),e.tag){case 1:return Yt(e.type)&&Of(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Wo(),Ue(Xt),Ue(It),cy(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return ly(e),null;case 13:if(Ue(We),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(z(340));$o()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ue(We),null;case 4:return Wo(),null;case 10:return iy(e.type._context),null;case 22:case 23:return by(),null;case 24:return null;default:return null}}var uu=!1,Rt=!1,ER=typeof WeakSet=="function"?WeakSet:Set,H=null;function Eo(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Je(t,e,r)}else n.current=null}function vm(t,e,n){try{n()}catch(r){Je(t,e,r)}}var i1=!1;function wR(t,e){if(tm=Af,t=dT(),Q0(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,u=0,f=t,d=null;t:for(;;){for(var h;f!==n||i!==0&&f.nodeType!==3||(a=o+i),f!==s||r!==0&&f.nodeType!==3||(l=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(h=f.firstChild)!==null;)d=f,f=h;for(;;){if(f===t)break t;if(d===n&&++c===i&&(a=o),d===s&&++u===r&&(l=o),(h=f.nextSibling)!==null)break;f=d,d=f.parentNode}f=h}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(nm={focusedElem:t,selectionRange:n},Af=!1,H=e;H!==null;)if(e=H,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,H=t;else for(;H!==null;){e=H;try{var p=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var g=p.memoizedProps,E=p.memoizedState,m=e.stateNode,y=m.getSnapshotBeforeUpdate(e.elementType===e.type?g:$n(e.type,g),E);m.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var v=e.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(z(163))}}catch(b){Je(e,e.return,b)}if(t=e.sibling,t!==null){t.return=e.return,H=t;break}H=e.return}return p=i1,i1=!1,p}function gl(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&vm(e,n,s)}i=i.next}while(i!==r)}}function kd(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function _m(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function cS(t){var e=t.alternate;e!==null&&(t.alternate=null,cS(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[ur],delete e[Nl],delete e[sm],delete e[iR],delete e[sR])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function uS(t){return t.tag===5||t.tag===3||t.tag===4}function s1(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||uS(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function bm(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Rf));else if(r!==4&&(t=t.child,t!==null))for(bm(t,e,n),t=t.sibling;t!==null;)bm(t,e,n),t=t.sibling}function Em(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Em(t,e,n),t=t.sibling;t!==null;)Em(t,e,n),t=t.sibling}var bt=null,Gn=!1;function ii(t,e,n){for(n=n.child;n!==null;)fS(t,e,n),n=n.sibling}function fS(t,e,n){if(mr&&typeof mr.onCommitFiberUnmount=="function")try{mr.onCommitFiberUnmount(Pd,n)}catch{}switch(n.tag){case 5:Rt||Eo(n,e);case 6:var r=bt,i=Gn;bt=null,ii(t,e,n),bt=r,Gn=i,bt!==null&&(Gn?(t=bt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):bt.removeChild(n.stateNode));break;case 18:bt!==null&&(Gn?(t=bt,n=n.stateNode,t.nodeType===8?vp(t.parentNode,n):t.nodeType===1&&vp(t,n),Rl(t)):vp(bt,n.stateNode));break;case 4:r=bt,i=Gn,bt=n.stateNode.containerInfo,Gn=!0,ii(t,e,n),bt=r,Gn=i;break;case 0:case 11:case 14:case 15:if(!Rt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&vm(n,e,o),i=i.next}while(i!==r)}ii(t,e,n);break;case 1:if(!Rt&&(Eo(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Je(n,e,a)}ii(t,e,n);break;case 21:ii(t,e,n);break;case 22:n.mode&1?(Rt=(r=Rt)||n.memoizedState!==null,ii(t,e,n),Rt=r):ii(t,e,n);break;default:ii(t,e,n)}}function o1(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new ER),e.forEach(function(r){var i=OR.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Vn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:bt=a.stateNode,Gn=!1;break e;case 3:bt=a.stateNode.containerInfo,Gn=!0;break e;case 4:bt=a.stateNode.containerInfo,Gn=!0;break e}a=a.return}if(bt===null)throw Error(z(160));fS(s,o,i),bt=null,Gn=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){Je(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)dS(e,t),e=e.sibling}function dS(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Vn(e,t),rr(t),r&4){try{gl(3,t,t.return),kd(3,t)}catch(g){Je(t,t.return,g)}try{gl(5,t,t.return)}catch(g){Je(t,t.return,g)}}break;case 1:Vn(e,t),rr(t),r&512&&n!==null&&Eo(n,n.return);break;case 5:if(Vn(e,t),rr(t),r&512&&n!==null&&Eo(n,n.return),t.flags&32){var i=t.stateNode;try{Pl(i,"")}catch(g){Je(t,t.return,g)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&Mx(i,s),Wg(a,o);var c=Wg(a,s);for(o=0;o<l.length;o+=2){var u=l[o],f=l[o+1];u==="style"?Bx(i,f):u==="dangerouslySetInnerHTML"?Fx(i,f):u==="children"?Pl(i,f):z0(i,u,f,c)}switch(a){case"input":Ug(i,s);break;case"textarea":kx(i,s);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var h=s.value;h!=null?Ao(i,!!s.multiple,h,!1):d!==!!s.multiple&&(s.defaultValue!=null?Ao(i,!!s.multiple,s.defaultValue,!0):Ao(i,!!s.multiple,s.multiple?[]:"",!1))}i[Nl]=s}catch(g){Je(t,t.return,g)}}break;case 6:if(Vn(e,t),rr(t),r&4){if(t.stateNode===null)throw Error(z(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(g){Je(t,t.return,g)}}break;case 3:if(Vn(e,t),rr(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Rl(e.containerInfo)}catch(g){Je(t,t.return,g)}break;case 4:Vn(e,t),rr(t);break;case 13:Vn(e,t),rr(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(vy=rt())),r&4&&o1(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(Rt=(c=Rt)||u,Vn(e,t),Rt=c):Vn(e,t),rr(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!u&&t.mode&1)for(H=t,u=t.child;u!==null;){for(f=H=u;H!==null;){switch(d=H,h=d.child,d.tag){case 0:case 11:case 14:case 15:gl(4,d,d.return);break;case 1:Eo(d,d.return);var p=d.stateNode;if(typeof p.componentWillUnmount=="function"){r=d,n=d.return;try{e=r,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(g){Je(r,n,g)}}break;case 5:Eo(d,d.return);break;case 22:if(d.memoizedState!==null){l1(f);continue}}h!==null?(h.return=d,H=h):l1(f)}u=u.sibling}e:for(u=null,f=t;;){if(f.tag===5){if(u===null){u=f;try{i=f.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=f.stateNode,l=f.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=Dx("display",o))}catch(g){Je(t,t.return,g)}}}else if(f.tag===6){if(u===null)try{f.stateNode.nodeValue=c?"":f.memoizedProps}catch(g){Je(t,t.return,g)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;u===f&&(u=null),f=f.return}u===f&&(u=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Vn(e,t),rr(t),r&4&&o1(t);break;case 21:break;default:Vn(e,t),rr(t)}}function rr(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(uS(n)){var r=n;break e}n=n.return}throw Error(z(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Pl(i,""),r.flags&=-33);var s=s1(t);Em(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=s1(t);bm(t,a,o);break;default:throw Error(z(161))}}catch(l){Je(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function xR(t,e,n){H=t,hS(t)}function hS(t,e,n){for(var r=(t.mode&1)!==0;H!==null;){var i=H,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||uu;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||Rt;a=uu;var c=Rt;if(uu=o,(Rt=l)&&!c)for(H=i;H!==null;)o=H,l=o.child,o.tag===22&&o.memoizedState!==null?c1(i):l!==null?(l.return=o,H=l):c1(i);for(;s!==null;)H=s,hS(s),s=s.sibling;H=i,uu=a,Rt=c}a1(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,H=s):a1(t)}}function a1(t){for(;H!==null;){var e=H;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Rt||kd(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Rt)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:$n(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&G_(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}G_(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var f=u.dehydrated;f!==null&&Rl(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(z(163))}Rt||e.flags&512&&_m(e)}catch(d){Je(e,e.return,d)}}if(e===t){H=null;break}if(n=e.sibling,n!==null){n.return=e.return,H=n;break}H=e.return}}function l1(t){for(;H!==null;){var e=H;if(e===t){H=null;break}var n=e.sibling;if(n!==null){n.return=e.return,H=n;break}H=e.return}}function c1(t){for(;H!==null;){var e=H;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{kd(4,e)}catch(l){Je(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){Je(e,i,l)}}var s=e.return;try{_m(e)}catch(l){Je(e,s,l)}break;case 5:var o=e.return;try{_m(e)}catch(l){Je(e,o,l)}}}catch(l){Je(e,e.return,l)}if(e===t){H=null;break}var a=e.sibling;if(a!==null){a.return=e.return,H=a;break}H=e.return}}var TR=Math.ceil,jf=Zr.ReactCurrentDispatcher,my=Zr.ReactCurrentOwner,On=Zr.ReactCurrentBatchConfig,de=0,mt=null,ot=null,wt=0,an=0,wo=ji(0),ut=0,jl=null,ws=0,Nd=0,yy=0,ml=null,$t=null,vy=0,Xo=1/0,Rr=null,Vf=!1,wm=null,Ai=null,fu=!1,yi=null,$f=0,yl=0,xm=null,Qu=-1,Ju=0;function zt(){return de&6?rt():Qu!==-1?Qu:Qu=rt()}function Ci(t){return t.mode&1?de&2&&wt!==0?wt&-wt:aR.transition!==null?(Ju===0&&(Ju=qx()),Ju):(t=Te,t!==0||(t=window.event,t=t===void 0?16:rT(t.type)),t):1}function qn(t,e,n,r){if(50<yl)throw yl=0,xm=null,Error(z(185));dc(t,n,r),(!(de&2)||t!==mt)&&(t===mt&&(!(de&2)&&(Nd|=n),ut===4&&pi(t,wt)),Kt(t,r),n===1&&de===0&&!(e.mode&1)&&(Xo=rt()+500,Od&&Vi()))}function Kt(t,e){var n=t.callbackNode;aL(t,e);var r=Pf(t,t===mt?wt:0);if(r===0)n!==null&&v_(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&v_(n),e===1)t.tag===0?oR(u1.bind(null,t)):wT(u1.bind(null,t)),nR(function(){!(de&6)&&Vi()}),n=null;else{switch(Zx(r)){case 1:n=G0;break;case 4:n=Yx;break;case 16:n=Sf;break;case 536870912:n=Kx;break;default:n=Sf}n=ES(n,pS.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function pS(t,e){if(Qu=-1,Ju=0,de&6)throw Error(z(327));var n=t.callbackNode;if(Io()&&t.callbackNode!==n)return null;var r=Pf(t,t===mt?wt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Gf(t,r);else{e=r;var i=de;de|=2;var s=mS();(mt!==t||wt!==e)&&(Rr=null,Xo=rt()+500,gs(t,e));do try{AR();break}catch(a){gS(t,a)}while(1);ry(),jf.current=s,de=i,ot!==null?e=0:(mt=null,wt=0,e=ut)}if(e!==0){if(e===2&&(i=qg(t),i!==0&&(r=i,e=Tm(t,i))),e===1)throw n=jl,gs(t,0),pi(t,r),Kt(t,rt()),n;if(e===6)pi(t,r);else{if(i=t.current.alternate,!(r&30)&&!SR(i)&&(e=Gf(t,r),e===2&&(s=qg(t),s!==0&&(r=s,e=Tm(t,s))),e===1))throw n=jl,gs(t,0),pi(t,r),Kt(t,rt()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(z(345));case 2:is(t,$t,Rr);break;case 3:if(pi(t,r),(r&130023424)===r&&(e=vy+500-rt(),10<e)){if(Pf(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){zt(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=im(is.bind(null,t,$t,Rr),e);break}is(t,$t,Rr);break;case 4:if(pi(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-Kn(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=rt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*TR(r/1960))-r,10<r){t.timeoutHandle=im(is.bind(null,t,$t,Rr),r);break}is(t,$t,Rr);break;case 5:is(t,$t,Rr);break;default:throw Error(z(329))}}}return Kt(t,rt()),t.callbackNode===n?pS.bind(null,t):null}function Tm(t,e){var n=ml;return t.current.memoizedState.isDehydrated&&(gs(t,e).flags|=256),t=Gf(t,e),t!==2&&(e=$t,$t=n,e!==null&&Sm(e)),t}function Sm(t){$t===null?$t=t:$t.push.apply($t,t)}function SR(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Jn(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function pi(t,e){for(e&=~yy,e&=~Nd,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Kn(e),r=1<<n;t[n]=-1,e&=~r}}function u1(t){if(de&6)throw Error(z(327));Io();var e=Pf(t,0);if(!(e&1))return Kt(t,rt()),null;var n=Gf(t,e);if(t.tag!==0&&n===2){var r=qg(t);r!==0&&(e=r,n=Tm(t,r))}if(n===1)throw n=jl,gs(t,0),pi(t,e),Kt(t,rt()),n;if(n===6)throw Error(z(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,is(t,$t,Rr),Kt(t,rt()),null}function _y(t,e){var n=de;de|=1;try{return t(e)}finally{de=n,de===0&&(Xo=rt()+500,Od&&Vi())}}function xs(t){yi!==null&&yi.tag===0&&!(de&6)&&Io();var e=de;de|=1;var n=On.transition,r=Te;try{if(On.transition=null,Te=1,t)return t()}finally{Te=r,On.transition=n,de=e,!(de&6)&&Vi()}}function by(){an=wo.current,Ue(wo)}function gs(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,tR(n)),ot!==null)for(n=ot.return;n!==null;){var r=n;switch(ey(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Of();break;case 3:Wo(),Ue(Xt),Ue(It),cy();break;case 5:ly(r);break;case 4:Wo();break;case 13:Ue(We);break;case 19:Ue(We);break;case 10:iy(r.type._context);break;case 22:case 23:by()}n=n.return}if(mt=t,ot=t=Li(t.current,null),wt=an=e,ut=0,jl=null,yy=Nd=ws=0,$t=ml=null,us!==null){for(e=0;e<us.length;e++)if(n=us[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}us=null}return t}function gS(t,e){do{var n=ot;try{if(ry(),Ku.current=Uf,zf){for(var r=Ye.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}zf=!1}if(Es=0,pt=ct=Ye=null,pl=!1,Bl=0,my.current=null,n===null||n.return===null){ut=1,jl=e,ot=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=wt,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,f=u.tag;if(!(u.mode&1)&&(f===0||f===11||f===15)){var d=u.alternate;d?(u.updateQueue=d.updateQueue,u.memoizedState=d.memoizedState,u.lanes=d.lanes):(u.updateQueue=null,u.memoizedState=null)}var h=Z_(o);if(h!==null){h.flags&=-257,Q_(h,o,a,s,e),h.mode&1&&q_(s,c,e),e=h,l=c;var p=e.updateQueue;if(p===null){var g=new Set;g.add(l),e.updateQueue=g}else p.add(l);break e}else{if(!(e&1)){q_(s,c,e),Ey();break e}l=Error(z(426))}}else if($e&&a.mode&1){var E=Z_(o);if(E!==null){!(E.flags&65536)&&(E.flags|=256),Q_(E,o,a,s,e),ty(Ho(l,a));break e}}s=l=Ho(l,a),ut!==4&&(ut=2),ml===null?ml=[s]:ml.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var m=QT(s,l,e);$_(s,m);break e;case 1:a=l;var y=s.type,v=s.stateNode;if(!(s.flags&128)&&(typeof y.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(Ai===null||!Ai.has(v)))){s.flags|=65536,e&=-e,s.lanes|=e;var b=JT(s,a,e);$_(s,b);break e}}s=s.return}while(s!==null)}vS(n)}catch(T){e=T,ot===n&&n!==null&&(ot=n=n.return);continue}break}while(1)}function mS(){var t=jf.current;return jf.current=Uf,t===null?Uf:t}function Ey(){(ut===0||ut===3||ut===2)&&(ut=4),mt===null||!(ws&268435455)&&!(Nd&268435455)||pi(mt,wt)}function Gf(t,e){var n=de;de|=2;var r=mS();(mt!==t||wt!==e)&&(Rr=null,gs(t,e));do try{PR();break}catch(i){gS(t,i)}while(1);if(ry(),de=n,jf.current=r,ot!==null)throw Error(z(261));return mt=null,wt=0,ut}function PR(){for(;ot!==null;)yS(ot)}function AR(){for(;ot!==null&&!Q2();)yS(ot)}function yS(t){var e=bS(t.alternate,t,an);t.memoizedProps=t.pendingProps,e===null?vS(t):ot=e,my.current=null}function vS(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=bR(n,e),n!==null){n.flags&=32767,ot=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ut=6,ot=null;return}}else if(n=_R(n,e,an),n!==null){ot=n;return}if(e=e.sibling,e!==null){ot=e;return}ot=e=t}while(e!==null);ut===0&&(ut=5)}function is(t,e,n){var r=Te,i=On.transition;try{On.transition=null,Te=1,CR(t,e,n,r)}finally{On.transition=i,Te=r}return null}function CR(t,e,n,r){do Io();while(yi!==null);if(de&6)throw Error(z(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(z(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(lL(t,s),t===mt&&(ot=mt=null,wt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||fu||(fu=!0,ES(Sf,function(){return Io(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=On.transition,On.transition=null;var o=Te;Te=1;var a=de;de|=4,my.current=null,wR(t,n),dS(n,t),YL(nm),Af=!!tm,nm=tm=null,t.current=n,xR(n),J2(),de=a,Te=o,On.transition=s}else t.current=n;if(fu&&(fu=!1,yi=t,$f=i),s=t.pendingLanes,s===0&&(Ai=null),nL(n.stateNode),Kt(t,rt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Vf)throw Vf=!1,t=wm,wm=null,t;return $f&1&&t.tag!==0&&Io(),s=t.pendingLanes,s&1?t===xm?yl++:(yl=0,xm=t):yl=0,Vi(),null}function Io(){if(yi!==null){var t=Zx($f),e=On.transition,n=Te;try{if(On.transition=null,Te=16>t?16:t,yi===null)var r=!1;else{if(t=yi,yi=null,$f=0,de&6)throw Error(z(331));var i=de;for(de|=4,H=t.current;H!==null;){var s=H,o=s.child;if(H.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(H=c;H!==null;){var u=H;switch(u.tag){case 0:case 11:case 15:gl(8,u,s)}var f=u.child;if(f!==null)f.return=u,H=f;else for(;H!==null;){u=H;var d=u.sibling,h=u.return;if(cS(u),u===c){H=null;break}if(d!==null){d.return=h,H=d;break}H=h}}}var p=s.alternate;if(p!==null){var g=p.child;if(g!==null){p.child=null;do{var E=g.sibling;g.sibling=null,g=E}while(g!==null)}}H=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,H=o;else e:for(;H!==null;){if(s=H,s.flags&2048)switch(s.tag){case 0:case 11:case 15:gl(9,s,s.return)}var m=s.sibling;if(m!==null){m.return=s.return,H=m;break e}H=s.return}}var y=t.current;for(H=y;H!==null;){o=H;var v=o.child;if(o.subtreeFlags&2064&&v!==null)v.return=o,H=v;else e:for(o=y;H!==null;){if(a=H,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:kd(9,a)}}catch(T){Je(a,a.return,T)}if(a===o){H=null;break e}var b=a.sibling;if(b!==null){b.return=a.return,H=b;break e}H=a.return}}if(de=i,Vi(),mr&&typeof mr.onPostCommitFiberRoot=="function")try{mr.onPostCommitFiberRoot(Pd,t)}catch{}r=!0}return r}finally{Te=n,On.transition=e}}return!1}function f1(t,e,n){e=Ho(n,e),e=QT(t,e,1),t=Pi(t,e,1),e=zt(),t!==null&&(dc(t,1,e),Kt(t,e))}function Je(t,e,n){if(t.tag===3)f1(t,t,n);else for(;e!==null;){if(e.tag===3){f1(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Ai===null||!Ai.has(r))){t=Ho(n,t),t=JT(e,t,1),e=Pi(e,t,1),t=zt(),e!==null&&(dc(e,1,t),Kt(e,t));break}}e=e.return}}function LR(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=zt(),t.pingedLanes|=t.suspendedLanes&n,mt===t&&(wt&n)===n&&(ut===4||ut===3&&(wt&130023424)===wt&&500>rt()-vy?gs(t,0):yy|=n),Kt(t,e)}function _S(t,e){e===0&&(t.mode&1?(e=tu,tu<<=1,!(tu&130023424)&&(tu=4194304)):e=1);var n=zt();t=Gr(t,e),t!==null&&(dc(t,e,n),Kt(t,n))}function RR(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),_S(t,n)}function OR(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(z(314))}r!==null&&r.delete(e),_S(t,n)}var bS;bS=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Xt.current)Ht=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Ht=!1,vR(t,e,n);Ht=!!(t.flags&131072)}else Ht=!1,$e&&e.flags&1048576&&xT(e,kf,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Zu(t,e),t=e.pendingProps;var i=Vo(e,It.current);Oo(e,n),i=fy(null,e,r,t,i,n);var s=dy();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Yt(r)?(s=!0,If(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,oy(e),i.updater=Id,e.stateNode=i,i._reactInternals=e,fm(e,r,t,n),e=pm(null,e,r,!0,s,n)):(e.tag=0,$e&&s&&J0(e),Dt(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Zu(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=MR(r),t=$n(r,t),i){case 0:e=hm(null,e,r,t,n);break e;case 1:e=t1(null,e,r,t,n);break e;case 11:e=J_(null,e,r,t,n);break e;case 14:e=e1(null,e,r,$n(r.type,t),n);break e}throw Error(z(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:$n(r,i),hm(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:$n(r,i),t1(t,e,r,i,n);case 3:e:{if(rS(e),t===null)throw Error(z(387));r=e.pendingProps,s=e.memoizedState,i=s.element,AT(t,e),Df(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Ho(Error(z(423)),e),e=n1(t,e,r,n,i);break e}else if(r!==i){i=Ho(Error(z(424)),e),e=n1(t,e,r,n,i);break e}else for(fn=Si(e.stateNode.containerInfo.firstChild),hn=e,$e=!0,Wn=null,n=OT(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if($o(),r===i){e=Wr(t,e,n);break e}Dt(t,e,r,n)}e=e.child}return e;case 5:return IT(e),t===null&&lm(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,rm(r,i)?o=null:s!==null&&rm(r,s)&&(e.flags|=32),nS(t,e),Dt(t,e,o,n),e.child;case 6:return t===null&&lm(e),null;case 13:return iS(t,e,n);case 4:return ay(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Go(e,null,r,n):Dt(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:$n(r,i),J_(t,e,r,i,n);case 7:return Dt(t,e,e.pendingProps,n),e.child;case 8:return Dt(t,e,e.pendingProps.children,n),e.child;case 12:return Dt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,Me(Nf,r._currentValue),r._currentValue=o,s!==null)if(Jn(s.value,o)){if(s.children===i.children&&!Xt.current){e=Wr(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=Ur(-1,n&-n),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),cm(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(z(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),cm(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Dt(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Oo(e,n),i=Nn(i),r=r(i),e.flags|=1,Dt(t,e,r,n),e.child;case 14:return r=e.type,i=$n(r,e.pendingProps),i=$n(r.type,i),e1(t,e,r,i,n);case 15:return eS(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:$n(r,i),Zu(t,e),e.tag=1,Yt(r)?(t=!0,If(e)):t=!1,Oo(e,n),LT(e,r,i),fm(e,r,i,n),pm(null,e,r,!0,t,n);case 19:return sS(t,e,n);case 22:return tS(t,e,n)}throw Error(z(156,e.tag))};function ES(t,e){return Xx(t,e)}function IR(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rn(t,e,n,r){return new IR(t,e,n,r)}function wy(t){return t=t.prototype,!(!t||!t.isReactComponent)}function MR(t){if(typeof t=="function")return wy(t)?1:0;if(t!=null){if(t=t.$$typeof,t===j0)return 11;if(t===V0)return 14}return 2}function Li(t,e){var n=t.alternate;return n===null?(n=Rn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function ef(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")wy(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case fo:return ms(n.children,i,s,e);case U0:o=8,i|=8;break;case Ng:return t=Rn(12,n,e,i|2),t.elementType=Ng,t.lanes=s,t;case Fg:return t=Rn(13,n,e,i),t.elementType=Fg,t.lanes=s,t;case Dg:return t=Rn(19,n,e,i),t.elementType=Dg,t.lanes=s,t;case Rx:return Fd(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Cx:o=10;break e;case Lx:o=9;break e;case j0:o=11;break e;case V0:o=14;break e;case fi:o=16,r=null;break e}throw Error(z(130,t==null?t:typeof t,""))}return e=Rn(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function ms(t,e,n,r){return t=Rn(7,t,r,e),t.lanes=n,t}function Fd(t,e,n,r){return t=Rn(22,t,r,e),t.elementType=Rx,t.lanes=n,t.stateNode={isHidden:!1},t}function Pp(t,e,n){return t=Rn(6,t,null,e),t.lanes=n,t}function Ap(t,e,n){return e=Rn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function kR(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ap(0),this.expirationTimes=ap(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ap(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function xy(t,e,n,r,i,s,o,a,l){return t=new kR(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Rn(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},oy(s),t}function NR(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:uo,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function wS(t){if(!t)return Ni;t=t._reactInternals;e:{if(Ms(t)!==t||t.tag!==1)throw Error(z(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Yt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(z(171))}if(t.tag===1){var n=t.type;if(Yt(n))return ET(t,n,e)}return e}function xS(t,e,n,r,i,s,o,a,l){return t=xy(n,r,!0,t,i,s,o,a,l),t.context=wS(null),n=t.current,r=zt(),i=Ci(n),s=Ur(r,i),s.callback=e??null,Pi(n,s,i),t.current.lanes=i,dc(t,i,r),Kt(t,r),t}function Dd(t,e,n,r){var i=e.current,s=zt(),o=Ci(i);return n=wS(n),e.context===null?e.context=n:e.pendingContext=n,e=Ur(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Pi(i,e,o),t!==null&&(qn(t,i,o,s),Yu(t,i,o)),o}function Wf(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function d1(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Ty(t,e){d1(t,e),(t=t.alternate)&&d1(t,e)}function FR(){return null}var TS=typeof reportError=="function"?reportError:function(t){console.error(t)};function Sy(t){this._internalRoot=t}Bd.prototype.render=Sy.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(z(409));Dd(t,e,null,null)};Bd.prototype.unmount=Sy.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;xs(function(){Dd(null,t,null,null)}),e[$r]=null}};function Bd(t){this._internalRoot=t}Bd.prototype.unstable_scheduleHydration=function(t){if(t){var e=eT();t={blockedOn:null,target:t,priority:e};for(var n=0;n<hi.length&&e!==0&&e<hi[n].priority;n++);hi.splice(n,0,t),n===0&&nT(t)}};function Py(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function zd(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function h1(){}function DR(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=Wf(o);s.call(c)}}var o=xS(e,r,t,0,null,!1,!1,"",h1);return t._reactRootContainer=o,t[$r]=o.current,Ml(t.nodeType===8?t.parentNode:t),xs(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=Wf(l);a.call(c)}}var l=xy(t,0,!1,null,null,!1,!1,"",h1);return t._reactRootContainer=l,t[$r]=l.current,Ml(t.nodeType===8?t.parentNode:t),xs(function(){Dd(e,l,n,r)}),l}function Ud(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=Wf(o);a.call(l)}}Dd(e,o,t,i)}else o=DR(n,e,t,i,r);return Wf(o)}Qx=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=el(e.pendingLanes);n!==0&&(W0(e,n|1),Kt(e,rt()),!(de&6)&&(Xo=rt()+500,Vi()))}break;case 13:xs(function(){var r=Gr(t,1);if(r!==null){var i=zt();qn(r,t,1,i)}}),Ty(t,1)}};H0=function(t){if(t.tag===13){var e=Gr(t,134217728);if(e!==null){var n=zt();qn(e,t,134217728,n)}Ty(t,134217728)}};Jx=function(t){if(t.tag===13){var e=Ci(t),n=Gr(t,e);if(n!==null){var r=zt();qn(n,t,e,r)}Ty(t,e)}};eT=function(){return Te};tT=function(t,e){var n=Te;try{return Te=t,e()}finally{Te=n}};Xg=function(t,e,n){switch(e){case"input":if(Ug(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Rd(r);if(!i)throw Error(z(90));Ix(r),Ug(r,i)}}}break;case"textarea":kx(t,n);break;case"select":e=n.value,e!=null&&Ao(t,!!n.multiple,e,!1)}};jx=_y;Vx=xs;var BR={usingClientEntryPoint:!1,Events:[pc,mo,Rd,zx,Ux,_y]},Fa={findFiberByHostInstance:cs,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},zR={bundleType:Fa.bundleType,version:Fa.version,rendererPackageName:Fa.rendererPackageName,rendererConfig:Fa.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Zr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Wx(t),t===null?null:t.stateNode},findFiberByHostInstance:Fa.findFiberByHostInstance||FR,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var du=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!du.isDisabled&&du.supportsFiber)try{Pd=du.inject(zR),mr=du}catch{}}bn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=BR;bn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Py(e))throw Error(z(200));return NR(t,e,null,n)};bn.createRoot=function(t,e){if(!Py(t))throw Error(z(299));var n=!1,r="",i=TS;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=xy(t,1,!1,null,null,n,!1,r,i),t[$r]=e.current,Ml(t.nodeType===8?t.parentNode:t),new Sy(e)};bn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(z(188)):(t=Object.keys(t).join(","),Error(z(268,t)));return t=Wx(e),t=t===null?null:t.stateNode,t};bn.flushSync=function(t){return xs(t)};bn.hydrate=function(t,e,n){if(!zd(e))throw Error(z(200));return Ud(null,t,e,!0,n)};bn.hydrateRoot=function(t,e,n){if(!Py(t))throw Error(z(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=TS;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=xS(e,null,t,1,n??null,i,!1,s,o),t[$r]=e.current,Ml(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Bd(e)};bn.render=function(t,e,n){if(!zd(e))throw Error(z(200));return Ud(null,t,e,!1,n)};bn.unmountComponentAtNode=function(t){if(!zd(t))throw Error(z(40));return t._reactRootContainer?(xs(function(){Ud(null,null,t,!1,function(){t._reactRootContainer=null,t[$r]=null})}),!0):!1};bn.unstable_batchedUpdates=_y;bn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!zd(n))throw Error(z(200));if(t==null||t._reactInternals===void 0)throw Error(z(38));return Ud(t,e,n,!1,r)};bn.version="18.2.0-next-9e3b772b8-20220608";function SS(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(SS)}catch(t){console.error(t)}}SS(),xx.exports=bn;var ya=xx.exports;const hu=Td(ya);var PS,p1=ya;PS=p1.createRoot,p1.hydrateRoot;var AS={exports:{}},CS={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yo=A;function UR(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var jR=typeof Object.is=="function"?Object.is:UR,VR=Yo.useState,$R=Yo.useEffect,GR=Yo.useLayoutEffect,WR=Yo.useDebugValue;function HR(t,e){var n=e(),r=VR({inst:{value:n,getSnapshot:e}}),i=r[0].inst,s=r[1];return GR(function(){i.value=n,i.getSnapshot=e,Cp(i)&&s({inst:i})},[t,n,e]),$R(function(){return Cp(i)&&s({inst:i}),t(function(){Cp(i)&&s({inst:i})})},[t]),WR(n),n}function Cp(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!jR(t,n)}catch{return!0}}function XR(t,e){return e()}var YR=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?XR:HR;CS.useSyncExternalStore=Yo.useSyncExternalStore!==void 0?Yo.useSyncExternalStore:YR;AS.exports=CS;var LS=AS.exports,KR={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jd=A,qR=LS;function ZR(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var QR=typeof Object.is=="function"?Object.is:ZR,JR=qR.useSyncExternalStore,eO=jd.useRef,tO=jd.useEffect,nO=jd.useMemo,rO=jd.useDebugValue;KR.useSyncExternalStoreWithSelector=function(t,e,n,r,i){var s=eO(null);if(s.current===null){var o={hasValue:!1,value:null};s.current=o}else o=s.current;s=nO(function(){function l(h){if(!c){if(c=!0,u=h,h=r(h),i!==void 0&&o.hasValue){var p=o.value;if(i(p,h))return f=p}return f=h}if(p=f,QR(u,h))return p;var g=r(h);return i!==void 0&&i(p,g)?p:(u=h,f=g)}var c=!1,u,f,d=n===void 0?null:n;return[function(){return l(e())},d===null?void 0:function(){return l(d())}]},[e,n,r,i]);var a=JR(t,s[0],s[1]);return tO(function(){o.hasValue=!0,o.value=a},[a]),rO(a),a};function iO(t){t()}let RS=iO;const sO=t=>RS=t,oO=()=>RS,g1=Symbol.for("react-redux-context"),m1=typeof globalThis<"u"?globalThis:{};function aO(){var t;if(!A.createContext)return{};const e=(t=m1[g1])!=null?t:m1[g1]=new Map;let n=e.get(A.createContext);return n||(n=A.createContext(null),e.set(A.createContext,n)),n}const lO=aO();function F(){return F=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},F.apply(this,arguments)}function Ge(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}var OS={exports:{}},Se={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yt=typeof Symbol=="function"&&Symbol.for,Ay=yt?Symbol.for("react.element"):60103,Cy=yt?Symbol.for("react.portal"):60106,Vd=yt?Symbol.for("react.fragment"):60107,$d=yt?Symbol.for("react.strict_mode"):60108,Gd=yt?Symbol.for("react.profiler"):60114,Wd=yt?Symbol.for("react.provider"):60109,Hd=yt?Symbol.for("react.context"):60110,Ly=yt?Symbol.for("react.async_mode"):60111,Xd=yt?Symbol.for("react.concurrent_mode"):60111,Yd=yt?Symbol.for("react.forward_ref"):60112,Kd=yt?Symbol.for("react.suspense"):60113,cO=yt?Symbol.for("react.suspense_list"):60120,qd=yt?Symbol.for("react.memo"):60115,Zd=yt?Symbol.for("react.lazy"):60116,uO=yt?Symbol.for("react.block"):60121,fO=yt?Symbol.for("react.fundamental"):60117,dO=yt?Symbol.for("react.responder"):60118,hO=yt?Symbol.for("react.scope"):60119;function wn(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case Ay:switch(t=t.type,t){case Ly:case Xd:case Vd:case Gd:case $d:case Kd:return t;default:switch(t=t&&t.$$typeof,t){case Hd:case Yd:case Zd:case qd:case Wd:return t;default:return e}}case Cy:return e}}}function IS(t){return wn(t)===Xd}Se.AsyncMode=Ly;Se.ConcurrentMode=Xd;Se.ContextConsumer=Hd;Se.ContextProvider=Wd;Se.Element=Ay;Se.ForwardRef=Yd;Se.Fragment=Vd;Se.Lazy=Zd;Se.Memo=qd;Se.Portal=Cy;Se.Profiler=Gd;Se.StrictMode=$d;Se.Suspense=Kd;Se.isAsyncMode=function(t){return IS(t)||wn(t)===Ly};Se.isConcurrentMode=IS;Se.isContextConsumer=function(t){return wn(t)===Hd};Se.isContextProvider=function(t){return wn(t)===Wd};Se.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===Ay};Se.isForwardRef=function(t){return wn(t)===Yd};Se.isFragment=function(t){return wn(t)===Vd};Se.isLazy=function(t){return wn(t)===Zd};Se.isMemo=function(t){return wn(t)===qd};Se.isPortal=function(t){return wn(t)===Cy};Se.isProfiler=function(t){return wn(t)===Gd};Se.isStrictMode=function(t){return wn(t)===$d};Se.isSuspense=function(t){return wn(t)===Kd};Se.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===Vd||t===Xd||t===Gd||t===$d||t===Kd||t===cO||typeof t=="object"&&t!==null&&(t.$$typeof===Zd||t.$$typeof===qd||t.$$typeof===Wd||t.$$typeof===Hd||t.$$typeof===Yd||t.$$typeof===fO||t.$$typeof===dO||t.$$typeof===hO||t.$$typeof===uO)};Se.typeOf=wn;OS.exports=Se;var pO=OS.exports,MS=pO,gO={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},mO={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},kS={};kS[MS.ForwardRef]=gO;kS[MS.Memo]=mO;var Ce={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ry=Symbol.for("react.element"),Oy=Symbol.for("react.portal"),Qd=Symbol.for("react.fragment"),Jd=Symbol.for("react.strict_mode"),eh=Symbol.for("react.profiler"),th=Symbol.for("react.provider"),nh=Symbol.for("react.context"),yO=Symbol.for("react.server_context"),rh=Symbol.for("react.forward_ref"),ih=Symbol.for("react.suspense"),sh=Symbol.for("react.suspense_list"),oh=Symbol.for("react.memo"),ah=Symbol.for("react.lazy"),vO=Symbol.for("react.offscreen"),NS;NS=Symbol.for("react.module.reference");function Un(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case Ry:switch(t=t.type,t){case Qd:case eh:case Jd:case ih:case sh:return t;default:switch(t=t&&t.$$typeof,t){case yO:case nh:case rh:case ah:case oh:case th:return t;default:return e}}case Oy:return e}}}Ce.ContextConsumer=nh;Ce.ContextProvider=th;Ce.Element=Ry;Ce.ForwardRef=rh;Ce.Fragment=Qd;Ce.Lazy=ah;Ce.Memo=oh;Ce.Portal=Oy;Ce.Profiler=eh;Ce.StrictMode=Jd;Ce.Suspense=ih;Ce.SuspenseList=sh;Ce.isAsyncMode=function(){return!1};Ce.isConcurrentMode=function(){return!1};Ce.isContextConsumer=function(t){return Un(t)===nh};Ce.isContextProvider=function(t){return Un(t)===th};Ce.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===Ry};Ce.isForwardRef=function(t){return Un(t)===rh};Ce.isFragment=function(t){return Un(t)===Qd};Ce.isLazy=function(t){return Un(t)===ah};Ce.isMemo=function(t){return Un(t)===oh};Ce.isPortal=function(t){return Un(t)===Oy};Ce.isProfiler=function(t){return Un(t)===eh};Ce.isStrictMode=function(t){return Un(t)===Jd};Ce.isSuspense=function(t){return Un(t)===ih};Ce.isSuspenseList=function(t){return Un(t)===sh};Ce.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===Qd||t===eh||t===Jd||t===ih||t===sh||t===vO||typeof t=="object"&&t!==null&&(t.$$typeof===ah||t.$$typeof===oh||t.$$typeof===th||t.$$typeof===nh||t.$$typeof===rh||t.$$typeof===NS||t.getModuleId!==void 0)};Ce.typeOf=Un;function _O(){const t=oO();let e=null,n=null;return{clear(){e=null,n=null},notify(){t(()=>{let r=e;for(;r;)r.callback(),r=r.next})},get(){let r=[],i=e;for(;i;)r.push(i),i=i.next;return r},subscribe(r){let i=!0,s=n={callback:r,next:null,prev:n};return s.prev?s.prev.next=s:e=s,function(){!i||e===null||(i=!1,s.next?s.next.prev=s.prev:n=s.prev,s.prev?s.prev.next=s.next:e=s.next)}}}}const y1={notify(){},get:()=>[]};function bO(t,e){let n,r=y1,i=0,s=!1;function o(g){u();const E=r.subscribe(g);let m=!1;return()=>{m||(m=!0,E(),f())}}function a(){r.notify()}function l(){p.onStateChange&&p.onStateChange()}function c(){return s}function u(){i++,n||(n=e?e.addNestedSub(l):t.subscribe(l),r=_O())}function f(){i--,n&&i===0&&(n(),n=void 0,r.clear(),r=y1)}function d(){s||(s=!0,u())}function h(){s&&(s=!1,f())}const p={addNestedSub:o,notifyNestedSubs:a,handleChangeWrapper:l,isSubscribed:c,trySubscribe:d,tryUnsubscribe:h,getListeners:()=>r};return p}const EO=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",wO=EO?A.useLayoutEffect:A.useEffect;function xO({store:t,context:e,children:n,serverState:r,stabilityCheck:i="once",noopCheck:s="once"}){const o=A.useMemo(()=>{const c=bO(t);return{store:t,subscription:c,getServerState:r?()=>r:void 0,stabilityCheck:i,noopCheck:s}},[t,r,i,s]),a=A.useMemo(()=>t.getState(),[t]);wO(()=>{const{subscription:c}=o;return c.onStateChange=c.notifyNestedSubs,c.trySubscribe(),a!==t.getState()&&c.notifyNestedSubs(),()=>{c.tryUnsubscribe(),c.onStateChange=void 0}},[o,a]);const l=e||lO;return A.createElement(l.Provider,{value:o},n)}sO(ya.unstable_batchedUpdates);function Hf(t,e){if(!t)throw new Error(e||"loader assertion failed.")}const Iy=!!(typeof process!="object"||String(process)!=="[object process]"||process.browser),v1=typeof process<"u"&&process.version&&/v([0-9]*)/.exec(process.version);v1&&parseFloat(v1[1]);const TO="3.4.14";function Hr(t,e){if(!t)throw new Error(e||"loaders.gl assertion failed.")}const tf=typeof process!="object"||String(process)!=="[object process]"||process.browser,SO=typeof window<"u"&&typeof window.orientation<"u",_1=typeof process<"u"&&process.version&&/v([0-9]*)/.exec(process.version);_1&&parseFloat(_1[1]);function Vl(t){"@babel/helpers - typeof";return Vl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vl(t)}function PO(t,e){if(Vl(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Vl(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function AO(t){var e=PO(t,"string");return Vl(e)==="symbol"?e:String(e)}function _(t,e,n){return e=AO(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}class CO{constructor(e,n){_(this,"name",void 0),_(this,"workerThread",void 0),_(this,"isRunning",!0),_(this,"result",void 0),_(this,"_resolve",()=>{}),_(this,"_reject",()=>{}),this.name=e,this.workerThread=n,this.result=new Promise((r,i)=>{this._resolve=r,this._reject=i})}postMessage(e,n){this.workerThread.postMessage({source:"loaders.gl",type:e,payload:n})}done(e){Hr(this.isRunning),this.isRunning=!1,this._resolve(e)}error(e){Hr(this.isRunning),this.isRunning=!1,this._reject(e)}}let Lp=class{terminate(){}};const Rp=new Map;function LO(t){Hr(t.source&&!t.url||!t.source&&t.url);let e=Rp.get(t.source||t.url);return e||(t.url&&(e=RO(t.url),Rp.set(t.url,e)),t.source&&(e=FS(t.source),Rp.set(t.source,e))),Hr(e),e}function RO(t){if(!t.startsWith("http"))return t;const e=OO(t);return FS(e)}function FS(t){const e=new Blob([t],{type:"application/javascript"});return URL.createObjectURL(e)}function OO(t){return`try {
  importScripts('`.concat(t,`');
} catch (error) {
  console.error(error);
  throw error;
}`)}function DS(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,n=arguments.length>2?arguments[2]:void 0;const r=n||new Set;if(t){if(b1(t))r.add(t);else if(b1(t.buffer))r.add(t.buffer);else if(!ArrayBuffer.isView(t)){if(e&&typeof t=="object")for(const i in t)DS(t[i],e,r)}}return n===void 0?Array.from(r):[]}function b1(t){return t?t instanceof ArrayBuffer||typeof MessagePort<"u"&&t instanceof MessagePort||typeof ImageBitmap<"u"&&t instanceof ImageBitmap||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas:!1}const Op=()=>{};class Pm{static isSupported(){return typeof Worker<"u"&&tf||typeof Lp<"u"&&!tf}constructor(e){_(this,"name",void 0),_(this,"source",void 0),_(this,"url",void 0),_(this,"terminated",!1),_(this,"worker",void 0),_(this,"onMessage",void 0),_(this,"onError",void 0),_(this,"_loadableURL","");const{name:n,source:r,url:i}=e;Hr(r||i),this.name=n,this.source=r,this.url=i,this.onMessage=Op,this.onError=s=>console.log(s),this.worker=tf?this._createBrowserWorker():this._createNodeWorker()}destroy(){this.onMessage=Op,this.onError=Op,this.worker.terminate(),this.terminated=!0}get isRunning(){return!!this.onMessage}postMessage(e,n){n=n||DS(e),this.worker.postMessage(e,n)}_getErrorFromErrorEvent(e){let n="Failed to load ";return n+="worker ".concat(this.name," from ").concat(this.url,". "),e.message&&(n+="".concat(e.message," in ")),e.lineno&&(n+=":".concat(e.lineno,":").concat(e.colno)),new Error(n)}_createBrowserWorker(){this._loadableURL=LO({source:this.source,url:this.url});const e=new Worker(this._loadableURL,{name:this.name});return e.onmessage=n=>{n.data?this.onMessage(n.data):this.onError(new Error("No data received"))},e.onerror=n=>{this.onError(this._getErrorFromErrorEvent(n)),this.terminated=!0},e.onmessageerror=n=>console.error(n),e}_createNodeWorker(){let e;if(this.url){const r=this.url.includes(":/")||this.url.startsWith("/")?this.url:"./".concat(this.url);e=new Lp(r,{eval:!1})}else if(this.source)e=new Lp(this.source,{eval:!0});else throw new Error("no worker");return e.on("message",n=>{this.onMessage(n)}),e.on("error",n=>{this.onError(n)}),e.on("exit",n=>{}),e}}class IO{static isSupported(){return Pm.isSupported()}constructor(e){_(this,"name","unnamed"),_(this,"source",void 0),_(this,"url",void 0),_(this,"maxConcurrency",1),_(this,"maxMobileConcurrency",1),_(this,"onDebug",()=>{}),_(this,"reuseWorkers",!0),_(this,"props",{}),_(this,"jobQueue",[]),_(this,"idleQueue",[]),_(this,"count",0),_(this,"isDestroyed",!1),this.source=e.source,this.url=e.url,this.setProps(e)}destroy(){this.idleQueue.forEach(e=>e.destroy()),this.isDestroyed=!0}setProps(e){this.props={...this.props,...e},e.name!==void 0&&(this.name=e.name),e.maxConcurrency!==void 0&&(this.maxConcurrency=e.maxConcurrency),e.maxMobileConcurrency!==void 0&&(this.maxMobileConcurrency=e.maxMobileConcurrency),e.reuseWorkers!==void 0&&(this.reuseWorkers=e.reuseWorkers),e.onDebug!==void 0&&(this.onDebug=e.onDebug)}async startJob(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:(s,o,a)=>s.done(a),r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:(s,o)=>s.error(o);const i=new Promise(s=>(this.jobQueue.push({name:e,onMessage:n,onError:r,onStart:s}),this));return this._startQueuedJob(),await i}async _startQueuedJob(){if(!this.jobQueue.length)return;const e=this._getAvailableWorker();if(!e)return;const n=this.jobQueue.shift();if(n){this.onDebug({message:"Starting job",name:n.name,workerThread:e,backlog:this.jobQueue.length});const r=new CO(n.name,e);e.onMessage=i=>n.onMessage(r,i.type,i.payload),e.onError=i=>n.onError(r,i),n.onStart(r);try{await r.result}finally{this.returnWorkerToQueue(e)}}}returnWorkerToQueue(e){this.isDestroyed||!this.reuseWorkers||this.count>this._getMaxConcurrency()?(e.destroy(),this.count--):this.idleQueue.push(e),this.isDestroyed||this._startQueuedJob()}_getAvailableWorker(){if(this.idleQueue.length>0)return this.idleQueue.shift()||null;if(this.count<this._getMaxConcurrency()){this.count++;const e="".concat(this.name.toLowerCase()," (#").concat(this.count," of ").concat(this.maxConcurrency,")");return new Pm({name:e,source:this.source,url:this.url})}return null}_getMaxConcurrency(){return SO?this.maxMobileConcurrency:this.maxConcurrency}}const MO={maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:!0,onDebug:()=>{}};class Ir{static isSupported(){return Pm.isSupported()}static getWorkerFarm(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Ir._workerFarm=Ir._workerFarm||new Ir({}),Ir._workerFarm.setProps(e),Ir._workerFarm}constructor(e){_(this,"props",void 0),_(this,"workerPools",new Map),this.props={...MO},this.setProps(e),this.workerPools=new Map}destroy(){for(const e of this.workerPools.values())e.destroy();this.workerPools=new Map}setProps(e){this.props={...this.props,...e};for(const n of this.workerPools.values())n.setProps(this._getWorkerPoolProps())}getWorkerPool(e){const{name:n,source:r,url:i}=e;let s=this.workerPools.get(n);return s||(s=new IO({name:n,source:r,url:i}),s.setProps(this._getWorkerPoolProps()),this.workerPools.set(n,s)),s}_getWorkerPoolProps(){return{maxConcurrency:this.props.maxConcurrency,maxMobileConcurrency:this.props.maxMobileConcurrency,reuseWorkers:this.props.reuseWorkers,onDebug:this.props.onDebug}}}_(Ir,"_workerFarm",void 0);const kO="latest";function NO(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const n=e[t.id]||{},r="".concat(t.id,"-worker.js");let i=n.workerUrl;if(!i&&t.id==="compression"&&(i=e.workerUrl),e._workerType==="test"&&(i="modules/".concat(t.module,"/dist/").concat(r)),!i){let s=t.version;s==="latest"&&(s=kO);const o=s?"@".concat(s):"";i="https://unpkg.com/@loaders.gl/".concat(t.module).concat(o,"/dist/").concat(r)}return Hr(i),i}function FO(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:TO;Hr(t,"no worker provided");const n=t.version;return!(!e||!n)}function DO(t,e){return!Ir.isSupported()||!tf&&!(e!=null&&e._nodeWorkers)?!1:t.worker&&(e==null?void 0:e.worker)}async function BO(t,e,n,r,i){const s=t.id,o=NO(t,n),l=Ir.getWorkerFarm(n).getWorkerPool({name:s,url:o});n=JSON.parse(JSON.stringify(n)),r=JSON.parse(JSON.stringify(r||{}));const c=await l.startJob("process-on-worker",zO.bind(null,i));return c.postMessage("process",{input:e,options:n,context:r}),await(await c.result).result}async function zO(t,e,n,r){switch(n){case"done":e.done(r);break;case"error":e.error(new Error(r.error));break;case"process":const{id:i,input:s,options:o}=r;try{const a=await t(s,o);e.postMessage("done",{id:i,result:a})}catch(a){const l=a instanceof Error?a.message:"unknown error";e.postMessage("error",{id:i,error:l})}break;default:console.warn("parse-with-worker unknown message ".concat(n))}}function UO(t,e,n){if(n=n||t.byteLength,t.byteLength<n||e.byteLength<n)return!1;const r=new Uint8Array(t),i=new Uint8Array(e);for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}function jO(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];const r=e.map(a=>a instanceof ArrayBuffer?new Uint8Array(a):a),i=r.reduce((a,l)=>a+l.byteLength,0),s=new Uint8Array(i);let o=0;for(const a of r)s.set(a,o),o+=a.byteLength;return s.buffer}async function VO(t){const e=[];for await(const n of t)e.push(n);return jO(...e)}let $O="";const E1={};function GO(t){for(const e in E1)if(t.startsWith(e)){const n=E1[e];t=t.replace(e,n)}return!t.startsWith("http://")&&!t.startsWith("https://")&&(t="".concat($O).concat(t)),t}function WO(t){return t&&typeof t=="object"&&t.isBuffer}function BS(t){if(WO(t))return t;if(t instanceof ArrayBuffer)return t;if(ArrayBuffer.isView(t))return t.byteOffset===0&&t.byteLength===t.buffer.byteLength?t.buffer:t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength);if(typeof t=="string"){const e=t;return new TextEncoder().encode(e).buffer}if(t&&typeof t=="object"&&t._toArrayBuffer)return t._toArrayBuffer();throw new Error("toArrayBuffer")}function zS(t){const e=t?t.lastIndexOf("/"):-1;return e>=0?t.substr(e+1):""}function HO(t){const e=t?t.lastIndexOf("/"):-1;return e>=0?t.substr(0,e):""}const XO=t=>typeof t=="boolean",vl=t=>typeof t=="function",mc=t=>t!==null&&typeof t=="object",w1=t=>mc(t)&&t.constructor==={}.constructor,YO=t=>t&&typeof t[Symbol.iterator]=="function",KO=t=>t&&typeof t[Symbol.asyncIterator]=="function",ks=t=>typeof Response<"u"&&t instanceof Response||t&&t.arrayBuffer&&t.text&&t.json,Ns=t=>typeof Blob<"u"&&t instanceof Blob,qO=t=>t&&typeof t=="object"&&t.isBuffer,ZO=t=>typeof ReadableStream<"u"&&t instanceof ReadableStream||mc(t)&&vl(t.tee)&&vl(t.cancel)&&vl(t.getReader),QO=t=>mc(t)&&vl(t.read)&&vl(t.pipe)&&XO(t.readable),US=t=>ZO(t)||QO(t),JO=/^data:([-\w.]+\/[-\w.+]+)(;|,)/,e3=/^([-\w.]+\/[-\w.+]+)/;function t3(t){const e=e3.exec(t);return e?e[1]:t}function x1(t){const e=JO.exec(t);return e?e[1]:""}const jS=/\?.*/;function n3(t){const e=t.match(jS);return e&&e[0]}function My(t){return t.replace(jS,"")}function lh(t){return ks(t)?t.url:Ns(t)?t.name||"":typeof t=="string"?t:""}function ky(t){if(ks(t)){const e=t,n=e.headers.get("content-type")||"",r=My(e.url);return t3(n)||x1(r)}return Ns(t)?t.type||"":typeof t=="string"?x1(t):""}function r3(t){return ks(t)?t.headers["content-length"]||-1:Ns(t)?t.size:typeof t=="string"?t.length:t instanceof ArrayBuffer||ArrayBuffer.isView(t)?t.byteLength:-1}async function VS(t){if(ks(t))return t;const e={},n=r3(t);n>=0&&(e["content-length"]=String(n));const r=lh(t),i=ky(t);i&&(e["content-type"]=i);const s=await o3(t);s&&(e["x-first-bytes"]=s),typeof t=="string"&&(t=new TextEncoder().encode(t));const o=new Response(t,{headers:e});return Object.defineProperty(o,"url",{value:r}),o}async function i3(t){if(!t.ok){const e=await s3(t);throw new Error(e)}}async function s3(t){let e="Failed to fetch resource ".concat(t.url," (").concat(t.status,"): ");try{const n=t.headers.get("Content-Type");let r=t.statusText;n.includes("application/json")&&(r+=" ".concat(await t.text())),e+=r,e=e.length>60?"".concat(e.slice(0,60),"..."):e}catch{}return e}async function o3(t){if(typeof t=="string")return"data:,".concat(t.slice(0,5));if(t instanceof Blob){const n=t.slice(0,5);return await new Promise(r=>{const i=new FileReader;i.onload=s=>{var o;return r(s==null||(o=s.target)===null||o===void 0?void 0:o.result)},i.readAsDataURL(n)})}if(t instanceof ArrayBuffer){const n=t.slice(0,5),r=a3(n);return"data:base64,".concat(r)}return null}function a3(t){let e="";const n=new Uint8Array(t);for(let r=0;r<n.byteLength;r++)e+=String.fromCharCode(n[r]);return btoa(e)}async function T1(t,e){if(typeof t=="string"){t=GO(t);let n=e;return e!=null&&e.fetch&&typeof(e==null?void 0:e.fetch)!="function"&&(n=e.fetch),await fetch(t,n)}return await VS(t)}function l3(t){if(typeof window<"u"&&typeof window.process=="object"&&window.process.type==="renderer"||typeof process<"u"&&typeof process.versions=="object"&&process.versions.electron)return!0;const e=typeof navigator=="object"&&typeof navigator.userAgent=="string"&&navigator.userAgent,n=t||e;return!!(n&&n.indexOf("Electron")>=0)}function yc(){return!(typeof process=="object"&&String(process)==="[object process]"&&!process.browser)||l3()}const pu=globalThis.window||globalThis.self||globalThis.global,Da=globalThis.process||{},$S=typeof __VERSION__<"u"?__VERSION__:"untranspiled source";yc();function c3(t){try{const e=window[t],n="__storage_test__";return e.setItem(n,n),e.removeItem(n),e}catch{return null}}let u3=class{constructor(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"sessionStorage";this.storage=void 0,this.id=void 0,this.config=void 0,this.storage=c3(r),this.id=e,this.config=n,this._loadConfiguration()}getConfiguration(){return this.config}setConfiguration(e){if(Object.assign(this.config,e),this.storage){const n=JSON.stringify(this.config);this.storage.setItem(this.id,n)}}_loadConfiguration(){let e={};if(this.storage){const n=this.storage.getItem(this.id);e=n?JSON.parse(n):{}}return Object.assign(this.config,e),this}};function f3(t){let e;return t<10?e="".concat(t.toFixed(2),"ms"):t<100?e="".concat(t.toFixed(1),"ms"):t<1e3?e="".concat(t.toFixed(0),"ms"):e="".concat((t/1e3).toFixed(2),"s"),e}function d3(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:8;const n=Math.max(e-t.length,0);return"".concat(" ".repeat(n)).concat(t)}function Ip(t,e,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:600;const i=t.src.replace(/\(/g,"%28").replace(/\)/g,"%29");t.width>r&&(n=Math.min(n,r/t.width));const s=t.width*n,o=t.height*n,a=["font-size:1px;","padding:".concat(Math.floor(o/2),"px ").concat(Math.floor(s/2),"px;"),"line-height:".concat(o,"px;"),"background:url(".concat(i,");"),"background-size:".concat(s,"px ").concat(o,"px;"),"color:transparent;"].join("");return["".concat(e," %c+"),a]}let Xf;(function(t){t[t.BLACK=30]="BLACK",t[t.RED=31]="RED",t[t.GREEN=32]="GREEN",t[t.YELLOW=33]="YELLOW",t[t.BLUE=34]="BLUE",t[t.MAGENTA=35]="MAGENTA",t[t.CYAN=36]="CYAN",t[t.WHITE=37]="WHITE",t[t.BRIGHT_BLACK=90]="BRIGHT_BLACK",t[t.BRIGHT_RED=91]="BRIGHT_RED",t[t.BRIGHT_GREEN=92]="BRIGHT_GREEN",t[t.BRIGHT_YELLOW=93]="BRIGHT_YELLOW",t[t.BRIGHT_BLUE=94]="BRIGHT_BLUE",t[t.BRIGHT_MAGENTA=95]="BRIGHT_MAGENTA",t[t.BRIGHT_CYAN=96]="BRIGHT_CYAN",t[t.BRIGHT_WHITE=97]="BRIGHT_WHITE"})(Xf||(Xf={}));const h3=10;function S1(t){return typeof t!="string"?t:(t=t.toUpperCase(),Xf[t]||Xf.WHITE)}function p3(t,e,n){if(!yc&&typeof t=="string"){if(e){const r=S1(e);t="\x1B[".concat(r,"m").concat(t,"\x1B[39m")}if(n){const r=S1(n);t="\x1B[".concat(r+h3,"m").concat(t,"\x1B[49m")}}return t}function g3(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:["constructor"];const n=Object.getPrototypeOf(t),r=Object.getOwnPropertyNames(n),i=t;for(const s of r){const o=i[s];typeof o=="function"&&(e.find(a=>s===a)||(i[s]=o.bind(t)))}}function Yf(t,e){if(!t)throw new Error(e||"Assertion failed")}function Xs(){let t;if(yc()&&pu.performance){var e,n;t=pu==null||(e=pu.performance)===null||e===void 0||(n=e.now)===null||n===void 0?void 0:n.call(e)}else if("hrtime"in Da){var r;const i=Da==null||(r=Da.hrtime)===null||r===void 0?void 0:r.call(Da);t=i[0]*1e3+i[1]/1e6}else t=Date.now();return t}const Ys={debug:yc()&&console.debug||console.log,log:console.log,info:console.info,warn:console.warn,error:console.error},m3={enabled:!0,level:0};function Sn(){}const P1={},A1={once:!0};let Ny=class{constructor(){let{id:e}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{id:""};this.id=void 0,this.VERSION=$S,this._startTs=Xs(),this._deltaTs=Xs(),this._storage=void 0,this.userData={},this.LOG_THROTTLE_TIMEOUT=0,this.id=e,this.userData={},this._storage=new u3("__probe-".concat(this.id,"__"),m3),this.timeStamp("".concat(this.id," started")),g3(this),Object.seal(this)}set level(e){this.setLevel(e)}get level(){return this.getLevel()}isEnabled(){return this._storage.config.enabled}getLevel(){return this._storage.config.level}getTotal(){return Number((Xs()-this._startTs).toPrecision(10))}getDelta(){return Number((Xs()-this._deltaTs).toPrecision(10))}set priority(e){this.level=e}get priority(){return this.level}getPriority(){return this.level}enable(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return this._storage.setConfiguration({enabled:e}),this}setLevel(e){return this._storage.setConfiguration({level:e}),this}get(e){return this._storage.config[e]}set(e,n){this._storage.setConfiguration({[e]:n})}settings(){console.table?console.table(this._storage.config):console.log(this._storage.config)}assert(e,n){Yf(e,n)}warn(e){return this._getLogFunction(0,e,Ys.warn,arguments,A1)}error(e){return this._getLogFunction(0,e,Ys.error,arguments)}deprecated(e,n){return this.warn("`".concat(e,"` is deprecated and will be removed in a later version. Use `").concat(n,"` instead"))}removed(e,n){return this.error("`".concat(e,"` has been removed. Use `").concat(n,"` instead"))}probe(e,n){return this._getLogFunction(e,n,Ys.log,arguments,{time:!0,once:!0})}log(e,n){return this._getLogFunction(e,n,Ys.debug,arguments)}info(e,n){return this._getLogFunction(e,n,console.info,arguments)}once(e,n){return this._getLogFunction(e,n,Ys.debug||Ys.info,arguments,A1)}table(e,n,r){return n?this._getLogFunction(e,n,console.table||Sn,r&&[r],{tag:b3(n)}):Sn}image(e){let{logLevel:n,priority:r,image:i,message:s="",scale:o=1}=e;return this._shouldLog(n||r)?yc()?_3({image:i,message:s,scale:o}):v3():Sn}time(e,n){return this._getLogFunction(e,n,console.time?console.time:console.info)}timeEnd(e,n){return this._getLogFunction(e,n,console.timeEnd?console.timeEnd:console.info)}timeStamp(e,n){return this._getLogFunction(e,n,console.timeStamp||Sn)}group(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{collapsed:!1};const i=C1({logLevel:e,message:n,opts:r}),{collapsed:s}=r;return i.method=(s?console.groupCollapsed:console.group)||console.info,this._getLogFunction(i)}groupCollapsed(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.group(e,n,Object.assign({},r,{collapsed:!0}))}groupEnd(e){return this._getLogFunction(e,"",console.groupEnd||Sn)}withGroup(e,n,r){this.group(e,n)();try{r()}finally{this.groupEnd(e)()}}trace(){console.trace&&console.trace()}_shouldLog(e){return this.isEnabled()&&this.getLevel()>=GS(e)}_getLogFunction(e,n,r,i,s){if(this._shouldLog(e)){s=C1({logLevel:e,message:n,args:i,opts:s}),r=r||s.method,Yf(r),s.total=this.getTotal(),s.delta=this.getDelta(),this._deltaTs=Xs();const o=s.tag||s.message;if(s.once&&o)if(!P1[o])P1[o]=Xs();else return Sn;return n=y3(this.id,s.message,s),r.bind(console,n,...s.args)}return Sn}};Ny.VERSION=$S;function GS(t){if(!t)return 0;let e;switch(typeof t){case"number":e=t;break;case"object":e=t.logLevel||t.priority||0;break;default:return 0}return Yf(Number.isFinite(e)&&e>=0),e}function C1(t){const{logLevel:e,message:n}=t;t.logLevel=GS(e);const r=t.args?Array.from(t.args):[];for(;r.length&&r.shift()!==n;);switch(typeof e){case"string":case"function":n!==void 0&&r.unshift(n),t.message=e;break;case"object":Object.assign(t,e);break}typeof t.message=="function"&&(t.message=t.message());const i=typeof t.message;return Yf(i==="string"||i==="object"),Object.assign(t,{args:r},t.opts)}function y3(t,e,n){if(typeof e=="string"){const r=n.time?d3(f3(n.total)):"";e=n.time?"".concat(t,": ").concat(r,"  ").concat(e):"".concat(t,": ").concat(e),e=p3(e,n.color,n.background)}return e}function v3(t){return console.warn("removed"),Sn}function _3(t){let{image:e,message:n="",scale:r=1}=t;if(typeof e=="string"){const s=new Image;return s.onload=()=>{const o=Ip(s,n,r);console.log(...o)},s.src=e,Sn}const i=e.nodeName||"";if(i.toLowerCase()==="img")return console.log(...Ip(e,n,r)),Sn;if(i.toLowerCase()==="canvas"){const s=new Image;return s.onload=()=>console.log(...Ip(s,n,r)),s.src=e.toDataURL(),Sn}return Sn}function b3(t){for(const e in t)for(const n in t[e])return n||"untitled";return"empty"}const L1=new Ny({id:"loaders.gl"});class E3{log(){return()=>{}}info(){return()=>{}}warn(){return()=>{}}error(){return()=>{}}}class w3{constructor(){_(this,"console",void 0),this.console=console}log(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return this.console.log.bind(this.console,...n)}info(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return this.console.info.bind(this.console,...n)}warn(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return this.console.warn.bind(this.console,...n)}error(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return this.console.error.bind(this.console,...n)}}const WS={fetch:null,mimeType:void 0,nothrow:!1,log:new w3,CDN:"https://unpkg.com/@loaders.gl",worker:!0,maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:Iy,_nodeWorkers:!1,_workerType:"",limit:0,_limitMB:0,batchSize:"auto",batchDebounceMs:0,metadata:!1,transforms:[]},x3={throws:"nothrow",dataType:"(no longer used)",uri:"baseUri",method:"fetch.method",headers:"fetch.headers",body:"fetch.body",mode:"fetch.mode",credentials:"fetch.credentials",cache:"fetch.cache",redirect:"fetch.redirect",referrer:"fetch.referrer",referrerPolicy:"fetch.referrerPolicy",integrity:"fetch.integrity",keepalive:"fetch.keepalive",signal:"fetch.signal"};function HS(){globalThis.loaders=globalThis.loaders||{};const{loaders:t}=globalThis;return t._state=t._state||{},t._state}const XS=()=>{const t=HS();return t.globalOptions=t.globalOptions||{...WS},t.globalOptions};function T3(t,e,n,r){return n=n||[],n=Array.isArray(n)?n:[n],S3(t,n),A3(e,t,r)}function S3(t,e){R1(t,null,WS,x3,e);for(const n of e){const r=t&&t[n.id]||{},i=n.options&&n.options[n.id]||{},s=n.deprecatedOptions&&n.deprecatedOptions[n.id]||{};R1(r,n.id,i,s,e)}}function R1(t,e,n,r,i){const s=e||"Top level",o=e?"".concat(e,"."):"";for(const a in t){const l=!e&&mc(t[a]),c=a==="baseUri"&&!e,u=a==="workerUrl"&&e;if(!(a in n)&&!c&&!u){if(a in r)L1.warn("".concat(s," loader option '").concat(o).concat(a,"' no longer supported, use '").concat(r[a],"'"))();else if(!l){const f=P3(a,i);L1.warn("".concat(s," loader option '").concat(o).concat(a,"' not recognized. ").concat(f))()}}}}function P3(t,e){const n=t.toLowerCase();let r="";for(const i of e)for(const s in i.options){if(t===s)return"Did you mean '".concat(i.id,".").concat(s,"'?");const o=s.toLowerCase();(n.startsWith(o)||o.startsWith(n))&&(r=r||"Did you mean '".concat(i.id,".").concat(s,"'?"))}return r}function A3(t,e,n){const i={...t.options||{}};return C3(i,n),i.log===null&&(i.log=new E3),O1(i,XS()),O1(i,e),i}function O1(t,e){for(const n in e)if(n in e){const r=e[n];w1(r)&&w1(t[n])?t[n]={...t[n],...e[n]}:t[n]=e[n]}}function C3(t,e){e&&!("baseUri"in t)&&(t.baseUri=e)}function Fy(t){var e;return t?(Array.isArray(t)&&(t=t[0]),Array.isArray((e=t)===null||e===void 0?void 0:e.extensions)):!1}function Dy(t){var e,n;Hf(t,"null loader"),Hf(Fy(t),"invalid loader");let r;return Array.isArray(t)&&(r=t[1],t=t[0],t={...t,options:{...t.options,...r}}),((e=t)!==null&&e!==void 0&&e.parseTextSync||(n=t)!==null&&n!==void 0&&n.parseText)&&(t.text=!0),t.text||(t.binary=!0),t}const YS=()=>{const t=HS();return t.loaderRegistry=t.loaderRegistry||[],t.loaderRegistry};function L3(t){const e=YS();t=Array.isArray(t)?t:[t];for(const n of t){const r=Dy(n);e.find(i=>r===i)||e.unshift(r)}}function R3(){return YS()}const O3=new Ny({id:"loaders.gl"}),I3=/\.([^.]+)$/;async function M3(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;if(!KS(t))return null;let i=I1(t,e,{...n,nothrow:!0},r);if(i)return i;if(Ns(t)&&(t=await t.slice(0,10).arrayBuffer(),i=I1(t,e,n,r)),!i&&!(n!=null&&n.nothrow))throw new Error(qS(t));return i}function I1(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;if(!KS(t))return null;if(e&&!Array.isArray(e))return Dy(e);let i=[];e&&(i=i.concat(e)),n!=null&&n.ignoreRegisteredLoaders||i.push(...R3()),N3(i);const s=k3(t,i,n,r);if(!s&&!(n!=null&&n.nothrow))throw new Error(qS(t));return s}function k3(t,e,n,r){const i=lh(t),s=ky(t),o=My(i)||(r==null?void 0:r.url);let a=null,l="";if(n!=null&&n.mimeType&&(a=Mp(e,n==null?void 0:n.mimeType),l="match forced by supplied MIME type ".concat(n==null?void 0:n.mimeType)),a=a||F3(e,o),l=l||(a?"matched url ".concat(o):""),a=a||Mp(e,s),l=l||(a?"matched MIME type ".concat(s):""),a=a||B3(e,t),l=l||(a?"matched initial data ".concat(ZS(t)):""),a=a||Mp(e,n==null?void 0:n.fallbackMimeType),l=l||(a?"matched fallback MIME type ".concat(s):""),l){var c;O3.log(1,"selectLoader selected ".concat((c=a)===null||c===void 0?void 0:c.name,": ").concat(l,"."))}return a}function KS(t){return!(t instanceof Response&&t.status===204)}function qS(t){const e=lh(t),n=ky(t);let r="No valid loader found (";r+=e?"".concat(zS(e),", "):"no url provided, ",r+="MIME type: ".concat(n?'"'.concat(n,'"'):"not provided",", ");const i=t?ZS(t):"";return r+=i?' first bytes: "'.concat(i,'"'):"first bytes: not available",r+=")",r}function N3(t){for(const e of t)Dy(e)}function F3(t,e){const n=e&&I3.exec(e),r=n&&n[1];return r?D3(t,r):null}function D3(t,e){e=e.toLowerCase();for(const n of t)for(const r of n.extensions)if(r.toLowerCase()===e)return n;return null}function Mp(t,e){for(const n of t)if(n.mimeTypes&&n.mimeTypes.includes(e)||e==="application/x.".concat(n.id))return n;return null}function B3(t,e){if(!e)return null;for(const n of t)if(typeof e=="string"){if(z3(e,n))return n}else if(ArrayBuffer.isView(e)){if(M1(e.buffer,e.byteOffset,n))return n}else if(e instanceof ArrayBuffer&&M1(e,0,n))return n;return null}function z3(t,e){return e.testText?e.testText(t):(Array.isArray(e.tests)?e.tests:[e.tests]).some(r=>t.startsWith(r))}function M1(t,e,n){return(Array.isArray(n.tests)?n.tests:[n.tests]).some(i=>U3(t,e,n,i))}function U3(t,e,n,r){if(r instanceof ArrayBuffer)return UO(r,t,r.byteLength);switch(typeof r){case"function":return r(t,n);case"string":const i=Am(t,e,r.length);return r===i;default:return!1}}function ZS(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:5;return typeof t=="string"?t.slice(0,e):ArrayBuffer.isView(t)?Am(t.buffer,t.byteOffset,e):t instanceof ArrayBuffer?Am(t,0,e):""}function Am(t,e,n){if(t.byteLength<e+n)return"";const r=new DataView(t);let i="";for(let s=0;s<n;s++)i+=String.fromCharCode(r.getUint8(e+s));return i}const j3=256*1024;function*V3(t,e){const n=(e==null?void 0:e.chunkSize)||j3;let r=0;const i=new TextEncoder;for(;r<t.length;){const s=Math.min(t.length-r,n),o=t.slice(r,r+s);r+=s,yield i.encode(o)}}const $3=256*1024;function G3(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return function*(){const{chunkSize:n=$3}=e;let r=0;for(;r<t.byteLength;){const i=Math.min(t.byteLength-r,n),s=new ArrayBuffer(i),o=new Uint8Array(t,r,i);new Uint8Array(s).set(o),r+=i,yield s}}()}const W3=1024*1024;async function*H3(t,e){const n=(e==null?void 0:e.chunkSize)||W3;let r=0;for(;r<t.size;){const i=r+n,s=await t.slice(r,i).arrayBuffer();r=i,yield s}}function k1(t,e){return Iy?X3(t,e):Y3(t)}async function*X3(t,e){const n=t.getReader();let r;try{for(;;){const i=r||n.read();e!=null&&e._streamReadAhead&&(r=n.read());const{done:s,value:o}=await i;if(s)return;yield BS(o)}}catch{n.releaseLock()}}async function*Y3(t,e){for await(const n of t)yield BS(n)}function K3(t,e){if(typeof t=="string")return V3(t,e);if(t instanceof ArrayBuffer)return G3(t,e);if(Ns(t))return H3(t,e);if(US(t))return k1(t,e);if(ks(t))return k1(t.body,e);throw new Error("makeIterator")}const QS="Cannot convert supplied data type";function q3(t,e,n){if(e.text&&typeof t=="string")return t;if(qO(t)&&(t=t.buffer),t instanceof ArrayBuffer){const r=t;return e.text&&!e.binary?new TextDecoder("utf8").decode(r):r}if(ArrayBuffer.isView(t)){if(e.text&&!e.binary)return new TextDecoder("utf8").decode(t);let r=t.buffer;const i=t.byteLength||t.length;return(t.byteOffset!==0||i!==r.byteLength)&&(r=r.slice(t.byteOffset,t.byteOffset+i)),r}throw new Error(QS)}async function Z3(t,e,n){const r=t instanceof ArrayBuffer||ArrayBuffer.isView(t);if(typeof t=="string"||r)return q3(t,e);if(Ns(t)&&(t=await VS(t)),ks(t)){const i=t;return await i3(i),e.binary?await i.arrayBuffer():await i.text()}if(US(t)&&(t=K3(t,n)),YO(t)||KO(t))return VO(t);throw new Error(QS)}function JS(t,e){const n=XS(),r=t||n;return typeof r.fetch=="function"?r.fetch:mc(r.fetch)?i=>T1(i,r):e!=null&&e.fetch?e==null?void 0:e.fetch:T1}function Q3(t,e,n){if(n)return n;const r={fetch:JS(e,t),...t};if(r.url){const i=My(r.url);r.baseUrl=i,r.queryString=n3(r.url),r.filename=zS(i),r.baseUrl=HO(i)}return Array.isArray(r.loaders)||(r.loaders=null),r}function J3(t,e){if(!e&&t&&!Array.isArray(t))return t;let n;if(t&&(n=Array.isArray(t)?t:[t]),e&&e.loaders){const r=Array.isArray(e.loaders)?e.loaders:[e.loaders];n=n?[...n,...r]:r}return n&&n.length?n:null}async function By(t,e,n,r){Hr(!r||typeof r=="object"),e&&!Array.isArray(e)&&!Fy(e)&&(r=void 0,n=e,e=void 0),t=await t,n=n||{};const i=lh(t),o=J3(e,r),a=await M3(t,o,n);return a?(n=T3(n,a,o,i),r=Q3({url:i,parse:By,loaders:o},n,r||null),await eI(a,t,n,r)):null}async function eI(t,e,n,r){if(FO(t),ks(e)){const i=e,{ok:s,redirected:o,status:a,statusText:l,type:c,url:u}=i,f=Object.fromEntries(i.headers.entries());r.response={headers:f,ok:s,redirected:o,status:a,statusText:l,type:c,url:u}}if(e=await Z3(e,t,n),t.parseTextSync&&typeof e=="string")return n.dataType="text",t.parseTextSync(e,n,r,t);if(DO(t,n))return await BO(t,e,n,r,By);if(t.parseText&&typeof e=="string")return await t.parseText(e,n,r,t);if(t.parse)return await t.parse(e,n,r,t);throw Hr(!t.parseSync),new Error("".concat(t.id," loader - no parser found and worker is disabled"))}async function Kf(t,e,n,r){!Array.isArray(e)&&!Fy(e)&&(n=e,e=void 0);const i=JS(n);let s=t;return typeof t=="string"&&(s=await i(t)),Ns(t)&&(s=await i(t)),await By(s,e,n)}const tI="3.4.14",{_parseImageNode:nI}=globalThis,Cm=typeof Image<"u",Lm=typeof ImageBitmap<"u",rI=!!nI,Rm=Iy?!0:rI;function iI(t){switch(t){case"auto":return Lm||Cm||Rm;case"imagebitmap":return Lm;case"image":return Cm;case"data":return Rm;default:throw new Error("@loaders.gl/images: image ".concat(t," not supported in this environment"))}}function sI(){if(Lm)return"imagebitmap";if(Cm)return"image";if(Rm)return"data";throw new Error("Install '@loaders.gl/polyfills' to parse images under Node.js")}function oI(t){const e=lI(t);if(!e)throw new Error("Not an image");return e}function aI(t){switch(oI(t)){case"data":return t;case"image":case"imagebitmap":const e=document.createElement("canvas"),n=e.getContext("2d");if(!n)throw new Error("getImageData");return e.width=t.width,e.height=t.height,n.drawImage(t,0,0),n.getImageData(0,0,t.width,t.height);default:throw new Error("getImageData")}}function lI(t){return typeof ImageBitmap<"u"&&t instanceof ImageBitmap?"imagebitmap":typeof Image<"u"&&t instanceof Image?"image":t&&typeof t=="object"&&t.data&&t.width&&t.height?"data":null}const cI=/^data:image\/svg\+xml/,uI=/\.svg((\?|#).*)?$/;function zy(t){return t&&(cI.test(t)||uI.test(t))}function fI(t,e){if(zy(e)){let r=new TextDecoder().decode(t);try{typeof unescape=="function"&&typeof encodeURIComponent=="function"&&(r=unescape(encodeURIComponent(r)))}catch(s){throw new Error(s.message)}return"data:image/svg+xml;base64,".concat(btoa(r))}return eP(t,e)}function eP(t,e){if(zy(e))throw new Error("SVG cannot be parsed directly to imagebitmap");return new Blob([new Uint8Array(t)])}async function tP(t,e,n){const r=fI(t,n),i=self.URL||self.webkitURL,s=typeof r!="string"&&i.createObjectURL(r);try{return await dI(s||r,e)}finally{s&&i.revokeObjectURL(s)}}async function dI(t,e){const n=new Image;return n.src=t,e.image&&e.image.decode&&n.decode?(await n.decode(),n):await new Promise((r,i)=>{try{n.onload=()=>r(n),n.onerror=s=>i(new Error("Could not load image ".concat(t,": ").concat(s)))}catch(s){i(s)}})}const hI={};let N1=!0;async function pI(t,e,n){let r;zy(n)?r=await tP(t,e,n):r=eP(t,n);const i=e&&e.imagebitmap;return await gI(r,i)}async function gI(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if((mI(e)||!N1)&&(e=null),e)try{return await createImageBitmap(t,e)}catch(n){console.warn(n),N1=!1}return await createImageBitmap(t)}function mI(t){for(const e in t||hI)return!1;return!0}function yI(t){return!EI(t,"ftyp",4)||!(t[8]&96)?null:vI(t)}function vI(t){switch(_I(t,8,12).replace("\0"," ").trim()){case"avif":case"avis":return{extension:"avif",mimeType:"image/avif"};default:return null}}function _I(t,e,n){return String.fromCharCode(...t.slice(e,n))}function bI(t){return[...t].map(e=>e.charCodeAt(0))}function EI(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;const r=bI(e);for(let i=0;i<r.length;++i)if(r[i]!==t[i+n])return!1;return!0}const fr=!1,_l=!0;function nP(t){const e=vc(t);return xI(e)||PI(e)||TI(e)||SI(e)||wI(e)}function wI(t){const e=new Uint8Array(t instanceof DataView?t.buffer:t),n=yI(e);return n?{mimeType:n.mimeType,width:0,height:0}:null}function xI(t){const e=vc(t);return e.byteLength>=24&&e.getUint32(0,fr)===2303741511?{mimeType:"image/png",width:e.getUint32(16,fr),height:e.getUint32(20,fr)}:null}function TI(t){const e=vc(t);return e.byteLength>=10&&e.getUint32(0,fr)===1195984440?{mimeType:"image/gif",width:e.getUint16(6,_l),height:e.getUint16(8,_l)}:null}function SI(t){const e=vc(t);return e.byteLength>=14&&e.getUint16(0,fr)===16973&&e.getUint32(2,_l)===e.byteLength?{mimeType:"image/bmp",width:e.getUint32(18,_l),height:e.getUint32(22,_l)}:null}function PI(t){const e=vc(t);if(!(e.byteLength>=3&&e.getUint16(0,fr)===65496&&e.getUint8(2)===255))return null;const{tableMarkers:r,sofMarkers:i}=AI();let s=2;for(;s+9<e.byteLength;){const o=e.getUint16(s,fr);if(i.has(o))return{mimeType:"image/jpeg",height:e.getUint16(s+5,fr),width:e.getUint16(s+7,fr)};if(!r.has(o))return null;s+=2,s+=e.getUint16(s,fr)}return null}function AI(){const t=new Set([65499,65476,65484,65501,65534]);for(let n=65504;n<65520;++n)t.add(n);return{tableMarkers:t,sofMarkers:new Set([65472,65473,65474,65475,65477,65478,65479,65481,65482,65483,65485,65486,65487,65502])}}function vc(t){if(t instanceof DataView)return t;if(ArrayBuffer.isView(t))return new DataView(t.buffer);if(t instanceof ArrayBuffer)return new DataView(t);throw new Error("toDataView")}async function CI(t,e){const{mimeType:n}=nP(t)||{},r=globalThis._parseImageNode;return Hf(r),await r(t,n)}async function LI(t,e,n){e=e||{};const i=(e.image||{}).type||"auto",{url:s}=n||{},o=RI(i);let a;switch(o){case"imagebitmap":a=await pI(t,e,s);break;case"image":a=await tP(t,e,s);break;case"data":a=await CI(t);break;default:Hf(!1)}return i==="data"&&(a=aI(a)),a}function RI(t){switch(t){case"auto":case"data":return sI();default:return iI(t),t}}const OI=["png","jpg","jpeg","gif","webp","bmp","ico","svg","avif"],II=["image/png","image/jpeg","image/gif","image/webp","image/avif","image/bmp","image/vnd.microsoft.icon","image/svg+xml"],MI={image:{type:"auto",decode:!0}},kI={id:"image",module:"images",name:"Images",version:tI,mimeTypes:II,extensions:OI,parse:LI,tests:[t=>!!nP(new DataView(t))],options:MI};function rP(t){if(typeof window<"u"&&typeof window.process=="object"&&window.process.type==="renderer"||typeof process<"u"&&typeof process.versions=="object"&&process.versions.electron)return!0;const e=typeof navigator=="object"&&typeof navigator.userAgent=="string"&&navigator.userAgent,n=t||e;return!!(n&&n.indexOf("Electron")>=0)}function Qr(){return!(typeof process=="object"&&String(process)==="[object process]"&&!process.browser)||rP()}const nf={self:typeof self<"u"&&self,window:typeof window<"u"&&window,global:typeof global<"u"&&global,document:typeof document<"u"&&document,process:typeof process=="object"&&process},gu=nf.window||nf.self||nf.global,Ba=nf.process||{},iP=typeof __VERSION__<"u"?__VERSION__:"untranspiled source";Qr();const kp=globalThis;function sP(t){if(!t&&!Qr())return"Node";if(rP(t))return"Electron";const n=t||(typeof navigator<"u"?navigator:{}).userAgent||"";if(n.indexOf("Edge")>-1)return"Edge";const r=n.indexOf("MSIE ")!==-1,i=n.indexOf("Trident/")!==-1;return r||i?"IE":kp.chrome?"Chrome":kp.safari?"Safari":kp.mozInnerScreenX?"Firefox":"Unknown"}function NI(t){try{const e=window[t],n="__storage_test__";return e.setItem(n,n),e.removeItem(n),e}catch{return null}}class FI{constructor(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"sessionStorage";_(this,"storage",void 0),_(this,"id",void 0),_(this,"config",void 0),this.storage=NI(r),this.id=e,this.config=n,this._loadConfiguration()}getConfiguration(){return this.config}setConfiguration(e){if(Object.assign(this.config,e),this.storage){const n=JSON.stringify(this.config);this.storage.setItem(this.id,n)}}_loadConfiguration(){let e={};if(this.storage){const n=this.storage.getItem(this.id);e=n?JSON.parse(n):{}}return Object.assign(this.config,e),this}}function DI(t){let e;return t<10?e="".concat(t.toFixed(2),"ms"):t<100?e="".concat(t.toFixed(1),"ms"):t<1e3?e="".concat(t.toFixed(0),"ms"):e="".concat((t/1e3).toFixed(2),"s"),e}function BI(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:8;const n=Math.max(e-t.length,0);return"".concat(" ".repeat(n)).concat(t)}function Np(t,e,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:600;const i=t.src.replace(/\(/g,"%28").replace(/\)/g,"%29");t.width>r&&(n=Math.min(n,r/t.width));const s=t.width*n,o=t.height*n,a=["font-size:1px;","padding:".concat(Math.floor(o/2),"px ").concat(Math.floor(s/2),"px;"),"line-height:".concat(o,"px;"),"background:url(".concat(i,");"),"background-size:".concat(s,"px ").concat(o,"px;"),"color:transparent;"].join("");return["".concat(e," %c+"),a]}let qf;(function(t){t[t.BLACK=30]="BLACK",t[t.RED=31]="RED",t[t.GREEN=32]="GREEN",t[t.YELLOW=33]="YELLOW",t[t.BLUE=34]="BLUE",t[t.MAGENTA=35]="MAGENTA",t[t.CYAN=36]="CYAN",t[t.WHITE=37]="WHITE",t[t.BRIGHT_BLACK=90]="BRIGHT_BLACK",t[t.BRIGHT_RED=91]="BRIGHT_RED",t[t.BRIGHT_GREEN=92]="BRIGHT_GREEN",t[t.BRIGHT_YELLOW=93]="BRIGHT_YELLOW",t[t.BRIGHT_BLUE=94]="BRIGHT_BLUE",t[t.BRIGHT_MAGENTA=95]="BRIGHT_MAGENTA",t[t.BRIGHT_CYAN=96]="BRIGHT_CYAN",t[t.BRIGHT_WHITE=97]="BRIGHT_WHITE"})(qf||(qf={}));function F1(t){return typeof t=="string"?qf[t.toUpperCase()]||qf.WHITE:t}function zI(t,e,n){return!Qr&&typeof t=="string"&&(e&&(e=F1(e),t="\x1B[".concat(e,"m").concat(t,"\x1B[39m")),n&&(e=F1(n),t="\x1B[".concat(n+10,"m").concat(t,"\x1B[49m"))),t}function UI(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:["constructor"];const n=Object.getPrototypeOf(t),r=Object.getOwnPropertyNames(n);for(const i of r)typeof t[i]=="function"&&(e.find(s=>i===s)||(t[i]=t[i].bind(t)))}function Zf(t,e){if(!t)throw new Error(e||"Assertion failed")}function Ks(){let t;if(Qr&&"performance"in gu){var e,n;t=gu==null||(e=gu.performance)===null||e===void 0||(n=e.now)===null||n===void 0?void 0:n.call(e)}else if("hrtime"in Ba){var r;const i=Ba==null||(r=Ba.hrtime)===null||r===void 0?void 0:r.call(Ba);t=i[0]*1e3+i[1]/1e6}else t=Date.now();return t}const qs={debug:Qr&&console.debug||console.log,log:console.log,info:console.info,warn:console.warn,error:console.error},jI={enabled:!0,level:0};function Pn(){}const D1={},B1={once:!0};class Uy{constructor(){let{id:e}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{id:""};_(this,"id",void 0),_(this,"VERSION",iP),_(this,"_startTs",Ks()),_(this,"_deltaTs",Ks()),_(this,"_storage",void 0),_(this,"userData",{}),_(this,"LOG_THROTTLE_TIMEOUT",0),this.id=e,this.userData={},this._storage=new FI("__probe-".concat(this.id,"__"),jI),this.timeStamp("".concat(this.id," started")),UI(this),Object.seal(this)}set level(e){this.setLevel(e)}get level(){return this.getLevel()}isEnabled(){return this._storage.config.enabled}getLevel(){return this._storage.config.level}getTotal(){return Number((Ks()-this._startTs).toPrecision(10))}getDelta(){return Number((Ks()-this._deltaTs).toPrecision(10))}set priority(e){this.level=e}get priority(){return this.level}getPriority(){return this.level}enable(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return this._storage.setConfiguration({enabled:e}),this}setLevel(e){return this._storage.setConfiguration({level:e}),this}get(e){return this._storage.config[e]}set(e,n){this._storage.setConfiguration({[e]:n})}settings(){console.table?console.table(this._storage.config):console.log(this._storage.config)}assert(e,n){Zf(e,n)}warn(e){return this._getLogFunction(0,e,qs.warn,arguments,B1)}error(e){return this._getLogFunction(0,e,qs.error,arguments)}deprecated(e,n){return this.warn("`".concat(e,"` is deprecated and will be removed in a later version. Use `").concat(n,"` instead"))}removed(e,n){return this.error("`".concat(e,"` has been removed. Use `").concat(n,"` instead"))}probe(e,n){return this._getLogFunction(e,n,qs.log,arguments,{time:!0,once:!0})}log(e,n){return this._getLogFunction(e,n,qs.debug,arguments)}info(e,n){return this._getLogFunction(e,n,console.info,arguments)}once(e,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s];return this._getLogFunction(e,n,qs.debug||qs.info,arguments,B1)}table(e,n,r){return n?this._getLogFunction(e,n,console.table||Pn,r&&[r],{tag:WI(n)}):Pn}image(e){let{logLevel:n,priority:r,image:i,message:s="",scale:o=1}=e;return this._shouldLog(n||r)?Qr?GI({image:i,message:s,scale:o}):$I():Pn}time(e,n){return this._getLogFunction(e,n,console.time?console.time:console.info)}timeEnd(e,n){return this._getLogFunction(e,n,console.timeEnd?console.timeEnd:console.info)}timeStamp(e,n){return this._getLogFunction(e,n,console.timeStamp||Pn)}group(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{collapsed:!1};const i=z1({logLevel:e,message:n,opts:r}),{collapsed:s}=r;return i.method=(s?console.groupCollapsed:console.group)||console.info,this._getLogFunction(i)}groupCollapsed(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.group(e,n,Object.assign({},r,{collapsed:!0}))}groupEnd(e){return this._getLogFunction(e,"",console.groupEnd||Pn)}withGroup(e,n,r){this.group(e,n)();try{r()}finally{this.groupEnd(e)()}}trace(){console.trace&&console.trace()}_shouldLog(e){return this.isEnabled()&&this.getLevel()>=oP(e)}_getLogFunction(e,n,r,i,s){if(this._shouldLog(e)){s=z1({logLevel:e,message:n,args:i,opts:s}),r=r||s.method,Zf(r),s.total=this.getTotal(),s.delta=this.getDelta(),this._deltaTs=Ks();const o=s.tag||s.message;if(s.once)if(!D1[o])D1[o]=Ks();else return Pn;return n=VI(this.id,s.message,s),r.bind(console,n,...s.args)}return Pn}}_(Uy,"VERSION",iP);function oP(t){if(!t)return 0;let e;switch(typeof t){case"number":e=t;break;case"object":e=t.logLevel||t.priority||0;break;default:return 0}return Zf(Number.isFinite(e)&&e>=0),e}function z1(t){const{logLevel:e,message:n}=t;t.logLevel=oP(e);const r=t.args?Array.from(t.args):[];for(;r.length&&r.shift()!==n;);switch(typeof e){case"string":case"function":n!==void 0&&r.unshift(n),t.message=e;break;case"object":Object.assign(t,e);break}typeof t.message=="function"&&(t.message=t.message());const i=typeof t.message;return Zf(i==="string"||i==="object"),Object.assign(t,{args:r},t.opts)}function VI(t,e,n){if(typeof e=="string"){const r=n.time?BI(DI(n.total)):"";e=n.time?"".concat(t,": ").concat(r,"  ").concat(e):"".concat(t,": ").concat(e),e=zI(e,n.color,n.background)}return e}function $I(t){return console.warn("removed"),Pn}function GI(t){let{image:e,message:n="",scale:r=1}=t;if(typeof e=="string"){const s=new Image;return s.onload=()=>{const o=Np(s,n,r);console.log(...o)},s.src=e,Pn}const i=e.nodeName||"";if(i.toLowerCase()==="img")return console.log(...Np(e,n,r)),Pn;if(i.toLowerCase()==="canvas"){const s=new Image;return s.onload=()=>console.log(...Np(s,n,r)),s.src=e.toDataURL(),Pn}return Pn}function WI(t){for(const e in t)for(const n in t[e])return n||"untitled";return"empty"}const ae=new Uy({id:"deck"});let Om={};function HI(t){Om=t}function Lt(t,e,n,r){ae.level>0&&Om[t]&&Om[t].call(null,e,n,r)}function XI(t){const e=t[0],n=t[t.length-1];return e==="{"&&n==="}"||e==="["&&n==="]"}const YI={id:"JSON",name:"JSON",module:"",version:"",options:{},extensions:["json","geojson"],mimeTypes:["application/json","application/geo+json"],testText:XI,parseTextSync:JSON.parse};function KI(){const t="8.9.31",e=globalThis.deck&&globalThis.deck.VERSION;if(e&&e!==t)throw new Error("deck.gl - multiple versions detected: ".concat(e," vs ").concat(t));return e||(ae.log(1,"deck.gl ".concat(t))(),globalThis.deck={...globalThis.deck,VERSION:t,version:t,log:ae,_registerLoggers:HI},L3([YI,[kI,{imagebitmap:{premultiplyAlpha:"none"}}]])),t}const qI=KI(),ge={DEFAULT:-1,LNGLAT:1,METER_OFFSETS:2,LNGLAT_OFFSETS:3,CARTESIAN:0};Object.defineProperty(ge,"IDENTITY",{get:()=>(ae.deprecated("COORDINATE_SYSTEM.IDENTITY","COORDINATE_SYSTEM.CARTESIAN")(),0)});const hr={WEB_MERCATOR:1,GLOBE:2,WEB_MERCATOR_AUTO_OFFSET:4,IDENTITY:0},Ts={common:0,meters:1,pixels:2},U1={click:{handler:"onClick"},panstart:{handler:"onDragStart"},panmove:{handler:"onDrag"},panend:{handler:"onDragEnd"}},K=new Uy({id:"luma.gl"});function Bt(t,e){if(!t)throw new Error(e||"luma.gl: assertion failed.")}const ZI="Invalid WebGLRenderingContext",QI="Requires WebGL2";function ch(t){return typeof WebGLRenderingContext<"u"&&t instanceof WebGLRenderingContext||typeof WebGL2RenderingContext<"u"&&t instanceof WebGL2RenderingContext?!0:!!(t&&Number.isFinite(t._version))}function le(t){return typeof WebGL2RenderingContext<"u"&&t instanceof WebGL2RenderingContext?!0:!!(t&&t._version===2)}function JI(t){return le(t)?t:null}function uh(t){return Bt(ch(t),ZI),t}function Ot(t){return Bt(le(t),QI),t}const nl={};function eM(t){globalThis.console&&globalThis.console.error&&globalThis.console.error(t)}function tM(t){globalThis.console&&globalThis.console.log&&globalThis.console.log(t)}function nM(t,e){nl[t]=!0,e!==void 0&&eM(e)}function rM(t){const e=t.getError;t.getError=function(){let r;do r=e.apply(t),r!==0&&(nl[r]=!0);while(r!==0);for(r in nl)if(nl[r])return delete nl[r],parseInt(r,10);return 0}}const _c=function t(e){const n=e.gl;this.ext=e,this.isAlive=!0,this.hasBeenBound=!1,this.elementArrayBuffer=null,this.attribs=new Array(e.maxVertexAttribs);for(let r=0;r<this.attribs.length;r++){const i=new t.VertexAttrib(n);this.attribs[r]=i}this.maxAttrib=0};_c.VertexAttrib=function(e){this.enabled=!1,this.buffer=null,this.size=4,this.type=5126,this.normalized=!1,this.stride=16,this.offset=0,this.cached="",this.recache()};_c.VertexAttrib.prototype.recache=function(){this.cached=[this.size,this.type,this.normalized,this.stride,this.offset].join(":")};const Fs=function(e){const n=this;this.gl=e,rM(e);const r=this.original={getParameter:e.getParameter,enableVertexAttribArray:e.enableVertexAttribArray,disableVertexAttribArray:e.disableVertexAttribArray,bindBuffer:e.bindBuffer,getVertexAttrib:e.getVertexAttrib,vertexAttribPointer:e.vertexAttribPointer};e.getParameter=function(s){return s===n.VERTEX_ARRAY_BINDING_OES?n.currentVertexArrayObject===n.defaultVertexArrayObject?null:n.currentVertexArrayObject:r.getParameter.apply(this,arguments)},e.enableVertexAttribArray=function(s){const o=n.currentVertexArrayObject;o.maxAttrib=Math.max(o.maxAttrib,s);const a=o.attribs[s];return a.enabled=!0,r.enableVertexAttribArray.apply(this,arguments)},e.disableVertexAttribArray=function(s){const o=n.currentVertexArrayObject;o.maxAttrib=Math.max(o.maxAttrib,s);const a=o.attribs[s];return a.enabled=!1,r.disableVertexAttribArray.apply(this,arguments)},e.bindBuffer=function(s,o){switch(s){case 34962:n.currentArrayBuffer=o;break;case 34963:n.currentVertexArrayObject.elementArrayBuffer=o;break}return r.bindBuffer.apply(this,arguments)},e.getVertexAttrib=function(s,o){const l=n.currentVertexArrayObject.attribs[s];switch(o){case 34975:return l.buffer;case 34338:return l.enabled;case 34339:return l.size;case 34340:return l.stride;case 34341:return l.type;case 34922:return l.normalized;default:return r.getVertexAttrib.apply(this,arguments)}},e.vertexAttribPointer=function(s,o,a,l,c,u){const f=n.currentVertexArrayObject;f.maxAttrib=Math.max(f.maxAttrib,s);const d=f.attribs[s];return d.buffer=n.currentArrayBuffer,d.size=o,d.type=a,d.normalized=l,d.stride=c,d.offset=u,d.recache(),r.vertexAttribPointer.apply(this,arguments)},e.instrumentExtension&&e.instrumentExtension(this,"OES_vertex_array_object"),e.canvas&&e.canvas.addEventListener("webglcontextrestored",()=>{tM("OESVertexArrayObject emulation library context restored"),n.reset_()},!0),this.reset_()};Fs.prototype.VERTEX_ARRAY_BINDING_OES=34229;Fs.prototype.reset_=function(){if(this.vertexArrayObjects!==void 0)for(let r=0;r<this.vertexArrayObjects.length;++r)this.vertexArrayObjects.isAlive=!1;const n=this.gl;this.maxVertexAttribs=n.getParameter(34921),this.defaultVertexArrayObject=new _c(this),this.currentVertexArrayObject=null,this.currentArrayBuffer=null,this.vertexArrayObjects=[this.defaultVertexArrayObject],this.bindVertexArrayOES(null)};Fs.prototype.createVertexArrayOES=function(){const e=new _c(this);return this.vertexArrayObjects.push(e),e};Fs.prototype.deleteVertexArrayOES=function(e){e.isAlive=!1,this.vertexArrayObjects.splice(this.vertexArrayObjects.indexOf(e),1),this.currentVertexArrayObject===e&&this.bindVertexArrayOES(null)};Fs.prototype.isVertexArrayOES=function(e){return!!(e&&e instanceof _c&&e.hasBeenBound&&e.ext===this)};Fs.prototype.bindVertexArrayOES=function(e){const n=this.gl;if(e&&!e.isAlive){nM(1282,"bindVertexArrayOES: attempt to bind deleted arrayObject");return}const r=this.original,i=this.currentVertexArrayObject;this.currentVertexArrayObject=e||this.defaultVertexArrayObject,this.currentVertexArrayObject.hasBeenBound=!0;const s=this.currentVertexArrayObject;if(i===s)return;(!i||s.elementArrayBuffer!==i.elementArrayBuffer)&&r.bindBuffer.call(n,34963,s.elementArrayBuffer);let o=this.currentArrayBuffer;const a=Math.max(i?i.maxAttrib:0,s.maxAttrib);for(let l=0;l<=a;l++){const c=s.attribs[l],u=i?i.attribs[l]:null;if((!i||c.enabled!==u.enabled)&&(c.enabled?r.enableVertexAttribArray.call(n,l):r.disableVertexAttribArray.call(n,l)),c.enabled){let f=!1;(!i||c.buffer!==u.buffer)&&(o!==c.buffer&&(r.bindBuffer.call(n,34962,c.buffer),o=c.buffer),f=!0),(f||c.cached!==u.cached)&&r.vertexAttribPointer.call(n,l,c.size,c.type,c.normalized,c.stride,c.offset)}}this.currentArrayBuffer!==o&&r.bindBuffer.call(n,34962,this.currentArrayBuffer)};function iM(t){if(typeof t.createVertexArray=="function")return;const e=t.getSupportedExtensions;t.getSupportedExtensions=function(){const i=e.call(this)||[];return i.indexOf("OES_vertex_array_object")<0&&i.push("OES_vertex_array_object"),i};const n=t.getExtension;t.getExtension=function(i){const s=n.call(this,i);return s||(i!=="OES_vertex_array_object"?null:(t.__OESVertexArrayObject||(this.__OESVertexArrayObject=new Fs(this)),this.__OESVertexArrayObject))}}const j1="OES_element_index",V1="WEBGL_draw_buffers",sM="EXT_disjoint_timer_query",oM="EXT_disjoint_timer_query_webgl2",aM="EXT_texture_filter_anisotropic",$1="WEBGL_debug_renderer_info",lM=35723,cM=4352,uM=36795,fM=34047,dM=37445,hM=37446,Ie=t=>le(t)?void 0:0,pM={3074:t=>le(t)?void 0:36064,[lM]:t=>le(t)?void 0:cM,35977:Ie,32937:Ie,[uM]:(t,e)=>{const n=le(t)?t.getExtension(oM):t.getExtension(sM);return n&&n.GPU_DISJOINT_EXT?e(n.GPU_DISJOINT_EXT):0},[dM]:(t,e)=>{const n=t.getExtension($1);return e(n&&n.UNMASKED_VENDOR_WEBGL||7936)},[hM]:(t,e)=>{const n=t.getExtension($1);return e(n&&n.UNMASKED_RENDERER_WEBGL||7937)},[fM]:(t,e)=>{const n=t.luma.extensions[aM];return n?e(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT):1},32883:Ie,35071:Ie,37447:Ie,36063:(t,e)=>{if(!le(t)){const n=t.getExtension(V1);return n?e(n.MAX_COLOR_ATTACHMENTS_WEBGL):0}},35379:Ie,35374:Ie,35377:Ie,34852:t=>{if(!le(t)){const e=t.getExtension(V1);return e?e.MAX_DRAW_BUFFERS_WEBGL:0}},36203:t=>t.getExtension(j1)?2147483647:65535,33001:t=>t.getExtension(j1)?16777216:65535,33e3:t=>16777216,37157:Ie,35373:Ie,35657:Ie,36183:Ie,37137:Ie,34045:Ie,35978:Ie,35979:Ie,35968:Ie,35376:Ie,35375:Ie,35659:Ie,37154:Ie,35371:Ie,35658:Ie,35076:Ie,35077:Ie,35380:Ie};function gM(t,e,n){const r=pM[n],i=typeof r=="function"?r(t,e,n):r;return i!==void 0?i:e(n)}const mM="OES_vertex_array_object",aP="ANGLE_instanced_arrays",yM="WEBGL_draw_buffers",vM="EXT_disjoint_timer_query",_M="EXT_texture_filter_anisotropic",bM="VertexArray requires WebGL2 or OES_vertex_array_object extension";function EM(t,e){return{webgl2:le(t),ext:t.getExtension(e)}}const lP={[mM]:{meta:{suffix:"OES"},createVertexArray:()=>{Bt(!1,bM)},deleteVertexArray:()=>{},bindVertexArray:()=>{},isVertexArray:()=>!1},[aP]:{meta:{suffix:"ANGLE"},vertexAttribDivisor(t,e){Bt(e===0,"WebGL instanced rendering not supported")},drawElementsInstanced:()=>{},drawArraysInstanced:()=>{}},[yM]:{meta:{suffix:"WEBGL"},drawBuffers:()=>{Bt(!1)}},[vM]:{meta:{suffix:"EXT"},createQuery:()=>{Bt(!1)},deleteQuery:()=>{Bt(!1)},beginQuery:()=>{Bt(!1)},endQuery:()=>{},getQuery(t,e){return this.getQueryObject(t,e)},getQueryParameter(t,e){return this.getQueryObject(t,e)},getQueryObject:()=>{}}},Fp={readBuffer:(t,e,n)=>{le(t)&&e(n)},getVertexAttrib:(t,e,n,r)=>{const{webgl2:i,ext:s}=EM(t,aP);let o;switch(r){case 35069:o=i?void 0:!1;break;case 35070:o=!i&&!s?0:void 0;break}return o!==void 0?o:e(n,r)},getProgramParameter:(t,e,n,r)=>{if(!le(t))switch(r){case 35967:return 35981;case 35971:return 0;case 35382:return 0}return e(n,r)},getInternalformatParameter:(t,e,n,r,i)=>{if(!le(t))switch(i){case 32937:return new Int32Array([0])}return t.getInternalformatParameter(n,r,i)},getTexParameter(t,e,n,r){switch(r){case 34046:const{extensions:i}=t.luma,s=i[_M];r=s&&s.TEXTURE_MAX_ANISOTROPY_EXT||34046;break}return e(n,r)},getParameter:gM,hint(t,e,n,r){return e(n,r)}};function wM(t){t.luma=t.luma||{};const{luma:e}=t;return e.polyfilled||(iM(t),xM(t),SM(t,lP),TM(t,{target:e,target2:t}),e.polyfilled=!0),t}globalThis.polyfillContext=wM;function xM(t){t.luma.extensions={};const e=t.getSupportedExtensions()||[];for(const n of e)t.luma[n]=t.getExtension(n)}function TM(t,e){let{target:n,target2:r}=e;Object.keys(Fp).forEach(i=>{if(typeof Fp[i]=="function"){const s=t[i]?t[i].bind(t):()=>{},o=Fp[i].bind(null,t,s);n[i]=o,r[i]=o}})}function SM(t,e){for(const n of Object.getOwnPropertyNames(e))n!=="overrides"&&PM(t,{extension:n,target:t.luma,target2:t})}function PM(t,e){let{extension:n,target:r,target2:i}=e;const s=lP[n];Bt(s);const{meta:o={}}=s,{suffix:a=""}=o,l=t.getExtension(n);for(const c of Object.keys(s)){const u="".concat(c).concat(a);let f=null;c==="meta"||typeof t[c]=="function"||(l&&typeof l[u]=="function"?f=function(){return l[u](...arguments)}:typeof s[c]=="function"&&(f=s[c].bind(r))),f&&(r[c]=f,i[c]=f)}}const jy={3042:!1,32773:new Float32Array([0,0,0,0]),32777:32774,34877:32774,32969:1,32968:0,32971:1,32970:0,3106:new Float32Array([0,0,0,0]),3107:[!0,!0,!0,!0],2884:!1,2885:1029,2929:!1,2931:1,2932:513,2928:new Float32Array([0,1]),2930:!0,3024:!0,36006:null,2886:2305,33170:4352,2849:1,32823:!1,32824:0,10752:0,32938:1,32939:!1,3089:!1,3088:new Int32Array([0,0,1024,1024]),2960:!1,2961:0,2968:4294967295,36005:4294967295,2962:519,2967:0,2963:4294967295,34816:519,36003:0,36004:4294967295,2964:7680,2965:7680,2966:7680,34817:7680,34818:7680,34819:7680,2978:[0,0,1024,1024],3333:4,3317:4,37440:!1,37441:!1,37443:37444,35723:4352,36010:null,35977:!1,3330:0,3332:0,3331:0,3314:0,32878:0,3316:0,3315:0,32877:0},si=(t,e,n)=>e?t.enable(n):t.disable(n),G1=(t,e,n)=>t.hint(n,e),rn=(t,e,n)=>t.pixelStorei(n,e),AM=(t,e)=>{const n=le(t)?36009:36160;return t.bindFramebuffer(n,e)},CM=(t,e)=>t.bindFramebuffer(36008,e);function za(t){return Array.isArray(t)||ArrayBuffer.isView(t)}const LM={3042:si,32773:(t,e)=>t.blendColor(...e),32777:"blendEquation",34877:"blendEquation",32969:"blendFunc",32968:"blendFunc",32971:"blendFunc",32970:"blendFunc",3106:(t,e)=>t.clearColor(...e),3107:(t,e)=>t.colorMask(...e),2884:si,2885:(t,e)=>t.cullFace(e),2929:si,2931:(t,e)=>t.clearDepth(e),2932:(t,e)=>t.depthFunc(e),2928:(t,e)=>t.depthRange(...e),2930:(t,e)=>t.depthMask(e),3024:si,35723:G1,36006:AM,2886:(t,e)=>t.frontFace(e),33170:G1,2849:(t,e)=>t.lineWidth(e),32823:si,32824:"polygonOffset",10752:"polygonOffset",35977:si,32938:"sampleCoverage",32939:"sampleCoverage",3089:si,3088:(t,e)=>t.scissor(...e),2960:si,2961:(t,e)=>t.clearStencil(e),2968:(t,e)=>t.stencilMaskSeparate(1028,e),36005:(t,e)=>t.stencilMaskSeparate(1029,e),2962:"stencilFuncFront",2967:"stencilFuncFront",2963:"stencilFuncFront",34816:"stencilFuncBack",36003:"stencilFuncBack",36004:"stencilFuncBack",2964:"stencilOpFront",2965:"stencilOpFront",2966:"stencilOpFront",34817:"stencilOpBack",34818:"stencilOpBack",34819:"stencilOpBack",2978:(t,e)=>t.viewport(...e),3333:rn,3317:rn,37440:rn,37441:rn,37443:rn,3330:rn,3332:rn,3331:rn,36010:CM,3314:rn,32878:rn,3316:rn,3315:rn,32877:rn,framebuffer:(t,e)=>{const n=e&&"handle"in e?e.handle:e;return t.bindFramebuffer(36160,n)},blend:(t,e)=>e?t.enable(3042):t.disable(3042),blendColor:(t,e)=>t.blendColor(...e),blendEquation:(t,e)=>{e=za(e)?e:[e,e],t.blendEquationSeparate(...e)},blendFunc:(t,e)=>{e=za(e)&&e.length===2?[...e,...e]:e,t.blendFuncSeparate(...e)},clearColor:(t,e)=>t.clearColor(...e),clearDepth:(t,e)=>t.clearDepth(e),clearStencil:(t,e)=>t.clearStencil(e),colorMask:(t,e)=>t.colorMask(...e),cull:(t,e)=>e?t.enable(2884):t.disable(2884),cullFace:(t,e)=>t.cullFace(e),depthTest:(t,e)=>e?t.enable(2929):t.disable(2929),depthFunc:(t,e)=>t.depthFunc(e),depthMask:(t,e)=>t.depthMask(e),depthRange:(t,e)=>t.depthRange(...e),dither:(t,e)=>e?t.enable(3024):t.disable(3024),derivativeHint:(t,e)=>{t.hint(35723,e)},frontFace:(t,e)=>t.frontFace(e),mipmapHint:(t,e)=>t.hint(33170,e),lineWidth:(t,e)=>t.lineWidth(e),polygonOffsetFill:(t,e)=>e?t.enable(32823):t.disable(32823),polygonOffset:(t,e)=>t.polygonOffset(...e),sampleCoverage:(t,e)=>t.sampleCoverage(...e),scissorTest:(t,e)=>e?t.enable(3089):t.disable(3089),scissor:(t,e)=>t.scissor(...e),stencilTest:(t,e)=>e?t.enable(2960):t.disable(2960),stencilMask:(t,e)=>{e=za(e)?e:[e,e];const[n,r]=e;t.stencilMaskSeparate(1028,n),t.stencilMaskSeparate(1029,r)},stencilFunc:(t,e)=>{e=za(e)&&e.length===3?[...e,...e]:e;const[n,r,i,s,o,a]=e;t.stencilFuncSeparate(1028,n,r,i),t.stencilFuncSeparate(1029,s,o,a)},stencilOp:(t,e)=>{e=za(e)&&e.length===3?[...e,...e]:e;const[n,r,i,s,o,a]=e;t.stencilOpSeparate(1028,n,r,i),t.stencilOpSeparate(1029,s,o,a)},viewport:(t,e)=>t.viewport(...e)};function qe(t,e,n){return e[t]!==void 0?e[t]:n[t]}const RM={blendEquation:(t,e,n)=>t.blendEquationSeparate(qe(32777,e,n),qe(34877,e,n)),blendFunc:(t,e,n)=>t.blendFuncSeparate(qe(32969,e,n),qe(32968,e,n),qe(32971,e,n),qe(32970,e,n)),polygonOffset:(t,e,n)=>t.polygonOffset(qe(32824,e,n),qe(10752,e,n)),sampleCoverage:(t,e,n)=>t.sampleCoverage(qe(32938,e,n),qe(32939,e,n)),stencilFuncFront:(t,e,n)=>t.stencilFuncSeparate(1028,qe(2962,e,n),qe(2967,e,n),qe(2963,e,n)),stencilFuncBack:(t,e,n)=>t.stencilFuncSeparate(1029,qe(34816,e,n),qe(36003,e,n),qe(36004,e,n)),stencilOpFront:(t,e,n)=>t.stencilOpSeparate(1028,qe(2964,e,n),qe(2965,e,n),qe(2966,e,n)),stencilOpBack:(t,e,n)=>t.stencilOpSeparate(1029,qe(34817,e,n),qe(34818,e,n),qe(34819,e,n))},W1={enable:(t,e)=>t({[e]:!0}),disable:(t,e)=>t({[e]:!1}),pixelStorei:(t,e,n)=>t({[e]:n}),hint:(t,e,n)=>t({[e]:n}),bindFramebuffer:(t,e,n)=>{switch(e){case 36160:return t({36006:n,36010:n});case 36009:return t({36006:n});case 36008:return t({36010:n});default:return null}},blendColor:(t,e,n,r,i)=>t({32773:new Float32Array([e,n,r,i])}),blendEquation:(t,e)=>t({32777:e,34877:e}),blendEquationSeparate:(t,e,n)=>t({32777:e,34877:n}),blendFunc:(t,e,n)=>t({32969:e,32968:n,32971:e,32970:n}),blendFuncSeparate:(t,e,n,r,i)=>t({32969:e,32968:n,32971:r,32970:i}),clearColor:(t,e,n,r,i)=>t({3106:new Float32Array([e,n,r,i])}),clearDepth:(t,e)=>t({2931:e}),clearStencil:(t,e)=>t({2961:e}),colorMask:(t,e,n,r,i)=>t({3107:[e,n,r,i]}),cullFace:(t,e)=>t({2885:e}),depthFunc:(t,e)=>t({2932:e}),depthRange:(t,e,n)=>t({2928:new Float32Array([e,n])}),depthMask:(t,e)=>t({2930:e}),frontFace:(t,e)=>t({2886:e}),lineWidth:(t,e)=>t({2849:e}),polygonOffset:(t,e,n)=>t({32824:e,10752:n}),sampleCoverage:(t,e,n)=>t({32938:e,32939:n}),scissor:(t,e,n,r,i)=>t({3088:new Int32Array([e,n,r,i])}),stencilMask:(t,e)=>t({2968:e,36005:e}),stencilMaskSeparate:(t,e,n)=>t({[e===1028?2968:36005]:n}),stencilFunc:(t,e,n,r)=>t({2962:e,2967:n,2963:r,34816:e,36003:n,36004:r}),stencilFuncSeparate:(t,e,n,r,i)=>t({[e===1028?2962:34816]:n,[e===1028?2967:36003]:r,[e===1028?2963:36004]:i}),stencilOp:(t,e,n,r)=>t({2964:e,2965:n,2966:r,34817:e,34818:n,34819:r}),stencilOpSeparate:(t,e,n,r,i)=>t({[e===1028?2964:34817]:n,[e===1028?2965:34818]:r,[e===1028?2966:34819]:i}),viewport:(t,e,n,r,i)=>t({2978:[e,n,r,i]})},ir=(t,e)=>t.isEnabled(e),H1={3042:ir,2884:ir,2929:ir,3024:ir,32823:ir,32926:ir,32928:ir,3089:ir,2960:ir,35977:ir};function cP(t){for(const e in t)return!1;return!0}function OM(t,e){if(t===e)return!0;const n=Array.isArray(t)||ArrayBuffer.isView(t),r=Array.isArray(e)||ArrayBuffer.isView(e);if(n&&r&&t.length===e.length){for(let i=0;i<t.length;++i)if(t[i]!==e[i])return!1;return!0}return!1}function X1(t,e){const n=t[e].bind(t);t[e]=function(){const i=arguments.length<=0?void 0:arguments[0];return i in t.state.cache?t.state.enable?t.state.cache[i]:n(...arguments):n(...arguments)},Object.defineProperty(t[e],"name",{value:"".concat(e,"-from-cache"),configurable:!1})}function IM(t,e,n){const r=t[e].bind(t);t[e]=function(){for(var s=arguments.length,o=new Array(s),a=0;a<s;a++)o[a]=arguments[a];const{valueChanged:l,oldValue:c}=n(t.state._updateCache,...o);return l&&r(...o),c},Object.defineProperty(t[e],"name",{value:"".concat(e,"-to-cache"),configurable:!1})}function MM(t){const e=t.useProgram.bind(t);t.useProgram=function(r){t.state.program!==r&&(e(r),t.state.program=r)}}class kM{constructor(e){let{copyState:n=!1,log:r=()=>{}}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.gl=e,this.program=null,this.stateStack=[],this.enable=!0,this.cache=n?FM(e):Object.assign({},jy),this.log=r,this._updateCache=this._updateCache.bind(this),Object.seal(this)}push(){this.stateStack.push({})}pop(){Bt(this.stateStack.length>0);const e=this.stateStack[this.stateStack.length-1];Xr(this.gl,e),this.stateStack.pop()}_updateCache(e){let n=!1,r;const i=this.stateStack.length>0&&this.stateStack[this.stateStack.length-1];for(const s in e){Bt(s!==void 0);const o=e[s],a=this.cache[s];OM(o,a)||(n=!0,r=a,i&&!(s in i)&&(i[s]=a),this.cache[s]=o)}return{valueChanged:n,oldValue:r}}}function uP(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{enable:n=!0,copyState:r}=e;if(Bt(r!==void 0),!t.state){const{polyfillContext:i}=globalThis;i&&i(t),t.state=new kM(t,{copyState:r}),MM(t);for(const s in W1){const o=W1[s];IM(t,s,o)}X1(t,"getParameter"),X1(t,"isEnabled")}return t.state.enable=n,t}function NM(t){t.state||uP(t,{copyState:!1}),t.state.push()}function Y1(t){Bt(t.state),t.state.pop()}function Xr(t,e){if(Bt(ch(t),"setParameters requires a WebGL context"),cP(e))return;const n={};for(const i in e){const s=Number(i),o=LM[i];o&&(typeof o=="string"?n[o]=!0:o(t,e[i],s))}const r=t.state&&t.state.cache;if(r)for(const i in n){const s=RM[i];s(t,e,r)}}function FM(t,e){if(e=e||jy,typeof e=="number"){const i=e,s=H1[i];return s?s(t,i):t.getParameter(i)}const n=Array.isArray(e)?e:Object.keys(e),r={};for(const i of n){const s=H1[i];r[i]=s?s(t,Number(i)):t.getParameter(Number(i))}return r}function DM(t){Xr(t,jy)}function Zn(t,e,n){if(cP(e))return n(t);const{nocatch:r=!0}=e;NM(t),Xr(t,e);let i;if(r)i=n(t),Y1(t);else try{i=n(t)}finally{Y1(t)}return i}function Ko(t){const{luma:e}=t;if(t.canvas&&e){const n=e.canvasSizeInfo,r="clientWidth"in n?n.clientWidth:t.canvas.clientWidth;return r?t.drawingBufferWidth/r:1}return 1}function Dp(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;const r=Ko(t),i=t.drawingBufferWidth,s=t.drawingBufferHeight;return zM(e,r,i,s,n)}function BM(t){const e=typeof window>"u"?1:window.devicePixelRatio||1;return Number.isFinite(t)?t<=0?1:t:t?e:1}function zM(t,e,n,r,i){const s=K1(t[0],e,n);let o=q1(t[1],e,r,i),a=K1(t[0]+1,e,n);const l=a===n-1?a:a-1;a=q1(t[1]+1,e,r,i);let c;return i?(a=a===0?a:a+1,c=o,o=a):c=a===r-1?a:a-1,{x:s,y:o,width:Math.max(l-s+1,1),height:Math.max(c-o+1,1)}}function K1(t,e,n){return Math.min(Math.round(t*e),n-1)}function q1(t,e,n,r){return r?Math.max(0,n-1-Math.round(t*e)):Math.min(Math.round(t*e),n-1)}const Vy=Qr(),UM=Vy&&typeof document<"u",fP={webgl2:!0,webgl1:!0,throwOnError:!0,manageState:!0,canvas:null,debug:!1,width:800,height:600};function dP(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Bt(Vy,`createGLContext only available in the browser.
Create your own headless context or use 'createHeadlessContext' from @luma.gl/test-utils`),t=Object.assign({},fP,t);const{width:e,height:n}=t;function r(a){if(t.throwOnError)throw new Error(a);return console.error(a),null}t.onError=r;let i;const{canvas:s}=t,o=GM({canvas:s,width:e,height:n,onError:r});return i=$M(o,t),i?(i=$y(i,t),WM(i),i):null}function $y(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!t||t._instrumented)return t;t._version=t._version||HM(t),t.luma=t.luma||{},t.luma.canvasSizeInfo=t.luma.canvasSizeInfo||{},e=Object.assign({},fP,e);const{manageState:n,debug:r}=e;return n&&uP(t,{copyState:!1,log:function(){for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return K.log(1,...s)()}}),Vy&&r&&(globalThis.makeDebugContext?(t=globalThis.makeDebugContext(t,e),K.level=Math.max(K.level,1)):K.warn('WebGL debug mode not activated. import "@luma.gl/debug" to enable.')()),t._instrumented=!0,t}function jM(t){const e=t.getParameter(7936),n=t.getParameter(7937),r=t.getExtension("WEBGL_debug_renderer_info"),i=r&&t.getParameter(r.UNMASKED_VENDOR_WEBGL||7936),s=r&&t.getParameter(r.UNMASKED_RENDERER_WEBGL||7937);return{vendor:i||e,renderer:s||n,vendorMasked:e,rendererMasked:n,version:t.getParameter(7938),shadingLanguageVersion:t.getParameter(35724)}}function VM(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t.canvas){const r=BM(e.useDevicePixels);XM(t,r,e);return}const n=t.getExtension("STACKGL_resize_drawingbuffer");n&&"width"in e&&"height"in e&&n.resize(e.width,e.height)}function $M(t,e){const{onError:n}=e;let r=null;const i=l=>r=l.statusMessage||r;t.addEventListener("webglcontextcreationerror",i,!1);const{webgl1:s=!0,webgl2:o=!0}=e;let a=null;return o&&(a=a||t.getContext("webgl2",e),a=a||t.getContext("experimental-webgl2",e)),s&&(a=a||t.getContext("webgl",e),a=a||t.getContext("experimental-webgl",e)),t.removeEventListener("webglcontextcreationerror",i,!1),a?(e.onContextLost&&t.addEventListener("webglcontextlost",e.onContextLost,!1),e.onContextRestored&&t.addEventListener("webglcontextrestored",e.onContextRestored,!1),a):n("Failed to create ".concat(o&&!s?"WebGL2":"WebGL"," context: ").concat(r||"Unknown error"))}function GM(t){let{canvas:e,width:n=800,height:r=600,onError:i}=t,s;return typeof e=="string"?(UM&&document.readyState==="complete"||i("createGLContext called on canvas '".concat(e,"' before page was loaded")),s=document.getElementById(e)):e?s=e:(s=document.createElement("canvas"),s.id="lumagl-canvas",s.style.width=Number.isFinite(n)?"".concat(n,"px"):"100%",s.style.height=Number.isFinite(r)?"".concat(r,"px"):"100%",document.body.insertBefore(s,document.body.firstChild)),s}function WM(t){const e=le(t)?"WebGL2":"WebGL1",n=jM(t),r=n?"(".concat(n.vendor,",").concat(n.renderer,")"):"",i=t.debug?" debug":"";K.info(1,"".concat(e).concat(i," context ").concat(r))()}function HM(t){return typeof WebGL2RenderingContext<"u"&&t instanceof WebGL2RenderingContext?2:1}function XM(t,e,n){let r="width"in n?n.width:t.canvas.clientWidth,i="height"in n?n.height:t.canvas.clientHeight;(!r||!i)&&(K.log(1,"Canvas clientWidth/clientHeight is 0")(),e=1,r=t.canvas.width||1,i=t.canvas.height||1),t.luma=t.luma||{},t.luma.canvasSizeInfo=t.luma.canvasSizeInfo||{};const s=t.luma.canvasSizeInfo;if(s.clientWidth!==r||s.clientHeight!==i||s.devicePixelRatio!==e){let o=e;const a=Math.floor(r*o),l=Math.floor(i*o);t.canvas.width=a,t.canvas.height=l,(t.drawingBufferWidth!==a||t.drawingBufferHeight!==l)&&(K.warn("Device pixel ratio clamped")(),o=Math.min(t.drawingBufferWidth/r,t.drawingBufferHeight/i),t.canvas.width=Math.floor(r*o),t.canvas.height=Math.floor(i*o)),Object.assign(t.luma.canvasSizeInfo,{clientWidth:r,clientHeight:i,devicePixelRatio:e})}}function Z1(){let t;if(typeof window<"u"&&window.performance)t=window.performance.now();else if(typeof process<"u"&&process.hrtime){const e=process.hrtime();t=e[0]*1e3+e[1]/1e6}else t=Date.now();return t}class Q1{constructor(e,n){_(this,"name",void 0),_(this,"type",void 0),_(this,"sampleSize",1),_(this,"time",void 0),_(this,"count",void 0),_(this,"samples",void 0),_(this,"lastTiming",void 0),_(this,"lastSampleTime",void 0),_(this,"lastSampleCount",void 0),_(this,"_count",0),_(this,"_time",0),_(this,"_samples",0),_(this,"_startTime",0),_(this,"_timerPending",!1),this.name=e,this.type=n,this.reset()}setSampleSize(e){return this.sampleSize=e,this}incrementCount(){return this.addCount(1),this}decrementCount(){return this.subtractCount(1),this}addCount(e){return this._count+=e,this._samples++,this._checkSampling(),this}subtractCount(e){return this._count-=e,this._samples++,this._checkSampling(),this}addTime(e){return this._time+=e,this.lastTiming=e,this._samples++,this._checkSampling(),this}timeStart(){return this._startTime=Z1(),this._timerPending=!0,this}timeEnd(){return this._timerPending?(this.addTime(Z1()-this._startTime),this._timerPending=!1,this._checkSampling(),this):this}getSampleAverageCount(){return this.sampleSize>0?this.lastSampleCount/this.sampleSize:0}getSampleAverageTime(){return this.sampleSize>0?this.lastSampleTime/this.sampleSize:0}getSampleHz(){return this.lastSampleTime>0?this.sampleSize/(this.lastSampleTime/1e3):0}getAverageCount(){return this.samples>0?this.count/this.samples:0}getAverageTime(){return this.samples>0?this.time/this.samples:0}getHz(){return this.time>0?this.samples/(this.time/1e3):0}reset(){return this.time=0,this.count=0,this.samples=0,this.lastTiming=0,this.lastSampleTime=0,this.lastSampleCount=0,this._count=0,this._time=0,this._samples=0,this._startTime=0,this._timerPending=!1,this}_checkSampling(){this._samples===this.sampleSize&&(this.lastSampleTime=this._time,this.lastSampleCount=this._count,this.count+=this._count,this.time+=this._time,this.samples+=this._samples,this._time=0,this._count=0,this._samples=0)}}class Gy{constructor(e){_(this,"id",void 0),_(this,"stats",{}),this.id=e.id,this.stats={},this._initializeStats(e.stats),Object.seal(this)}get(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"count";return this._getOrCreate({name:e,type:n})}get size(){return Object.keys(this.stats).length}reset(){for(const e in this.stats)this.stats[e].reset();return this}forEach(e){for(const n in this.stats)e(this.stats[n])}getTable(){const e={};return this.forEach(n=>{e[n.name]={time:n.time||0,count:n.count||0,average:n.getAverageTime()||0,hz:n.getHz()||0}}),e}_initializeStats(){(arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).forEach(n=>this._getOrCreate(n))}_getOrCreate(e){if(!e||!e.name)return null;const{name:n,type:r}=e;return this.stats[n]||(e instanceof Q1?this.stats[n]=e:this.stats[n]=new Q1(n,r)),this.stats[n]}}const bl="8.5.21",YM="set luma.log.level=1 (or higher) to trace rendering";class KM{constructor(){this.stats=new Map}get(e){return this.stats.has(e)||this.stats.set(e,new Gy({id:e})),this.stats.get(e)}}const ds=new KM;if(globalThis.luma&&globalThis.luma.VERSION!==bl)throw new Error("luma.gl - multiple VERSIONs detected: ".concat(globalThis.luma.VERSION," vs ").concat(bl));globalThis.luma||(Qr()&&K.log(1,"luma.gl ".concat(bl," - ").concat(YM))(),globalThis.luma=globalThis.luma||{VERSION:bl,version:bl,log:K,stats:ds,globals:{modules:{},nodeIO:{}}});function qM(t){return typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame(t):setTimeout(t,1e3/60)}function ZM(t){return typeof window<"u"&&window.cancelAnimationFrame?window.cancelAnimationFrame(t):clearTimeout(t)}function $(t,e){if(!t)throw new Error(e||"luma.gl: assertion failed.")}function Bp(t,e){if(typeof e!="string")return e;const n=Number(e);if(!isNaN(n))return n;e=e.replace(/^.*\./,"");const r=t[e];return $(r!==void 0,"Accessing undefined constant GL.".concat(e)),r}function Ri(t,e){e=Number(e);for(const n in t)if(t[n]===e)return"GL.".concat(n);return String(e)}const zp={};function Fi(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"id";zp[t]=zp[t]||1;const e=zp[t]++;return"".concat(t,"-").concat(e)}function J1(t){return $(typeof t=="number","Input must be a number"),t&&(t&t-1)===0}function qo(t){let e=!0;for(const n in t){e=!1;break}return e}function hP(t,e,n,r){const i="See luma.gl ".concat(n," Upgrade Guide at https://luma.gl/docs/upgrade-guide"),s=Object.getPrototypeOf(t);r.forEach(o=>{s.methodName||(s[o]=()=>{throw K.removed("Calling removed method ".concat(e,".").concat(o,": "),i)(),new Error(o)})})}const Zs="Resource subclass must define virtual methods";let Jr=class{get[Symbol.toStringTag](){return"Resource"}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};uh(e);const{id:r,userData:i={}}=n;this.gl=e,this.gl2=e,this.id=r||Fi(this[Symbol.toStringTag]),this.userData=i,this._bound=!1,this._handle=n.handle,this._handle===void 0&&(this._handle=this._createHandle()),this.byteLength=0,this._addStats()}toString(){return"".concat(this[Symbol.toStringTag]||this.constructor.name,"(").concat(this.id,")")}get handle(){return this._handle}delete(){let{deleteChildren:e=!1}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const n=this._handle&&this._deleteHandle(this._handle);return this._handle&&this._removeStats(),this._handle=null,n&&e&&n.filter(Boolean).forEach(r=>r.delete()),this}bind(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.handle;if(typeof e!="function")return this._bindHandle(e),this;let n;return this._bound?n=e():(this._bindHandle(this.handle),this._bound=!0,n=e(),this._bound=!1,this._bindHandle(null)),n}unbind(){this.bind(null)}getParameter(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};e=Bp(this.gl,e),$(e);const i=(this.constructor.PARAMETERS||{})[e];if(i){const s=le(this.gl);if(!((!("webgl2"in i)||s)&&(!("extension"in i)||this.gl.getExtension(i.extension)))){const a=i.webgl1,l="webgl2"in i?i.webgl2:i.webgl1;return s?l:a}}return this._getParameter(e,n)}getParameters(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{parameters:n,keys:r}=e,i=this.constructor.PARAMETERS||{},s=le(this.gl),o={},a=n||Object.keys(i);for(const l of a){const c=i[l];if(c&&(!("webgl2"in c)||s)&&(!("extension"in c)||this.gl.getExtension(c.extension))){const f=r?Ri(this.gl,l):l;o[f]=this.getParameter(l,e),r&&c.type==="GLenum"&&(o[f]=Ri(this.gl,o[f]))}}return o}setParameter(e,n){e=Bp(this.gl,e),$(e);const i=(this.constructor.PARAMETERS||{})[e];if(i){const s=le(this.gl);if(!((!("webgl2"in i)||s)&&(!("extension"in i)||this.gl.getExtension(i.extension))))throw new Error("Parameter not available on this platform");i.type==="GLenum"&&(n=Bp(n))}return this._setParameter(e,n),this}setParameters(e){for(const n in e)this.setParameter(n,e[n]);return this}stubRemovedMethods(e,n,r){return hP(this,e,n,r)}initialize(e){}_createHandle(){throw new Error(Zs)}_deleteHandle(){throw new Error(Zs)}_bindHandle(e){throw new Error(Zs)}_getOptsFromHandle(){throw new Error(Zs)}_getParameter(e,n){throw new Error(Zs)}_setParameter(e,n){throw new Error(Zs)}_context(){return this.gl.luma=this.gl.luma||{},this.gl.luma}_addStats(){const e=this[Symbol.toStringTag],n=ds.get("Resource Counts");n.get("Resources Created").incrementCount(),n.get("".concat(e,"s Created")).incrementCount(),n.get("".concat(e,"s Active")).incrementCount()}_removeStats(){const e=this[Symbol.toStringTag];ds.get("Resource Counts").get("".concat(e,"s Active")).decrementCount()}_trackAllocatedMemory(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this[Symbol.toStringTag];this._trackAllocatedMemoryForContext(e,n),this._trackAllocatedMemoryForContext(e,n,this.gl.canvas&&this.gl.canvas.id),this.byteLength=e}_trackAllocatedMemoryForContext(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this[Symbol.toStringTag],r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"";const i=ds.get("Memory Usage".concat(r));i.get("GPU Memory").addCount(e),i.get("".concat(n," Memory")).addCount(e)}_trackDeallocatedMemory(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this[Symbol.toStringTag];this._trackDeallocatedMemoryForContext(e),this._trackDeallocatedMemoryForContext(e,this.gl.canvas&&this.gl.canvas.id),this.byteLength=0}_trackDeallocatedMemoryForContext(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this[Symbol.toStringTag],n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const r=ds.get("Memory Usage".concat(n));r.get("GPU Memory").subtractCount(this.byteLength),r.get("".concat(e," Memory")).subtractCount(this.byteLength)}};const QM="Failed to deduce GL constant from typed array";function Im(t){switch(ArrayBuffer.isView(t)?t.constructor:t){case Float32Array:return 5126;case Uint16Array:return 5123;case Uint32Array:return 5125;case Uint8Array:return 5121;case Uint8ClampedArray:return 5121;case Int8Array:return 5120;case Int16Array:return 5122;case Int32Array:return 5124;default:throw new Error(QM)}}function $l(t){let{clamped:e=!0}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};switch(t){case 5126:return Float32Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return e?Uint8ClampedArray:Uint8Array;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Failed to deduce typed array type from GL constant")}}function JM(t){let{data:e,width:n,height:r,bytesPerPixel:i=4,temp:s}=t;const o=n*i;s=s||new Uint8Array(o);for(let a=0;a<r/2;++a){const l=a*o,c=(r-a-1)*o;s.set(e.subarray(l,l+o)),e.copyWithin(l,c,c+o),e.set(s,c)}}function ek(t){let{data:e,width:n,height:r}=t;const i=Math.round(n/2),s=Math.round(r/2),o=new Uint8Array(i*s*4);for(let a=0;a<s;a++)for(let l=0;l<i;l++)for(let c=0;c<4;c++)o[(a*i+l)*4+c]=e[(a*2*n+l*2)*4+c];return{data:o,width:i,height:s}}function Mm(t,e,n){const{removedProps:r={},deprecatedProps:i={},replacedProps:s={}}=n;for(const a in r)if(a in e){const c=r[a]?"".concat(t,".").concat(r[a]):"N/A";K.removed("".concat(t,".").concat(a),c)()}for(const a in i)if(a in e){const l=i[a];K.deprecated("".concat(t,".").concat(a),"".concat(t,".").concat(l))()}let o=null;for(const a in s)if(a in e){const l=s[a];K.deprecated("".concat(t,".").concat(a),"".concat(t,".").concat(l))(),o=o||Object.assign({},e),o[l]=e[a],delete o[a]}return o||e}const tk={offset:0,stride:0,type:5126,size:1,divisor:0,normalized:!1,integer:!1},nk={deprecatedProps:{instanced:"divisor",isInstanced:"divisor"}};class cn{static getBytesPerElement(e){return $l(e.type||5126).BYTES_PER_ELEMENT}static getBytesPerVertex(e){return $(e.size),$l(e.type||5126).BYTES_PER_ELEMENT*e.size}static resolve(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return new cn(tk,...n)}constructor(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];n.forEach(i=>this._assign(i)),Object.freeze(this)}toString(){return JSON.stringify(this)}get BYTES_PER_ELEMENT(){return cn.getBytesPerElement(this)}get BYTES_PER_VERTEX(){return cn.getBytesPerVertex(this)}_assign(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return e=Mm("Accessor",e,nk),e.type!==void 0&&(this.type=e.type,(e.type===5124||e.type===5125)&&(this.integer=!0)),e.size!==void 0&&(this.size=e.size),e.offset!==void 0&&(this.offset=e.offset),e.stride!==void 0&&(this.stride=e.stride),e.normalized!==void 0&&(this.normalized=e.normalized),e.integer!==void 0&&(this.integer=e.integer),e.divisor!==void 0&&(this.divisor=e.divisor),e.buffer!==void 0&&(this.buffer=e.buffer),e.index!==void 0&&(typeof e.index=="boolean"?this.index=e.index?1:0:this.index=e.index),e.instanced!==void 0&&(this.divisor=e.instanced?1:0),e.isInstanced!==void 0&&(this.divisor=e.isInstanced?1:0),this}}const eb=10,pP={offset:"accessor.offset",stride:"accessor.stride",type:"accessor.type",size:"accessor.size",divisor:"accessor.divisor",normalized:"accessor.normalized",integer:"accessor.integer",instanced:"accessor.divisor",isInstanced:"accessor.divisor"},rk={removedProps:{},replacedProps:{bytes:"byteLength"},deprecatedProps:pP},ik={removedProps:pP};let Ae=class extends Jr{get[Symbol.toStringTag](){return"Buffer"}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(e,n),this.stubRemovedMethods("Buffer","v6.0",["layout","setLayout","getIndexedParameter"]),this.target=n.target||(this.gl.webgl2?36662:34962),this.initialize(n),Object.seal(this)}getElementCount(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.accessor;return Math.round(this.byteLength/cn.getBytesPerElement(e))}getVertexCount(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.accessor;return Math.round(this.byteLength/cn.getBytesPerVertex(e))}initialize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return ArrayBuffer.isView(e)&&(e={data:e}),Number.isFinite(e)&&(e={byteLength:e}),e=Mm("Buffer",e,rk),this.usage=e.usage||35044,this.debugData=null,this.setAccessor(Object.assign({},e,e.accessor)),e.data?this._setData(e.data,e.offset,e.byteLength):this._setByteLength(e.byteLength||0),this}setProps(e){return e=Mm("Buffer",e,ik),"accessor"in e&&this.setAccessor(e.accessor),this}setAccessor(e){return e=Object.assign({},e),delete e.buffer,this.accessor=new cn(e),this}reallocate(e){return e>this.byteLength?(this._setByteLength(e),!0):(this.bytesUsed=e,!1)}setData(e){return this.initialize(e)}subData(e){ArrayBuffer.isView(e)&&(e={data:e});const{data:n,offset:r=0,srcOffset:i=0}=e,s=e.byteLength||e.length;$(n);const o=this.gl.webgl2?36663:this.target;return this.gl.bindBuffer(o,this.handle),i!==0||s!==void 0?(Ot(this.gl),this.gl.bufferSubData(this.target,r,n,i,s)):this.gl.bufferSubData(o,r,n),this.gl.bindBuffer(o,null),this.debugData=null,this._inferType(n),this}copyData(e){let{sourceBuffer:n,readOffset:r=0,writeOffset:i=0,size:s}=e;const{gl:o}=this;return Ot(o),o.bindBuffer(36662,n.handle),o.bindBuffer(36663,this.handle),o.copyBufferSubData(36662,36663,r,i,s),o.bindBuffer(36662,null),o.bindBuffer(36663,null),this.debugData=null,this}getData(){let{dstData:e=null,srcByteOffset:n=0,dstOffset:r=0,length:i=0}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Ot(this.gl);const s=$l(this.accessor.type||5126,{clamped:!1}),o=this._getAvailableElementCount(n),a=r;let l,c;e?(c=e.length,l=c-a):(l=Math.min(o,i||o),c=a+l);const u=Math.min(o,l);return i=i||u,$(i<=u),e=e||new s(c),this.gl.bindBuffer(36662,this.handle),this.gl.getBufferSubData(36662,n,e,r,i),this.gl.bindBuffer(36662,null),e}bind(){let{target:e=this.target,index:n=this.accessor&&this.accessor.index,offset:r=0,size:i}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return e===35345||e===35982?i!==void 0?this.gl.bindBufferRange(e,n,this.handle,r,i):($(r===0),this.gl.bindBufferBase(e,n,this.handle)):this.gl.bindBuffer(e,this.handle),this}unbind(){let{target:e=this.target,index:n=this.accessor&&this.accessor.index}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return e===35345||e===35982?this.gl.bindBufferBase(e,n,null):this.gl.bindBuffer(e,null),this}getDebugData(){return this.debugData?{data:this.debugData,changed:!1}:(this.debugData=this.getData({length:Math.min(eb,this.byteLength)}),{data:this.debugData,changed:!0})}invalidateDebugData(){this.debugData=null}_setData(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.byteLength+n;$(ArrayBuffer.isView(e)),this._trackDeallocatedMemory();const i=this._getTarget();this.gl.bindBuffer(i,this.handle),this.gl.bufferData(i,r,this.usage),this.gl.bufferSubData(i,n,e),this.gl.bindBuffer(i,null),this.debugData=e.slice(0,eb),this.bytesUsed=r,this._trackAllocatedMemory(r);const s=Im(e);return $(s),this.setAccessor(new cn(this.accessor,{type:s})),this}_setByteLength(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.usage;$(e>=0),this._trackDeallocatedMemory();let r=e;e===0&&(r=new Float32Array(0));const i=this._getTarget();return this.gl.bindBuffer(i,this.handle),this.gl.bufferData(i,r,n),this.gl.bindBuffer(i,null),this.usage=n,this.debugData=null,this.bytesUsed=e,this._trackAllocatedMemory(e),this}_getTarget(){return this.gl.webgl2?36663:this.target}_getAvailableElementCount(e){const n=$l(this.accessor.type||5126,{clamped:!1}),r=e/n.BYTES_PER_ELEMENT;return this.getElementCount()-r}_inferType(e){this.accessor.type||this.setAccessor(new cn(this.accessor,{type:Im(e)}))}_createHandle(){return this.gl.createBuffer()}_deleteHandle(){this.gl.deleteBuffer(this.handle),this._trackDeallocatedMemory()}_getParameter(e){this.gl.bindBuffer(this.target,this.handle);const n=this.gl.getBufferParameter(this.target,e);return this.gl.bindBuffer(this.target,null),n}get type(){return K.deprecated("Buffer.type","Buffer.accessor.type")(),this.accessor.type}get bytes(){return K.deprecated("Buffer.bytes","Buffer.byteLength")(),this.byteLength}setByteLength(e){return K.deprecated("setByteLength","reallocate")(),this.reallocate(e)}updateAccessor(e){return K.deprecated("updateAccessor(...)","setAccessor(new Accessor(buffer.accessor, ...)")(),this.accessor=new cn(this.accessor,e),this}};const Wy={6407:{dataFormat:6407,types:[5121,33635]},6408:{dataFormat:6408,types:[5121,32819,32820]},6406:{dataFormat:6406,types:[5121]},6409:{dataFormat:6409,types:[5121]},6410:{dataFormat:6410,types:[5121]},33326:{dataFormat:6403,types:[5126],gl2:!0},33328:{dataFormat:33319,types:[5126],gl2:!0},34837:{dataFormat:6407,types:[5126],gl2:!0},34836:{dataFormat:6408,types:[5126],gl2:!0}},gP={6403:1,36244:1,33319:2,33320:2,6407:3,36248:3,6408:4,36249:4,6402:1,34041:1,6406:1,6409:1,6410:2},mP={5126:4,5125:4,5124:4,5123:2,5122:2,5131:2,5120:1,5121:1};function sk(t,e){const n=Wy[e];if(!n)return!1;if(n.gl1===void 0&&n.gl2===void 0)return!0;const r=le(t)&&n.gl2||n.gl1;return typeof r=="string"?t.getExtension(r):r}function ok(t,e){const n=Wy[e];switch(n&&n.types[0]){case 5126:return t.getExtension("OES_texture_float_linear");case 5131:return t.getExtension("OES_texture_half_float_linear");default:return!0}}const ak=[9729,9728],tb=globalThis.WebGLBuffer||function(){};class Ss extends Jr{get[Symbol.toStringTag](){return"Texture"}static isSupported(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{format:r,linearFiltering:i}=n;let s=!0;return r&&(s=s&&sk(e,r),s=s&&(!i||ok(e,r))),s}constructor(e,n){const{id:r=Fi("texture"),handle:i,target:s}=n;super(e,{id:r,handle:i}),this.target=s,this.textureUnit=void 0,this.loaded=!1,this.width=void 0,this.height=void 0,this.depth=void 0,this.format=void 0,this.type=void 0,this.dataFormat=void 0,this.border=void 0,this.textureUnit=void 0,this.mipmaps=void 0}toString(){return"Texture(".concat(this.id,",").concat(this.width,"x").concat(this.height,")")}initialize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.data;if(n instanceof Promise)return n.then(y=>this.initialize(Object.assign({},e,{pixels:y,data:y}))),this;const r=typeof HTMLVideoElement<"u"&&n instanceof HTMLVideoElement;if(r&&n.readyState<HTMLVideoElement.HAVE_METADATA)return this._video=null,n.addEventListener("loadeddata",()=>this.initialize(e)),this;const{pixels:i=null,format:s=6408,border:o=0,recreate:a=!1,parameters:l={},pixelStore:c={},textureUnit:u=void 0}=e;n||(n=i);let{width:f,height:d,dataFormat:h,type:p,compressed:g=!1,mipmaps:E=!0}=e;const{depth:m=0}=e;return{width:f,height:d,compressed:g,dataFormat:h,type:p}=this._deduceParameters({format:s,type:p,dataFormat:h,compressed:g,data:n,width:f,height:d}),this.width=f,this.height=d,this.depth=m,this.format=s,this.type=p,this.dataFormat=h,this.border=o,this.textureUnit=u,Number.isFinite(this.textureUnit)&&(this.gl.activeTexture(33984+this.textureUnit),this.gl.bindTexture(this.target,this.handle)),E&&this._isNPOT()&&(K.warn("texture: ".concat(this," is Non-Power-Of-Two, disabling mipmaping"))(),E=!1,this._updateForNPOT(l)),this.mipmaps=E,this.setImageData({data:n,width:f,height:d,depth:m,format:s,type:p,dataFormat:h,border:o,mipmaps:E,parameters:c,compressed:g}),E&&this.generateMipmap(),this.setParameters(l),a&&(this.data=n),r&&(this._video={video:n,parameters:l,lastTime:n.readyState>=HTMLVideoElement.HAVE_CURRENT_DATA?n.currentTime:-1}),this}update(){if(this._video){const{video:e,parameters:n,lastTime:r}=this._video;if(r===e.currentTime||e.readyState<HTMLVideoElement.HAVE_CURRENT_DATA)return;this.setSubImageData({data:e,parameters:n}),this.mipmaps&&this.generateMipmap(),this._video.lastTime=e.currentTime}}resize(e){let{height:n,width:r,mipmaps:i=!1}=e;return r!==this.width||n!==this.height?this.initialize({width:r,height:n,format:this.format,type:this.type,dataFormat:this.dataFormat,border:this.border,mipmaps:i}):this}generateMipmap(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this._isNPOT()?(K.warn("texture: ".concat(this," is Non-Power-Of-Two, disabling mipmaping"))(),this):(this.mipmaps=!0,this.gl.bindTexture(this.target,this.handle),Zn(this.gl,e,()=>{this.gl.generateMipmap(this.target)}),this.gl.bindTexture(this.target,null),this)}setImageData(e){this._trackDeallocatedMemory("Texture");const{target:n=this.target,pixels:r=null,level:i=0,format:s=this.format,border:o=this.border,offset:a=0,parameters:l={}}=e;let{data:c=null,type:u=this.type,width:f=this.width,height:d=this.height,dataFormat:h=this.dataFormat,compressed:p=!1}=e;c||(c=r),{type:u,dataFormat:h,compressed:p,width:f,height:d}=this._deduceParameters({format:s,type:u,dataFormat:h,compressed:p,data:c,width:f,height:d});const{gl:g}=this;g.bindTexture(this.target,this.handle);let E=null;({data:c,dataType:E}=this._getDataType({data:c,compressed:p}));let m,y=0;if(Zn(this.gl,l,()=>{switch(E){case"null":g.texImage2D(n,i,s,f,d,o,h,u,c);break;case"typed-array":g.texImage2D(n,i,s,f,d,o,h,u,c,a);break;case"buffer":m=Ot(g),m.bindBuffer(35052,c.handle||c),m.texImage2D(n,i,s,f,d,o,h,u,a),m.bindBuffer(35052,null);break;case"browser-object":le(g)?g.texImage2D(n,i,s,f,d,o,h,u,c):g.texImage2D(n,i,s,h,u,c);break;case"compressed":for(const[v,b]of c.entries())g.compressedTexImage2D(n,v,b.format,b.width,b.height,o,b.data),y+=b.levelSize;break;default:$(!1,"Unknown image data type")}}),E==="compressed")this._trackAllocatedMemory(y,"Texture");else if(c&&c.byteLength)this._trackAllocatedMemory(c.byteLength,"Texture");else{const v=gP[this.dataFormat]||4,b=mP[this.type]||1;this._trackAllocatedMemory(this.width*this.height*v*b,"Texture")}return this.loaded=!0,this}setSubImageData(e){let{target:n=this.target,pixels:r=null,data:i=null,x:s=0,y:o=0,width:a=this.width,height:l=this.height,level:c=0,format:u=this.format,type:f=this.type,dataFormat:d=this.dataFormat,compressed:h=!1,offset:p=0,border:g=this.border,parameters:E={}}=e;if({type:f,dataFormat:d,compressed:h,width:a,height:l}=this._deduceParameters({format:u,type:f,dataFormat:d,compressed:h,data:i,width:a,height:l}),$(this.depth===0,"texSubImage not supported for 3D textures"),i||(i=r),i&&i.data){const m=i;i=m.data,a=m.shape[0],l=m.shape[1]}i instanceof Ae&&(i=i.handle),this.gl.bindTexture(this.target,this.handle),Zn(this.gl,E,()=>{if(h)this.gl.compressedTexSubImage2D(n,c,s,o,a,l,u,i);else if(i===null)this.gl.texSubImage2D(n,c,s,o,a,l,d,f,null);else if(ArrayBuffer.isView(i))this.gl.texSubImage2D(n,c,s,o,a,l,d,f,i,p);else if(i instanceof tb){const m=Ot(this.gl);m.bindBuffer(35052,i),m.texSubImage2D(n,c,s,o,a,l,d,f,p),m.bindBuffer(35052,null)}else le(this.gl)?Ot(this.gl).texSubImage2D(n,c,s,o,a,l,d,f,i):this.gl.texSubImage2D(n,c,s,o,d,f,i)}),this.gl.bindTexture(this.target,null)}copyFramebuffer(){return K.error("Texture.copyFramebuffer({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}getActiveUnit(){return this.gl.getParameter(34016)-33984}bind(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.textureUnit;const{gl:n}=this;return e!==void 0&&(this.textureUnit=e,n.activeTexture(33984+e)),n.bindTexture(this.target,this.handle),e}unbind(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.textureUnit;const{gl:n}=this;return e!==void 0&&(this.textureUnit=e,n.activeTexture(33984+e)),n.bindTexture(this.target,null),e}_getDataType(e){let{data:n,compressed:r=!1}=e;return r?{data:n,dataType:"compressed"}:n===null?{data:n,dataType:"null"}:ArrayBuffer.isView(n)?{data:n,dataType:"typed-array"}:n instanceof Ae?{data:n.handle,dataType:"buffer"}:n instanceof tb?{data:n,dataType:"buffer"}:{data:n,dataType:"browser-object"}}_deduceParameters(e){const{format:n,data:r}=e;let{width:i,height:s,dataFormat:o,type:a,compressed:l}=e;const c=Wy[n];return o=o||c&&c.dataFormat,a=a||c&&c.types[0],l=l||c&&c.compressed,{width:i,height:s}=this._deduceImageSize(r,i,s),{dataFormat:o,type:a,compressed:l,width:i,height:s,format:n,data:r}}_deduceImageSize(e,n,r){let i;return typeof ImageData<"u"&&e instanceof ImageData?i={width:e.width,height:e.height}:typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement?i={width:e.naturalWidth,height:e.naturalHeight}:typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement?i={width:e.width,height:e.height}:typeof ImageBitmap<"u"&&e instanceof ImageBitmap?i={width:e.width,height:e.height}:typeof HTMLVideoElement<"u"&&e instanceof HTMLVideoElement?i={width:e.videoWidth,height:e.videoHeight}:e?i={width:n,height:r}:i={width:n>=0?n:1,height:r>=0?r:1},$(i,"Could not deduced texture size"),$(n===void 0||i.width===n,"Deduced texture width does not match supplied width"),$(r===void 0||i.height===r,"Deduced texture height does not match supplied height"),i}_createHandle(){return this.gl.createTexture()}_deleteHandle(){this.gl.deleteTexture(this.handle),this._trackDeallocatedMemory("Texture")}_getParameter(e){switch(e){case 4096:return this.width;case 4097:return this.height;default:this.gl.bindTexture(this.target,this.handle);const n=this.gl.getTexParameter(this.target,e);return this.gl.bindTexture(this.target,null),n}}_setParameter(e,n){switch(this.gl.bindTexture(this.target,this.handle),n=this._getNPOTParam(e,n),e){case 33082:case 33083:this.gl.texParameterf(this.handle,e,n);break;case 4096:case 4097:$(!1);break;default:this.gl.texParameteri(this.target,e,n);break}return this.gl.bindTexture(this.target,null),this}_isNPOT(){return le(this.gl)||!this.width||!this.height?!1:!J1(this.width)||!J1(this.height)}_updateForNPOT(e){e[this.gl.TEXTURE_MIN_FILTER]===void 0&&(e[this.gl.TEXTURE_MIN_FILTER]=this.gl.LINEAR),e[this.gl.TEXTURE_WRAP_S]===void 0&&(e[this.gl.TEXTURE_WRAP_S]=this.gl.CLAMP_TO_EDGE),e[this.gl.TEXTURE_WRAP_T]===void 0&&(e[this.gl.TEXTURE_WRAP_T]=this.gl.CLAMP_TO_EDGE)}_getNPOTParam(e,n){if(this._isNPOT())switch(e){case 10241:ak.indexOf(n)===-1&&(n=9729);break;case 10242:case 10243:n!==33071&&(n=33071);break}return n}}let lk="";function ck(t,e){return $(typeof t=="string"),t=lk+t,new Promise((n,r)=>{try{const i=new Image;i.onload=()=>n(i),i.onerror=()=>r(new Error("Could not load image ".concat(t,"."))),i.crossOrigin=e&&e.crossOrigin||"anonymous",i.src=t}catch(i){r(i)}})}class yn extends Ss{get[Symbol.toStringTag](){return"Texture2D"}static isSupported(e,n){return Ss.isSupported(e,n)}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};uh(e),(n instanceof Promise||typeof n=="string")&&(n={data:n}),typeof n.data=="string"&&(n=Object.assign({},n,{data:ck(n.data)})),super(e,Object.assign({},n,{target:3553})),this.initialize(n),Object.seal(this)}}const km=[34069,34070,34071,34072,34073,34074];class yP extends Ss{get[Symbol.toStringTag](){return"TextureCube"}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};uh(e),super(e,Object.assign({},n,{target:34067})),this.initialize(n),Object.seal(this)}initialize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{mipmaps:n=!0,parameters:r={}}=e;return this.opts=e,this.setCubeMapImageData(e).then(()=>{this.loaded=!0,n&&this.generateMipmap(e),this.setParameters(r)}),this}subImage(e){let{face:n,data:r,x:i=0,y:s=0,mipmapLevel:o=0}=e;return this._subImage({target:n,data:r,x:i,y:s,mipmapLevel:o})}async setCubeMapImageData(e){let{width:n,height:r,pixels:i,data:s,border:o=0,format:a=6408,type:l=5121}=e;const{gl:c}=this,u=i||s,f=await Promise.all(km.map(d=>{const h=u[d];return Promise.all(Array.isArray(h)?h:[h])}));this.bind(),km.forEach((d,h)=>{f[h].length>1&&this.opts.mipmaps!==!1&&K.warn("".concat(this.id," has mipmap and multiple LODs."))(),f[h].forEach((p,g)=>{n&&r?c.texImage2D(d,g,a,n,r,o,a,l,p):c.texImage2D(d,g,a,a,l,p)})}),this.unbind()}setImageDataForFace(e){const{face:n,width:r,height:i,pixels:s,data:o,border:a=0,format:l=6408,type:c=5121}=e,{gl:u}=this,f=s||o;return this.bind(),f instanceof Promise?f.then(d=>this.setImageDataForFace(Object.assign({},e,{face:n,data:d,pixels:d}))):this.width||this.height?u.texImage2D(n,0,l,r,i,a,l,c,f):u.texImage2D(n,0,l,l,c,f),this}}yP.FACES=km;class uk extends Ss{get[Symbol.toStringTag](){return"Texture3D"}static isSupported(e){return le(e)}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Ot(e),n=Object.assign({depth:1},n,{target:32879,unpackFlipY:!1}),super(e,n),this.initialize(n),Object.seal(this)}setImageData(e){let{level:n=0,dataFormat:r=6408,width:i,height:s,depth:o=1,border:a=0,format:l,type:c=5121,offset:u=0,data:f,parameters:d={}}=e;if(this._trackDeallocatedMemory("Texture"),this.gl.bindTexture(this.target,this.handle),Zn(this.gl,d,()=>{ArrayBuffer.isView(f)&&this.gl.texImage3D(this.target,n,r,i,s,o,a,l,c,f),f instanceof Ae&&(this.gl.bindBuffer(35052,f.handle),this.gl.texImage3D(this.target,n,r,i,s,o,a,l,c,u))}),f&&f.byteLength)this._trackAllocatedMemory(f.byteLength,"Texture");else{const h=gP[this.dataFormat]||4,p=mP[this.type]||1;this._trackAllocatedMemory(this.width*this.height*this.depth*h*p,"Texture")}return this.loaded=!0,this}}const es="EXT_color_buffer_float",nb={33189:{bpp:2},33190:{gl2:!0,bpp:3},36012:{gl2:!0,bpp:4},36168:{bpp:1},34041:{bpp:4},35056:{gl2:!0,bpp:4},36013:{gl2:!0,bpp:5},32854:{bpp:2},36194:{bpp:2},32855:{bpp:2},33321:{gl2:!0,bpp:1},33330:{gl2:!0,bpp:1},33329:{gl2:!0,bpp:1},33332:{gl2:!0,bpp:2},33331:{gl2:!0,bpp:2},33334:{gl2:!0,bpp:4},33333:{gl2:!0,bpp:4},33323:{gl2:!0,bpp:2},33336:{gl2:!0,bpp:2},33335:{gl2:!0,bpp:2},33338:{gl2:!0,bpp:4},33337:{gl2:!0,bpp:4},33340:{gl2:!0,bpp:8},33339:{gl2:!0,bpp:8},32849:{gl2:!0,bpp:3},32856:{gl2:!0,bpp:4},32857:{gl2:!0,bpp:4},36220:{gl2:!0,bpp:4},36238:{gl2:!0,bpp:4},36975:{gl2:!0,bpp:4},36214:{gl2:!0,bpp:8},36232:{gl2:!0,bpp:8},36226:{gl2:!0,bpp:16},36208:{gl2:!0,bpp:16},33325:{gl2:es,bpp:2},33327:{gl2:es,bpp:4},34842:{gl2:es,bpp:8},33326:{gl2:es,bpp:4},33328:{gl2:es,bpp:8},34836:{gl2:es,bpp:16},35898:{gl2:es,bpp:4}};function fk(t,e,n){const r=n[e];if(!r)return!1;const i=le(t)&&r.gl2||r.gl1;return typeof i=="string"?t.getExtension(i):i}class xo extends Jr{get[Symbol.toStringTag](){return"Renderbuffer"}static isSupported(e){let{format:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{format:null};return!n||fk(e,n,nb)}static getSamplesForFormat(e,n){let{format:r}=n;return e.getInternalformatParameter(36161,r,32937)}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(e,n),this.initialize(n),Object.seal(this)}initialize(e){let{format:n,width:r=1,height:i=1,samples:s=0}=e;return $(n,"Needs format"),this._trackDeallocatedMemory(),this.gl.bindRenderbuffer(36161,this.handle),s!==0&&le(this.gl)?this.gl.renderbufferStorageMultisample(36161,s,n,r,i):this.gl.renderbufferStorage(36161,n,r,i),this.format=n,this.width=r,this.height=i,this.samples=s,this._trackAllocatedMemory(this.width*this.height*(this.samples||1)*nb[this.format].bpp),this}resize(e){let{width:n,height:r}=e;return n!==this.width||r!==this.height?this.initialize({width:n,height:r,format:this.format,samples:this.samples}):this}_createHandle(){return this.gl.createRenderbuffer()}_deleteHandle(){this.gl.deleteRenderbuffer(this.handle),this._trackDeallocatedMemory()}_bindHandle(e){this.gl.bindRenderbuffer(36161,e)}_syncHandle(e){this.format=this.getParameter(36164),this.width=this.getParameter(36162),this.height=this.getParameter(36163),this.samples=this.getParameter(36011)}_getParameter(e){return this.gl.bindRenderbuffer(36161,this.handle),this.gl.getRenderbufferParameter(36161,e)}}const dk=256,hk=1024,pk=16384,rb=6144,ib=6145,sb=6146,ob=34041,vP="clear: bad arguments";function Hy(t){let{framebuffer:e=null,color:n=null,depth:r=null,stencil:i=null}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const s={};e&&(s.framebuffer=e);let o=0;n&&(o|=pk,n!==!0&&(s.clearColor=n)),r&&(o|=dk,r!==!0&&(s.clearDepth=r)),i&&(o|=hk,r!==!0&&(s.clearStencil=r)),$(o!==0,vP),Zn(t,s,()=>{t.clear(o)})}function gk(t){let{framebuffer:e=null,buffer:n=rb,drawBuffer:r=0,value:i=[0,0,0,0]}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Ot(t),Zn(t,{framebuffer:e},()=>{switch(n){case rb:switch(i.constructor){case Int32Array:t.clearBufferiv(n,r,i);break;case Uint32Array:t.clearBufferuiv(n,r,i);break;case Float32Array:default:t.clearBufferfv(n,r,i)}break;case ib:t.clearBufferfv(ib,0,[i]);break;case sb:t.clearBufferiv(sb,0,[i]);break;case ob:const[s,o]=i;t.clearBufferfi(ob,0,s,o);break;default:$(!1,vP)}})}function mk(t){switch(t){case 6406:case 33326:case 6403:return 1;case 33328:case 33319:return 2;case 6407:case 34837:return 3;case 6408:case 34836:return 4;default:return $(!1),0}}function fh(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{sourceX:n=0,sourceY:r=0,sourceFormat:i=6408}=e;let{sourceAttachment:s=36064,target:o=null,sourceWidth:a,sourceHeight:l,sourceType:c}=e;const{framebuffer:u,deleteFramebuffer:f}=_P(t);$(u);const{gl:d,handle:h,attachments:p}=u;a=a||u.width,l=l||u.height,s===36064&&h===null&&(s=1028),$(p[s]),c=c||p[s].type,o=vk(o,c,i,a,l),c=c||Im(o);const g=d.bindFramebuffer(36160,h);return d.readPixels(n,r,a,l,i,c,o),d.bindFramebuffer(36160,g||null),f&&u.delete(),o}function ab(t){let{sourceAttachment:e=36064,targetMaxHeight:n=Number.MAX_SAFE_INTEGER}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=fh(t,{sourceAttachment:e}),{width:i,height:s}=t;for(;s>n;)({data:r,width:i,height:s}=ek({data:r,width:i,height:s}));JM({data:r,width:i,height:s});const o=document.createElement("canvas");o.width=i,o.height=s;const a=o.getContext("2d"),l=a.createImageData(i,s);return l.data.set(r),a.putImageData(l,0,0),o.toDataURL()}function yk(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const{sourceX:r=0,sourceY:i=0,targetMipmaplevel:s=0,targetInternalFormat:o=6408}=n;let{targetX:a,targetY:l,targetZ:c,width:u,height:f}=n;const{framebuffer:d,deleteFramebuffer:h}=_P(t);$(d);const{gl:p,handle:g}=d,E=typeof a<"u"||typeof l<"u"||typeof c<"u";a=a||0,l=l||0,c=c||0;const m=p.bindFramebuffer(36160,g);$(e);let y=null;if(e instanceof Ss&&(y=e,u=Number.isFinite(u)?u:y.width,f=Number.isFinite(f)?f:y.height,y.bind(0),e=y.target),!E)p.copyTexImage2D(e,s,o,r,i,u,f,0);else switch(e){case 3553:case 34067:p.copyTexSubImage2D(e,s,a,l,r,i,u,f);break;case 35866:case 32879:Ot(p).copyTexSubImage3D(e,s,a,l,c,r,i,u,f);break}return y&&y.unbind(),p.bindFramebuffer(36160,m||null),h&&d.delete(),y}function _P(t){return t instanceof ft?{framebuffer:t,deleteFramebuffer:!1}:{framebuffer:Ck(t),deleteFramebuffer:!0}}function vk(t,e,n,r,i){if(t)return t;e=e||5121;const s=$l(e,{clamped:!1}),o=mk(n);return new s(r*i*o)}const ze={WEBGL2:"WEBGL2",VERTEX_ARRAY_OBJECT:"VERTEX_ARRAY_OBJECT",TIMER_QUERY:"TIMER_QUERY",INSTANCED_RENDERING:"INSTANCED_RENDERING",MULTIPLE_RENDER_TARGETS:"MULTIPLE_RENDER_TARGETS",ELEMENT_INDEX_UINT32:"ELEMENT_INDEX_UINT32",BLEND_EQUATION_MINMAX:"BLEND_EQUATION_MINMAX",FLOAT_BLEND:"FLOAT_BLEND",COLOR_ENCODING_SRGB:"COLOR_ENCODING_SRGB",TEXTURE_DEPTH:"TEXTURE_DEPTH",TEXTURE_FLOAT:"TEXTURE_FLOAT",TEXTURE_HALF_FLOAT:"TEXTURE_HALF_FLOAT",TEXTURE_FILTER_LINEAR_FLOAT:"TEXTURE_FILTER_LINEAR_FLOAT",TEXTURE_FILTER_LINEAR_HALF_FLOAT:"TEXTURE_FILTER_LINEAR_HALF_FLOAT",TEXTURE_FILTER_ANISOTROPIC:"TEXTURE_FILTER_ANISOTROPIC",COLOR_ATTACHMENT_RGBA32F:"COLOR_ATTACHMENT_RGBA32F",COLOR_ATTACHMENT_FLOAT:"COLOR_ATTACHMENT_FLOAT",COLOR_ATTACHMENT_HALF_FLOAT:"COLOR_ATTACHMENT_HALF_FLOAT",GLSL_FRAG_DATA:"GLSL_FRAG_DATA",GLSL_FRAG_DEPTH:"GLSL_FRAG_DEPTH",GLSL_DERIVATIVES:"GLSL_DERIVATIVES",GLSL_TEXTURE_LOD:"GLSL_TEXTURE_LOD"};function _k(t){const e=new yn(t,{format:6408,type:5126,dataFormat:6408}),n=new ft(t,{id:"test-framebuffer",check:!1,attachments:{36064:e}}),r=n.getStatus();return e.delete(),n.delete(),r===36053}const bP={[ze.WEBGL2]:[!1,!0],[ze.VERTEX_ARRAY_OBJECT]:["OES_vertex_array_object",!0],[ze.TIMER_QUERY]:["EXT_disjoint_timer_query","EXT_disjoint_timer_query_webgl2"],[ze.INSTANCED_RENDERING]:["ANGLE_instanced_arrays",!0],[ze.MULTIPLE_RENDER_TARGETS]:["WEBGL_draw_buffers",!0],[ze.ELEMENT_INDEX_UINT32]:["OES_element_index_uint",!0],[ze.BLEND_EQUATION_MINMAX]:["EXT_blend_minmax",!0],[ze.FLOAT_BLEND]:["EXT_float_blend"],[ze.COLOR_ENCODING_SRGB]:["EXT_sRGB",!0],[ze.TEXTURE_DEPTH]:["WEBGL_depth_texture",!0],[ze.TEXTURE_FLOAT]:["OES_texture_float",!0],[ze.TEXTURE_HALF_FLOAT]:["OES_texture_half_float",!0],[ze.TEXTURE_FILTER_LINEAR_FLOAT]:["OES_texture_float_linear"],[ze.TEXTURE_FILTER_LINEAR_HALF_FLOAT]:["OES_texture_half_float_linear"],[ze.TEXTURE_FILTER_ANISOTROPIC]:["EXT_texture_filter_anisotropic"],[ze.COLOR_ATTACHMENT_RGBA32F]:[_k,"EXT_color_buffer_float"],[ze.COLOR_ATTACHMENT_FLOAT]:[!1,"EXT_color_buffer_float"],[ze.COLOR_ATTACHMENT_HALF_FLOAT]:["EXT_color_buffer_half_float"],[ze.GLSL_FRAG_DATA]:["WEBGL_draw_buffers",!0],[ze.GLSL_FRAG_DEPTH]:["EXT_frag_depth",!0],[ze.GLSL_DERIVATIVES]:["OES_standard_derivatives",!0],[ze.GLSL_TEXTURE_LOD]:["EXT_shader_texture_lod",!0]},bk=2;function Ek(t,e){return Xy(t,e)}function Xy(t,e){return e=Array.isArray(e)?e:[e],e.every(n=>EP(t,n))}function wk(t){t.luma=t.luma||{},t.luma.caps=t.luma.caps||{};for(const e in bP)t.luma.caps[e]===void 0&&(t.luma.caps[e]=EP(t,e));return t.luma.caps}function EP(t,e){return t.luma=t.luma||{},t.luma.caps=t.luma.caps||{},t.luma.caps[e]===void 0&&(t.luma.caps[e]=xk(t,e)),t.luma.caps[e]||K.log(bk,"Feature: ".concat(e," not supported"))(),t.luma.caps[e]}function xk(t,e){const n=bP[e];$(n,e);let r;const i=le(t)&&n[1]||n[0];if(typeof i=="function")r=i(t);else if(Array.isArray(i)){r=!0;for(const s of i)r=r&&!!t.getExtension(s)}else typeof i=="string"?r=!!t.getExtension(i):typeof i=="boolean"?r=i:$(!1);return r}const lb="Multiple render targets not supported";class ft extends Jr{get[Symbol.toStringTag](){return"Framebuffer"}static isSupported(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{colorBufferFloat:r,colorBufferHalfFloat:i}=n;let s=!0;return r&&(s=!!(e.getExtension("EXT_color_buffer_float")||e.getExtension("WEBGL_color_buffer_float")||e.getExtension("OES_texture_float"))),i&&(s=s&&!!(e.getExtension("EXT_color_buffer_float")||e.getExtension("EXT_color_buffer_half_float"))),s}static getDefaultFramebuffer(e){return e.luma=e.luma||{},e.luma.defaultFramebuffer=e.luma.defaultFramebuffer||new ft(e,{id:"default-framebuffer",handle:null,attachments:{}}),e.luma.defaultFramebuffer}get MAX_COLOR_ATTACHMENTS(){const e=Ot(this.gl);return e.getParameter(e.MAX_COLOR_ATTACHMENTS)}get MAX_DRAW_BUFFERS(){const e=Ot(this.gl);return e.getParameter(e.MAX_DRAW_BUFFERS)}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(e,n),this.width=null,this.height=null,this.attachments={},this.readBuffer=36064,this.drawBuffers=[36064],this.ownResources=[],this.initialize(n),Object.seal(this)}get color(){return this.attachments[36064]||null}get texture(){return this.attachments[36064]||null}get depth(){return this.attachments[36096]||this.attachments[33306]||null}get stencil(){return this.attachments[36128]||this.attachments[33306]||null}initialize(e){let{width:n=1,height:r=1,attachments:i=null,color:s=!0,depth:o=!0,stencil:a=!1,check:l=!0,readBuffer:c=void 0,drawBuffers:u=void 0}=e;if($(n>=0&&r>=0,"Width and height need to be integers"),this.width=n,this.height=r,i)for(const f in i){const d=i[f];(Array.isArray(d)?d[0]:d).resize({width:n,height:r})}else i=this._createDefaultAttachments(s,o,a,n,r);this.update({clearAttachments:!0,attachments:i,readBuffer:c,drawBuffers:u}),i&&l&&this.checkStatus()}delete(){for(const e of this.ownResources)e.delete();return super.delete(),this}update(e){let{attachments:n={},readBuffer:r,drawBuffers:i,clearAttachments:s=!1,resizeAttachments:o=!0}=e;this.attach(n,{clearAttachments:s,resizeAttachments:o});const{gl:a}=this,l=a.bindFramebuffer(36160,this.handle);return r&&this._setReadBuffer(r),i&&this._setDrawBuffers(i),a.bindFramebuffer(36160,l||null),this}resize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{width:n,height:r}=e;if(this.handle===null)return $(n===void 0&&r===void 0),this.width=this.gl.drawingBufferWidth,this.height=this.gl.drawingBufferHeight,this;n===void 0&&(n=this.gl.drawingBufferWidth),r===void 0&&(r=this.gl.drawingBufferHeight),n!==this.width&&r!==this.height&&K.log(2,"Resizing framebuffer ".concat(this.id," to ").concat(n,"x").concat(r))();for(const i in this.attachments)this.attachments[i].resize({width:n,height:r});return this.width=n,this.height=r,this}attach(e){let{clearAttachments:n=!1,resizeAttachments:r=!0}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const i={};n&&Object.keys(this.attachments).forEach(o=>{i[o]=null}),Object.assign(i,e);const s=this.gl.bindFramebuffer(36160,this.handle);for(const o in i){$(o!==void 0,"Misspelled framebuffer binding point?");const a=Number(o),l=i[a];let c=l;if(!c)this._unattach(a);else if(c instanceof xo)this._attachRenderbuffer({attachment:a,renderbuffer:c});else if(Array.isArray(l)){const[u,f=0,d=0]=l;c=u,this._attachTexture({attachment:a,texture:u,layer:f,level:d})}else this._attachTexture({attachment:a,texture:c,layer:0,level:0});r&&c&&c.resize({width:this.width,height:this.height})}this.gl.bindFramebuffer(36160,s||null),Object.assign(this.attachments,e),Object.keys(this.attachments).filter(o=>!this.attachments[o]).forEach(o=>{delete this.attachments[o]})}checkStatus(){const e=this.getStatus();if(e!==36053)throw new Error(Sk(e));return this}getStatus(){const{gl:e}=this,n=e.bindFramebuffer(36160,this.handle),r=e.checkFramebufferStatus(36160);return e.bindFramebuffer(36160,n||null),r}clear(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{color:n,depth:r,stencil:i,drawBuffers:s=[]}=e,o=this.gl.bindFramebuffer(36160,this.handle);return(n||r||i)&&Hy(this.gl,{color:n,depth:r,stencil:i}),s.forEach((a,l)=>{gk(this.gl,{drawBuffer:l,value:a})}),this.gl.bindFramebuffer(36160,o||null),this}readPixels(){return K.error("Framebuffer.readPixels() is no logner supported, use readPixelsToArray(framebuffer)")(),null}readPixelsToBuffer(){return K.error("Framebuffer.readPixelsToBuffer()is no logner supported, use readPixelsToBuffer(framebuffer)")(),null}copyToDataUrl(){return K.error("Framebuffer.copyToDataUrl() is no logner supported, use copyToDataUrl(framebuffer)")(),null}copyToImage(){return K.error("Framebuffer.copyToImage() is no logner supported, use copyToImage(framebuffer)")(),null}copyToTexture(){return K.error("Framebuffer.copyToTexture({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}blit(){return K.error("Framebuffer.blit({...}) is no logner supported, use blit(source, target, opts)")(),null}invalidate(e){let{attachments:n=[],x:r=0,y:i=0,width:s,height:o}=e;const a=Ot(this.gl),l=a.bindFramebuffer(36008,this.handle);return r===0&&i===0&&s===void 0&&o===void 0?a.invalidateFramebuffer(36008,n):a.invalidateFramebuffer(36008,n,r,i,s,o),a.bindFramebuffer(36008,l),this}getAttachmentParameter(e,n,r){let i=this._getAttachmentParameterFallback(n);return i===null&&(this.gl.bindFramebuffer(36160,this.handle),i=this.gl.getFramebufferAttachmentParameter(36160,e,n),this.gl.bindFramebuffer(36160,null)),r&&i>1e3&&(i=Ri(this.gl,i)),i}getAttachmentParameters(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:36064,n=arguments.length>1?arguments[1]:void 0,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.constructor.ATTACHMENT_PARAMETERS||[];const i={};for(const s of r){const o=n?Ri(this.gl,s):s;i[o]=this.getAttachmentParameter(e,s,n)}return i}getParameters(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;const n=Object.keys(this.attachments),r={};for(const i of n){const s=Number(i),o=e?Ri(this.gl,s):s;r[o]=this.getAttachmentParameters(s,e)}return r}show(){return typeof window<"u"&&window.open(ab(this),"luma-debug-texture"),this}log(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";if(e>K.level||typeof window>"u")return this;n=n||"Framebuffer ".concat(this.id);const r=ab(this,{targetMaxHeight:100});return K.image({logLevel:e,message:n,image:r},n)(),this}bind(){let{target:e=36160}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.gl.bindFramebuffer(e,this.handle),this}unbind(){let{target:e=36160}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.gl.bindFramebuffer(e,null),this}_createDefaultAttachments(e,n,r,i,s){let o=null;return e&&(o=o||{},o[36064]=new yn(this.gl,{id:"".concat(this.id,"-color0"),pixels:null,format:6408,type:5121,width:i,height:s,mipmaps:!1,parameters:{10241:9729,10240:9729,10242:33071,10243:33071}}),this.ownResources.push(o[36064])),n&&r?(o=o||{},o[33306]=new xo(this.gl,{id:"".concat(this.id,"-depth-stencil"),format:35056,width:i,height:111}),this.ownResources.push(o[33306])):n?(o=o||{},o[36096]=new xo(this.gl,{id:"".concat(this.id,"-depth"),format:33189,width:i,height:s}),this.ownResources.push(o[36096])):r&&$(!1),o}_unattach(e){const n=this.attachments[e];n&&(n instanceof xo?this.gl.framebufferRenderbuffer(36160,e,36161,null):this.gl.framebufferTexture2D(36160,e,3553,null,0),delete this.attachments[e])}_attachRenderbuffer(e){let{attachment:n=36064,renderbuffer:r}=e;const{gl:i}=this;i.framebufferRenderbuffer(36160,n,36161,r.handle),this.attachments[n]=r}_attachTexture(e){let{attachment:n=36064,texture:r,layer:i,level:s}=e;const{gl:o}=this;switch(o.bindTexture(r.target,r.handle),r.target){case 35866:case 32879:Ot(o).framebufferTextureLayer(36160,n,r.target,s,i);break;case 34067:const l=Tk(i);o.framebufferTexture2D(36160,n,l,r.handle,s);break;case 3553:o.framebufferTexture2D(36160,n,3553,r.handle,s);break;default:$(!1,"Illegal texture type")}o.bindTexture(r.target,null),this.attachments[n]=r}_setReadBuffer(e){const n=JI(this.gl);n?n.readBuffer(e):$(e===36064||e===1029,lb),this.readBuffer=e}_setDrawBuffers(e){const{gl:n}=this,r=Ot(n);if(r)r.drawBuffers(e);else{const i=n.getExtension("WEBGL_draw_buffers");i?i.drawBuffersWEBGL(e):$(e.length===1&&(e[0]===36064||e[0]===1029),lb)}this.drawBuffers=e}_getAttachmentParameterFallback(e){const n=wk(this.gl);switch(e){case 36052:return n.WEBGL2?null:0;case 33298:case 33299:case 33300:case 33301:case 33302:case 33303:return n.WEBGL2?null:8;case 33297:return n.WEBGL2?null:5125;case 33296:return!n.WEBGL2&&!n.EXT_sRGB?9729:null;default:return null}}_createHandle(){return this.gl.createFramebuffer()}_deleteHandle(){this.gl.deleteFramebuffer(this.handle)}_bindHandle(e){return this.gl.bindFramebuffer(36160,e)}}function Tk(t){return t<34069?t+34069:t}function Sk(t){return(ft.STATUS||{})[t]||"Framebuffer error ".concat(t)}const Pk=[36049,36048,33296,33298,33299,33300,33301,33302,33303];ft.ATTACHMENT_PARAMETERS=Pk;function Ak(t,e){$(t instanceof yn||t instanceof yP||t instanceof uk);const n=t.constructor,{gl:r,width:i,height:s,format:o,type:a,dataFormat:l,border:c,mipmaps:u}=t,f=Object.assign({width:i,height:s,format:o,type:a,dataFormat:l,border:c,mipmaps:u},e);return new n(r,f)}function Ck(t,e){const{gl:n,width:r,height:i,id:s}=t;return new ft(n,Object.assign({},e,{id:"framebuffer-for-".concat(s),width:r,height:i,attachments:{36064:t}}))}function rf(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"unnamed";const n=/#define[\s*]SHADER_NAME[\s*]([A-Za-z0-9_-]+)[\s*]/,r=t.match(n);return r?r[1]:e}const Lk=35632,Rk=35633;function Ok(t){switch(t){case Lk:return"fragment";case Rk:return"vertex";default:return"unknown type"}}function Ik(t,e,n,r){const i=t.split(/\r?\n/),s={},o={},a=r||rf(e)||"(unnamed)",l="".concat(Ok(n)," shader ").concat(a);for(let u=0;u<i.length;u++){const f=i[u];if(f.length<=1)continue;const d=f.split(":"),h=d[0],p=parseInt(d[2],10);if(isNaN(p))throw new Error("GLSL compilation error in ".concat(l,": ").concat(t));h!=="WARNING"?s[p]=f:o[p]=f}const c=Mk(e);return{shaderName:l,errors:cb(s,c),warnings:cb(o,c)}}function cb(t,e){let n="";for(let r=0;r<e.length;r++){const i=e[r];if(!(!t[r+3]&&!t[r+2]&&!t[r+1])&&(n+="".concat(i,`
`),t[r+1])){const s=t[r+1],o=s.split(":",3),a=o[0],l=parseInt(o[1],10)||0,c=s.substring(o.join(":").length+1).trim();n+=wP("^^^ ".concat(a,": ").concat(c,`

`),l)}}return n}function Mk(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:": ";const r=t.split(/\r?\n/),i=String(r.length+e-1).length;return r.map((s,o)=>{const a=String(o+e),l=a.length;return wP(a,i-l)+n+s})}function wP(t,e){let n="";for(let r=0;r<e;++r)n+=" ";return"".concat(n).concat(t)}function xP(t){let e=100;const n=t.match(/[^\s]+/g);if(n.length>=2&&n[0]==="#version"){const r=parseInt(n[1],10);Number.isFinite(r)&&(e=r)}return e}const kk="Shader: GLSL source code must be a JavaScript string";class Gl extends Jr{get[Symbol.toStringTag](){return"Shader"}static getTypeName(e){switch(e){case 35633:return"vertex-shader";case 35632:return"fragment-shader";default:return $(!1),"unknown"}}constructor(e,n){uh(e),$(typeof n.source=="string",kk);const r=rf(n.source,null)||n.id||Fi("unnamed ".concat(Gl.getTypeName(n.shaderType)));super(e,{id:r}),this.shaderType=n.shaderType,this.source=n.source,this.initialize(n)}initialize(e){let{source:n}=e;const r=rf(n,null);r&&(this.id=Fi(r)),this._compile(n)}getParameter(e){return this.gl.getShaderParameter(this.handle,e)}toString(){return"".concat(Gl.getTypeName(this.shaderType),":").concat(this.id)}getName(){return rf(this.source)||"unnamed-shader"}getSource(){return this.gl.getShaderSource(this.handle)}getTranslatedSource(){const e=this.gl.getExtension("WEBGL_debug_shaders");return e?e.getTranslatedShaderSource(this.handle):"No translated source available. WEBGL_debug_shaders not implemented"}_compile(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.source;if(e.startsWith("#version ")||(e=`#version 100
`.concat(e)),this.source=e,this.gl.shaderSource(this.handle,this.source),this.gl.compileShader(this.handle),!this.getParameter(35713)){const r=this.gl.getShaderInfoLog(this.handle),{shaderName:i,errors:s,warnings:o}=Ik(r,this.source,this.shaderType,this.id);throw K.error("GLSL compilation errors in ".concat(i,`
`).concat(s))(),K.warn("GLSL compilation warnings in ".concat(i,`
`).concat(o))(),new Error("GLSL compilation errors in ".concat(i))}}_deleteHandle(){this.gl.deleteShader(this.handle)}_getOptsFromHandle(){return{type:this.getParameter(35663),source:this.getSource()}}}class Up extends Gl{get[Symbol.toStringTag](){return"VertexShader"}constructor(e,n){typeof n=="string"&&(n={source:n}),super(e,Object.assign({},n,{shaderType:35633}))}_createHandle(){return this.gl.createShader(35633)}}class jp extends Gl{get[Symbol.toStringTag](){return"FragmentShader"}constructor(e,n){typeof n=="string"&&(n={source:n}),super(e,Object.assign({},n,{shaderType:35632}))}_createHandle(){return this.gl.createShader(35632)}}const Nk={5126:De.bind(null,"uniform1fv",sn,1,Pt),35664:De.bind(null,"uniform2fv",sn,2,Pt),35665:De.bind(null,"uniform3fv",sn,3,Pt),35666:De.bind(null,"uniform4fv",sn,4,Pt),5124:De.bind(null,"uniform1iv",oi,1,Pt),35667:De.bind(null,"uniform2iv",oi,2,Pt),35668:De.bind(null,"uniform3iv",oi,3,Pt),35669:De.bind(null,"uniform4iv",oi,4,Pt),35670:De.bind(null,"uniform1iv",oi,1,Pt),35671:De.bind(null,"uniform2iv",oi,2,Pt),35672:De.bind(null,"uniform3iv",oi,3,Pt),35673:De.bind(null,"uniform4iv",oi,4,Pt),35674:De.bind(null,"uniformMatrix2fv",sn,4,Lr),35675:De.bind(null,"uniformMatrix3fv",sn,9,Lr),35676:De.bind(null,"uniformMatrix4fv",sn,16,Lr),35678:_t,35680:_t,5125:De.bind(null,"uniform1uiv",mu,1,Pt),36294:De.bind(null,"uniform2uiv",mu,2,Pt),36295:De.bind(null,"uniform3uiv",mu,3,Pt),36296:De.bind(null,"uniform4uiv",mu,4,Pt),35685:De.bind(null,"uniformMatrix2x3fv",sn,6,Lr),35686:De.bind(null,"uniformMatrix2x4fv",sn,8,Lr),35687:De.bind(null,"uniformMatrix3x2fv",sn,6,Lr),35688:De.bind(null,"uniformMatrix3x4fv",sn,12,Lr),35689:De.bind(null,"uniformMatrix4x2fv",sn,8,Lr),35690:De.bind(null,"uniformMatrix4x3fv",sn,12,Lr),35678:_t,35680:_t,35679:_t,35682:_t,36289:_t,36292:_t,36293:_t,36298:_t,36299:_t,36300:_t,36303:_t,36306:_t,36307:_t,36308:_t,36311:_t},Fk={},Dk={},Bk={},ub=[0];function Yy(t,e,n,r){e===1&&typeof t=="boolean"&&(t=t?1:0),Number.isFinite(t)&&(ub[0]=t,t=ub);const i=t.length;if(i%e&&K.warn("Uniform size should be multiples of ".concat(e),t)(),t instanceof n)return t;let s=r[i];s||(s=new n(i),r[i]=s);for(let o=0;o<i;o++)s[o]=t[o];return s}function sn(t,e){return Yy(t,e,Float32Array,Fk)}function oi(t,e){return Yy(t,e,Int32Array,Dk)}function mu(t,e){return Yy(t,e,Uint32Array,Bk)}function fb(t,e,n){const r=Nk[n.type];if(!r)throw new Error("Unknown GLSL uniform type ".concat(n.type));return r().bind(null,t,e)}function zk(t){if(t[t.length-1]!=="]")return{name:t,length:1,isArray:!1};const e=/([^[]*)(\[[0-9]+\])?/,n=t.match(e);if(!n||n.length<2)throw new Error("Failed to parse GLSL uniform name ".concat(t));return{name:n[1],length:n[2]||1,isArray:!!n[2]}}function Uk(t,e,n){for(const r in t){const i=t[r];if((!n||!!n[r])&&!jk(i))throw e=e?"".concat(e," "):"",console.error("".concat(e," Bad uniform ").concat(r),i),new Error("".concat(e," Bad uniform ").concat(r))}return!0}function jk(t){return Array.isArray(t)||ArrayBuffer.isView(t)?$k(t):isFinite(t)||t===!0||t===!1||t instanceof Ss||t instanceof xo?!0:t instanceof ft?!!t.texture:!1}function Vk(t,e,n){if(Array.isArray(n)||ArrayBuffer.isView(n))if(t[e]){const r=t[e];for(let i=0,s=n.length;i<s;++i)r[i]=n[i]}else t[e]=n.slice();else t[e]=n}function $k(t){if(t.length===0)return!1;const e=Math.min(t.length,16);for(let n=0;n<e;++n)if(!Number.isFinite(t[n]))return!1;return!0}function _t(){let t=null;return(e,n,r)=>{const i=t!==r;return i&&(e.uniform1i(n,r),t=r),i}}function De(t,e,n,r){let i=null,s=null;return(o,a,l)=>{const c=e(l,n),u=c.length;let f=!1;if(i===null)i=new Float32Array(u),s=u,f=!0;else{$(s===u,"Uniform length cannot change.");for(let d=0;d<u;++d)if(c[d]!==i[d]){f=!0;break}}return f&&(r(o,t,a,c),i.set(c)),f}}function Pt(t,e,n,r){t[e](n,r)}function Lr(t,e,n,r){t[e](n,!1,r)}const Gk=5120,Wk=5121,Hk=5122,Xk=5123,db=0,yu=1,Yk=2,Kk=3,vu=4,qk=5,Zk=6,lt=5126,Qk=35664,Jk=35665,eN=35666,Ua=5124,tN=35667,nN=35668,rN=35669,ja=5125,iN=36294,sN=36295,oN=36296,aN=35670,lN=35671,cN=35672,uN=35673,fN=35674,dN=35675,hN=35676,pN=35685,gN=35686,mN=35687,yN=35688,vN=35689,_N=35690,Nm={[lt]:[lt,1,"float"],[Qk]:[lt,2,"vec2"],[Jk]:[lt,3,"vec3"],[eN]:[lt,4,"vec4"],[Ua]:[Ua,1,"int"],[tN]:[Ua,2,"ivec2"],[nN]:[Ua,3,"ivec3"],[rN]:[Ua,4,"ivec4"],[ja]:[ja,1,"uint"],[iN]:[ja,2,"uvec2"],[sN]:[ja,3,"uvec3"],[oN]:[ja,4,"uvec4"],[aN]:[lt,1,"bool"],[lN]:[lt,2,"bvec2"],[cN]:[lt,3,"bvec3"],[uN]:[lt,4,"bvec4"],[fN]:[lt,8,"mat2"],[pN]:[lt,8,"mat2x3"],[gN]:[lt,8,"mat2x4"],[dN]:[lt,12,"mat3"],[mN]:[lt,12,"mat3x2"],[yN]:[lt,12,"mat3x4"],[hN]:[lt,16,"mat4"],[vN]:[lt,16,"mat4x2"],[_N]:[lt,16,"mat4x3"]};function bN(t){switch(t){case db:return db;case yu:return yu;case Kk:return yu;case Yk:return yu;case vu:return vu;case qk:return vu;case Zk:return vu;default:return $(!1),0}}function hb(t){const e=Nm[t];if(!e)return null;const[n,r]=e;return{type:n,components:r}}function TP(t,e){switch(t){case Gk:case Wk:case Hk:case Xk:t=lt;break}for(const n in Nm){const[r,i,s]=Nm[n];if(r===t&&i===e)return{glType:n,name:s}}return null}class EN{constructor(e){this.id=e.id,this.attributeInfos=[],this.attributeInfosByName={},this.attributeInfosByLocation=[],this.varyingInfos=[],this.varyingInfosByName={},Object.seal(this),this._readAttributesFromProgram(e),this._readVaryingsFromProgram(e)}getAttributeInfo(e){const n=Number(e);return Number.isFinite(n)?this.attributeInfosByLocation[n]:this.attributeInfosByName[e]||null}getAttributeLocation(e){const n=this.getAttributeInfo(e);return n?n.location:-1}getAttributeAccessor(e){const n=this.getAttributeInfo(e);return n?n.accessor:null}getVaryingInfo(e){const n=Number(e);return Number.isFinite(n)?this.varyingInfos[n]:this.varyingInfosByName[e]||null}getVaryingIndex(e){const n=this.getVaryingInfo();return n?n.location:-1}getVaryingAccessor(e){const n=this.getVaryingInfo();return n?n.accessor:null}_readAttributesFromProgram(e){const{gl:n}=e,r=n.getProgramParameter(e.handle,35721);for(let i=0;i<r;i++){const{name:s,type:o,size:a}=n.getActiveAttrib(e.handle,i),l=n.getAttribLocation(e.handle,s);l>=0&&this._addAttribute(l,s,o,a)}this.attributeInfos.sort((i,s)=>i.location-s.location)}_readVaryingsFromProgram(e){const{gl:n}=e;if(!le(n))return;const r=n.getProgramParameter(e.handle,35971);for(let i=0;i<r;i++){const{name:s,type:o,size:a}=n.getTransformFeedbackVarying(e.handle,i);this._addVarying(i,s,o,a)}this.varyingInfos.sort((i,s)=>i.location-s.location)}_addAttribute(e,n,r,i){const{type:s,components:o}=hb(r),a={type:s,size:i*o};this._inferProperties(e,n,a);const l={location:e,name:n,accessor:new cn(a)};this.attributeInfos.push(l),this.attributeInfosByLocation[e]=l,this.attributeInfosByName[l.name]=l}_inferProperties(e,n,r){/instance/i.test(n)&&(r.divisor=1)}_addVarying(e,n,r,i){const{type:s,components:o}=hb(r),a=new cn({type:s,size:i*o}),l={location:e,name:n,accessor:a};this.varyingInfos.push(l),this.varyingInfosByName[l.name]=l}}const pb=4,wN=35981,xN=["setVertexArray","setAttributes","setBuffers","unsetBuffers","use","getUniformCount","getUniformInfo","getUniformLocation","getUniformValue","getVarying","getFragDataLocation","getAttachedShaders","getAttributeCount","getAttributeLocation","getAttributeInfo"];class SP extends Jr{get[Symbol.toStringTag](){return"Program"}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(e,n),this.stubRemovedMethods("Program","v6.0",xN),this._isCached=!1,this.initialize(n),Object.seal(this),this._setId(n.id)}initialize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{hash:n,vs:r,fs:i,varyings:s,bufferMode:o=wN}=e;return this.hash=n||"",this.vs=typeof r=="string"?new Up(this.gl,{id:"".concat(e.id,"-vs"),source:r}):r,this.fs=typeof i=="string"?new jp(this.gl,{id:"".concat(e.id,"-fs"),source:i}):i,$(this.vs instanceof Up),$(this.fs instanceof jp),this.uniforms={},this._textureUniforms={},s&&s.length>0&&(Ot(this.gl),this.varyings=s,this.gl2.transformFeedbackVaryings(this.handle,s,o)),this._compileAndLink(),this._readUniformLocationsFromLinkedProgram(),this.configuration=new EN(this),this.setProps(e)}delete(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this._isCached?this:super.delete(e)}setProps(e){return"uniforms"in e&&this.setUniforms(e.uniforms),this}draw(e){let{logPriority:n,drawMode:r=4,vertexCount:i,offset:s=0,start:o,end:a,isIndexed:l=!1,indexType:c=5123,instanceCount:u=0,isInstanced:f=u>0,vertexArray:d=null,transformFeedback:h,framebuffer:p,parameters:g={},uniforms:E,samplers:m}=e;if((E||m)&&(K.deprecated("Program.draw({uniforms})","Program.setUniforms(uniforms)")(),this.setUniforms(E||{})),K.priority>=n){const y=p?p.id:"default",v="mode=".concat(Ri(this.gl,r)," verts=").concat(i," ")+"instances=".concat(u," indexType=").concat(Ri(this.gl,c)," ")+"isInstanced=".concat(f," isIndexed=").concat(l," ")+"Framebuffer=".concat(y);K.log(n,v)()}return $(d),this.gl.useProgram(this.handle),!this._areTexturesRenderable()||i===0||f&&u===0?!1:(d.bindForDraw(i,u,()=>{if(p!==void 0&&(g=Object.assign({},g,{framebuffer:p})),h){const y=bN(r);h.begin(y)}this._bindTextures(),Zn(this.gl,g,()=>{l&&f?this.gl2.drawElementsInstanced(r,i,c,s,u):l&&le(this.gl)&&!isNaN(o)&&!isNaN(a)?this.gl2.drawRangeElements(r,o,a,i,c,s):l?this.gl.drawElements(r,i,c,s):f?this.gl2.drawArraysInstanced(r,s,i,u):this.gl.drawArrays(r,s,i)}),h&&h.end()}),!0)}setUniforms(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};K.priority>=2&&Uk(e,this.id,this._uniformSetters),this.gl.useProgram(this.handle);for(const n in e){const r=e[n],i=this._uniformSetters[n];if(i){let s=r,o=!1;if(s instanceof ft&&(s=s.texture),s instanceof Ss)if(o=this.uniforms[n]!==r,o){i.textureIndex===void 0&&(i.textureIndex=this._textureIndexCounter++);const a=s,{textureIndex:l}=i;a.bind(l),s=l,this._textureUniforms[n]=a}else s=i.textureIndex;else this._textureUniforms[n]&&delete this._textureUniforms[n];(i(s)||o)&&Vk(this.uniforms,n,r)}}return this}_areTexturesRenderable(){let e=!0;for(const n in this._textureUniforms){const r=this._textureUniforms[n];r.update(),e=e&&r.loaded}return e}_bindTextures(){for(const e in this._textureUniforms){const n=this._uniformSetters[e].textureIndex;this._textureUniforms[e].bind(n)}}_createHandle(){return this.gl.createProgram()}_deleteHandle(){this.gl.deleteProgram(this.handle)}_getOptionsFromHandle(e){const n=this.gl.getAttachedShaders(e),r={};for(const i of n)switch(this.gl.getShaderParameter(this.handle,35663)){case 35633:r.vs=new Up({handle:i});break;case 35632:r.fs=new jp({handle:i});break}return r}_getParameter(e){return this.gl.getProgramParameter(this.handle,e)}_setId(e){if(!e){const n=this._getName();this.id=Fi(n)}}_getName(){let e=this.vs.getName()||this.fs.getName();return e=e.replace(/shader/i,""),e=e?"".concat(e,"-program"):"program",e}_compileAndLink(){const{gl:e}=this;if(e.attachShader(this.handle,this.vs.handle),e.attachShader(this.handle,this.fs.handle),K.time(pb,"linkProgram for ".concat(this._getName()))(),e.linkProgram(this.handle),K.timeEnd(pb,"linkProgram for ".concat(this._getName()))(),e.debug||K.level>0){if(!e.getProgramParameter(this.handle,35714))throw new Error("Error linking: ".concat(e.getProgramInfoLog(this.handle)));if(e.validateProgram(this.handle),!e.getProgramParameter(this.handle,35715))throw new Error("Error validating: ".concat(e.getProgramInfoLog(this.handle)))}}_readUniformLocationsFromLinkedProgram(){const{gl:e}=this;this._uniformSetters={},this._uniformCount=this._getParameter(35718);for(let n=0;n<this._uniformCount;n++){const r=this.gl.getActiveUniform(this.handle,n),{name:i}=zk(r.name);let s=e.getUniformLocation(this.handle,i);if(this._uniformSetters[i]=fb(e,s,r),r.size>1)for(let o=0;o<r.size;o++)s=e.getUniformLocation(this.handle,"".concat(i,"[").concat(o,"]")),this._uniformSetters["".concat(i,"[").concat(o,"]")]=fb(e,s,r)}this._textureIndexCounter=0}getActiveUniforms(e,n){return this.gl2.getActiveUniforms(this.handle,e,n)}getUniformBlockIndex(e){return this.gl2.getUniformBlockIndex(this.handle,e)}getActiveUniformBlockParameter(e,n){return this.gl2.getActiveUniformBlockParameter(this.handle,e,n)}uniformBlockBinding(e,n){this.gl2.uniformBlockBinding(this.handle,e,n)}}const TN=34918,SN=34919,PN=35007,AN=36795,CN=35976,LN=35887,RN=36202;class Qf extends Jr{get[Symbol.toStringTag](){return"Query"}static isSupported(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];const r=le(e),i=Xy(e,ze.TIMER_QUERY);let s=r||i;for(const o of n)switch(o){case"queries":s=s&&r;break;case"timers":s=s&&i;break;default:$(!1)}return s}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(e,n),this.target=null,this._queryPending=!1,this._pollingPromise=null,Object.seal(this)}beginTimeElapsedQuery(){return this.begin(PN)}beginOcclusionQuery(){let{conservative:e=!1}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.begin(e?RN:LN)}beginTransformFeedbackQuery(){return this.begin(CN)}begin(e){return this._queryPending?this:(this.target=e,this.gl2.beginQuery(this.target,this.handle),this)}end(){return this._queryPending?this:(this.target&&(this.gl2.endQuery(this.target),this.target=null,this._queryPending=!0),this)}isResultAvailable(){if(!this._queryPending)return!1;const e=this.gl2.getQueryParameter(this.handle,SN);return e&&(this._queryPending=!1),e}isTimerDisjoint(){return this.gl2.getParameter(AN)}getResult(){return this.gl2.getQueryParameter(this.handle,TN)}getTimerMilliseconds(){return this.getResult()/1e6}createPoll(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Number.POSITIVE_INFINITY;if(this._pollingPromise)return this._pollingPromise;let n=0;return this._pollingPromise=new Promise((r,i)=>{const s=()=>{this.isResultAvailable()?(r(this.getResult()),this._pollingPromise=null):n++>e?(i("Timed out"),this._pollingPromise=null):requestAnimationFrame(s)};requestAnimationFrame(s)}),this._pollingPromise}_createHandle(){return Qf.isSupported(this.gl)?this.gl2.createQuery():null}_deleteHandle(){this.gl2.deleteQuery(this.handle)}}class PP extends Jr{get[Symbol.toStringTag](){return"TransformFeedback"}static isSupported(e){return le(e)}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Ot(e),super(e,n),this.initialize(n),this.stubRemovedMethods("TransformFeedback","v6.0",["pause","resume"]),Object.seal(this)}initialize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.buffers={},this.unused={},this.configuration=null,this.bindOnUse=!0,qo(this.buffers)||this.bind(()=>this._unbindBuffers()),this.setProps(e),this}setProps(e){"program"in e&&(this.configuration=e.program&&e.program.configuration),"configuration"in e&&(this.configuration=e.configuration),"bindOnUse"in e&&(e=e.bindOnUse),"buffers"in e&&this.setBuffers(e.buffers)}setBuffers(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.bind(()=>{for(const n in e)this.setBuffer(n,e[n])}),this}setBuffer(e,n){const r=this._getVaryingIndex(e),{buffer:i,byteSize:s,byteOffset:o}=this._getBufferParams(n);return r<0?(this.unused[e]=i,K.warn("".concat(this.id," unused varying buffer ").concat(e))(),this):(this.buffers[r]=n,this.bindOnUse||this._bindBuffer(r,i,o,s),this)}begin(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return this.gl.bindTransformFeedback(36386,this.handle),this._bindBuffers(),this.gl.beginTransformFeedback(e),this}end(){return this.gl.endTransformFeedback(),this._unbindBuffers(),this.gl.bindTransformFeedback(36386,null),this}_getBufferParams(e){let n,r,i;return e instanceof Ae?i=e:(i=e.buffer,r=e.byteSize,n=e.byteOffset),(n!==void 0||r!==void 0)&&(n=n||0,r=r||i.byteLength-n),{buffer:i,byteOffset:n,byteSize:r}}_getVaryingInfo(e){return this.configuration&&this.configuration.getVaryingInfo(e)}_getVaryingIndex(e){if(this.configuration)return this.configuration.getVaryingInfo(e).location;const n=Number(e);return Number.isFinite(n)?n:-1}_bindBuffers(){if(this.bindOnUse)for(const e in this.buffers){const{buffer:n,byteSize:r,byteOffset:i}=this._getBufferParams(this.buffers[e]);this._bindBuffer(e,n,i,r)}}_unbindBuffers(){if(this.bindOnUse)for(const e in this.buffers)this._bindBuffer(e,null)}_bindBuffer(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3?arguments[3]:void 0;const s=n&&n.handle;return!s||i===void 0?this.gl.bindBufferBase(35982,e,s):this.gl.bindBufferRange(35982,e,s,r,i),this}_createHandle(){return this.gl.createTransformFeedback()}_deleteHandle(){this.gl.deleteTransformFeedback(this.handle)}_bindHandle(e){this.gl.bindTransformFeedback(36386,this.handle)}}let _u=null;function ON(t){return(!_u||_u.byteLength<t)&&(_u=new ArrayBuffer(t)),_u}function IN(t,e){const n=ON(t.BYTES_PER_ELEMENT*e);return new t(n,0,e)}function MN(t){let{target:e,source:n,start:r=0,count:i=1}=t;const s=n.length,o=i*s;let a=0;for(let l=r;a<s;a++)e[l++]=n[a];for(;a<o;)a<o-a?(e.copyWithin(r+a,r,r+a),a*=2):(e.copyWithin(r+a,r,r+o-a),a=o);return e}const kN="elements must be GL.ELEMENT_ARRAY_BUFFER";class on extends Jr{get[Symbol.toStringTag](){return"VertexArrayObject"}static isSupported(e){return(arguments.length>1&&arguments[1]!==void 0?arguments[1]:{}).constantAttributeZero?le(e)||sP()==="Chrome":!0}static getDefaultArray(e){return e.luma=e.luma||{},e.luma.defaultVertexArray||(e.luma.defaultVertexArray=new on(e,{handle:null,isDefaultArray:!0})),e.luma.defaultVertexArray}static getMaxAttributes(e){return on.MAX_ATTRIBUTES=on.MAX_ATTRIBUTES||e.getParameter(34921),on.MAX_ATTRIBUTES}static setConstant(e,n,r){switch(r.constructor){case Float32Array:on._setConstantFloatArray(e,n,r);break;case Int32Array:on._setConstantIntArray(e,n,r);break;case Uint32Array:on._setConstantUintArray(e,n,r);break;default:$(!1)}}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=n.id||n.program&&n.program.id;super(e,Object.assign({},n,{id:r})),this.buffer=null,this.bufferValue=null,this.isDefaultArray=n.isDefaultArray||!1,this.gl2=e,this.initialize(n),Object.seal(this)}delete(){return super.delete(),this.buffer&&this.buffer.delete(),this}get MAX_ATTRIBUTES(){return on.getMaxAttributes(this.gl)}initialize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.setProps(e)}setProps(e){return this}setElementBuffer(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return $(!e||e.target===34963,kN),this.bind(()=>{this.gl.bindBuffer(34963,e?e.handle:null)}),this}setBuffer(e,n,r){if(n.target===34963)return this.setElementBuffer(n,r);const{size:i,type:s,stride:o,offset:a,normalized:l,integer:c,divisor:u}=r,{gl:f,gl2:d}=this;return e=Number(e),this.bind(()=>{f.bindBuffer(34962,n.handle),c?($(le(f)),d.vertexAttribIPointer(e,i,s,o,a)):f.vertexAttribPointer(e,i,s,l,o,a),f.enableVertexAttribArray(e),d.vertexAttribDivisor(e,u||0)}),this}enable(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return!n&&e===0&&!on.isSupported(this.gl,{constantAttributeZero:!0})||(e=Number(e),this.bind(()=>n?this.gl.enableVertexAttribArray(e):this.gl.disableVertexAttribArray(e))),this}getConstantBuffer(e,n){const r=this._normalizeConstantArrayValue(n),i=r.byteLength*e,s=r.length*e;let o=!this.buffer;if(this.buffer=this.buffer||new Ae(this.gl,i),o=o||this.buffer.reallocate(i),o=o||!this._compareConstantArrayValues(r,this.bufferValue),o){const a=IN(n.constructor,s);MN({target:a,source:r,start:0,count:s}),this.buffer.subData(a),this.bufferValue=n}return this.buffer}_normalizeConstantArrayValue(e){return Array.isArray(e)?new Float32Array(e):e}_compareConstantArrayValues(e,n){if(!e||!n||e.length!==n.length||e.constructor!==n.constructor)return!1;for(let r=0;r<e.length;++r)if(e[r]!==n[r])return!1;return!0}static _setConstantFloatArray(e,n,r){switch(r.length){case 1:e.vertexAttrib1fv(n,r);break;case 2:e.vertexAttrib2fv(n,r);break;case 3:e.vertexAttrib3fv(n,r);break;case 4:e.vertexAttrib4fv(n,r);break;default:$(!1)}}static _setConstantIntArray(e,n,r){switch($(le(e)),r.length){case 1:e.vertexAttribI1iv(n,r);break;case 2:e.vertexAttribI2iv(n,r);break;case 3:e.vertexAttribI3iv(n,r);break;case 4:e.vertexAttribI4iv(n,r);break;default:$(!1)}}static _setConstantUintArray(e,n,r){switch($(le(e)),r.length){case 1:e.vertexAttribI1uiv(n,r);break;case 2:e.vertexAttribI2uiv(n,r);break;case 3:e.vertexAttribI3uiv(n,r);break;case 4:e.vertexAttribI4uiv(n,r);break;default:$(!1)}}_createHandle(){return this.gl.createVertexArray()}_deleteHandle(e){return this.gl2.deleteVertexArray(e),[this.elements]}_bindHandle(e){this.gl2.bindVertexArray(e)}_getParameter(e,n){let{location:r}=n;return $(Number.isFinite(r)),this.bind(()=>{switch(e){case 34373:return this.gl.getVertexAttribOffset(r,e);default:return this.gl.getVertexAttrib(r,e)}})}}const NN="VertexArray: attributes must be Buffers or constants (i.e. typed array)",FN=/^(.+)__LOCATION_([0-9]+)$/,DN=["setBuffers","setGeneric","clearBindings","setLocations","setGenericValues","setDivisor","enable","disable"];class BN{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=n.id||n.program&&n.program.id;this.id=r,this.gl=e,this.configuration=null,this.elements=null,this.elementsAccessor=null,this.values=null,this.accessors=null,this.unused=null,this.drawParams=null,this.buffer=null,this.attributes={},this.vertexArrayObject=new on(e),hP(this,"VertexArray","v6.0",DN),this.initialize(n),Object.seal(this)}delete(){this.buffer&&this.buffer.delete(),this.vertexArrayObject.delete()}initialize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.reset(),this.configuration=null,this.bindOnUse=!1,this.setProps(e)}reset(){this.elements=null,this.elementsAccessor=null;const{MAX_ATTRIBUTES:e}=this.vertexArrayObject;return this.values=new Array(e).fill(null),this.accessors=new Array(e).fill(null),this.unused={},this.drawParams=null,this}setProps(e){return"program"in e&&(this.configuration=e.program&&e.program.configuration),"configuration"in e&&(this.configuration=e.configuration),"attributes"in e&&this.setAttributes(e.attributes),"elements"in e&&this.setElementBuffer(e.elements),"bindOnUse"in e&&(e=e.bindOnUse),this}clearDrawParams(){this.drawParams=null}getDrawParams(){return this.drawParams=this.drawParams||this._updateDrawParams(),this.drawParams}setAttributes(e){return Object.assign(this.attributes,e),this.vertexArrayObject.bind(()=>{for(const n in e){const r=e[n];this._setAttribute(n,r)}this.gl.bindBuffer(34962,null)}),this}setElementBuffer(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.elements=e,this.elementsAccessor=n,this.clearDrawParams(),this.vertexArrayObject.setElementBuffer(e,n),this}setBuffer(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(n.target===34963)return this.setElementBuffer(n,r);const{location:i,accessor:s}=this._resolveLocationAndAccessor(e,n,n.accessor,r);return i>=0&&(this.values[i]=n,this.accessors[i]=s,this.clearDrawParams(),this.vertexArrayObject.setBuffer(i,n,s)),this}setConstant(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const{location:i,accessor:s}=this._resolveLocationAndAccessor(e,n,Object.assign({size:n.length},r));return i>=0&&(n=this.vertexArrayObject._normalizeConstantArrayValue(n),this.values[i]=n,this.accessors[i]=s,this.clearDrawParams(),this.vertexArrayObject.enable(i,!1)),this}unbindBuffers(){return this.vertexArrayObject.bind(()=>{this.elements&&this.vertexArrayObject.setElementBuffer(null),this.buffer=this.buffer||new Ae(this.gl,{accessor:{size:4}});for(let e=0;e<this.vertexArrayObject.MAX_ATTRIBUTES;e++)this.values[e]instanceof Ae&&(this.gl.disableVertexAttribArray(e),this.gl.bindBuffer(34962,this.buffer.handle),this.gl.vertexAttribPointer(e,1,5126,!1,0,0))}),this}bindBuffers(){return this.vertexArrayObject.bind(()=>{this.elements&&this.setElementBuffer(this.elements);for(let e=0;e<this.vertexArrayObject.MAX_ATTRIBUTES;e++){const n=this.values[e];n instanceof Ae&&this.setBuffer(e,n)}}),this}bindForDraw(e,n,r){let i;return this.vertexArrayObject.bind(()=>{this._setConstantAttributes(e,n),i=r()}),i}_resolveLocationAndAccessor(e,n,r,i){const s={location:-1,accessor:null},{location:o,name:a}=this._getAttributeIndex(e);if(!Number.isFinite(o)||o<0)return this.unused[e]=n,K.once(3,()=>"unused value ".concat(e," in ").concat(this.id))(),s;const l=this._getAttributeInfo(a||o);if(!l)return s;const c=this.accessors[o]||{},u=cn.resolve(l.accessor,c,r,i),{size:f,type:d}=u;return $(Number.isFinite(f)&&Number.isFinite(d)),{location:o,accessor:u}}_getAttributeInfo(e){return this.configuration&&this.configuration.getAttributeInfo(e)}_getAttributeIndex(e){const n=Number(e);if(Number.isFinite(n))return{location:n};const r=FN.exec(e),i=r?r[1]:e,s=r?Number(r[2]):0;return this.configuration?{location:this.configuration.getAttributeLocation(i)+s,name:i}:{location:-1}}_setAttribute(e,n){if(n instanceof Ae)this.setBuffer(e,n);else if(Array.isArray(n)&&n.length&&n[0]instanceof Ae){const r=n[0],i=n[1];this.setBuffer(e,r,i)}else if(ArrayBuffer.isView(n)||Array.isArray(n)){const r=n;this.setConstant(e,r)}else if(n.buffer instanceof Ae){const r=n;this.setBuffer(e,r.buffer,r)}else throw new Error(NN)}_setConstantAttributes(e,n){const r=Math.max(e|0,n|0);let i=this.values[0];ArrayBuffer.isView(i)&&this._setConstantAttributeZero(i,r);for(let s=1;s<this.vertexArrayObject.MAX_ATTRIBUTES;s++)i=this.values[s],ArrayBuffer.isView(i)&&this._setConstantAttribute(s,i)}_setConstantAttributeZero(e,n){if(on.isSupported(this.gl,{constantAttributeZero:!0})){this._setConstantAttribute(0,e);return}const r=this.vertexArrayObject.getConstantBuffer(n,e);this.vertexArrayObject.setBuffer(0,r,this.accessors[0])}_setConstantAttribute(e,n){on.setConstant(this.gl,e,n)}_updateDrawParams(){const e={isIndexed:!1,isInstanced:!1,indexCount:1/0,vertexCount:1/0,instanceCount:1/0};for(let n=0;n<this.vertexArrayObject.MAX_ATTRIBUTES;n++)this._updateDrawParamsForLocation(e,n);return this.elements&&(e.elementCount=this.elements.getElementCount(this.elements.accessor),e.isIndexed=!0,e.indexType=this.elementsAccessor.type||this.elements.accessor.type,e.indexOffset=this.elementsAccessor.offset||0),e.indexCount===1/0&&(e.indexCount=0),e.vertexCount===1/0&&(e.vertexCount=0),e.instanceCount===1/0&&(e.instanceCount=0),e}_updateDrawParamsForLocation(e,n){const r=this.values[n],i=this.accessors[n];if(!r)return;const{divisor:s}=i,o=s>0;if(e.isInstanced=e.isInstanced||o,r instanceof Ae){const a=r;if(o){const l=a.getVertexCount(i);e.instanceCount=Math.min(e.instanceCount,l)}else{const l=a.getVertexCount(i);e.vertexCount=Math.min(e.vertexCount,l)}}}setElements(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return K.deprecated("setElements","setElementBuffer")(),this.setElementBuffer(e,n)}}function zN(t,e){const{maxElts:n=16,size:r=1}=e;let i="[";for(let o=0;o<t.length&&o<n;++o)o>0&&(i+=",".concat(o%r===0?" ":"")),i+=Wl(t[o],e);const s=t.length>n?"...":"]";return"".concat(i).concat(s)}function Wl(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const n=1e-16,{isInteger:r=!1}=e;if(Array.isArray(t)||ArrayBuffer.isView(t))return zN(t,e);if(!Number.isFinite(t))return String(t);if(Math.abs(t)<n)return r?"0":"0.";if(r||Math.abs(t)>100&&Math.abs(t)<1e4)return t.toFixed(0);const i=t.toPrecision(2);return i.indexOf(".0")===i.length-2?i.slice(0,-1):i}function gb(t){let{header:e="Uniforms",program:n,uniforms:r,undefinedOnly:i=!1}=t;$(n);const s=".*_.*",o=".*Matrix",a=n._uniformSetters,l={},c=Object.keys(a).sort();let u=0;for(const h of c)!h.match(s)&&!h.match(o)&&Vp({table:l,header:e,uniforms:r,uniformName:h,undefinedOnly:i})&&u++;for(const h of c)h.match(o)&&Vp({table:l,header:e,uniforms:r,uniformName:h,undefinedOnly:i})&&u++;for(const h of c)l[h]||Vp({table:l,header:e,uniforms:r,uniformName:h,undefinedOnly:i})&&u++;let f=0;const d={};if(!i)for(const h in r){const p=r[h];l[h]||(f++,d[h]={Type:"NOT USED: ".concat(p),[e]:Wl(p)})}return{table:l,count:u,unusedTable:d,unusedCount:f}}function Vp(t){let{table:e,header:n,uniforms:r,uniformName:i,undefinedOnly:s}=t;const o=r[i],a=UN(o);return!s||!a?(e[i]={[n]:a?Wl(o):"N/A","Uniform Type":a?o:"NOT PROVIDED"},!0):!1}function UN(t){return t!=null}function jN(t){let{vertexArray:e,header:n="Attributes"}=t;if(!e.configuration)return{};const r={};e.elements&&(r.ELEMENT_ARRAY_BUFFER=mb(e,e.elements,null,n));const i=e.values;for(const s in i){const o=e._getAttributeInfo(s);if(o){let a="".concat(s,": ").concat(o.name);const l=e.accessors[o.location];l&&(a="".concat(s,": ").concat(VN(o.name,l))),r[a]=mb(e,i[s],l,n)}}return r}function mb(t,e,n,r){const{gl:i}=t;if(!e)return{[r]:"null","Format ":"N/A"};let s="NOT PROVIDED",o=1,a=0,l=0,c,u,f;if(n&&(s=n.type,o=n.size,s=String(s).replace("Array",""),c=s.indexOf("nt")!==-1),e instanceof Ae){const d=e,{data:h,changed:p}=d.getDebugData();u=p?"*":"",f=h,l=d.byteLength,a=l/h.BYTES_PER_ELEMENT/o;let g;if(n){const E=n.divisor>0;g="".concat(E?"I ":"P "," ").concat(a," (x").concat(o,"=").concat(l," bytes ").concat(Ri(i,s),")")}else c=!0,g="".concat(l," bytes");return{[r]:"".concat(u).concat(Wl(f,{size:o,isInteger:c})),"Format ":g}}return f=e,o=e.length,s=String(e.constructor.name).replace("Array",""),c=s.indexOf("nt")!==-1,{[r]:"".concat(Wl(f,{size:o,isInteger:c})," (constant)"),"Format ":"".concat(o,"x").concat(s," (constant)")}}function VN(t,e){const{type:n,size:r}=e,i=TP(n,r);return i?"".concat(t," (").concat(i.name,")"):t}function $N(t){const e={},n="Accessors for ".concat(t.id);for(const r of t.attributeInfos)if(r){const i=yb(r);e["in ".concat(i)]={[n]:JSON.stringify(r.accessor)}}for(const r of t.varyingInfos)if(r){const i=yb(r);e["out ".concat(i)]={[n]:JSON.stringify(r.accessor)}}return e}function yb(t){const{type:e,size:n}=t.accessor,r=TP(e,n);return r?"".concat(r.name," ").concat(t.name):t.name}const vb=Qr()&&typeof document<"u";let GN=0;class WN{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{onCreateContext:n=E=>dP(E),onAddHTML:r=null,onInitialize:i=()=>{},onRender:s=()=>{},onFinalize:o=()=>{},onError:a,gl:l=null,glOptions:c={},debug:u=!1,createFramebuffer:f=!1,autoResizeViewport:d=!0,autoResizeDrawingBuffer:h=!0,stats:p=ds.get("animation-loop-".concat(GN++))}=e;let{useDevicePixels:g=!0}=e;"useDevicePixelRatio"in e&&(K.deprecated("useDevicePixelRatio","useDevicePixels")(),g=e.useDevicePixelRatio),this.props={onCreateContext:n,onAddHTML:r,onInitialize:i,onRender:s,onFinalize:o,onError:a,gl:l,glOptions:c,debug:u,createFramebuffer:f},this.gl=l,this.needsRedraw=null,this.timeline=null,this.stats=p,this.cpuTime=this.stats.get("CPU Time"),this.gpuTime=this.stats.get("GPU Time"),this.frameRate=this.stats.get("Frame Rate"),this._initialized=!1,this._running=!1,this._animationFrameId=null,this._nextFramePromise=null,this._resolveNextFrame=null,this._cpuStartTime=0,this.setProps({autoResizeViewport:d,autoResizeDrawingBuffer:h,useDevicePixels:g}),this.start=this.start.bind(this),this.stop=this.stop.bind(this),this._pageLoadPromise=null,this._onMousemove=this._onMousemove.bind(this),this._onMouseleave=this._onMouseleave.bind(this)}delete(){this.stop(),this._setDisplay(null)}setNeedsRedraw(e){return $(typeof e=="string"),this.needsRedraw=this.needsRedraw||e,this}setProps(e){return"autoResizeViewport"in e&&(this.autoResizeViewport=e.autoResizeViewport),"autoResizeDrawingBuffer"in e&&(this.autoResizeDrawingBuffer=e.autoResizeDrawingBuffer),"useDevicePixels"in e&&(this.useDevicePixels=e.useDevicePixels),this}start(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(this._running)return this;this._running=!0;const n=this._getPageLoadPromise().then(()=>!this._running||this._initialized?null:(this._createWebGLContext(e),this._createFramebuffer(),this._startEventHandling(),this._initializeCallbackData(),this._updateCallbackData(),this._resizeCanvasDrawingBuffer(),this._resizeViewport(),this._gpuTimeQuery=Qf.isSupported(this.gl,["timers"])?new Qf(this.gl):null,this._initialized=!0,this.onInitialize(this.animationProps))).then(r=>{this._running&&(this._addCallbackData(r||{}),r!==!1&&this._startLoop())});return this.props.onError&&n.catch(this.props.onError),this}redraw(){return this.isContextLost()?this:(this._beginTimers(),this._setupFrame(),this._updateCallbackData(),this._renderFrame(this.animationProps),this._clearNeedsRedraw(),this.offScreen&&this.gl.commit&&this.gl.commit(),this._resolveNextFrame&&(this._resolveNextFrame(this),this._nextFramePromise=null,this._resolveNextFrame=null),this._endTimers(),this)}stop(){return this._running&&(this._finalizeCallbackData(),this._cancelAnimationFrame(this._animationFrameId),this._nextFramePromise=null,this._resolveNextFrame=null,this._animationFrameId=null,this._running=!1),this}attachTimeline(e){return this.timeline=e,this.timeline}detachTimeline(){this.timeline=null}waitForRender(){return this.setNeedsRedraw("waitForRender"),this._nextFramePromise||(this._nextFramePromise=new Promise(e=>{this._resolveNextFrame=e})),this._nextFramePromise}async toDataURL(){return this.setNeedsRedraw("toDataURL"),await this.waitForRender(),this.gl.canvas.toDataURL()}isContextLost(){return this.gl.isContextLost()}onCreateContext(){return this.props.onCreateContext(...arguments)}onInitialize(){return this.props.onInitialize(...arguments)}onRender(){return this.props.onRender(...arguments)}onFinalize(){return this.props.onFinalize(...arguments)}getHTMLControlValue(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;const r=document.getElementById(e);return r?Number(r.value):n}setViewParameters(){return K.removed("AnimationLoop.setViewParameters","AnimationLoop.setProps")(),this}_startLoop(){const e=()=>{this._running&&(this.redraw(),this._animationFrameId=this._requestAnimationFrame(e))};this._cancelAnimationFrame(this._animationFrameId),this._animationFrameId=this._requestAnimationFrame(e)}_getPageLoadPromise(){return this._pageLoadPromise||(this._pageLoadPromise=vb?new Promise((e,n)=>{if(vb&&document.readyState==="complete"){e(document);return}window.addEventListener("load",()=>{e(document)})}):Promise.resolve({})),this._pageLoadPromise}_setDisplay(e){this.display&&(this.display.delete(),this.display.animationLoop=null),e&&(e.animationLoop=this),this.display=e}_cancelAnimationFrame(e){return this.display&&this.display.cancelAnimationFrame?this.display.cancelAnimationFrame(e):ZM(e)}_requestAnimationFrame(e){if(this._running)return this.display&&this.display.requestAnimationFrame?this.display.requestAnimationFrame(e):qM(e)}_renderFrame(){if(this.display){this.display._renderFrame(...arguments);return}this.onRender(...arguments)}_clearNeedsRedraw(){this.needsRedraw=null}_setupFrame(){this._resizeCanvasDrawingBuffer(),this._resizeViewport(),this._resizeFramebuffer()}_initializeCallbackData(){this.animationProps={gl:this.gl,stop:this.stop,canvas:this.gl.canvas,framebuffer:this.framebuffer,useDevicePixels:this.useDevicePixels,needsRedraw:null,startTime:Date.now(),engineTime:0,tick:0,tock:0,time:0,_timeline:this.timeline,_loop:this,_animationLoop:this,_mousePosition:null}}_updateCallbackData(){const{width:e,height:n,aspect:r}=this._getSizeAndAspect();(e!==this.animationProps.width||n!==this.animationProps.height)&&this.setNeedsRedraw("drawing buffer resized"),r!==this.animationProps.aspect&&this.setNeedsRedraw("drawing buffer aspect changed"),this.animationProps.width=e,this.animationProps.height=n,this.animationProps.aspect=r,this.animationProps.needsRedraw=this.needsRedraw,this.animationProps.engineTime=Date.now()-this.animationProps.startTime,this.timeline&&this.timeline.update(this.animationProps.engineTime),this.animationProps.tick=Math.floor(this.animationProps.time/1e3*60),this.animationProps.tock++,this.animationProps.time=this.timeline?this.timeline.getTime():this.animationProps.engineTime,this.animationProps._offScreen=this.offScreen}_finalizeCallbackData(){this.onFinalize(this.animationProps)}_addCallbackData(e){typeof e=="object"&&e!==null&&(this.animationProps=Object.assign({},this.animationProps,e))}_createWebGLContext(e){if(this.offScreen=e.canvas&&typeof OffscreenCanvas<"u"&&e.canvas instanceof OffscreenCanvas,e=Object.assign({},e,this.props.glOptions),this.gl=this.props.gl?$y(this.props.gl,e):this.onCreateContext(e),!ch(this.gl))throw new Error("AnimationLoop.onCreateContext - illegal context returned");DM(this.gl),this._createInfoDiv()}_createInfoDiv(){if(this.gl.canvas&&this.props.onAddHTML){const e=document.createElement("div");document.body.appendChild(e),e.style.position="relative";const n=document.createElement("div");n.style.position="absolute",n.style.left="10px",n.style.bottom="10px",n.style.width="300px",n.style.background="white",e.appendChild(this.gl.canvas),e.appendChild(n);const r=this.props.onAddHTML(n);r&&(n.innerHTML=r)}}_getSizeAndAspect(){const e=this.gl.drawingBufferWidth,n=this.gl.drawingBufferHeight;let r=1;const{canvas:i}=this.gl;return i&&i.clientHeight?r=i.clientWidth/i.clientHeight:e>0&&n>0&&(r=e/n),{width:e,height:n,aspect:r}}_resizeViewport(){this.autoResizeViewport&&this.gl.viewport(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight)}_resizeCanvasDrawingBuffer(){this.autoResizeDrawingBuffer&&VM(this.gl,{useDevicePixels:this.useDevicePixels})}_createFramebuffer(){this.props.createFramebuffer&&(this.framebuffer=new ft(this.gl))}_resizeFramebuffer(){this.framebuffer&&this.framebuffer.resize({width:this.gl.drawingBufferWidth,height:this.gl.drawingBufferHeight})}_beginTimers(){this.frameRate.timeEnd(),this.frameRate.timeStart(),this._gpuTimeQuery&&this._gpuTimeQuery.isResultAvailable()&&!this._gpuTimeQuery.isTimerDisjoint()&&this.stats.get("GPU Time").addTime(this._gpuTimeQuery.getTimerMilliseconds()),this._gpuTimeQuery&&this._gpuTimeQuery.beginTimeElapsedQuery(),this.cpuTime.timeStart()}_endTimers(){this.cpuTime.timeEnd(),this._gpuTimeQuery&&this._gpuTimeQuery.end()}_startEventHandling(){const{canvas:e}=this.gl;e&&(e.addEventListener("mousemove",this._onMousemove),e.addEventListener("mouseleave",this._onMouseleave))}_onMousemove(e){this.animationProps._mousePosition=[e.offsetX,e.offsetY]}_onMouseleave(e){this.animationProps._mousePosition=null}}const bc="vs",Ky="fs";function pn(t,e){if(!t)throw new Error(e||"shadertools: assertion failed.")}const $p={number:{validate(t,e){return Number.isFinite(t)&&(!("max"in e)||t<=e.max)&&(!("min"in e)||t>=e.min)}},array:{validate(t,e){return Array.isArray(t)||ArrayBuffer.isView(t)}}};function HN(t){const e={};for(const n in t){const r=t[n],i=XN(r);e[n]=i}return e}function XN(t){let e=_b(t);return e==="object"?t?"type"in t?Object.assign({},t,$p[t.type]):"value"in t?(e=_b(t.value),Object.assign({type:e},t,$p[e])):{type:"object",value:t}:{type:"object",value:null}:Object.assign({type:e,value:t},$p[e])}function _b(t){return Array.isArray(t)||ArrayBuffer.isView(t)?"array":typeof t}const YN="vs",KN="fs";class bb{constructor(e){let{name:n,vs:r,fs:i,dependencies:s=[],uniforms:o,getUniforms:a,deprecations:l=[],defines:c={},inject:u={},vertexShader:f,fragmentShader:d}=e;pn(typeof n=="string"),this.name=n,this.vs=r||f,this.fs=i||d,this.getModuleUniforms=a,this.dependencies=s,this.deprecations=this._parseDeprecationDefinitions(l),this.defines=c,this.injections=qN(u),o&&(this.uniforms=HN(o))}getModuleSource(e){let n;switch(e){case YN:n=this.vs||"";break;case KN:n=this.fs||"";break;default:pn(!1)}return"#define MODULE_".concat(this.name.toUpperCase().replace(/[^0-9a-z]/gi,"_"),`
`).concat(n,"// END MODULE_").concat(this.name,`

`)}getUniforms(e,n){return this.getModuleUniforms?this.getModuleUniforms(e,n):this.uniforms?this._defaultGetUniforms(e):{}}getDefines(){return this.defines}checkDeprecations(e,n){this.deprecations.forEach(r=>{r.regex.test(e)&&(r.deprecated?n.deprecated(r.old,r.new)():n.removed(r.old,r.new)())})}_parseDeprecationDefinitions(e){return e.forEach(n=>{switch(n.type){case"function":n.regex=new RegExp("\\b".concat(n.old,"\\("));break;default:n.regex=new RegExp("".concat(n.type," ").concat(n.old,";"))}}),e}_defaultGetUniforms(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const n={},r=this.uniforms;for(const i in r){const s=r[i];i in e&&!s.private?(s.validate&&pn(s.validate(e[i],s),"".concat(this.name,": invalid ").concat(i)),n[i]=e[i]):n[i]=s.value}return n}}function qN(t){const e={vs:{},fs:{}};for(const n in t){let r=t[n];const i=n.slice(0,2);typeof r=="string"&&(r={order:0,injection:r}),e[i][n]=r}return e}function ZN(t){return QN(CP(t))}function QN(t){const e={},n={};return AP({modules:t,level:0,moduleMap:e,moduleDepth:n}),Object.keys(n).sort((r,i)=>n[i]-n[r]).map(r=>e[r])}function AP(t){let{modules:e,level:n,moduleMap:r,moduleDepth:i}=t;if(n>=5)throw new Error("Possible loop in shader dependency graph");for(const s of e)r[s.name]=s,(i[s.name]===void 0||i[s.name]<n)&&(i[s.name]=n);for(const s of e)s.dependencies&&AP({modules:s.dependencies,level:n+1,moduleMap:r,moduleDepth:i})}function CP(t,e){return t.map(n=>(n instanceof bb||(pn(typeof n!="string","Shader module use by name is deprecated. Import shader module '".concat(n,"' and use it directly.")),pn(n.name,"shader module has no name"),n=new bb(n),n.dependencies=CP(n.dependencies)),n))}function JN(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const e=typeof window<"u"?window.navigator||{}:{},n=t.userAgent||e.userAgent||"",r=n.indexOf("MSIE ")!==-1,i=n.indexOf("Trident/")!==-1;return r||i}const eF=7936,tF=7937,nF=7938,rF=35724,qy={GLSL_FRAG_DATA:["WEBGL_draw_buffers",!0],GLSL_FRAG_DEPTH:["EXT_frag_depth",!0],GLSL_DERIVATIVES:["OES_standard_derivatives",!0],GLSL_TEXTURE_LOD:["EXT_shader_texture_lod",!0]},ss={};Object.keys(qy).forEach(t=>{ss[t]=t});function iF(t){return typeof WebGL2RenderingContext<"u"&&t instanceof WebGL2RenderingContext?!0:!!(t&&t._version===2)}function sF(t){const e=t.getExtension("WEBGL_debug_renderer_info"),n=t.getParameter(e&&e.UNMASKED_VENDOR_WEBGL||eF),r=t.getParameter(e&&e.UNMASKED_RENDERER_WEBGL||tF);return{gpuVendor:oF(n,r),vendor:n,renderer:r,version:t.getParameter(nF),shadingLanguageVersion:t.getParameter(rF)}}function oF(t,e){return t.match(/NVIDIA/i)||e.match(/NVIDIA/i)?"NVIDIA":t.match(/INTEL/i)||e.match(/INTEL/i)?"INTEL":t.match(/AMD/i)||e.match(/AMD/i)||t.match(/ATI/i)||e.match(/ATI/i)?"AMD":"UNKNOWN GPU"}const Gp={};function Eb(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const r=qy[e];if(pn(r,e),!JN(n))return!0;if(e in Gp)return Gp[e];const i=r[0],s=n.behavior||"enable",o="#extension GL_".concat(i," : ").concat(s,`
void main(void) {}`),a=t.createShader(35633);t.shaderSource(a,o),t.compileShader(a);const l=t.getShaderParameter(a,35713);return t.deleteShader(a),Gp[e]=l,l}function aF(t,e){const n=qy[e];pn(n,e);const r=iF(t)&&n[1]||n[0],i=typeof r=="string"?!!t.getExtension(r):r;return pn(i===!1||i===!0),i}function bu(t,e){return e=Array.isArray(e)?e:[e],e.every(n=>aF(t,n))}function lF(t){switch(sF(t).gpuVendor.toLowerCase()){case"nvidia":return`#define NVIDIA_GPU
// Nvidia optimizes away the calculation necessary for emulated fp64
#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1
`;case"intel":return`#define INTEL_GPU
// Intel optimizes away the calculation necessary for emulated fp64
#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1
// Intel's built-in 'tan' function doesn't have acceptable precision
#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1
// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow
#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1
`;case"amd":return`#define AMD_GPU
`;default:return`#define DEFAULT_GPU
// Prevent driver from optimizing away the calculation necessary for emulated fp64
#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1
// Intel's built-in 'tan' function doesn't have acceptable precision
#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1
// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow
#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1
`}}function cF(t,e,n){let r=`#if (__VERSION__ > 120)

# define FEATURE_GLSL_DERIVATIVES
# define FEATURE_GLSL_DRAW_BUFFERS
# define FEATURE_GLSL_FRAG_DEPTH
# define FEATURE_GLSL_TEXTURE_LOD

// DEPRECATED FLAGS, remove in v9
# define FRAG_DEPTH
# define DERIVATIVES
# define DRAW_BUFFERS
# define TEXTURE_LOD

#endif // __VERSION
`;return bu(t,ss.GLSL_FRAG_DEPTH)&&(r+=`
// FRAG_DEPTH => gl_FragDepth is available
#ifdef GL_EXT_frag_depth
#extension GL_EXT_frag_depth : enable
# define FEATURE_GLSL_FRAG_DEPTH
# define FRAG_DEPTH
# define gl_FragDepth gl_FragDepthEXT
#endif
`),bu(t,ss.GLSL_DERIVATIVES)&&Eb(t,ss.GLSL_DERIVATIVES)&&(r+=`
// DERIVATIVES => dxdF, dxdY and fwidth are available
#ifdef GL_OES_standard_derivatives
#extension GL_OES_standard_derivatives : enable
# define FEATURE_GLSL_DERIVATIVES
# define DERIVATIVES
#endif
`),bu(t,ss.GLSL_FRAG_DATA)&&Eb(t,ss.GLSL_FRAG_DATA,{behavior:"require"})&&(r+=`
// DRAW_BUFFERS => gl_FragData[] is available
#ifdef GL_EXT_draw_buffers
#extension GL_EXT_draw_buffers : require
#define FEATURE_GLSL_DRAW_BUFFERS
#define DRAW_BUFFERS
#endif
`),bu(t,ss.GLSL_TEXTURE_LOD)&&(r+=`// TEXTURE_LOD => texture2DLod etc are available
#ifdef GL_EXT_shader_texture_lod
#extension GL_EXT_shader_texture_lod : enable

# define FEATURE_GLSL_TEXTURE_LOD
# define TEXTURE_LOD

#endif
`),r}const uF=`#ifdef MODULE_LOGDEPTH
  logdepth_adjustPosition(gl_Position);
#endif
`,fF=`#ifdef MODULE_MATERIAL
  gl_FragColor = material_filterColor(gl_FragColor);
#endif

#ifdef MODULE_LIGHTING
  gl_FragColor = lighting_filterColor(gl_FragColor);
#endif

#ifdef MODULE_FOG
  gl_FragColor = fog_filterColor(gl_FragColor);
#endif

#ifdef MODULE_PICKING
  gl_FragColor = picking_filterHighlightColor(gl_FragColor);
  gl_FragColor = picking_filterPickingColor(gl_FragColor);
#endif

#ifdef MODULE_LOGDEPTH
  logdepth_setFragDepth();
#endif
`,dF={[bc]:uF,[Ky]:fF},sf="__LUMA_INJECT_DECLARATIONS__",wb=/void\s+main\s*\([^)]*\)\s*\{\n?/,xb=/}\n?[^{}]*$/,Wp=[];function Tb(t,e,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;const i=e===bc;for(const s in n){const o=n[s];o.sort((l,c)=>l.order-c.order),Wp.length=o.length;for(let l=0,c=o.length;l<c;++l)Wp[l]=o[l].injection;const a="".concat(Wp.join(`
`),`
`);switch(s){case"vs:#decl":i&&(t=t.replace(sf,a));break;case"vs:#main-start":i&&(t=t.replace(wb,l=>l+a));break;case"vs:#main-end":i&&(t=t.replace(xb,l=>a+l));break;case"fs:#decl":i||(t=t.replace(sf,a));break;case"fs:#main-start":i||(t=t.replace(wb,l=>l+a));break;case"fs:#main-end":i||(t=t.replace(xb,l=>a+l));break;default:t=t.replace(s,l=>l+a)}}return t=t.replace(sf,""),r&&(t=t.replace(/\}\s*$/,s=>s+dF[e])),t}function Fm(t){const e={};return pn(Array.isArray(t)&&t.length>1),t.forEach(n=>{for(const r in n)e[r]=e[r]?"".concat(e[r],`
`).concat(n[r]):n[r]}),e}function Zo(t){return new RegExp("\\b".concat(t,"[ \\t]+(\\w+[ \\t]+\\w+(\\[\\w+\\])?;)"),"g")}const LP=[[/^(#version[ \t]+(100|300[ \t]+es))?[ \t]*\n/,`#version 300 es
`],[/\btexture(2D|2DProj|Cube)Lod(EXT)?\(/g,"textureLod("],[/\btexture(2D|2DProj|Cube)(EXT)?\(/g,"texture("]],hF=[...LP,[Zo("attribute"),"in $1"],[Zo("varying"),"out $1"]],pF=[...LP,[Zo("varying"),"in $1"]],RP=[[/^#version[ \t]+300[ \t]+es/,"#version 100"],[/\btexture(2D|2DProj|Cube)Lod\(/g,"texture$1LodEXT("],[/\btexture\(/g,"texture2D("],[/\btextureLod\(/g,"texture2DLodEXT("]],gF=[...RP,[Zo("in"),"attribute $1"],[Zo("out"),"varying $1"]],mF=[...RP,[Zo("in"),"varying $1"]],Dm="gl_FragColor",Bm=/\bout[ \t]+vec4[ \t]+(\w+)[ \t]*;\n?/,yF=/void\s+main\s*\([^)]*\)\s*\{\n?/;function vF(t,e,n){switch(e){case 300:return n?Jf(t,hF):_F(t);case 100:return n?Jf(t,gF):bF(t);default:throw new Error("unknown GLSL version ".concat(e))}}function Jf(t,e){for(const[n,r]of e)t=t.replace(n,r);return t}function _F(t){t=Jf(t,pF);const e=t.match(Bm);if(e){const n=e[1];t=t.replace(new RegExp("\\b".concat(Dm,"\\b"),"g"),n)}else{const n="fragmentColor";t=t.replace(yF,r=>"out vec4 ".concat(n,`;
`).concat(r)).replace(new RegExp("\\b".concat(Dm,"\\b"),"g"),n)}return t}function bF(t){t=Jf(t,mF);const e=t.match(Bm);if(e){const n=e[1];t=t.replace(Bm,"").replace(new RegExp("\\b".concat(n,"\\b"),"g"),Dm)}return t}const EF=`

`.concat(sf,`

`),OP={[bc]:"vertex",[Ky]:"fragment"},wF=`precision highp float;

`;function xF(t,e){const{vs:n,fs:r}=e,i=ZN(e.modules||[]);return{gl:t,vs:Sb(t,Object.assign({},e,{source:n,type:bc,modules:i})),fs:Sb(t,Object.assign({},e,{source:r,type:Ky,modules:i})),getUniforms:TF(i)}}function Sb(t,e){let{id:n,source:r,type:i,modules:s,defines:o={},hookFunctions:a=[],inject:l={},transpileToGLSL100:c=!1,prologue:u=!0,log:f}=e;pn(typeof r=="string","shader source must be a string");const d=i===bc,h=r.split(`
`);let p=100,g="",E=r;h[0].indexOf("#version ")===0?(p=300,g=h[0],E=h.slice(1).join(`
`)):g="#version ".concat(p);const m={};s.forEach(P=>{Object.assign(m,P.getDefines())}),Object.assign(m,o);let y=u?"".concat(g,`
`).concat(PF({id:n,source:r,type:i}),`
`).concat(SF({type:i}),`
`).concat(lF(t),`
`).concat(cF(t),`
`).concat(AF(m),`
`).concat(d?"":wF,`
`):"".concat(g,`
`);const v=LF(a),b={},T={},S={};for(const P in l){const R=typeof l[P]=="string"?{injection:l[P],order:0}:l[P],O=P.match(/^(v|f)s:(#)?([\w-]+)$/);if(O){const L=O[2],M=O[3];L?M==="decl"?T[P]=[R]:S[P]=[R]:b[P]=[R]}else S[P]=[R]}for(const P of s){f&&P.checkDeprecations(E,f);const R=P.getModuleSource(i,p);y+=R;const O=P.injections[i];for(const L in O){const M=L.match(/^(v|f)s:#([\w-]+)$/);if(M){const U=M[2]==="decl"?T:S;U[L]=U[L]||[],U[L].push(O[L])}else b[L]=b[L]||[],b[L].push(O[L])}}return y+=EF,y=Tb(y,i,T),y+=CF(v[i],b),y+=E,y=Tb(y,i,S),y=vF(y,c?100:p,d),y}function TF(t){return function(n){const r={};for(const i of t){const s=i.getUniforms(n,r);Object.assign(r,s)}return r}}function SF(t){let{type:e}=t;return`
#define SHADER_TYPE_`.concat(OP[e].toUpperCase(),`
`)}function PF(t){let{id:e,source:n,type:r}=t;return e&&typeof e=="string"&&n.indexOf("SHADER_NAME")===-1?`
#define SHADER_NAME `.concat(e,"_").concat(OP[r],`

`):""}function AF(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=0,n="";for(const r in t){e===0&&(n+=`
// APPLICATION DEFINES
`),e++;const i=t[r];(i||Number.isFinite(i))&&(n+="#define ".concat(r.toUpperCase()," ").concat(t[r],`
`))}return e===0&&(n+=`
`),n}function CF(t,e){let n="";for(const r in t){const i=t[r];if(n+="void ".concat(i.signature,` {
`),i.header&&(n+="  ".concat(i.header)),e[r]){const s=e[r];s.sort((o,a)=>o.order-a.order);for(const o of s)n+="  ".concat(o.injection,`
`)}i.footer&&(n+="  ".concat(i.footer)),n+=`}
`}return n}function LF(t){const e={vs:{},fs:{}};return t.forEach(n=>{let r;typeof n!="string"?(r=n,n=r.hook):r={},n=n.trim();const[i,s]=n.split(":"),o=n.replace(/\(.+/,"");e[i][o]=Object.assign(r,{signature:s})}),e}const RF="void main() {gl_FragColor = vec4(0);}",IP=`out vec4 transform_output;
void main() {
  transform_output = vec4(0);
}`,OF=`#version 300 es
`.concat(IP);function MP(t,e){e=Array.isArray(e)?e:[e];const n=t.replace(/^\s+/,"").split(/\s+/),[r,i,s]=n;if(!e.includes(r)||!i||!s)return null;const o=s.split(";")[0];return{qualifier:r,type:i,name:o}}function kP(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{version:e=100,input:n,inputType:r,output:i}=t;if(!n)return e===300?OF:e>300?"#version ".concat(e,`
`).concat(IP):RF;const s=kF(n,r);return e>=300?"#version ".concat(e," ").concat(e===300?"es":"",`
in `).concat(r," ").concat(n,`;
out vec4 `).concat(i,`;
void main() {
  `).concat(i," = ").concat(s,`;
}`):"varying ".concat(r," ").concat(n,`;
void main() {
  gl_FragColor = `).concat(s,`;
}`)}function IF(t){switch(t){case"float":return"x";case"vec2":return"xy";case"vec3":return"xyz";case"vec4":return"xyzw";default:return pn(!1),null}}function MF(t){switch(t){case"float":return 1;case"vec2":return 2;case"vec3":return 3;case"vec4":return 4;default:return pn(!1),null}}function kF(t,e){switch(e){case"float":return"vec4(".concat(t,", 0.0, 0.0, 1.0)");case"vec2":return"vec4(".concat(t,", 0.0, 1.0)");case"vec3":return"vec4(".concat(t,", 1.0)");case"vec4":return t;default:return pn(!1),null}}const NF=`#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND
const float TWO_PI = 6.2831854820251465;
const float PI_2 = 1.5707963705062866;
const float PI_16 = 0.1963495463132858;

const float SIN_TABLE_0 = 0.19509032368659973;
const float SIN_TABLE_1 = 0.3826834261417389;
const float SIN_TABLE_2 = 0.5555702447891235;
const float SIN_TABLE_3 = 0.7071067690849304;

const float COS_TABLE_0 = 0.9807852506637573;
const float COS_TABLE_1 = 0.9238795042037964;
const float COS_TABLE_2 = 0.8314695954322815;
const float COS_TABLE_3 = 0.7071067690849304;

const float INVERSE_FACTORIAL_3 = 1.666666716337204e-01;
const float INVERSE_FACTORIAL_5 = 8.333333767950535e-03;
const float INVERSE_FACTORIAL_7 = 1.9841270113829523e-04;
const float INVERSE_FACTORIAL_9 = 2.75573188446287533e-06;

float sin_taylor_fp32(float a) {
  float r, s, t, x;

  if (a == 0.0) {
    return 0.0;
  }

  x = -a * a;
  s = a;
  r = a;

  r = r * x;
  t = r * INVERSE_FACTORIAL_3;
  s = s + t;

  r = r * x;
  t = r * INVERSE_FACTORIAL_5;
  s = s + t;

  r = r * x;
  t = r * INVERSE_FACTORIAL_7;
  s = s + t;

  r = r * x;
  t = r * INVERSE_FACTORIAL_9;
  s = s + t;

  return s;
}

void sincos_taylor_fp32(float a, out float sin_t, out float cos_t) {
  if (a == 0.0) {
    sin_t = 0.0;
    cos_t = 1.0;
  }
  sin_t = sin_taylor_fp32(a);
  cos_t = sqrt(1.0 - sin_t * sin_t);
}

float tan_taylor_fp32(float a) {
    float sin_a;
    float cos_a;

    if (a == 0.0) {
        return 0.0;
    }
    float z = floor(a / TWO_PI);
    float r = a - TWO_PI * z;

    float t;
    float q = floor(r / PI_2 + 0.5);
    int j = int(q);

    if (j < -2 || j > 2) {
        return 1.0 / 0.0;
    }

    t = r - PI_2 * q;

    q = floor(t / PI_16 + 0.5);
    int k = int(q);
    int abs_k = int(abs(float(k)));

    if (abs_k > 4) {
        return 1.0 / 0.0;
    } else {
        t = t - PI_16 * q;
    }

    float u = 0.0;
    float v = 0.0;

    float sin_t, cos_t;
    float s, c;
    sincos_taylor_fp32(t, sin_t, cos_t);

    if (k == 0) {
        s = sin_t;
        c = cos_t;
    } else {
        if (abs(float(abs_k) - 1.0) < 0.5) {
            u = COS_TABLE_0;
            v = SIN_TABLE_0;
        } else if (abs(float(abs_k) - 2.0) < 0.5) {
            u = COS_TABLE_1;
            v = SIN_TABLE_1;
        } else if (abs(float(abs_k) - 3.0) < 0.5) {
            u = COS_TABLE_2;
            v = SIN_TABLE_2;
        } else if (abs(float(abs_k) - 4.0) < 0.5) {
            u = COS_TABLE_3;
            v = SIN_TABLE_3;
        }
        if (k > 0) {
            s = u * sin_t + v * cos_t;
            c = u * cos_t - v * sin_t;
        } else {
            s = u * sin_t - v * cos_t;
            c = u * cos_t + v * sin_t;
        }
    }

    if (j == 0) {
        sin_a = s;
        cos_a = c;
    } else if (j == 1) {
        sin_a = c;
        cos_a = -s;
    } else if (j == -1) {
        sin_a = -c;
        cos_a = s;
    } else {
        sin_a = -s;
        cos_a = -c;
    }
    return sin_a / cos_a;
}
#endif

float tan_fp32(float a) {
#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND
  return tan_taylor_fp32(a);
#else
  return tan(a);
#endif
}
`,FF={name:"fp32",vs:NF,fs:null};function Pb(t,e){if(!t)throw new Error("math.gl assertion ".concat(e))}const dn={EPSILON:1e-12,debug:!1,precision:4,printTypes:!1,printDegrees:!1,printRowMajor:!0};function DF(t,{precision:e=dn.precision}={}){return t=BF(t),"".concat(parseFloat(t.toPrecision(e)))}function Qo(t){return Array.isArray(t)||ArrayBuffer.isView(t)&&!(t instanceof DataView)}function vi(t,e,n){return UF(t,r=>Math.max(e,Math.min(n,r)))}function ed(t,e,n){return Qo(t)?t.map((r,i)=>ed(r,e[i],n)):n*e+(1-n)*t}function Hl(t,e,n){const r=dn.EPSILON;n&&(dn.EPSILON=n);try{if(t===e)return!0;if(Qo(t)&&Qo(e)){if(t.length!==e.length)return!1;for(let i=0;i<t.length;++i)if(!Hl(t[i],e[i]))return!1;return!0}return t&&t.equals?t.equals(e):e&&e.equals?e.equals(t):typeof t=="number"&&typeof e=="number"?Math.abs(t-e)<=dn.EPSILON*Math.max(1,Math.abs(t),Math.abs(e)):!1}finally{dn.EPSILON=r}}function BF(t){return Math.round(t/dn.EPSILON)*dn.EPSILON}function zF(t){return t.clone?t.clone():new Array(t.length)}function UF(t,e,n){if(Qo(t)){const r=t;n=n||zF(r);for(let i=0;i<n.length&&i<r.length;++i)n[i]=e(t[i],i,n);return n}return e(t)}function jF(t){function e(){var n=Reflect.construct(t,Array.from(arguments));return Object.setPrototypeOf(n,Object.getPrototypeOf(this)),n}return e.prototype=Object.create(t.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t,e}class NP extends jF(Array){clone(){return new this.constructor().copy(this)}fromArray(e,n=0){for(let r=0;r<this.ELEMENTS;++r)this[r]=e[r+n];return this.check()}toArray(e=[],n=0){for(let r=0;r<this.ELEMENTS;++r)e[n+r]=this[r];return e}from(e){return Array.isArray(e)?this.copy(e):this.fromObject(e)}to(e){return e===this?this:Qo(e)?this.toArray(e):this.toObject(e)}toTarget(e){return e?this.to(e):this}toFloat32Array(){return new Float32Array(this)}toString(){return this.formatString(dn)}formatString(e){let n="";for(let r=0;r<this.ELEMENTS;++r)n+=(r>0?", ":"")+DF(this[r],e);return"".concat(e.printTypes?this.constructor.name:"","[").concat(n,"]")}equals(e){if(!e||this.length!==e.length)return!1;for(let n=0;n<this.ELEMENTS;++n)if(!Hl(this[n],e[n]))return!1;return!0}exactEquals(e){if(!e||this.length!==e.length)return!1;for(let n=0;n<this.ELEMENTS;++n)if(this[n]!==e[n])return!1;return!0}negate(){for(let e=0;e<this.ELEMENTS;++e)this[e]=-this[e];return this.check()}lerp(e,n,r){if(r===void 0)return this.lerp(this,e,n);for(let i=0;i<this.ELEMENTS;++i){const s=e[i];this[i]=s+r*(n[i]-s)}return this.check()}min(e){for(let n=0;n<this.ELEMENTS;++n)this[n]=Math.min(e[n],this[n]);return this.check()}max(e){for(let n=0;n<this.ELEMENTS;++n)this[n]=Math.max(e[n],this[n]);return this.check()}clamp(e,n){for(let r=0;r<this.ELEMENTS;++r)this[r]=Math.min(Math.max(this[r],e[r]),n[r]);return this.check()}add(...e){for(const n of e)for(let r=0;r<this.ELEMENTS;++r)this[r]+=n[r];return this.check()}subtract(...e){for(const n of e)for(let r=0;r<this.ELEMENTS;++r)this[r]-=n[r];return this.check()}scale(e){if(typeof e=="number")for(let n=0;n<this.ELEMENTS;++n)this[n]*=e;else for(let n=0;n<this.ELEMENTS&&n<e.length;++n)this[n]*=e[n];return this.check()}multiplyByScalar(e){for(let n=0;n<this.ELEMENTS;++n)this[n]*=e;return this.check()}check(){if(dn.debug&&!this.validate())throw new Error("math.gl: ".concat(this.constructor.name," some fields set to invalid numbers'"));return this}validate(){let e=this.length===this.ELEMENTS;for(let n=0;n<this.ELEMENTS;++n)e=e&&Number.isFinite(this[n]);return e}sub(e){return this.subtract(e)}setScalar(e){for(let n=0;n<this.ELEMENTS;++n)this[n]=e;return this.check()}addScalar(e){for(let n=0;n<this.ELEMENTS;++n)this[n]+=e;return this.check()}subScalar(e){return this.addScalar(-e)}multiplyScalar(e){for(let n=0;n<this.ELEMENTS;++n)this[n]*=e;return this.check()}divideScalar(e){return this.multiplyByScalar(1/e)}clampScalar(e,n){for(let r=0;r<this.ELEMENTS;++r)this[r]=Math.min(Math.max(this[r],e),n);return this.check()}get elements(){return this}}function VF(t,e){if(t.length!==e)return!1;for(let n=0;n<t.length;++n)if(!Number.isFinite(t[n]))return!1;return!0}function ln(t){if(!Number.isFinite(t))throw new Error("Invalid number ".concat(t));return t}function Hp(t,e,n=""){if(dn.debug&&!VF(t,e))throw new Error("math.gl: ".concat(n," some fields set to invalid numbers'"));return t}class $F extends NP{get x(){return this[0]}set x(e){this[0]=ln(e)}get y(){return this[1]}set y(e){this[1]=ln(e)}len(){return Math.sqrt(this.lengthSquared())}magnitude(){return this.len()}lengthSquared(){let e=0;for(let n=0;n<this.ELEMENTS;++n)e+=this[n]*this[n];return e}magnitudeSquared(){return this.lengthSquared()}distance(e){return Math.sqrt(this.distanceSquared(e))}distanceSquared(e){let n=0;for(let r=0;r<this.ELEMENTS;++r){const i=this[r]-e[r];n+=i*i}return ln(n)}dot(e){let n=0;for(let r=0;r<this.ELEMENTS;++r)n+=this[r]*e[r];return ln(n)}normalize(){const e=this.magnitude();if(e!==0)for(let n=0;n<this.ELEMENTS;++n)this[n]/=e;return this.check()}multiply(...e){for(const n of e)for(let r=0;r<this.ELEMENTS;++r)this[r]*=n[r];return this.check()}divide(...e){for(const n of e)for(let r=0;r<this.ELEMENTS;++r)this[r]/=n[r];return this.check()}lengthSq(){return this.lengthSquared()}distanceTo(e){return this.distance(e)}distanceToSquared(e){return this.distanceSquared(e)}getComponent(e){return Pb(e>=0&&e<this.ELEMENTS,"index is out of range"),ln(this[e])}setComponent(e,n){return Pb(e>=0&&e<this.ELEMENTS,"index is out of range"),this[e]=n,this.check()}addVectors(e,n){return this.copy(e).add(n)}subVectors(e,n){return this.copy(e).subtract(n)}multiplyVectors(e,n){return this.copy(e).multiply(n)}addScaledVector(e,n){return this.add(new this.constructor(e).multiplyScalar(n))}}var of=1e-6,Jo=typeof Float32Array<"u"?Float32Array:Array;Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});function GF(){var t=new Jo(2);return Jo!=Float32Array&&(t[0]=0,t[1]=0),t}function Ab(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t}function WF(t,e){return t[0]=-e[0],t[1]=-e[1],t}function FP(t,e,n,r){var i=e[0],s=e[1];return t[0]=i+r*(n[0]-i),t[1]=s+r*(n[1]-s),t}function HF(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[4]*i+n[12],t[1]=n[1]*r+n[5]*i+n[13],t}(function(){var t=GF();return function(e,n,r,i,s,o){var a,l;for(n||(n=2),r||(r=0),i?l=Math.min(i*n+r,e.length):l=e.length,a=r;a<l;a+=n)t[0]=e[a],t[1]=e[a+1],s(t,t,o),e[a]=t[0],e[a+1]=t[1];return e}})();function XF(t,e,n){const r=e[0],i=e[1],s=n[3]*r+n[7]*i||1;return t[0]=(n[0]*r+n[4]*i)/s,t[1]=(n[1]*r+n[5]*i)/s,t}function DP(t,e,n){const r=e[0],i=e[1],s=e[2],o=n[3]*r+n[7]*i+n[11]*s||1;return t[0]=(n[0]*r+n[4]*i+n[8]*s)/o,t[1]=(n[1]*r+n[5]*i+n[9]*s)/o,t[2]=(n[2]*r+n[6]*i+n[10]*s)/o,t}function YF(t,e,n){const r=e[0],i=e[1];return t[0]=n[0]*r+n[2]*i,t[1]=n[1]*r+n[3]*i,t[2]=e[2],t}function KF(){var t=new Jo(3);return Jo!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function qF(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t}function ZF(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}function QF(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function JF(t,e,n){var r=e[0],i=e[1],s=e[2],o=n[0],a=n[1],l=n[2];return t[0]=i*l-s*a,t[1]=s*o-r*l,t[2]=r*a-i*o,t}function BP(t,e,n){var r=e[0],i=e[1],s=e[2],o=n[3]*r+n[7]*i+n[11]*s+n[15];return o=o||1,t[0]=(n[0]*r+n[4]*i+n[8]*s+n[12])/o,t[1]=(n[1]*r+n[5]*i+n[9]*s+n[13])/o,t[2]=(n[2]*r+n[6]*i+n[10]*s+n[14])/o,t}function eD(t,e,n){var r=e[0],i=e[1],s=e[2];return t[0]=r*n[0]+i*n[3]+s*n[6],t[1]=r*n[1]+i*n[4]+s*n[7],t[2]=r*n[2]+i*n[5]+s*n[8],t}function tD(t,e,n){var r=n[0],i=n[1],s=n[2],o=n[3],a=e[0],l=e[1],c=e[2],u=i*c-s*l,f=s*a-r*c,d=r*l-i*a,h=i*d-s*f,p=s*u-r*d,g=r*f-i*u,E=o*2;return u*=E,f*=E,d*=E,h*=2,p*=2,g*=2,t[0]=a+u+h,t[1]=l+f+p,t[2]=c+d+g,t}function nD(t,e,n,r){var i=[],s=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],s[0]=i[0],s[1]=i[1]*Math.cos(r)-i[2]*Math.sin(r),s[2]=i[1]*Math.sin(r)+i[2]*Math.cos(r),t[0]=s[0]+n[0],t[1]=s[1]+n[1],t[2]=s[2]+n[2],t}function rD(t,e,n,r){var i=[],s=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],s[0]=i[2]*Math.sin(r)+i[0]*Math.cos(r),s[1]=i[1],s[2]=i[2]*Math.cos(r)-i[0]*Math.sin(r),t[0]=s[0]+n[0],t[1]=s[1]+n[1],t[2]=s[2]+n[2],t}function iD(t,e,n,r){var i=[],s=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],s[0]=i[0]*Math.cos(r)-i[1]*Math.sin(r),s[1]=i[0]*Math.sin(r)+i[1]*Math.cos(r),s[2]=i[2],t[0]=s[0]+n[0],t[1]=s[1]+n[1],t[2]=s[2]+n[2],t}function sD(t,e){var n=t[0],r=t[1],i=t[2],s=e[0],o=e[1],a=e[2],l=Math.sqrt(n*n+r*r+i*i),c=Math.sqrt(s*s+o*o+a*a),u=l*c,f=u&&QF(t,e)/u;return Math.acos(Math.min(Math.max(f,-1),1))}var oD=qF;(function(){var t=KF();return function(e,n,r,i,s,o){var a,l;for(n||(n=3),r||(r=0),i?l=Math.min(i*n+r,e.length):l=e.length,a=r;a<l;a+=n)t[0]=e[a],t[1]=e[a+1],t[2]=e[a+2],s(t,t,o),e[a]=t[0],e[a+1]=t[1],e[a+2]=t[2];return e}})();const Xp=[0,0,0];let Eu;class Er extends $F{static get ZERO(){return Eu||(Eu=new Er(0,0,0),Object.freeze(Eu)),Eu}constructor(e=0,n=0,r=0){super(-0,-0,-0),arguments.length===1&&Qo(e)?this.copy(e):(dn.debug&&(ln(e),ln(n),ln(r)),this[0]=e,this[1]=n,this[2]=r)}set(e,n,r){return this[0]=e,this[1]=n,this[2]=r,this.check()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this.check()}fromObject(e){return dn.debug&&(ln(e.x),ln(e.y),ln(e.z)),this[0]=e.x,this[1]=e.y,this[2]=e.z,this.check()}toObject(e){return e.x=this[0],e.y=this[1],e.z=this[2],e}get ELEMENTS(){return 3}get z(){return this[2]}set z(e){this[2]=ln(e)}angle(e){return sD(this,e)}cross(e){return JF(this,this,e),this.check()}rotateX({radians:e,origin:n=Xp}){return nD(this,this,n,e),this.check()}rotateY({radians:e,origin:n=Xp}){return rD(this,this,n,e),this.check()}rotateZ({radians:e,origin:n=Xp}){return iD(this,this,n,e),this.check()}transform(e){return this.transformAsPoint(e)}transformAsPoint(e){return BP(this,this,e),this.check()}transformAsVector(e){return DP(this,this,e),this.check()}transformByMatrix3(e){return eD(this,this,e),this.check()}transformByMatrix2(e){return YF(this,this,e),this.check()}transformByQuaternion(e){return tD(this,this,e),this.check()}}class aD extends NP{toString(){let e="[";if(dn.printRowMajor){e+="row-major:";for(let n=0;n<this.RANK;++n)for(let r=0;r<this.RANK;++r)e+=" ".concat(this[r*this.RANK+n])}else{e+="column-major:";for(let n=0;n<this.ELEMENTS;++n)e+=" ".concat(this[n])}return e+="]",e}getElementIndex(e,n){return n*this.RANK+e}getElement(e,n){return this[n*this.RANK+e]}setElement(e,n,r){return this[n*this.RANK+e]=ln(r),this}getColumn(e,n=new Array(this.RANK).fill(-0)){const r=e*this.RANK;for(let i=0;i<this.RANK;++i)n[i]=this[r+i];return n}setColumn(e,n){const r=e*this.RANK;for(let i=0;i<this.RANK;++i)this[r+i]=n[i];return this}}function lD(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function cD(t,e){if(t===e){var n=e[1],r=e[2],i=e[3],s=e[6],o=e[7],a=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=r,t[9]=s,t[11]=e[14],t[12]=i,t[13]=o,t[14]=a}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function zm(t,e){var n=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],f=e[9],d=e[10],h=e[11],p=e[12],g=e[13],E=e[14],m=e[15],y=n*a-r*o,v=n*l-i*o,b=n*c-s*o,T=r*l-i*a,S=r*c-s*a,P=i*c-s*l,R=u*g-f*p,O=u*E-d*p,L=u*m-h*p,M=f*E-d*g,j=f*m-h*g,U=d*m-h*E,V=y*U-v*j+b*M+T*L-S*O+P*R;return V?(V=1/V,t[0]=(a*U-l*j+c*M)*V,t[1]=(i*j-r*U-s*M)*V,t[2]=(g*P-E*S+m*T)*V,t[3]=(d*S-f*P-h*T)*V,t[4]=(l*L-o*U-c*O)*V,t[5]=(n*U-i*L+s*O)*V,t[6]=(E*b-p*P-m*v)*V,t[7]=(u*P-d*b+h*v)*V,t[8]=(o*j-a*L+c*R)*V,t[9]=(r*L-n*j-s*R)*V,t[10]=(p*S-g*b+m*y)*V,t[11]=(f*b-u*S-h*y)*V,t[12]=(a*O-o*M-l*R)*V,t[13]=(n*M-r*O+i*R)*V,t[14]=(g*v-p*T-E*y)*V,t[15]=(u*T-f*v+d*y)*V,t):null}function uD(t){var e=t[0],n=t[1],r=t[2],i=t[3],s=t[4],o=t[5],a=t[6],l=t[7],c=t[8],u=t[9],f=t[10],d=t[11],h=t[12],p=t[13],g=t[14],E=t[15],m=e*o-n*s,y=e*a-r*s,v=e*l-i*s,b=n*a-r*o,T=n*l-i*o,S=r*l-i*a,P=c*p-u*h,R=c*g-f*h,O=c*E-d*h,L=u*g-f*p,M=u*E-d*p,j=f*E-d*g;return m*j-y*M+v*L+b*O-T*R+S*P}function ys(t,e,n){var r=e[0],i=e[1],s=e[2],o=e[3],a=e[4],l=e[5],c=e[6],u=e[7],f=e[8],d=e[9],h=e[10],p=e[11],g=e[12],E=e[13],m=e[14],y=e[15],v=n[0],b=n[1],T=n[2],S=n[3];return t[0]=v*r+b*a+T*f+S*g,t[1]=v*i+b*l+T*d+S*E,t[2]=v*s+b*c+T*h+S*m,t[3]=v*o+b*u+T*p+S*y,v=n[4],b=n[5],T=n[6],S=n[7],t[4]=v*r+b*a+T*f+S*g,t[5]=v*i+b*l+T*d+S*E,t[6]=v*s+b*c+T*h+S*m,t[7]=v*o+b*u+T*p+S*y,v=n[8],b=n[9],T=n[10],S=n[11],t[8]=v*r+b*a+T*f+S*g,t[9]=v*i+b*l+T*d+S*E,t[10]=v*s+b*c+T*h+S*m,t[11]=v*o+b*u+T*p+S*y,v=n[12],b=n[13],T=n[14],S=n[15],t[12]=v*r+b*a+T*f+S*g,t[13]=v*i+b*l+T*d+S*E,t[14]=v*s+b*c+T*h+S*m,t[15]=v*o+b*u+T*p+S*y,t}function td(t,e,n){var r=n[0],i=n[1],s=n[2],o,a,l,c,u,f,d,h,p,g,E,m;return e===t?(t[12]=e[0]*r+e[4]*i+e[8]*s+e[12],t[13]=e[1]*r+e[5]*i+e[9]*s+e[13],t[14]=e[2]*r+e[6]*i+e[10]*s+e[14],t[15]=e[3]*r+e[7]*i+e[11]*s+e[15]):(o=e[0],a=e[1],l=e[2],c=e[3],u=e[4],f=e[5],d=e[6],h=e[7],p=e[8],g=e[9],E=e[10],m=e[11],t[0]=o,t[1]=a,t[2]=l,t[3]=c,t[4]=u,t[5]=f,t[6]=d,t[7]=h,t[8]=p,t[9]=g,t[10]=E,t[11]=m,t[12]=o*r+u*i+p*s+e[12],t[13]=a*r+f*i+g*s+e[13],t[14]=l*r+d*i+E*s+e[14],t[15]=c*r+h*i+m*s+e[15]),t}function Zy(t,e,n){var r=n[0],i=n[1],s=n[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*s,t[9]=e[9]*s,t[10]=e[10]*s,t[11]=e[11]*s,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function fD(t,e,n,r){var i=r[0],s=r[1],o=r[2],a=Math.hypot(i,s,o),l,c,u,f,d,h,p,g,E,m,y,v,b,T,S,P,R,O,L,M,j,U,V,X;return a<of?null:(a=1/a,i*=a,s*=a,o*=a,l=Math.sin(n),c=Math.cos(n),u=1-c,f=e[0],d=e[1],h=e[2],p=e[3],g=e[4],E=e[5],m=e[6],y=e[7],v=e[8],b=e[9],T=e[10],S=e[11],P=i*i*u+c,R=s*i*u+o*l,O=o*i*u-s*l,L=i*s*u-o*l,M=s*s*u+c,j=o*s*u+i*l,U=i*o*u+s*l,V=s*o*u-i*l,X=o*o*u+c,t[0]=f*P+g*R+v*O,t[1]=d*P+E*R+b*O,t[2]=h*P+m*R+T*O,t[3]=p*P+y*R+S*O,t[4]=f*L+g*M+v*j,t[5]=d*L+E*M+b*j,t[6]=h*L+m*M+T*j,t[7]=p*L+y*M+S*j,t[8]=f*U+g*V+v*X,t[9]=d*U+E*V+b*X,t[10]=h*U+m*V+T*X,t[11]=p*U+y*V+S*X,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}function zP(t,e,n){var r=Math.sin(n),i=Math.cos(n),s=e[4],o=e[5],a=e[6],l=e[7],c=e[8],u=e[9],f=e[10],d=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=s*i+c*r,t[5]=o*i+u*r,t[6]=a*i+f*r,t[7]=l*i+d*r,t[8]=c*i-s*r,t[9]=u*i-o*r,t[10]=f*i-a*r,t[11]=d*i-l*r,t}function dD(t,e,n){var r=Math.sin(n),i=Math.cos(n),s=e[0],o=e[1],a=e[2],l=e[3],c=e[8],u=e[9],f=e[10],d=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=s*i-c*r,t[1]=o*i-u*r,t[2]=a*i-f*r,t[3]=l*i-d*r,t[8]=s*r+c*i,t[9]=o*r+u*i,t[10]=a*r+f*i,t[11]=l*r+d*i,t}function UP(t,e,n){var r=Math.sin(n),i=Math.cos(n),s=e[0],o=e[1],a=e[2],l=e[3],c=e[4],u=e[5],f=e[6],d=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=s*i+c*r,t[1]=o*i+u*r,t[2]=a*i+f*r,t[3]=l*i+d*r,t[4]=c*i-s*r,t[5]=u*i-o*r,t[6]=f*i-a*r,t[7]=d*i-l*r,t}function hD(t,e){var n=e[0],r=e[1],i=e[2],s=e[3],o=n+n,a=r+r,l=i+i,c=n*o,u=r*o,f=r*a,d=i*o,h=i*a,p=i*l,g=s*o,E=s*a,m=s*l;return t[0]=1-f-p,t[1]=u+m,t[2]=d-E,t[3]=0,t[4]=u-m,t[5]=1-c-p,t[6]=h+g,t[7]=0,t[8]=d+E,t[9]=h-g,t[10]=1-c-f,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function pD(t,e,n,r,i,s,o){var a=1/(n-e),l=1/(i-r),c=1/(s-o);return t[0]=s*2*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s*2*l,t[6]=0,t[7]=0,t[8]=(n+e)*a,t[9]=(i+r)*l,t[10]=(o+s)*c,t[11]=-1,t[12]=0,t[13]=0,t[14]=o*s*2*c,t[15]=0,t}function gD(t,e,n,r,i){var s=1/Math.tan(e/2),o;return t[0]=s/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,i!=null&&i!==1/0?(o=1/(r-i),t[10]=(i+r)*o,t[14]=2*i*r*o):(t[10]=-1,t[14]=-2*r),t}var mD=gD;function yD(t,e,n,r,i,s,o){var a=1/(e-n),l=1/(r-i),c=1/(s-o);return t[0]=-2*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*l,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(e+n)*a,t[13]=(i+r)*l,t[14]=(o+s)*c,t[15]=1,t}var vD=yD;function _D(t,e,n,r){var i,s,o,a,l,c,u,f,d,h,p=e[0],g=e[1],E=e[2],m=r[0],y=r[1],v=r[2],b=n[0],T=n[1],S=n[2];return Math.abs(p-b)<of&&Math.abs(g-T)<of&&Math.abs(E-S)<of?lD(t):(u=p-b,f=g-T,d=E-S,h=1/Math.hypot(u,f,d),u*=h,f*=h,d*=h,i=y*d-v*f,s=v*u-m*d,o=m*f-y*u,h=Math.hypot(i,s,o),h?(h=1/h,i*=h,s*=h,o*=h):(i=0,s=0,o=0),a=f*o-d*s,l=d*i-u*o,c=u*s-f*i,h=Math.hypot(a,l,c),h?(h=1/h,a*=h,l*=h,c*=h):(a=0,l=0,c=0),t[0]=i,t[1]=a,t[2]=u,t[3]=0,t[4]=s,t[5]=l,t[6]=f,t[7]=0,t[8]=o,t[9]=c,t[10]=d,t[11]=0,t[12]=-(i*p+s*g+o*E),t[13]=-(a*p+l*g+c*E),t[14]=-(u*p+f*g+d*E),t[15]=1,t)}function bD(){var t=new Jo(4);return Jo!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t}function ED(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t}function Ec(t,e,n){var r=e[0],i=e[1],s=e[2],o=e[3];return t[0]=n[0]*r+n[4]*i+n[8]*s+n[12]*o,t[1]=n[1]*r+n[5]*i+n[9]*s+n[13]*o,t[2]=n[2]*r+n[6]*i+n[10]*s+n[14]*o,t[3]=n[3]*r+n[7]*i+n[11]*s+n[15]*o,t}(function(){var t=bD();return function(e,n,r,i,s,o){var a,l;for(n||(n=4),r||(r=0),i?l=Math.min(i*n+r,e.length):l=e.length,a=r;a<l;a+=n)t[0]=e[a],t[1]=e[a+1],t[2]=e[a+2],t[3]=e[a+3],s(t,t,o),e[a]=t[0],e[a+1]=t[1],e[a+2]=t[2],e[a+3]=t[3];return e}})();var Um;(function(t){t[t.COL0ROW0=0]="COL0ROW0",t[t.COL0ROW1=1]="COL0ROW1",t[t.COL0ROW2=2]="COL0ROW2",t[t.COL0ROW3=3]="COL0ROW3",t[t.COL1ROW0=4]="COL1ROW0",t[t.COL1ROW1=5]="COL1ROW1",t[t.COL1ROW2=6]="COL1ROW2",t[t.COL1ROW3=7]="COL1ROW3",t[t.COL2ROW0=8]="COL2ROW0",t[t.COL2ROW1=9]="COL2ROW1",t[t.COL2ROW2=10]="COL2ROW2",t[t.COL2ROW3=11]="COL2ROW3",t[t.COL3ROW0=12]="COL3ROW0",t[t.COL3ROW1=13]="COL3ROW1",t[t.COL3ROW2=14]="COL3ROW2",t[t.COL3ROW3=15]="COL3ROW3"})(Um||(Um={}));const wD=45*Math.PI/180,xD=1,Yp=.1,Kp=500,TD=Object.freeze([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);class wr extends aD{static get IDENTITY(){return PD()}static get ZERO(){return SD()}get ELEMENTS(){return 16}get RANK(){return 4}get INDICES(){return Um}constructor(e){super(-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0),arguments.length===1&&Array.isArray(e)?this.copy(e):this.identity()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=e[3],this[4]=e[4],this[5]=e[5],this[6]=e[6],this[7]=e[7],this[8]=e[8],this[9]=e[9],this[10]=e[10],this[11]=e[11],this[12]=e[12],this[13]=e[13],this[14]=e[14],this[15]=e[15],this.check()}set(e,n,r,i,s,o,a,l,c,u,f,d,h,p,g,E){return this[0]=e,this[1]=n,this[2]=r,this[3]=i,this[4]=s,this[5]=o,this[6]=a,this[7]=l,this[8]=c,this[9]=u,this[10]=f,this[11]=d,this[12]=h,this[13]=p,this[14]=g,this[15]=E,this.check()}setRowMajor(e,n,r,i,s,o,a,l,c,u,f,d,h,p,g,E){return this[0]=e,this[1]=s,this[2]=c,this[3]=h,this[4]=n,this[5]=o,this[6]=u,this[7]=p,this[8]=r,this[9]=a,this[10]=f,this[11]=g,this[12]=i,this[13]=l,this[14]=d,this[15]=E,this.check()}toRowMajor(e){return e[0]=this[0],e[1]=this[4],e[2]=this[8],e[3]=this[12],e[4]=this[1],e[5]=this[5],e[6]=this[9],e[7]=this[13],e[8]=this[2],e[9]=this[6],e[10]=this[10],e[11]=this[14],e[12]=this[3],e[13]=this[7],e[14]=this[11],e[15]=this[15],e}identity(){return this.copy(TD)}fromObject(e){return this.check()}fromQuaternion(e){return hD(this,e),this.check()}frustum(e){const{left:n,right:r,bottom:i,top:s,near:o=Yp,far:a=Kp}=e;return a===1/0?AD(this,n,r,i,s,o):pD(this,n,r,i,s,o,a),this.check()}lookAt(e){const{eye:n,center:r=[0,0,0],up:i=[0,1,0]}=e;return _D(this,n,r,i),this.check()}ortho(e){const{left:n,right:r,bottom:i,top:s,near:o=Yp,far:a=Kp}=e;return vD(this,n,r,i,s,o,a),this.check()}orthographic(e){const{fovy:n=wD,aspect:r=xD,focalDistance:i=1,near:s=Yp,far:o=Kp}=e;Cb(n);const a=n/2,l=i*Math.tan(a),c=l*r;return this.ortho({left:-c,right:c,bottom:-l,top:l,near:s,far:o})}perspective(e){const{fovy:n=45*Math.PI/180,aspect:r=1,near:i=.1,far:s=500}=e;return Cb(n),mD(this,n,r,i,s),this.check()}determinant(){return uD(this)}getScale(e=[-0,-0,-0]){return e[0]=Math.sqrt(this[0]*this[0]+this[1]*this[1]+this[2]*this[2]),e[1]=Math.sqrt(this[4]*this[4]+this[5]*this[5]+this[6]*this[6]),e[2]=Math.sqrt(this[8]*this[8]+this[9]*this[9]+this[10]*this[10]),e}getTranslation(e=[-0,-0,-0]){return e[0]=this[12],e[1]=this[13],e[2]=this[14],e}getRotation(e,n){e=e||[-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0],n=n||[-0,-0,-0];const r=this.getScale(n),i=1/r[0],s=1/r[1],o=1/r[2];return e[0]=this[0]*i,e[1]=this[1]*s,e[2]=this[2]*o,e[3]=0,e[4]=this[4]*i,e[5]=this[5]*s,e[6]=this[6]*o,e[7]=0,e[8]=this[8]*i,e[9]=this[9]*s,e[10]=this[10]*o,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}getRotationMatrix3(e,n){e=e||[-0,-0,-0,-0,-0,-0,-0,-0,-0],n=n||[-0,-0,-0];const r=this.getScale(n),i=1/r[0],s=1/r[1],o=1/r[2];return e[0]=this[0]*i,e[1]=this[1]*s,e[2]=this[2]*o,e[3]=this[4]*i,e[4]=this[5]*s,e[5]=this[6]*o,e[6]=this[8]*i,e[7]=this[9]*s,e[8]=this[10]*o,e}transpose(){return cD(this,this),this.check()}invert(){return zm(this,this),this.check()}multiplyLeft(e){return ys(this,e,this),this.check()}multiplyRight(e){return ys(this,this,e),this.check()}rotateX(e){return zP(this,this,e),this.check()}rotateY(e){return dD(this,this,e),this.check()}rotateZ(e){return UP(this,this,e),this.check()}rotateXYZ(e){return this.rotateX(e[0]).rotateY(e[1]).rotateZ(e[2])}rotateAxis(e,n){return fD(this,this,e,n),this.check()}scale(e){return Zy(this,this,Array.isArray(e)?e:[e,e,e]),this.check()}translate(e){return td(this,this,e),this.check()}transform(e,n){return e.length===4?(n=Ec(n||[-0,-0,-0,-0],e,this),Hp(n,4),n):this.transformAsPoint(e,n)}transformAsPoint(e,n){const{length:r}=e;let i;switch(r){case 2:i=HF(n||[-0,-0],e,this);break;case 3:i=BP(n||[-0,-0,-0],e,this);break;default:throw new Error("Illegal vector")}return Hp(i,e.length),i}transformAsVector(e,n){let r;switch(e.length){case 2:r=XF(n||[-0,-0],e,this);break;case 3:r=DP(n||[-0,-0,-0],e,this);break;default:throw new Error("Illegal vector")}return Hp(r,e.length),r}transformPoint(e,n){return this.transformAsPoint(e,n)}transformVector(e,n){return this.transformAsPoint(e,n)}transformDirection(e,n){return this.transformAsVector(e,n)}makeRotationX(e){return this.identity().rotateX(e)}makeTranslation(e,n,r){return this.identity().translate([e,n,r])}}let wu,xu;function SD(){return wu||(wu=new wr([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),Object.freeze(wu)),wu}function PD(){return xu||(xu=new wr,Object.freeze(xu)),xu}function Cb(t){if(t>Math.PI*2)throw Error("expected radians")}function AD(t,e,n,r,i,s){const o=2*s/(n-e),a=2*s/(i-r),l=(n+e)/(n-e),c=(i+r)/(i-r),u=-1,f=-1,d=-2*s;return t[0]=o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=l,t[9]=c,t[10]=u,t[11]=f,t[12]=0,t[13]=0,t[14]=d,t[15]=0,t}const Lb=`#if (defined(SHADER_TYPE_FRAGMENT) && defined(LIGHTING_FRAGMENT)) || (defined(SHADER_TYPE_VERTEX) && defined(LIGHTING_VERTEX))

struct AmbientLight {
 vec3 color;
};

struct PointLight {
 vec3 color;
 vec3 position;
 vec3 attenuation;
};

struct DirectionalLight {
  vec3 color;
  vec3 direction;
};

uniform AmbientLight lighting_uAmbientLight;
uniform PointLight lighting_uPointLight[MAX_LIGHTS];
uniform DirectionalLight lighting_uDirectionalLight[MAX_LIGHTS];
uniform int lighting_uPointLightCount;
uniform int lighting_uDirectionalLightCount;

uniform bool lighting_uEnabled;

float getPointLightAttenuation(PointLight pointLight, float distance) {
  return pointLight.attenuation.x
       + pointLight.attenuation.y * distance
       + pointLight.attenuation.z * distance * distance;
}

#endif
`,CD={lightSources:{}};function qp(){let{color:t=[0,0,0],intensity:e=1}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return t.map(n=>n*e/255)}function LD(t){let{ambientLight:e,pointLights:n=[],directionalLights:r=[]}=t;const i={};return e?i["lighting_uAmbientLight.color"]=qp(e):i["lighting_uAmbientLight.color"]=[0,0,0],n.forEach((s,o)=>{i["lighting_uPointLight[".concat(o,"].color")]=qp(s),i["lighting_uPointLight[".concat(o,"].position")]=s.position,i["lighting_uPointLight[".concat(o,"].attenuation")]=s.attenuation||[1,0,0]}),i.lighting_uPointLightCount=n.length,r.forEach((s,o)=>{i["lighting_uDirectionalLight[".concat(o,"].color")]=qp(s),i["lighting_uDirectionalLight[".concat(o,"].direction")]=s.direction}),i.lighting_uDirectionalLightCount=r.length,i}function jP(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:CD;if("lightSources"in t){const{ambientLight:e,pointLights:n,directionalLights:r}=t.lightSources||{};return e||n&&n.length>0||r&&r.length>0?Object.assign({},LD({ambientLight:e,pointLights:n,directionalLights:r}),{lighting_uEnabled:!0}):{lighting_uEnabled:!1}}if("lights"in t){const e={pointLights:[],directionalLights:[]};for(const n of t.lights||[])switch(n.type){case"ambient":e.ambientLight=n;break;case"directional":e.directionalLights.push(n);break;case"point":e.pointLights.push(n);break}return jP({lightSources:e})}return{}}const RD={name:"lights",vs:Lb,fs:Lb,getUniforms:jP,defines:{MAX_LIGHTS:3}},OD=new Uint8Array([0,255,255,255]),ID={pickingSelectedColor:null,pickingHighlightColor:OD,pickingActive:!1,pickingAttribute:!1};function MD(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:ID;const e={};if(t.pickingSelectedColor!==void 0)if(!t.pickingSelectedColor)e.picking_uSelectedColorValid=0;else{const n=t.pickingSelectedColor.slice(0,3);e.picking_uSelectedColorValid=1,e.picking_uSelectedColor=n}if(t.pickingHighlightColor){const n=Array.from(t.pickingHighlightColor,r=>r/255);Number.isFinite(n[3])||(n[3]=1),e.picking_uHighlightColor=n}return t.pickingActive!==void 0&&(e.picking_uActive=!!t.pickingActive,e.picking_uAttribute=!!t.pickingAttribute),e}const kD=`uniform bool picking_uActive;
uniform bool picking_uAttribute;
uniform vec3 picking_uSelectedColor;
uniform bool picking_uSelectedColorValid;

out vec4 picking_vRGBcolor_Avalid;

const float COLOR_SCALE = 1. / 255.;

bool picking_isColorValid(vec3 color) {
  return dot(color, vec3(1.0)) > 0.001;
}

bool isVertexPicked(vec3 vertexColor) {
  return
    picking_uSelectedColorValid &&
    !picking_isColorValid(abs(vertexColor - picking_uSelectedColor));
}

void picking_setPickingColor(vec3 pickingColor) {
  if (picking_uActive) {
    picking_vRGBcolor_Avalid.a = float(picking_isColorValid(pickingColor));

    if (!picking_uAttribute) {
      picking_vRGBcolor_Avalid.rgb = pickingColor * COLOR_SCALE;
    }
  } else {
    picking_vRGBcolor_Avalid.a = float(isVertexPicked(pickingColor));
  }
}

void picking_setPickingAttribute(float value) {
  if (picking_uAttribute) {
    picking_vRGBcolor_Avalid.r = value;
  }
}
void picking_setPickingAttribute(vec2 value) {
  if (picking_uAttribute) {
    picking_vRGBcolor_Avalid.rg = value;
  }
}
void picking_setPickingAttribute(vec3 value) {
  if (picking_uAttribute) {
    picking_vRGBcolor_Avalid.rgb = value;
  }
}
`,ND=`uniform bool picking_uActive;
uniform vec3 picking_uSelectedColor;
uniform vec4 picking_uHighlightColor;

in vec4 picking_vRGBcolor_Avalid;
vec4 picking_filterHighlightColor(vec4 color) {
  if (picking_uActive) {
    return color;
  }
  bool selected = bool(picking_vRGBcolor_Avalid.a);

  if (selected) {
    float highLightAlpha = picking_uHighlightColor.a;
    float blendedAlpha = highLightAlpha + color.a * (1.0 - highLightAlpha);
    float highLightRatio = highLightAlpha / blendedAlpha;

    vec3 blendedRGB = mix(color.rgb, picking_uHighlightColor.rgb, highLightRatio);
    return vec4(blendedRGB, blendedAlpha);
  } else {
    return color;
  }
}
vec4 picking_filterPickingColor(vec4 color) {
  if (picking_uActive) {
    if (picking_vRGBcolor_Avalid.a == 0.0) {
      discard;
    }
    return picking_vRGBcolor_Avalid;
  }
  return color;
}
vec4 picking_filterColor(vec4 color) {
  vec4 highightColor = picking_filterHighlightColor(color);
  return picking_filterPickingColor(highightColor);
}

`,FD={name:"picking",vs:kD,fs:ND,getUniforms:MD},DD=`
uniform float lighting_uAmbient;
uniform float lighting_uDiffuse;
uniform float lighting_uShininess;
uniform vec3  lighting_uSpecularColor;

vec3 lighting_getLightColor(vec3 surfaceColor, vec3 light_direction, vec3 view_direction, vec3 normal_worldspace, vec3 color) {
    vec3 halfway_direction = normalize(light_direction + view_direction);
    float lambertian = dot(light_direction, normal_worldspace);
    float specular = 0.0;
    if (lambertian > 0.0) {
      float specular_angle = max(dot(normal_worldspace, halfway_direction), 0.0);
      specular = pow(specular_angle, lighting_uShininess);
    }
    lambertian = max(lambertian, 0.0);
    return (lambertian * lighting_uDiffuse * surfaceColor + specular * lighting_uSpecularColor) * color;
}

vec3 lighting_getLightColor(vec3 surfaceColor, vec3 cameraPosition, vec3 position_worldspace, vec3 normal_worldspace) {
  vec3 lightColor = surfaceColor;

  if (lighting_uEnabled) {
    vec3 view_direction = normalize(cameraPosition - position_worldspace);
    lightColor = lighting_uAmbient * surfaceColor * lighting_uAmbientLight.color;

    for (int i = 0; i < MAX_LIGHTS; i++) {
      if (i >= lighting_uPointLightCount) {
        break;
      }
      PointLight pointLight = lighting_uPointLight[i];
      vec3 light_position_worldspace = pointLight.position;
      vec3 light_direction = normalize(light_position_worldspace - position_worldspace);
      lightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color);
    }

    for (int i = 0; i < MAX_LIGHTS; i++) {
      if (i >= lighting_uDirectionalLightCount) {
        break;
      }
      DirectionalLight directionalLight = lighting_uDirectionalLight[i];
      lightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);
    }
  }
  return lightColor;
}

vec3 lighting_getSpecularLightColor(vec3 cameraPosition, vec3 position_worldspace, vec3 normal_worldspace) {
  vec3 lightColor = vec3(0, 0, 0);
  vec3 surfaceColor = vec3(0, 0, 0);

  if (lighting_uEnabled) {
    vec3 view_direction = normalize(cameraPosition - position_worldspace);

    for (int i = 0; i < MAX_LIGHTS; i++) {
      if (i >= lighting_uPointLightCount) {
        break;
      }
      PointLight pointLight = lighting_uPointLight[i];
      vec3 light_position_worldspace = pointLight.position;
      vec3 light_direction = normalize(light_position_worldspace - position_worldspace);
      lightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color);
    }

    for (int i = 0; i < MAX_LIGHTS; i++) {
      if (i >= lighting_uDirectionalLightCount) {
        break;
      }
      DirectionalLight directionalLight = lighting_uDirectionalLight[i];
      lightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);
    }
  }
  return lightColor;
}
`,BD={};function zD(t){const{ambient:e=.35,diffuse:n=.6,shininess:r=32,specularColor:i=[30,30,30]}=t;return{lighting_uAmbient:e,lighting_uDiffuse:n,lighting_uShininess:r,lighting_uSpecularColor:i.map(s=>s/255)}}function UD(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:BD;if(!("material"in t))return{};const{material:e}=t;return e?zD(e):{lighting_uEnabled:!1}}const jD={name:"gouraud-lighting",dependencies:[RD],vs:DD,defines:{LIGHTING_VERTEX:1},getUniforms:UD},VD=`attribute float transform_elementID;
vec2 transform_getPixelSizeHalf(vec2 size) {
  return vec2(1.) / (2. * size);
}

vec2 transform_getPixelIndices(vec2 texSize, vec2 pixelSizeHalf) {
  float yIndex = floor((transform_elementID / texSize[0]) + pixelSizeHalf[1]);
  float xIndex = transform_elementID - (yIndex * texSize[0]);
  return vec2(xIndex, yIndex);
}
vec2 transform_getTexCoord(vec2 size) {
  vec2 pixelSizeHalf = transform_getPixelSizeHalf(size);
  vec2 indices = transform_getPixelIndices(size, pixelSizeHalf);
  vec2 coord = indices / size + pixelSizeHalf;
  return coord;
}
vec2 transform_getPos(vec2 size) {
  vec2 texCoord = transform_getTexCoord(size);
  vec2 pos = (texCoord * (2.0, 2.0)) - (1., 1.);
  return pos;
}
vec4 transform_getInput(sampler2D texSampler, vec2 size) {
  vec2 texCoord = transform_getTexCoord(size);
  vec4 textureColor = texture2D(texSampler, texCoord);
  return textureColor;
}
`,$D={name:"transform",vs:VD,fs:null};class wc{static getDefaultProgramManager(e){return e.luma=e.luma||{},e.luma.defaultProgramManager=e.luma.defaultProgramManager||new wc(e),e.luma.defaultProgramManager}constructor(e){this.gl=e,this._programCache={},this._getUniforms={},this._registeredModules={},this._hookFunctions=[],this._defaultModules=[],this._hashes={},this._hashCounter=0,this.stateHash=0,this._useCounts={}}addDefaultModule(e){this._defaultModules.find(n=>n.name===e.name)||this._defaultModules.push(e),this.stateHash++}removeDefaultModule(e){const n=typeof e=="string"?e:e.name;this._defaultModules=this._defaultModules.filter(r=>r.name!==n),this.stateHash++}addShaderHook(e,n){n&&(e=Object.assign(n,{hook:e})),this._hookFunctions.push(e),this.stateHash++}get(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{vs:n="",fs:r="",defines:i={},inject:s={},varyings:o=[],bufferMode:a=35981,transpileToGLSL100:l=!1}=e,c=this._getModuleList(e.modules),u=this._getHash(n),f=this._getHash(r),d=c.map(v=>this._getHash(v.name)).sort(),h=o.map(v=>this._getHash(v)),p=Object.keys(i).sort(),g=Object.keys(s).sort(),E=[],m=[];for(const v of p)E.push(this._getHash(v)),E.push(this._getHash(i[v]));for(const v of g)m.push(this._getHash(v)),m.push(this._getHash(s[v]));const y="".concat(u,"/").concat(f,"D").concat(E.join("/"),"M").concat(d.join("/"),"I").concat(m.join("/"),"V").concat(h.join("/"),"H").concat(this.stateHash,"B").concat(a).concat(l?"T":"");if(!this._programCache[y]){const v=xF(this.gl,{vs:n,fs:r,modules:c,inject:s,defines:i,hookFunctions:this._hookFunctions,transpileToGLSL100:l});this._programCache[y]=new SP(this.gl,{hash:y,vs:v.vs,fs:v.fs,varyings:o,bufferMode:a}),this._getUniforms[y]=v.getUniforms||(b=>{}),this._useCounts[y]=0}return this._useCounts[y]++,this._programCache[y]}getUniforms(e){return this._getUniforms[e.hash]||null}release(e){const n=e.hash;this._useCounts[n]--,this._useCounts[n]===0&&(this._programCache[n].delete(),delete this._programCache[n],delete this._getUniforms[n],delete this._useCounts[n])}_getHash(e){return this._hashes[e]===void 0&&(this._hashes[e]=this._hashCounter++),this._hashes[e]}_getModuleList(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const n=new Array(this._defaultModules.length+e.length),r={};let i=0;for(let s=0,o=this._defaultModules.length;s<o;++s){const a=this._defaultModules[s],l=a.name;n[i++]=a,r[l]=!0}for(let s=0,o=e.length;s<o;++s){const a=e[s],l=a.name;r[l]||(n[i++]=a,r[l]=!0)}return n.length=i,n}}const GD={POSITION:"positions",NORMAL:"normals",COLOR_0:"colors",TEXCOORD_0:"texCoords",TEXCOORD_1:"texCoords1",TEXCOORD_2:"texCoords2"};function WD(t,e,n){const r={};let i=e.indices;for(const s in e.attributes){const o=e.attributes[s],a=HD(s,n);if(s==="indices")i=o;else if(o.constant)r[a]=o.value;else{const l=o.value,c={...o};delete c.value,r[a]=[new Ae(t,l),c],XD(s,c)}}if(i){const s=i.value||i;$(s instanceof Uint16Array||s instanceof Uint32Array,'attribute array for "indices" must be of integer type');const o={size:1,isIndexed:i.isIndexed===void 0?!0:i.isIndexed};r.indices=[new Ae(t,{data:s,target:34963}),o]}return r}function HD(t,e){const{attributeMap:n=GD}=e||{};return n&&n[t]||t}function XD(t,e){let n;switch(t){case"texCoords":case"texCoord1":case"texCoord2":case"texCoord3":n="uvs";break;case"vertices":case"positions":case"normals":case"pickingColors":n="vectors";break}switch(n){case"vectors":e.size=e.size||3;break;case"uvs":e.size=e.size||2;break}$(Number.isFinite(e.size),"attribute ".concat(t," needs size"))}const Qs=2,YD=1e4,KD="Model needs drawMode and vertexCount",Rb=()=>{},qD={};class Ps{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{id:r=Fi("model")}=n;$(ch(e)),this.id=r,this.gl=e,this.id=n.id||Fi("Model"),this.lastLogTime=0,this.animated=!1,this.initialize(n)}initialize(e){this.props={},this.programManager=e.programManager||wc.getDefaultProgramManager(this.gl),this._programManagerState=-1,this._managedProgram=!1;const{program:n=null,vs:r,fs:i,modules:s,defines:o,inject:a,varyings:l,bufferMode:c,transpileToGLSL100:u}=e;this.programProps={program:n,vs:r,fs:i,modules:s,defines:o,inject:a,varyings:l,bufferMode:c,transpileToGLSL100:u},this.program=null,this.vertexArray=null,this._programDirty=!0,this.userData={},this.needsRedraw=!0,this._attributes={},this.attributes={},this.uniforms={},this.pickable=!0,this._checkProgram(),this.setUniforms(Object.assign({},this.getModuleUniforms(e.moduleSettings))),this.drawMode=e.drawMode!==void 0?e.drawMode:4,this.vertexCount=e.vertexCount||0,this.geometryBuffers={},this.isInstanced=e.isInstanced||e.instanced||e.instanceCount>0,this._setModelProps(e),this.geometry={},$(this.drawMode!==void 0&&Number.isFinite(this.vertexCount),KD)}setProps(e){this._setModelProps(e)}delete(){for(const e in this._attributes)this._attributes[e]!==this.attributes[e]&&this._attributes[e].delete();this._managedProgram&&(this.programManager.release(this.program),this._managedProgram=!1),this.vertexArray.delete(),this._deleteGeometryBuffers()}getDrawMode(){return this.drawMode}getVertexCount(){return this.vertexCount}getInstanceCount(){return this.instanceCount}getAttributes(){return this.attributes}getProgram(){return this.program}setProgram(e){const{program:n,vs:r,fs:i,modules:s,defines:o,inject:a,varyings:l,bufferMode:c,transpileToGLSL100:u}=e;this.programProps={program:n,vs:r,fs:i,modules:s,defines:o,inject:a,varyings:l,bufferMode:c,transpileToGLSL100:u},this._programDirty=!0}getUniforms(){return this.uniforms}setDrawMode(e){return this.drawMode=e,this}setVertexCount(e){return $(Number.isFinite(e)),this.vertexCount=e,this}setInstanceCount(e){return $(Number.isFinite(e)),this.instanceCount=e,this}setGeometry(e){return this.drawMode=e.drawMode,this.vertexCount=e.getVertexCount(),this._deleteGeometryBuffers(),this.geometryBuffers=WD(this.gl,e),this.vertexArray.setAttributes(this.geometryBuffers),this}setAttributes(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(qo(e))return this;const n={};for(const r in e){const i=e[r];n[r]=i.getValue?i.getValue():i}return this.vertexArray.setAttributes(n),this}setUniforms(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Object.assign(this.uniforms,e),this}getModuleUniforms(e){this._checkProgram();const n=this.programManager.getUniforms(this.program);return n?n(e):{}}updateModuleSettings(e){const n=this.getModuleUniforms(e||{});return this.setUniforms(n)}clear(e){return Hy(this.program.gl,e),this}draw(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._checkProgram();const{moduleSettings:n=null,framebuffer:r,uniforms:i={},attributes:s={},transformFeedback:o=this.transformFeedback,parameters:a={},vertexArray:l=this.vertexArray}=e;this.setAttributes(s),this.updateModuleSettings(n),this.setUniforms(i);let c;K.priority>=Qs&&(c=this._logDrawCallStart(Qs));const u=this.vertexArray.getDrawParams(),{isIndexed:f=u.isIndexed,indexType:d=u.indexType,indexOffset:h=u.indexOffset,vertexArrayInstanced:p=u.isInstanced}=this.props;p&&!this.isInstanced&&K.warn("Found instanced attributes on non-instanced model",this.id)();const{isInstanced:g,instanceCount:E}=this,{onBeforeRender:m=Rb,onAfterRender:y=Rb}=this.props;m(),this.program.setUniforms(this.uniforms);const v=this.program.draw(Object.assign(qD,e,{logPriority:c,uniforms:null,framebuffer:r,parameters:a,drawMode:this.getDrawMode(),vertexCount:this.getVertexCount(),vertexArray:l,transformFeedback:o,isIndexed:f,indexType:d,isInstanced:g,instanceCount:E,offset:f?h:0}));return y(),K.priority>=Qs&&this._logDrawCallEnd(c,l,r),v}transform(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{discard:n=!0,feedbackBuffers:r,unbindModels:i=[]}=e;let{parameters:s}=e;r&&this._setFeedbackBuffers(r),n&&(s=Object.assign({},s,{35977:n})),i.forEach(o=>o.vertexArray.unbindBuffers());try{this.draw(Object.assign({},e,{parameters:s}))}finally{i.forEach(o=>o.vertexArray.bindBuffers())}return this}render(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return K.warn("Model.render() is deprecated. Use Model.setUniforms() and Model.draw()")(),this.setUniforms(e).draw()}_setModelProps(e){Object.assign(this.props,e),"uniforms"in e&&this.setUniforms(e.uniforms),"pickable"in e&&(this.pickable=e.pickable),"instanceCount"in e&&(this.instanceCount=e.instanceCount),"geometry"in e&&this.setGeometry(e.geometry),"attributes"in e&&this.setAttributes(e.attributes),"_feedbackBuffers"in e&&this._setFeedbackBuffers(e._feedbackBuffers)}_checkProgram(){if(!(this._programDirty||this.programManager.stateHash!==this._programManagerState))return;let{program:n}=this.programProps;if(n)this._managedProgram=!1;else{const{vs:r,fs:i,modules:s,inject:o,defines:a,varyings:l,bufferMode:c,transpileToGLSL100:u}=this.programProps;n=this.programManager.get({vs:r,fs:i,modules:s,inject:o,defines:a,varyings:l,bufferMode:c,transpileToGLSL100:u}),this.program&&this._managedProgram&&this.programManager.release(this.program),this._programManagerState=this.programManager.stateHash,this._managedProgram=!0}$(n instanceof SP,"Model needs a program"),this._programDirty=!1,n!==this.program&&(this.program=n,this.vertexArray?this.vertexArray.setProps({program:this.program,attributes:this.vertexArray.attributes}):this.vertexArray=new BN(this.gl,{program:this.program}),this.setUniforms(Object.assign({},this.getModuleUniforms())))}_deleteGeometryBuffers(){for(const e in this.geometryBuffers){const n=this.geometryBuffers[e][0]||this.geometryBuffers[e];n instanceof Ae&&n.delete()}}_setAnimationProps(e){this.animated&&$(e,"Model.draw(): animated uniforms but no animationProps")}_setFeedbackBuffers(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(qo(e))return this;const{gl:n}=this.program;return this.transformFeedback=this.transformFeedback||new PP(n,{program:this.program}),this.transformFeedback.setBuffers(e),this}_logDrawCallStart(e){const n=e>3?0:YD;if(!(Date.now()-this.lastLogTime<n))return this.lastLogTime=Date.now(),K.group(Qs,">>> DRAWING MODEL ".concat(this.id),{collapsed:K.level<=2})(),e}_logDrawCallEnd(e,n,r,i){if(e===void 0)return;const s=jN({vertexArray:n,header:"".concat(this.id," attributes"),attributes:this._attributes}),{table:o,unusedTable:a,unusedCount:l}=gb({header:"".concat(this.id," uniforms"),program:this.program,uniforms:Object.assign({},this.program.uniforms,r)}),{table:c,count:u}=gb({header:"".concat(this.id," uniforms"),program:this.program,uniforms:Object.assign({},this.program.uniforms,r),undefinedOnly:!0});u>0&&K.log("MISSING UNIFORMS",Object.keys(c))(),l>0&&K.log("UNUSED UNIFORMS",Object.keys(a))();const f=$N(this.vertexArray.configuration);K.table(e,s)(),K.table(e,o)(),K.table(e+1,f)(),i&&i.log({logLevel:Qs,message:"Rendered to ".concat(i.id)}),K.groupEnd(Qs)()}}class ZD{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.gl=e,this.currentIndex=0,this.feedbackMap={},this.varyings=null,this.bindings=[],this.resources={},this._initialize(n),Object.seal(this)}setupResources(e){for(const n of this.bindings)this._setupTransformFeedback(n,e)}updateModelProps(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{varyings:n}=this;return n.length>0&&(e=Object.assign({},e,{varyings:n})),e}getDrawOptions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const n=this.bindings[this.currentIndex],{sourceBuffers:r,transformFeedback:i}=n;return{attributes:Object.assign({},r,e.attributes),transformFeedback:i}}swap(){return this.feedbackMap?(this.currentIndex=this._getNextIndex(),!0):!1}update(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._setupBuffers(e)}getBuffer(e){const{feedbackBuffers:n}=this.bindings[this.currentIndex],r=e?n[e]:null;return r?r instanceof Ae?r:r.buffer:null}getData(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{varyingName:n}=e,r=this.getBuffer(n);return r?r.getData():null}delete(){for(const e in this.resources)this.resources[e].delete()}_initialize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._setupBuffers(e),this.varyings=e.varyings||Object.keys(this.bindings[this.currentIndex].feedbackBuffers),this.varyings.length>0&&$(le(this.gl))}_getFeedbackBuffers(e){const{sourceBuffers:n={}}=e,r={};if(this.bindings[this.currentIndex]&&Object.assign(r,this.bindings[this.currentIndex].feedbackBuffers),this.feedbackMap)for(const i in this.feedbackMap){const s=this.feedbackMap[i];i in n&&(r[s]=i)}Object.assign(r,e.feedbackBuffers);for(const i in r){const s=r[i];if(typeof s=="string"){const o=n[s],{byteLength:a,usage:l,accessor:c}=o;r[i]=this._createNewBuffer(i,{byteLength:a,usage:l,accessor:c})}}return r}_setupBuffers(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{sourceBuffers:n=null}=e;Object.assign(this.feedbackMap,e.feedbackMap);const r=this._getFeedbackBuffers(e);this._updateBindings({sourceBuffers:n,feedbackBuffers:r})}_setupTransformFeedback(e,n){let{model:r}=n;const{program:i}=r;e.transformFeedback=new PP(this.gl,{program:i,buffers:e.feedbackBuffers})}_updateBindings(e){if(this.bindings[this.currentIndex]=this._updateBinding(this.bindings[this.currentIndex],e),this.feedbackMap){const{sourceBuffers:n,feedbackBuffers:r}=this._swapBuffers(this.bindings[this.currentIndex]),i=this._getNextIndex();this.bindings[i]=this._updateBinding(this.bindings[i],{sourceBuffers:n,feedbackBuffers:r})}}_updateBinding(e,n){return e?(Object.assign(e.sourceBuffers,n.sourceBuffers),Object.assign(e.feedbackBuffers,n.feedbackBuffers),e.transformFeedback&&e.transformFeedback.setBuffers(e.feedbackBuffers),e):{sourceBuffers:Object.assign({},n.sourceBuffers),feedbackBuffers:Object.assign({},n.feedbackBuffers)}}_swapBuffers(e){if(!this.feedbackMap)return null;const n=Object.assign({},e.sourceBuffers),r=Object.assign({},e.feedbackBuffers);for(const i in this.feedbackMap){const s=this.feedbackMap[i];n[i]=e.feedbackBuffers[s],r[s]=e.sourceBuffers[i],$(r[s]instanceof Ae)}return{sourceBuffers:n,feedbackBuffers:r}}_createNewBuffer(e,n){const r=new Ae(this.gl,n);return this.resources[e]&&this.resources[e].delete(),this.resources[e]=r,r}_getNextIndex(){return(this.currentIndex+1)%2}}const QD="transform_uSampler_",nd="transform_uSize_",Ob="transform_position";function JD(t){let{vs:e,sourceTextureMap:n,targetTextureVarying:r,targetTexture:i}=t,o=Object.keys(n).length,a=null;const l={};let c=e,u={};if(o>0||r){const f=c.split(`
`),d=f.slice();if(f.forEach((h,p,g)=>{if(o>0){const E=i4(h,n);if(E){const{updatedLine:m,inject:y}=E;d[p]=m,u=Fm([u,y]),Object.assign(l,E.samplerTextureMap),o--}}r&&!a&&(a=r4(h,r))}),r){$(i);const h="".concat(nd).concat(r),p="uniform vec2 ".concat(h,`;
`),g="     vec2 ".concat(Ob," = transform_getPos(").concat(h,`);
     gl_Position = vec4(`).concat(Ob,`, 0, 1.);
`);u=Fm([u,{"vs:#decl":p,"vs:#main-start":g}])}c=d.join(`
`)}return{vs:c,targetTextureType:a,inject:u,samplerTextureMap:l}}function e4(t){let{sourceTextureMap:e,targetTextureVarying:n,targetTexture:r}=t;const i={};let s,o;n&&({width:s,height:o}=r,i["".concat(nd).concat(n)]=[s,o]);for(const a in e)({width:s,height:o}=e[a]),i["".concat(nd).concat(a)]=[s,o];return i}function t4(t){return MP(t,["attribute","in"])}function n4(t){const e="".concat(QD).concat(t),n="".concat(nd).concat(t),r="  uniform sampler2D ".concat(e,`;
  uniform vec2 `).concat(n,";");return{samplerName:e,sizeName:n,uniformDeclerations:r}}function r4(t,e){const n=MP(t,["varying","out"]);return n&&n.name===e?n.type:null}function i4(t,e){const n={},r=t4(t);if(!r)return null;const{type:i,name:s}=r;if(s&&e[s]){const o="// ".concat(t," => Replaced by Transform with a sampler"),{samplerName:a,sizeName:l,uniformDeclerations:c}=n4(s),u=IF(i),f="  ".concat(i," ").concat(s," = transform_getInput(").concat(a,", ").concat(l,").").concat(u,`;
`);return n[a]=s,{updatedLine:o,inject:{"vs:#decl":c,"vs:#main-start":f},samplerTextureMap:n}}return null}const s4={10241:9728,10240:9728,10242:33071,10243:33071},o4="transform_output";class a4{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.gl=e,this.id=this.currentIndex=0,this._swapTexture=null,this.targetTextureVarying=null,this.targetTextureType=null,this.samplerTextureMap=null,this.bindings=[],this.resources={},this._initialize(n),Object.seal(this)}updateModelProps(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const n=this._processVertexShader(e);return Object.assign({},e,n)}getDrawOptions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{sourceBuffers:n,sourceTextures:r,framebuffer:i,targetTexture:s}=this.bindings[this.currentIndex],o=Object.assign({},n,e.attributes),a=Object.assign({},e.uniforms),l=Object.assign({},e.parameters);let c=e.discard;if(this.hasSourceTextures||this.hasTargetTexture){o.transform_elementID=this.elementIDBuffer;for(const f in this.samplerTextureMap){const d=this.samplerTextureMap[f];a[f]=r[d]}this._setSourceTextureParameters();const u=e4({sourceTextureMap:r,targetTextureVarying:this.targetTextureVarying,targetTexture:s});Object.assign(a,u)}return this.hasTargetTexture&&(c=!1,l.viewport=[0,0,i.width,i.height]),{attributes:o,framebuffer:i,uniforms:a,discard:c,parameters:l}}swap(){return this._swapTexture?(this.currentIndex=this._getNextIndex(),!0):!1}update(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._setupTextures(e)}getTargetTexture(){const{targetTexture:e}=this.bindings[this.currentIndex];return e}getData(){let{packed:e=!1}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{framebuffer:n}=this.bindings[this.currentIndex],r=fh(n);if(!e)return r;const i=r.constructor,s=MF(this.targetTextureType),o=new i(r.length*s/4);let a=0;for(let l=0;l<r.length;l+=4)for(let c=0;c<s;c++)o[a++]=r[l+c];return o}getFramebuffer(){return this.bindings[this.currentIndex].framebuffer}delete(){this.ownTexture&&this.ownTexture.delete(),this.elementIDBuffer&&this.elementIDBuffer.delete()}_initialize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{_targetTextureVarying:n,_swapTexture:r}=e;this._swapTexture=r,this.targetTextureVarying=n,this.hasTargetTexture=n,this._setupTextures(e)}_createTargetTexture(e){const{sourceTextures:n,textureOrReference:r}=e;if(r instanceof yn)return r;const i=n[r];return i?(this._targetRefTexName=r,this._createNewTexture(i)):null}_setupTextures(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{sourceBuffers:n,_sourceTextures:r={},_targetTexture:i}=e,s=this._createTargetTexture({sourceTextures:r,textureOrReference:i});this.hasSourceTextures=this.hasSourceTextures||r&&Object.keys(r).length>0,this._updateBindings({sourceBuffers:n,sourceTextures:r,targetTexture:s}),"elementCount"in e&&this._updateElementIDBuffer(e.elementCount)}_updateElementIDBuffer(e){if(typeof e!="number"||this.elementCount>=e)return;const n=new Float32Array(e);n.forEach((r,i,s)=>{s[i]=i}),this.elementIDBuffer?this.elementIDBuffer.setData({data:n}):this.elementIDBuffer=new Ae(this.gl,{data:n,accessor:{size:1}}),this.elementCount=e}_updateBindings(e){if(this.bindings[this.currentIndex]=this._updateBinding(this.bindings[this.currentIndex],e),this._swapTexture){const{sourceTextures:n,targetTexture:r}=this._swapTextures(this.bindings[this.currentIndex]),i=this._getNextIndex();this.bindings[i]=this._updateBinding(this.bindings[i],{sourceTextures:n,targetTexture:r})}}_updateBinding(e,n){const{sourceBuffers:r,sourceTextures:i,targetTexture:s}=n;if(e||(e={sourceBuffers:{},sourceTextures:{},targetTexture:null}),Object.assign(e.sourceTextures,i),Object.assign(e.sourceBuffers,r),s){e.targetTexture=s;const{width:o,height:a}=s,{framebuffer:l}=e;l?(l.update({attachments:{36064:s},resizeAttachments:!1}),l.resize({width:o,height:a})):e.framebuffer=new ft(this.gl,{id:"transform-framebuffer",width:o,height:a,attachments:{36064:s}})}return e}_setSourceTextureParameters(){const e=this.currentIndex,{sourceTextures:n}=this.bindings[e];for(const r in n)n[r].setParameters(s4)}_swapTextures(e){if(!this._swapTexture)return null;const n=Object.assign({},e.sourceTextures);n[this._swapTexture]=e.targetTexture;const r=e.sourceTextures[this._swapTexture];return{sourceTextures:n,targetTexture:r}}_createNewTexture(e){const n=Ak(e,{parameters:{10241:9728,10240:9728,10242:33071,10243:33071},pixelStore:{37440:!1}});return this.ownTexture&&this.ownTexture.delete(),this.ownTexture=n,n}_getNextIndex(){return(this.currentIndex+1)%2}_processVertexShader(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{sourceTextures:n,targetTexture:r}=this.bindings[this.currentIndex],{vs:i,uniforms:s,targetTextureType:o,inject:a,samplerTextureMap:l}=JD({vs:e.vs,sourceTextureMap:n,targetTextureVarying:this.targetTextureVarying,targetTexture:r}),c=Fm([e.inject||{},a]);this.targetTextureType=o,this.samplerTextureMap=l;const u=e._fs||kP({version:xP(i),input:this.targetTextureVarying,inputType:o,output:o4}),f=this.hasSourceTextures||this.targetTextureVarying?[$D].concat(e.modules||[]):e.modules;return{vs:i,fs:u,modules:f,uniforms:s,inject:c}}}class Qy{static isSupported(e){return le(e)}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.gl=e,this.model=null,this.elementCount=0,this.bufferTransform=null,this.textureTransform=null,this.elementIDBuffer=null,this._initialize(n),Object.seal(this)}delete(){const{model:e,bufferTransform:n,textureTransform:r}=this;e&&e.delete(),n&&n.delete(),r&&r.delete()}run(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{clearRenderTarget:n=!0}=e,r=this._updateDrawOptions(e);n&&r.framebuffer&&r.framebuffer.clear({color:!0}),this.model.transform(r)}swap(){let e=!1;const n=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const r of n)e=e||r.swap();$(e,"Nothing to swap")}getBuffer(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return this.bufferTransform&&this.bufferTransform.getBuffer(e)}getData(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const n=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const r of n){const i=r.getData(e);if(i)return i}return null}getFramebuffer(){return this.textureTransform&&this.textureTransform.getFramebuffer()}update(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};"elementCount"in e&&this.model.setVertexCount(e.elementCount);const n=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const r of n)r.update(e)}_initialize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{gl:n}=this;this._buildResourceTransforms(n,e),e=this._updateModelProps(e),this.model=new Ps(n,Object.assign({},e,{fs:e.fs||kP({version:xP(e.vs)}),id:e.id||"transform-model",drawMode:e.drawMode||0,vertexCount:e.elementCount})),this.bufferTransform&&this.bufferTransform.setupResources({model:this.model})}_updateModelProps(e){let n=Object.assign({},e);const r=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const i of r)n=i.updateModelProps(n);return n}_buildResourceTransforms(e,n){l4(n)&&(this.bufferTransform=new ZD(e,n)),c4(n)&&(this.textureTransform=new a4(e,n)),$(this.bufferTransform||this.textureTransform,"must provide source/feedback buffers or source/target textures")}_updateDrawOptions(e){let n=Object.assign({},e);const r=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const i of r)n=Object.assign(n,i.getDrawOptions(n));return n}}function l4(t){return!!(!qo(t.feedbackBuffers)||!qo(t.feedbackMap)||t.varyings&&t.varyings.length>0)}function c4(t){return!!(!qo(t._sourceTextures)||t._targetTexture||t._targetTextureVarying)}const Ib={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6};class xc{static get DRAW_MODE(){return Ib}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{id:n=Fi("geometry"),drawMode:r=Ib.TRIANGLES,attributes:i={},indices:s=null,vertexCount:o=null}=e;this.id=n,this.drawMode=r|0,this.attributes={},this.userData={},this._setAttributes(i,s),this.vertexCount=o||this._calculateVertexCount(this.attributes,this.indices)}get mode(){return this.drawMode}getVertexCount(){return this.vertexCount}getAttributes(){return this.indices?{indices:this.indices,...this.attributes}:this.attributes}_print(e){return"Geometry ".concat(this.id," attribute ").concat(e)}_setAttributes(e,n){n&&(this.indices=ArrayBuffer.isView(n)?{value:n,size:1}:n);for(const r in e){let i=e[r];i=ArrayBuffer.isView(i)?{value:i}:i,$(ArrayBuffer.isView(i.value),"".concat(this._print(r),": must be typed array or object with value as typed array")),(r==="POSITION"||r==="positions")&&!i.size&&(i.size=3),r==="indices"?($(!this.indices),this.indices=i):this.attributes[r]=i}return this.indices&&this.indices.isIndexed!==void 0&&(this.indices=Object.assign({},this.indices),delete this.indices.isIndexed),this}_calculateVertexCount(e,n){if(n)return n.value.length;let r=1/0;for(const i in e){const s=e[i],{value:o,size:a,constant:l}=s;!l&&o&&a>=1&&(r=Math.min(r,o.length/a))}return $(Number.isFinite(r)),r}}let u4=1,f4=1;class VP{constructor(){this.time=0,this.channels=new Map,this.animations=new Map,this.playing=!1,this.lastEngineTime=-1}addChannel(e){const{delay:n=0,duration:r=Number.POSITIVE_INFINITY,rate:i=1,repeat:s=1}=e,o=u4++,a={time:0,delay:n,duration:r,rate:i,repeat:s};return this._setChannelTime(a,this.time),this.channels.set(o,a),o}removeChannel(e){this.channels.delete(e);for(const[n,r]of this.animations)r.channel===e&&this.detachAnimation(n)}isFinished(e){const n=this.channels.get(e);return n===void 0?!1:this.time>=n.delay+n.duration*n.repeat}getTime(e){if(e===void 0)return this.time;const n=this.channels.get(e);return n===void 0?-1:n.time}setTime(e){this.time=Math.max(0,e);const n=this.channels.values();for(const i of n)this._setChannelTime(i,this.time);const r=this.animations.values();for(const i of r){const{animation:s,channel:o}=i;s.setTime(this.getTime(o))}}play(){this.playing=!0}pause(){this.playing=!1,this.lastEngineTime=-1}reset(){this.setTime(0)}attachAnimation(e,n){const r=f4++;return this.animations.set(r,{animation:e,channel:n}),e.setTime(this.getTime(n)),r}detachAnimation(e){this.animations.delete(e)}update(e){this.playing&&(this.lastEngineTime===-1&&(this.lastEngineTime=e),this.setTime(this.time+(e-this.lastEngineTime)),this.lastEngineTime=e)}_setChannelTime(e,n){const r=n-e.delay,i=e.duration*e.repeat;r>=i?e.time=e.duration*e.rate:(e.time=Math.max(0,r)%e.duration,e.time*=e.rate)}}const d4=[255,255,255],h4=1;let p4=0;class g4{constructor(e={}){_(this,"id",void 0),_(this,"color",void 0),_(this,"intensity",void 0),_(this,"type","ambient");const{color:n=d4}=e,{intensity:r=h4}=e;this.id=e.id||"ambient-".concat(p4++),this.color=n,this.intensity=r}}const m4=[255,255,255],y4=1,v4=[0,0,-1];let _4=0;class Mb{constructor(e={}){_(this,"id",void 0),_(this,"color",void 0),_(this,"intensity",void 0),_(this,"type","directional"),_(this,"direction",void 0),_(this,"shadow",void 0);const{color:n=m4}=e,{intensity:r=y4}=e,{direction:i=v4}=e,{_shadow:s=!1}=e;this.id=e.id||"directional-".concat(_4++),this.color=n,this.intensity=r,this.type="directional",this.direction=new Er(i).normalize().toArray(),this.shadow=s}getProjectedLight(e){return this}}class b4{constructor(e,n={id:"pass"}){_(this,"id",void 0),_(this,"gl",void 0),_(this,"props",void 0);const{id:r}=n;this.id=r,this.gl=e,this.props={...n}}setProps(e){Object.assign(this.props,e)}render(e){}cleanup(){}}class Jy extends b4{constructor(...e){super(...e),_(this,"_lastRenderIndex",-1)}render(e){const n=this.gl;return Xr(n,{framebuffer:e.target}),this._drawLayers(e)}_drawLayers(e){const{target:n,moduleParameters:r,viewports:i,views:s,onViewportActive:o,clearStack:a=!0,clearCanvas:l=!0}=e;e.pass=e.pass||"unknown";const c=this.gl;l&&w4(c,n),a&&(this._lastRenderIndex=-1);const u=[];for(const f of i){const d=s&&s[f.id];o==null||o(f);const h=this._getDrawLayerParams(f,e),p=f.subViewports||[f];for(const g of p){const E=this._drawLayersInViewport(c,{target:n,moduleParameters:r,viewport:g,view:d,pass:e.pass,layers:e.layers},h);u.push(E)}}return u}_getDrawLayerParams(e,{layers:n,pass:r,isPicking:i=!1,layerFilter:s,cullRect:o,effects:a,moduleParameters:l},c=!1){const u=[],f=$P(this._lastRenderIndex+1),d={layer:n[0],viewport:e,isPicking:i,renderPass:r,cullRect:o},h={};for(let p=0;p<n.length;p++){const g=n[p],E=this._shouldDrawLayer(g,d,s,h),m={shouldDrawLayer:E};E&&!c&&(m.layerRenderIndex=f(g,E),m.moduleParameters=this._getModuleParameters(g,a,r,l),m.layerParameters=this.getLayerParameters(g,p,e)),u[p]=m}return u}_drawLayersInViewport(e,{layers:n,moduleParameters:r,pass:i,target:s,viewport:o,view:a},l){const c=E4(e,{moduleParameters:r,target:s,viewport:o});if(a&&a.props.clear){const f=a.props.clear===!0?{color:!0,depth:!0}:a.props.clear;Zn(e,{scissorTest:!0,scissor:c},()=>Hy(e,f))}const u={totalCount:n.length,visibleCount:0,compositeCount:0,pickableCount:0};Xr(e,{viewport:c});for(let f=0;f<n.length;f++){const d=n[f],{shouldDrawLayer:h,layerRenderIndex:p,moduleParameters:g,layerParameters:E}=l[f];if(h&&d.props.pickable&&u.pickableCount++,d.isComposite)u.compositeCount++;else if(h){u.visibleCount++,this._lastRenderIndex=Math.max(this._lastRenderIndex,p),g.viewport=o;try{d._drawLayer({moduleParameters:g,uniforms:{layerIndex:p},parameters:E})}catch(m){d.raiseError(m,"drawing ".concat(d," to ").concat(i))}}}return u}shouldDrawLayer(e){return!0}getModuleParameters(e,n){return null}getLayerParameters(e,n,r){return e.props.parameters}_shouldDrawLayer(e,n,r,i){if(!(e.props.visible&&this.shouldDrawLayer(e)))return!1;n.layer=e;let o=e.parent;for(;o;){if(!o.props.visible||!o.filterSubLayer(n))return!1;n.layer=o,o=o.parent}if(r){const a=n.layer.id;if(a in i||(i[a]=r(n)),!i[a])return!1}return e.activateViewport(n.viewport),!0}_getModuleParameters(e,n,r,i){var s;const o=Object.assign(Object.create(((s=e.internalState)===null||s===void 0?void 0:s.propsInTransition)||e.props),{autoWrapLongitude:e.wrapLongitude,viewport:e.context.viewport,mousePosition:e.context.mousePosition,pickingActive:0,devicePixelRatio:Ko(this.gl)});if(n)for(const l of n){var a;Object.assign(o,(a=l.getModuleParameters)===null||a===void 0?void 0:a.call(l,e))}return Object.assign(o,this.getModuleParameters(e,n),i)}}function $P(t=0,e={}){const n={},r=(i,s)=>{const o=i.props._offset,a=i.id,l=i.parent&&i.parent.id;let c;if(l&&!(l in e)&&r(i.parent,!1),l in n){const u=n[l]=n[l]||$P(e[l],e);c=u(i,s),n[a]=u}else Number.isFinite(o)?(c=o+(e[l]||0),n[a]=null):c=t;return s&&c>=t&&(t=c+1),e[a]=c,c};return r}function E4(t,{moduleParameters:e,target:n,viewport:r}){const i=n&&n.id!=="default-framebuffer",s=e&&e.devicePixelRatio||Ko(t),o=i?n.height:t.drawingBufferHeight,a=r;return[a.x*s,o-(a.y+a.height)*s,a.width*s,a.height*s]}function w4(t,e){const n=e?e.width:t.drawingBufferWidth,r=e?e.height:t.drawingBufferHeight;Xr(t,{viewport:[0,0,n,r]}),t.clear(16640)}class x4 extends Jy{constructor(e,n){super(e,n),_(this,"shadowMap",void 0),_(this,"depthBuffer",void 0),_(this,"fbo",void 0),this.shadowMap=new yn(e,{width:1,height:1,parameters:{10241:9729,10240:9729,10242:33071,10243:33071}}),this.depthBuffer=new xo(e,{format:33189,width:1,height:1}),this.fbo=new ft(e,{id:"shadowmap",width:1,height:1,attachments:{36064:this.shadowMap,36096:this.depthBuffer}})}render(e){const n=this.fbo;Zn(this.gl,{depthRange:[0,1],depthTest:!0,blend:!1,clearColor:[1,1,1,1]},()=>{const r=e.viewports[0],i=Ko(this.gl),s=r.width*i,o=r.height*i;(s!==n.width||o!==n.height)&&n.resize({width:s,height:o}),super.render({...e,target:n,pass:"shadow"})})}shouldDrawLayer(e){return e.props.shadowEnabled!==!1}getModuleParameters(){return{drawToShadowMap:!0}}delete(){this.fbo&&(this.fbo.delete(),this.fbo=null),this.shadowMap&&(this.shadowMap.delete(),this.shadowMap=null),this.depthBuffer&&(this.depthBuffer.delete(),this.depthBuffer=null)}}const GP="#define SMOOTH_EDGE_RADIUS 0.5",T4=`
`.concat(GP,`

struct VertexGeometry {
  vec4 position;
  vec3 worldPosition;
  vec3 worldPositionAlt;
  vec3 normal;
  vec2 uv;
  vec3 pickingColor;
} geometry = VertexGeometry(
  vec4(0.0, 0.0, 1.0, 0.0),
  vec3(0.0),
  vec3(0.0),
  vec3(0.0),
  vec2(0.0),
  vec3(0.0)
);
`),S4=`
`.concat(GP,`

struct FragmentGeometry {
  vec2 uv;
} geometry;

float smoothedge(float edge, float x) {
  return smoothstep(edge - SMOOTH_EDGE_RADIUS, edge + SMOOTH_EDGE_RADIUS, x);
}
`),P4={name:"geometry",vs:T4,fs:S4},A4=Object.keys(ge).map(t=>"const int COORDINATE_SYSTEM_".concat(t," = ").concat(ge[t],";")).join(""),C4=Object.keys(hr).map(t=>"const int PROJECTION_MODE_".concat(t," = ").concat(hr[t],";")).join(""),L4=Object.keys(Ts).map(t=>"const int UNIT_".concat(t.toUpperCase()," = ").concat(Ts[t],";")).join(""),R4="".concat(A4,`
`).concat(C4,`
`).concat(L4,`

uniform int project_uCoordinateSystem;
uniform int project_uProjectionMode;
uniform float project_uScale;
uniform bool project_uWrapLongitude;
uniform vec3 project_uCommonUnitsPerMeter;
uniform vec3 project_uCommonUnitsPerWorldUnit;
uniform vec3 project_uCommonUnitsPerWorldUnit2;
uniform vec4 project_uCenter;
uniform mat4 project_uModelMatrix;
uniform mat4 project_uViewProjectionMatrix;
uniform vec2 project_uViewportSize;
uniform float project_uDevicePixelRatio;
uniform float project_uFocalDistance;
uniform vec3 project_uCameraPosition;
uniform vec3 project_uCoordinateOrigin;
uniform vec3 project_uCommonOrigin;
uniform bool project_uPseudoMeters;

const float TILE_SIZE = 512.0;
const float PI = 3.1415926536;
const float WORLD_SCALE = TILE_SIZE / (PI * 2.0);
const vec3 ZERO_64_LOW = vec3(0.0);
const float EARTH_RADIUS = 6370972.0;
const float GLOBE_RADIUS = 256.0;
float project_size_at_latitude(float lat) {
  float y = clamp(lat, -89.9, 89.9);
  return 1.0 / cos(radians(y));
}

float project_size() {
  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR &&
    project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT &&
    project_uPseudoMeters == false) {
    
    if (geometry.position.w == 0.0) {
      return project_size_at_latitude(geometry.worldPosition.y);
    }
  
    float y = geometry.position.y / TILE_SIZE * 2.0 - 1.0;
    float y2 = y * y;
    float y4 = y2 * y2;
    float y6 = y4 * y2;
    return 1.0 + 4.9348 * y2 + 4.0587 * y4 + 1.5642 * y6;
  }
  return 1.0;
}

float project_size_at_latitude(float meters, float lat) {
  return meters * project_uCommonUnitsPerMeter.z * project_size_at_latitude(lat);
}
float project_size(float meters) {
  return meters * project_uCommonUnitsPerMeter.z * project_size();
}

vec2 project_size(vec2 meters) {
  return meters * project_uCommonUnitsPerMeter.xy * project_size();
}

vec3 project_size(vec3 meters) {
  return meters * project_uCommonUnitsPerMeter * project_size();
}

vec4 project_size(vec4 meters) {
  return vec4(meters.xyz * project_uCommonUnitsPerMeter, meters.w);
}
mat3 project_get_orientation_matrix(vec3 up) {
  vec3 uz = normalize(up);
  vec3 ux = abs(uz.z) == 1.0 ? vec3(1.0, 0.0, 0.0) : normalize(vec3(uz.y, -uz.x, 0));
  vec3 uy = cross(uz, ux);
  return mat3(ux, uy, uz);
}

bool project_needs_rotation(vec3 commonPosition, out mat3 transform) {
  if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {
    transform = project_get_orientation_matrix(commonPosition);
    return true;
  }
  return false;
}
vec3 project_normal(vec3 vector) {
  vec4 normal_modelspace = project_uModelMatrix * vec4(vector, 0.0);
  vec3 n = normalize(normal_modelspace.xyz * project_uCommonUnitsPerMeter);
  mat3 rotation;
  if (project_needs_rotation(geometry.position.xyz, rotation)) {
    n = rotation * n;
  }
  return n;
}

vec4 project_offset_(vec4 offset) {
  float dy = offset.y;
  vec3 commonUnitsPerWorldUnit = project_uCommonUnitsPerWorldUnit + project_uCommonUnitsPerWorldUnit2 * dy;
  return vec4(offset.xyz * commonUnitsPerWorldUnit, offset.w);
}
vec2 project_mercator_(vec2 lnglat) {
  float x = lnglat.x;
  if (project_uWrapLongitude) {
    x = mod(x + 180., 360.0) - 180.;
  }
  float y = clamp(lnglat.y, -89.9, 89.9);
  return vec2(
    radians(x) + PI,
    PI + log(tan_fp32(PI * 0.25 + radians(y) * 0.5))
  ) * WORLD_SCALE;
}

vec3 project_globe_(vec3 lnglatz) {
  float lambda = radians(lnglatz.x);
  float phi = radians(lnglatz.y);
  float cosPhi = cos(phi);
  float D = (lnglatz.z / EARTH_RADIUS + 1.0) * GLOBE_RADIUS;

  return vec3(
    sin(lambda) * cosPhi,
    -cos(lambda) * cosPhi,
    sin(phi)
  ) * D;
}
vec4 project_position(vec4 position, vec3 position64Low) {
  vec4 position_world = project_uModelMatrix * position;
  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR) {
    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {
      return vec4(
        project_mercator_(position_world.xy),
        project_size_at_latitude(position_world.z, position_world.y),
        position_world.w
      );
    }
    if (project_uCoordinateSystem == COORDINATE_SYSTEM_CARTESIAN) {
      position_world.xyz += project_uCoordinateOrigin;
    }
  }
  if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {
    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {
      return vec4(
        project_globe_(position_world.xyz),
        position_world.w
      );
    }
  }
  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET) {
    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {
      if (abs(position_world.y - project_uCoordinateOrigin.y) > 0.25) {
        return vec4(
          project_mercator_(position_world.xy) - project_uCommonOrigin.xy,
          project_size(position_world.z),
          position_world.w
        );
      }
    }
  }
  if (project_uProjectionMode == PROJECTION_MODE_IDENTITY ||
    (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET &&
    (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||
     project_uCoordinateSystem == COORDINATE_SYSTEM_CARTESIAN))) {
    position_world.xyz -= project_uCoordinateOrigin;
  }
  return project_offset_(position_world + project_uModelMatrix * vec4(position64Low, 0.0));
}

vec4 project_position(vec4 position) {
  return project_position(position, ZERO_64_LOW);
}

vec3 project_position(vec3 position, vec3 position64Low) {
  vec4 projected_position = project_position(vec4(position, 1.0), position64Low);
  return projected_position.xyz;
}

vec3 project_position(vec3 position) {
  vec4 projected_position = project_position(vec4(position, 1.0), ZERO_64_LOW);
  return projected_position.xyz;
}

vec2 project_position(vec2 position) {
  vec4 projected_position = project_position(vec4(position, 0.0, 1.0), ZERO_64_LOW);
  return projected_position.xy;
}

vec4 project_common_position_to_clipspace(vec4 position, mat4 viewProjectionMatrix, vec4 center) {
  return viewProjectionMatrix * position + center;
}
vec4 project_common_position_to_clipspace(vec4 position) {
  return project_common_position_to_clipspace(position, project_uViewProjectionMatrix, project_uCenter);
}
vec2 project_pixel_size_to_clipspace(vec2 pixels) {
  vec2 offset = pixels / project_uViewportSize * project_uDevicePixelRatio * 2.0;
  return offset * project_uFocalDistance;
}

float project_size_to_pixel(float meters) {
  return project_size(meters) * project_uScale;
}
float project_size_to_pixel(float size, int unit) {
  if (unit == UNIT_METERS) return project_size_to_pixel(size);
  if (unit == UNIT_COMMON) return size * project_uScale;
  return size;
}
float project_pixel_size(float pixels) {
  return pixels / project_uScale;
}
vec2 project_pixel_size(vec2 pixels) {
  return pixels / project_uScale;
}
`);function O4(t,e){if(t===e)return!0;if(Array.isArray(t)){const n=t.length;if(!e||e.length!==n)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}return!1}function Tc(t){let e={},n;return r=>{for(const i in r)if(!O4(r[i],e[i])){n=t(r),e=r;break}return n}}const kb=[0,0,0,0],I4=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0],WP=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],M4=[0,0,0],HP=[0,0,0],k4=Tc(D4);function XP(t,e,n=HP){n.length<3&&(n=[n[0],n[1],0]);let r=n,i,s=!0;switch(e===ge.LNGLAT_OFFSETS||e===ge.METER_OFFSETS?i=n:i=t.isGeospatial?[Math.fround(t.longitude),Math.fround(t.latitude),0]:null,t.projectionMode){case hr.WEB_MERCATOR:(e===ge.LNGLAT||e===ge.CARTESIAN)&&(i=[0,0,0],s=!1);break;case hr.WEB_MERCATOR_AUTO_OFFSET:e===ge.LNGLAT?r=i:e===ge.CARTESIAN&&(r=[Math.fround(t.center[0]),Math.fround(t.center[1]),0],i=t.unprojectPosition(r),r[0]-=n[0],r[1]-=n[1],r[2]-=n[2]);break;case hr.IDENTITY:r=t.position.map(Math.fround),r[2]=r[2]||0;break;case hr.GLOBE:s=!1,i=null;break;default:s=!1}return{geospatialOrigin:i,shaderCoordinateOrigin:r,offsetMode:s}}function N4(t,e,n){const{viewMatrixUncentered:r,projectionMatrix:i}=t;let{viewMatrix:s,viewProjectionMatrix:o}=t,a=kb,l=kb,c=t.cameraPosition;const{geospatialOrigin:u,shaderCoordinateOrigin:f,offsetMode:d}=XP(t,e,n);return d&&(l=t.projectPosition(u||f),c=[c[0]-l[0],c[1]-l[1],c[2]-l[2]],l[3]=1,a=Ec([],l,o),s=r||s,o=ys([],i,s),o=ys([],o,I4)),{viewMatrix:s,viewProjectionMatrix:o,projectionCenter:a,originCommon:l,cameraPosCommon:c,shaderCoordinateOrigin:f,geospatialOrigin:u}}function F4({viewport:t,devicePixelRatio:e=1,modelMatrix:n=null,coordinateSystem:r=ge.DEFAULT,coordinateOrigin:i=HP,autoWrapLongitude:s=!1}){r===ge.DEFAULT&&(r=t.isGeospatial?ge.LNGLAT:ge.CARTESIAN);const o=k4({viewport:t,devicePixelRatio:e,coordinateSystem:r,coordinateOrigin:i});return o.project_uWrapLongitude=s,o.project_uModelMatrix=n||WP,o}function D4({viewport:t,devicePixelRatio:e,coordinateSystem:n,coordinateOrigin:r}){const{projectionCenter:i,viewProjectionMatrix:s,originCommon:o,cameraPosCommon:a,shaderCoordinateOrigin:l,geospatialOrigin:c}=N4(t,n,r),u=t.getDistanceScales(),f=[t.width*e,t.height*e],d=Ec([],[0,0,-t.focalDistance,1],t.projectionMatrix)[3]||1,h={project_uCoordinateSystem:n,project_uProjectionMode:t.projectionMode,project_uCoordinateOrigin:l,project_uCommonOrigin:o.slice(0,3),project_uCenter:i,project_uPseudoMeters:!!t._pseudoMeters,project_uViewportSize:f,project_uDevicePixelRatio:e,project_uFocalDistance:d,project_uCommonUnitsPerMeter:u.unitsPerMeter,project_uCommonUnitsPerWorldUnit:u.unitsPerMeter,project_uCommonUnitsPerWorldUnit2:M4,project_uScale:t.scale,project_uWrapLongitude:!1,project_uViewProjectionMatrix:s,project_uModelMatrix:WP,project_uCameraPosition:a};if(c){const p=t.getDistanceScales(c);switch(n){case ge.METER_OFFSETS:h.project_uCommonUnitsPerWorldUnit=p.unitsPerMeter,h.project_uCommonUnitsPerWorldUnit2=p.unitsPerMeter2;break;case ge.LNGLAT:case ge.LNGLAT_OFFSETS:t._pseudoMeters||(h.project_uCommonUnitsPerMeter=p.unitsPerMeter),h.project_uCommonUnitsPerWorldUnit=p.unitsPerDegree,h.project_uCommonUnitsPerWorldUnit2=p.unitsPerDegree2;break;case ge.CARTESIAN:h.project_uCommonUnitsPerWorldUnit=[1,1,p.unitsPerMeter[2]],h.project_uCommonUnitsPerWorldUnit2=[0,0,p.unitsPerMeter2[2]];break}}return h}const B4={};function z4(t=B4){return"viewport"in t?F4(t):{}}const ev={name:"project",dependencies:[FF,P4],vs:R4,getUniforms:z4};function U4(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function Mo(t,e){const n=Ec([],e,t);return ED(n,n,1/n[3]),n}function Nb(t,e){const n=t%e;return n<0?e+n:n}function jm(t,e,n){return t<e?e:t>n?n:t}function j4(t){return Math.log(t)*Math.LOG2E}const tv=Math.log2||j4;function Yr(t,e){if(!t)throw new Error(e||"@math.gl/web-mercator: assertion failed.")}const Xn=Math.PI,YP=Xn/4,In=Xn/180,Vm=180/Xn,ea=512,rd=4003e4,Tu=85.051129,V4=1.5;function $4(t){return tv(t)}function id(t){const[e,n]=t;Yr(Number.isFinite(e)),Yr(Number.isFinite(n)&&n>=-90&&n<=90,"invalid latitude");const r=e*In,i=n*In,s=ea*(r+Xn)/(2*Xn),o=ea*(Xn+Math.log(Math.tan(YP+i*.5)))/(2*Xn);return[s,o]}function ta(t){const[e,n]=t,r=e/ea*(2*Xn)-Xn,i=2*(Math.atan(Math.exp(n/ea*(2*Xn)-Xn))-YP);return[r*Vm,i*Vm]}function G4(t){const{latitude:e}=t;Yr(Number.isFinite(e));const n=Math.cos(e*In);return $4(rd*n)-9}function Zp(t){const e=Math.cos(t*In);return ea/rd/e}function $m(t){const{latitude:e,longitude:n,highPrecision:r=!1}=t;Yr(Number.isFinite(e)&&Number.isFinite(n));const i=ea,s=Math.cos(e*In),o=i/360,a=o/s,l=i/rd/s,c={unitsPerMeter:[l,l,l],metersPerUnit:[1/l,1/l,1/l],unitsPerDegree:[o,a,l],degreesPerUnit:[1/o,1/a,1/l]};if(r){const u=In*Math.tan(e*In)/s,f=o*u/2,d=i/rd*u,h=d/a*l;c.unitsPerDegree2=[0,f,d],c.unitsPerMeter2=[h,0,h]}return c}function KP(t,e){const[n,r,i]=t,[s,o,a]=e,{unitsPerMeter:l,unitsPerMeter2:c}=$m({longitude:n,latitude:r,highPrecision:!0}),u=id(t);u[0]+=s*(l[0]+c[0]*o),u[1]+=o*(l[1]+c[1]*o);const f=ta(u),d=(i||0)+(a||0);return Number.isFinite(i)||Number.isFinite(a)?[f[0],f[1],d]:f}function W4(t){const{height:e,pitch:n,bearing:r,altitude:i,scale:s,center:o}=t,a=U4();td(a,a,[0,0,-i]),zP(a,a,-n*In),UP(a,a,r*In);const l=s/e;return Zy(a,a,[l,l,l]),o&&td(a,a,ZF([],o)),a}function H4(t){const{width:e,height:n,altitude:r,pitch:i=0,offset:s,center:o,scale:a,nearZMultiplier:l=1,farZMultiplier:c=1}=t;let{fovy:u=sd(V4)}=t;r!==void 0&&(u=sd(r));const f=u*In,d=i*In,h=qP(u);let p=h;o&&(p+=o[2]*a/Math.cos(d)/n);const g=f*(.5+(s?s[1]:0)/n),E=Math.sin(g)*p/Math.sin(jm(Math.PI/2-d-g,.01,Math.PI-.01)),m=Math.sin(d)*E+p,y=p*10,v=Math.min(m*c,y);return{fov:f,aspect:e/n,focalDistance:h,near:l,far:v}}function sd(t){return 2*Math.atan(.5/t)*Vm}function qP(t){return .5/Math.tan(.5*t*In)}function ZP(t,e){const[n,r,i=0]=t;return Yr(Number.isFinite(n)&&Number.isFinite(r)&&Number.isFinite(i)),Mo(e,[n,r,i,1])}function nv(t,e,n=0){const[r,i,s]=t;if(Yr(Number.isFinite(r)&&Number.isFinite(i),"invalid pixel coordinate"),Number.isFinite(s))return Mo(e,[r,i,s,1]);const o=Mo(e,[r,i,0,1]),a=Mo(e,[r,i,1,1]),l=o[2],c=a[2],u=l===c?0:((n||0)-l)/(c-l);return FP([],o,a,u)}function X4(t){const{width:e,height:n,bounds:r,minExtent:i=0,maxZoom:s=24,offset:o=[0,0]}=t,[[a,l],[c,u]]=r,f=Y4(t.padding),d=id([a,jm(u,-Tu,Tu)]),h=id([c,jm(l,-Tu,Tu)]),p=[Math.max(Math.abs(h[0]-d[0]),i),Math.max(Math.abs(h[1]-d[1]),i)],g=[e-f.left-f.right-Math.abs(o[0])*2,n-f.top-f.bottom-Math.abs(o[1])*2];Yr(g[0]>0&&g[1]>0);const E=g[0]/p[0],m=g[1]/p[1],y=(f.right-f.left)/2/E,v=(f.top-f.bottom)/2/m,b=[(h[0]+d[0])/2+y,(h[1]+d[1])/2+v],T=ta(b),S=Math.min(s,tv(Math.abs(Math.min(E,m))));return Yr(Number.isFinite(S)),{longitude:T[0],latitude:T[1],zoom:S}}function Y4(t=0){return typeof t=="number"?{top:t,bottom:t,left:t,right:t}:(Yr(Number.isFinite(t.top)&&Number.isFinite(t.bottom)&&Number.isFinite(t.left)&&Number.isFinite(t.right)),t)}const Fb=Math.PI/180;function K4(t,e=0){const{width:n,height:r,unproject:i}=t,s={targetZ:e},o=i([0,r],s),a=i([n,r],s);let l,c;const u=t.fovy?.5*t.fovy*Fb:Math.atan(.5/t.altitude),f=(90-t.pitch)*Fb;return u>f-.01?(l=Db(t,0,e),c=Db(t,n,e)):(l=i([0,0],s),c=i([n,0],s)),[o,a,c,l]}function Db(t,e,n){const{pixelUnprojectionMatrix:r}=t,i=Mo(r,[e,0,1,1]),s=Mo(r,[e,t.height,1,1]),a=(n*t.distanceScales.unitsPerMeter[2]-i[2])/(s[2]-i[2]),l=FP([],i,s,a),c=ta(l);return c.push(n),c}const Bb=512;function q4(t){const{width:e,height:n,pitch:r=0}=t;let{longitude:i,latitude:s,zoom:o,bearing:a=0}=t;(i<-180||i>180)&&(i=Nb(i+180,360)-180),(a<-180||a>180)&&(a=Nb(a+180,360)-180);const l=tv(n/Bb);if(o<=l)o=l,s=0;else{const c=n/2/Math.pow(2,o),u=ta([0,c])[1];if(s<u)s=u;else{const f=ta([0,Bb-c])[1];s>f&&(s=f)}}return{width:e,height:n,longitude:i,latitude:s,zoom:o,pitch:r,bearing:a}}const Z4=`
const int max_lights = 2;
uniform mat4 shadow_uViewProjectionMatrices[max_lights];
uniform vec4 shadow_uProjectCenters[max_lights];
uniform bool shadow_uDrawShadowMap;
uniform bool shadow_uUseShadowMap;
uniform int shadow_uLightId;
uniform float shadow_uLightCount;

varying vec3 shadow_vPosition[max_lights];

vec4 shadow_setVertexPosition(vec4 position_commonspace) {
  if (shadow_uDrawShadowMap) {
    return project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[shadow_uLightId], shadow_uProjectCenters[shadow_uLightId]);
  }
  if (shadow_uUseShadowMap) {
    for (int i = 0; i < max_lights; i++) {
      if(i < int(shadow_uLightCount)) {
        vec4 shadowMap_position = project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[i], shadow_uProjectCenters[i]);
        shadow_vPosition[i] = (shadowMap_position.xyz / shadowMap_position.w + 1.0) / 2.0;
      }
    }
  }
  return gl_Position;
}
`,Q4=`
const int max_lights = 2;
uniform bool shadow_uDrawShadowMap;
uniform bool shadow_uUseShadowMap;
uniform sampler2D shadow_uShadowMap0;
uniform sampler2D shadow_uShadowMap1;
uniform vec4 shadow_uColor;
uniform float shadow_uLightCount;

varying vec3 shadow_vPosition[max_lights];

const vec4 bitPackShift = vec4(1.0, 255.0, 65025.0, 16581375.0);
const vec4 bitUnpackShift = 1.0 / bitPackShift;
const vec4 bitMask = vec4(1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0,  0.0);

float shadow_getShadowWeight(vec3 position, sampler2D shadowMap) {
  vec4 rgbaDepth = texture2D(shadowMap, position.xy);

  float z = dot(rgbaDepth, bitUnpackShift);
  return smoothstep(0.001, 0.01, position.z - z);
}

vec4 shadow_filterShadowColor(vec4 color) {
  if (shadow_uDrawShadowMap) {
    vec4 rgbaDepth = fract(gl_FragCoord.z * bitPackShift);
    rgbaDepth -= rgbaDepth.gbaa * bitMask;
    return rgbaDepth;
  }
  if (shadow_uUseShadowMap) {
    float shadowAlpha = 0.0;
    shadowAlpha += shadow_getShadowWeight(shadow_vPosition[0], shadow_uShadowMap0);
    if(shadow_uLightCount > 1.0) {
      shadowAlpha += shadow_getShadowWeight(shadow_vPosition[1], shadow_uShadowMap1);
    }
    shadowAlpha *= shadow_uColor.a / shadow_uLightCount;
    float blendedAlpha = shadowAlpha + color.a * (1.0 - shadowAlpha);

    return vec4(
      mix(color.rgb, shadow_uColor.rgb, shadowAlpha / blendedAlpha),
      blendedAlpha
    );
  }
  return color;
}
`,J4=Tc(iB),eB=Tc(sB),tB=[0,0,0,1],nB=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0];function rB(t,e){const[n,r,i]=t,s=nv([n,r,i],e);return Number.isFinite(i)?s:[s[0],s[1],0]}function iB({viewport:t,center:e}){return new wr(t.viewProjectionMatrix).invert().transform(e)}function sB({viewport:t,shadowMatrices:e}){const n=[],r=t.pixelUnprojectionMatrix,i=t.isGeospatial?void 0:1,s=[[0,0,i],[t.width,0,i],[0,t.height,i],[t.width,t.height,i],[0,0,-1],[t.width,0,-1],[0,t.height,-1],[t.width,t.height,-1]].map(o=>rB(o,r));for(const o of e){const a=o.clone().translate(new Er(t.center).negate()),l=s.map(u=>a.transform(u)),c=new wr().ortho({left:Math.min(...l.map(u=>u[0])),right:Math.max(...l.map(u=>u[0])),bottom:Math.min(...l.map(u=>u[1])),top:Math.max(...l.map(u=>u[1])),near:Math.min(...l.map(u=>-u[2])),far:Math.max(...l.map(u=>-u[2]))});n.push(c.multiplyRight(o))}return n}function oB(t,e){const{shadowEnabled:n=!0}=t;if(!n||!t.shadowMatrices||!t.shadowMatrices.length)return{shadow_uDrawShadowMap:!1,shadow_uUseShadowMap:!1};const r={shadow_uDrawShadowMap:!!t.drawToShadowMap,shadow_uUseShadowMap:t.shadowMaps?t.shadowMaps.length>0:!1,shadow_uColor:t.shadowColor||tB,shadow_uLightId:t.shadowLightId||0,shadow_uLightCount:t.shadowMatrices.length},i=J4({viewport:t.viewport,center:e.project_uCenter}),s=[],o=eB({shadowMatrices:t.shadowMatrices,viewport:t.viewport}).slice();for(let a=0;a<t.shadowMatrices.length;a++){const l=o[a],c=l.clone().translate(new Er(t.viewport.center).negate());e.project_uCoordinateSystem===ge.LNGLAT&&e.project_uProjectionMode===hr.WEB_MERCATOR?(o[a]=c,s[a]=i):(o[a]=l.clone().multiplyRight(nB),s[a]=c.transform(i))}for(let a=0;a<o.length;a++)r["shadow_uViewProjectionMatrices[".concat(a,"]")]=o[a],r["shadow_uProjectCenters[".concat(a,"]")]=s[a],t.shadowMaps&&t.shadowMaps.length>0?r["shadow_uShadowMap".concat(a)]=t.shadowMaps[a]:r["shadow_uShadowMap".concat(a)]=t.dummyShadowMap;return r}const Qp={name:"shadow",dependencies:[ev],vs:Z4,fs:Q4,inject:{"vs:DECKGL_FILTER_GL_POSITION":`
    position = shadow_setVertexPosition(geometry.position);
    `,"fs:DECKGL_FILTER_COLOR":`
    color = shadow_filterShadowColor(color);
    `},getUniforms:(t={},e={})=>"viewport"in t&&(t.drawToShadowMap||t.shadowMaps&&t.shadowMaps.length>0)?oB(t,e):{}},aB={color:[255,255,255],intensity:1},zb=[{color:[255,255,255],intensity:1,direction:[-1,3,-1]},{color:[255,255,255],intensity:.9,direction:[1,-8,-2.5]}],lB=[0,0,0,200/255];class QP{constructor(e={}){_(this,"id","lighting-effect"),_(this,"props",void 0),_(this,"shadowColor",lB),_(this,"shadow",void 0),_(this,"ambientLight",void 0),_(this,"directionalLights",void 0),_(this,"pointLights",void 0),_(this,"shadowPasses",[]),_(this,"shadowMaps",[]),_(this,"dummyShadowMap",null),_(this,"programManager",void 0),_(this,"shadowMatrices",void 0),this.setProps(e)}setProps(e){this.ambientLight=null,this.directionalLights=[],this.pointLights=[];for(const n in e){const r=e[n];switch(r.type){case"ambient":this.ambientLight=r;break;case"directional":this.directionalLights.push(r);break;case"point":this.pointLights.push(r);break}}this._applyDefaultLights(),this.shadow=this.directionalLights.some(n=>n.shadow),this.props=e}preRender(e,{layers:n,layerFilter:r,viewports:i,onViewportActive:s,views:o}){if(this.shadow){this.shadowMatrices=this._calculateMatrices(),this.shadowPasses.length===0&&this._createShadowPasses(e),this.programManager||(this.programManager=wc.getDefaultProgramManager(e),Qp&&this.programManager.addDefaultModule(Qp)),this.dummyShadowMap||(this.dummyShadowMap=new yn(e,{width:1,height:1}));for(let a=0;a<this.shadowPasses.length;a++)this.shadowPasses[a].render({layers:n,layerFilter:r,viewports:i,onViewportActive:s,views:o,moduleParameters:{shadowLightId:a,dummyShadowMap:this.dummyShadowMap,shadowMatrices:this.shadowMatrices}})}}getModuleParameters(e){const n=this.shadow?{shadowMaps:this.shadowMaps,dummyShadowMap:this.dummyShadowMap,shadowColor:this.shadowColor,shadowMatrices:this.shadowMatrices}:{};return n.lightSources={ambientLight:this.ambientLight,directionalLights:this.directionalLights.map(r=>r.getProjectedLight({layer:e})),pointLights:this.pointLights.map(r=>r.getProjectedLight({layer:e}))},n}cleanup(){for(const e of this.shadowPasses)e.delete();this.shadowPasses.length=0,this.shadowMaps.length=0,this.dummyShadowMap&&(this.dummyShadowMap.delete(),this.dummyShadowMap=null),this.shadow&&this.programManager&&(this.programManager.removeDefaultModule(Qp),this.programManager=null)}_calculateMatrices(){const e=[];for(const n of this.directionalLights){const r=new wr().lookAt({eye:new Er(n.direction).negate()});e.push(r)}return e}_createShadowPasses(e){for(let n=0;n<this.directionalLights.length;n++){const r=new x4(e);this.shadowPasses[n]=r,this.shadowMaps[n]=r.shadowMap}}_applyDefaultLights(){const{ambientLight:e,pointLights:n,directionalLights:r}=this;!e&&n.length===0&&r.length===0&&(this.ambientLight=new g4(aB),this.directionalLights.push(new Mb(zb[0]),new Mb(zb[1])))}}class cB{constructor(e={}){_(this,"_pool",[]),_(this,"opts",{overAlloc:2,poolSize:100}),this.setOptions(e)}setOptions(e){Object.assign(this.opts,e)}allocate(e,n,{size:r=1,type:i,padding:s=0,copy:o=!1,initialize:a=!1,maxCount:l}){const c=i||e&&e.constructor||Float32Array,u=n*r+s;if(ArrayBuffer.isView(e)){if(u<=e.length)return e;if(u*e.BYTES_PER_ELEMENT<=e.buffer.byteLength)return new c(e.buffer,0,u)}let f=1/0;l&&(f=l*r+s);const d=this._allocate(c,u,a,f);return e&&o?d.set(e):a||d.fill(0,0,4),this._release(e),d}release(e){this._release(e)}_allocate(e,n,r,i){let s=Math.max(Math.ceil(n*this.opts.overAlloc),1);s>i&&(s=i);const o=this._pool,a=e.BYTES_PER_ELEMENT*s,l=o.findIndex(c=>c.byteLength>=a);if(l>=0){const c=new e(o.splice(l,1)[0],0,s);return r&&c.fill(0),c}return new e(s)}_release(e){if(!ArrayBuffer.isView(e))return;const n=this._pool,{buffer:r}=e,{byteLength:i}=r,s=n.findIndex(o=>o.byteLength>=i);s<0?n.push(r):(s>0||n.length<this.opts.poolSize)&&n.splice(s,0,r),n.length>this.opts.poolSize&&n.shift()}}const na=new cB;function rl(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function uB(t){return[t[12],t[13],t[14]]}function fB(t){return{left:Js(t[3]+t[0],t[7]+t[4],t[11]+t[8],t[15]+t[12]),right:Js(t[3]-t[0],t[7]-t[4],t[11]-t[8],t[15]-t[12]),bottom:Js(t[3]+t[1],t[7]+t[5],t[11]+t[9],t[15]+t[13]),top:Js(t[3]-t[1],t[7]-t[5],t[11]-t[9],t[15]-t[13]),near:Js(t[3]+t[2],t[7]+t[6],t[11]+t[10],t[15]+t[14]),far:Js(t[3]-t[2],t[7]-t[6],t[11]-t[10],t[15]-t[14])}}const Ub=new Er;function Js(t,e,n,r){Ub.set(t,e,n);const i=Ub.len();return{distance:r/i,normal:new Er(-t/i,-e/i,-n/i)}}function dB(t){return t-Math.fround(t)}let Va;function Jp(t,e){const{size:n=1,startIndex:r=0}=e,i=e.endIndex!==void 0?e.endIndex:t.length,s=(i-r)/n;Va=na.allocate(Va,s,{type:Float32Array,size:n*2});let o=r,a=0;for(;o<i;){for(let l=0;l<n;l++){const c=t[o++];Va[a+l]=c,Va[a+l+n]=dB(c)}a+=n*2}return Va.subarray(0,s*n*2)}function hB(t){let e=null,n=!1;for(const r of t)r&&(e?(n||(e=[[e[0][0],e[0][1]],[e[1][0],e[1][1]]],n=!0),e[0][0]=Math.min(e[0][0],r[0][0]),e[0][1]=Math.min(e[0][1],r[0][1]),e[1][0]=Math.max(e[1][0],r[1][0]),e[1][1]=Math.max(e[1][1],r[1][1])):e=r);return e}const pB=Math.PI/180,gB=rl(),jb=[0,0,0],mB={unitsPerMeter:[1,1,1],metersPerUnit:[1,1,1]};function yB({width:t,height:e,orthographic:n,fovyRadians:r,focalDistance:i,padding:s,near:o,far:a}){const l=t/e,c=n?new wr().orthographic({fovy:r,aspect:l,focalDistance:i,near:o,far:a}):new wr().perspective({fovy:r,aspect:l,near:o,far:a});if(s){const{left:u=0,right:f=0,top:d=0,bottom:h=0}=s,p=vi((u+t-f)/2,0,t)-t/2,g=vi((d+e-h)/2,0,e)-e/2;c[8]-=p*2/t,c[9]+=g*2/e}return c}class va{constructor(e={}){_(this,"id",void 0),_(this,"x",void 0),_(this,"y",void 0),_(this,"width",void 0),_(this,"height",void 0),_(this,"padding",void 0),_(this,"isGeospatial",void 0),_(this,"zoom",void 0),_(this,"focalDistance",void 0),_(this,"position",void 0),_(this,"modelMatrix",void 0),_(this,"distanceScales",void 0),_(this,"scale",void 0),_(this,"center",void 0),_(this,"cameraPosition",void 0),_(this,"projectionMatrix",void 0),_(this,"viewMatrix",void 0),_(this,"viewMatrixUncentered",void 0),_(this,"viewMatrixInverse",void 0),_(this,"viewProjectionMatrix",void 0),_(this,"pixelProjectionMatrix",void 0),_(this,"pixelUnprojectionMatrix",void 0),_(this,"resolution",void 0),_(this,"_frustumPlanes",{}),this.id=e.id||this.constructor.displayName||"viewport",this.x=e.x||0,this.y=e.y||0,this.width=e.width||1,this.height=e.height||1,this.zoom=e.zoom||0,this.padding=e.padding,this.distanceScales=e.distanceScales||mB,this.focalDistance=e.focalDistance||1,this.position=e.position||jb,this.modelMatrix=e.modelMatrix||null;const{longitude:n,latitude:r}=e;this.isGeospatial=Number.isFinite(r)&&Number.isFinite(n),this._initProps(e),this._initMatrices(e),this.equals=this.equals.bind(this),this.project=this.project.bind(this),this.unproject=this.unproject.bind(this),this.projectPosition=this.projectPosition.bind(this),this.unprojectPosition=this.unprojectPosition.bind(this),this.projectFlat=this.projectFlat.bind(this),this.unprojectFlat=this.unprojectFlat.bind(this)}get subViewports(){return null}get metersPerPixel(){return this.distanceScales.metersPerUnit[2]/this.scale}get projectionMode(){return this.isGeospatial?this.zoom<12?hr.WEB_MERCATOR:hr.WEB_MERCATOR_AUTO_OFFSET:hr.IDENTITY}equals(e){return e instanceof va?this===e?!0:e.width===this.width&&e.height===this.height&&e.scale===this.scale&&Hl(e.projectionMatrix,this.projectionMatrix)&&Hl(e.viewMatrix,this.viewMatrix):!1}project(e,{topLeft:n=!0}={}){const r=this.projectPosition(e),i=ZP(r,this.pixelProjectionMatrix),[s,o]=i,a=n?o:this.height-o;return e.length===2?[s,a]:[s,a,i[2]]}unproject(e,{topLeft:n=!0,targetZ:r}={}){const[i,s,o]=e,a=n?s:this.height-s,l=r&&r*this.distanceScales.unitsPerMeter[2],c=nv([i,a,o],this.pixelUnprojectionMatrix,l),[u,f,d]=this.unprojectPosition(c);return Number.isFinite(o)?[u,f,d]:Number.isFinite(r)?[u,f,r]:[u,f]}projectPosition(e){const[n,r]=this.projectFlat(e),i=(e[2]||0)*this.distanceScales.unitsPerMeter[2];return[n,r,i]}unprojectPosition(e){const[n,r]=this.unprojectFlat(e),i=(e[2]||0)*this.distanceScales.metersPerUnit[2];return[n,r,i]}projectFlat(e){if(this.isGeospatial){const n=id(e);return n[1]=vi(n[1],-318,830),n}return e}unprojectFlat(e){return this.isGeospatial?ta(e):e}getBounds(e={}){const n={targetZ:e.z||0},r=this.unproject([0,0],n),i=this.unproject([this.width,0],n),s=this.unproject([0,this.height],n),o=this.unproject([this.width,this.height],n);return[Math.min(r[0],i[0],s[0],o[0]),Math.min(r[1],i[1],s[1],o[1]),Math.max(r[0],i[0],s[0],o[0]),Math.max(r[1],i[1],s[1],o[1])]}getDistanceScales(e){return e?$m({longitude:e[0],latitude:e[1],highPrecision:!0}):this.distanceScales}containsPixel({x:e,y:n,width:r=1,height:i=1}){return e<this.x+this.width&&this.x<e+r&&n<this.y+this.height&&this.y<n+i}getFrustumPlanes(){return this._frustumPlanes.near?this._frustumPlanes:(Object.assign(this._frustumPlanes,fB(this.viewProjectionMatrix)),this._frustumPlanes)}panByPosition(e,n){return null}_initProps(e){const n=e.longitude,r=e.latitude;this.isGeospatial&&(Number.isFinite(e.zoom)||(this.zoom=G4({latitude:r})+Math.log2(this.focalDistance)),this.distanceScales=e.distanceScales||$m({latitude:r,longitude:n}));const i=Math.pow(2,this.zoom);this.scale=i;const{position:s,modelMatrix:o}=e;let a=jb;if(s&&(a=o?new wr(o).transformAsVector(s,[]):s),this.isGeospatial){const l=this.projectPosition([n,r,0]);this.center=new Er(a).scale(this.distanceScales.unitsPerMeter).add(l)}else this.center=this.projectPosition(a)}_initMatrices(e){const{viewMatrix:n=gB,projectionMatrix:r=null,orthographic:i=!1,fovyRadians:s,fovy:o=75,near:a=.1,far:l=1e3,padding:c=null,focalDistance:u=1}=e;this.viewMatrixUncentered=n,this.viewMatrix=new wr().multiplyRight(n).translate(new Er(this.center).negate()),this.projectionMatrix=r||yB({width:this.width,height:this.height,orthographic:i,fovyRadians:s||o*pB,focalDistance:u,padding:c,near:a,far:l});const f=rl();ys(f,f,this.projectionMatrix),ys(f,f,this.viewMatrix),this.viewProjectionMatrix=f,this.viewMatrixInverse=zm([],this.viewMatrix)||this.viewMatrix,this.cameraPosition=uB(this.viewMatrixInverse);const d=rl(),h=rl();Zy(d,d,[this.width/2,-this.height/2,1]),td(d,d,[1,-1,0]),ys(h,d,this.viewProjectionMatrix),this.pixelProjectionMatrix=h,this.pixelUnprojectionMatrix=zm(rl(),this.pixelProjectionMatrix),this.pixelUnprojectionMatrix||ae.warn("Pixel project matrix not invertible")()}}_(va,"displayName","Viewport");class ra extends va{constructor(e={}){const{latitude:n=0,longitude:r=0,zoom:i=0,pitch:s=0,bearing:o=0,nearZMultiplier:a=.1,farZMultiplier:l=1.01,nearZ:c,farZ:u,orthographic:f=!1,projectionMatrix:d,repeat:h=!1,worldOffset:p=0,position:g,padding:E,legacyMeterSizes:m=!1}=e;let{width:y,height:v,altitude:b=1.5}=e;const T=Math.pow(2,i);y=y||1,v=v||1;let S,P=null;if(d)b=d[5]/2,S=sd(b);else{e.fovy?(S=e.fovy,b=qP(S)):S=sd(b);let O;if(E){const{top:L=0,bottom:M=0}=E;O=[0,vi((L+v-M)/2,0,v)-v/2]}P=H4({width:y,height:v,scale:T,center:g&&[0,0,g[2]*Zp(n)],offset:O,pitch:s,fovy:S,nearZMultiplier:a,farZMultiplier:l}),Number.isFinite(c)&&(P.near=c),Number.isFinite(u)&&(P.far=u)}let R=W4({height:v,pitch:s,bearing:o,scale:T,altitude:b});p&&(R=new wr().translate([512*p,0,0]).multiplyLeft(R)),super({...e,width:y,height:v,viewMatrix:R,longitude:r,latitude:n,zoom:i,...P,fovy:S,focalDistance:b}),_(this,"longitude",void 0),_(this,"latitude",void 0),_(this,"pitch",void 0),_(this,"bearing",void 0),_(this,"altitude",void 0),_(this,"fovy",void 0),_(this,"orthographic",void 0),_(this,"_subViewports",void 0),_(this,"_pseudoMeters",void 0),this.latitude=n,this.longitude=r,this.zoom=i,this.pitch=s,this.bearing=o,this.altitude=b,this.fovy=S,this.orthographic=f,this._subViewports=h?[]:null,this._pseudoMeters=m,Object.freeze(this)}get subViewports(){if(this._subViewports&&!this._subViewports.length){const e=this.getBounds(),n=Math.floor((e[0]+180)/360),r=Math.ceil((e[2]-180)/360);for(let i=n;i<=r;i++){const s=i?new ra({...this,worldOffset:i}):this;this._subViewports.push(s)}}return this._subViewports}projectPosition(e){if(this._pseudoMeters)return super.projectPosition(e);const[n,r]=this.projectFlat(e),i=(e[2]||0)*Zp(e[1]);return[n,r,i]}unprojectPosition(e){if(this._pseudoMeters)return super.unprojectPosition(e);const[n,r]=this.unprojectFlat(e),i=(e[2]||0)/Zp(r);return[n,r,i]}addMetersToLngLat(e,n){return KP(e,n)}panByPosition(e,n){const r=nv(n,this.pixelUnprojectionMatrix),i=this.projectFlat(e),s=Ab([],i,WF([],r)),o=Ab([],this.center,s),[a,l]=this.unprojectFlat(o);return{longitude:a,latitude:l}}getBounds(e={}){const n=K4(this,e.z||0);return[Math.min(n[0][0],n[1][0],n[2][0],n[3][0]),Math.min(n[0][1],n[1][1],n[2][1],n[3][1]),Math.max(n[0][0],n[1][0],n[2][0],n[3][0]),Math.max(n[0][1],n[1][1],n[2][1],n[3][1])]}fitBounds(e,n={}){const{width:r,height:i}=this,{longitude:s,latitude:o,zoom:a}=X4({width:r,height:i,bounds:e,...n});return new ra({width:r,height:i,longitude:s,latitude:o,zoom:a})}}_(ra,"displayName","WebMercatorViewport");const Vb=[0,0,0];function eg(t,e,n=!1){const r=e.projectPosition(t);if(n&&e instanceof ra){const[i,s,o=0]=t,a=e.getDistanceScales([i,s]);r[2]=o*a.unitsPerMeter[2]}return r}function vB(t){const{viewport:e,modelMatrix:n,coordinateOrigin:r}=t;let{coordinateSystem:i,fromCoordinateSystem:s,fromCoordinateOrigin:o}=t;return i===ge.DEFAULT&&(i=e.isGeospatial?ge.LNGLAT:ge.CARTESIAN),s===void 0&&(s=i),o===void 0&&(o=r),{viewport:e,coordinateSystem:i,coordinateOrigin:r,modelMatrix:n,fromCoordinateSystem:s,fromCoordinateOrigin:o}}function JP(t,{viewport:e,modelMatrix:n,coordinateSystem:r,coordinateOrigin:i,offsetMode:s}){let[o,a,l=0]=t;switch(n&&([o,a,l]=Ec([],[o,a,l,1],n)),r){case ge.LNGLAT:return eg([o,a,l],e,s);case ge.LNGLAT_OFFSETS:return eg([o+i[0],a+i[1],l+(i[2]||0)],e,s);case ge.METER_OFFSETS:return eg(KP(i,[o,a,l]),e,s);case ge.CARTESIAN:default:return e.isGeospatial?[o+i[0],a+i[1],l+i[2]]:e.projectPosition([o,a,l])}}function _B(t,e){const{viewport:n,coordinateSystem:r,coordinateOrigin:i,modelMatrix:s,fromCoordinateSystem:o,fromCoordinateOrigin:a}=vB(e),{autoOffset:l=!0}=e,{geospatialOrigin:c=Vb,shaderCoordinateOrigin:u=Vb,offsetMode:f=!1}=l?XP(n,r,i):{},d=JP(t,{viewport:n,modelMatrix:s,coordinateSystem:o,coordinateOrigin:a,offsetMode:f});if(f){const h=n.projectPosition(c||u);oD(d,d,h)}return d}const $b={blendFunc:[1,0,32771,0],blendEquation:32774};class eA extends Jy{constructor(...e){super(...e),_(this,"pickZ",void 0),_(this,"_colorEncoderState",null)}render(e){return"pickingFBO"in e?this._drawPickingBuffer(e):super.render(e)}_drawPickingBuffer({layers:e,layerFilter:n,views:r,viewports:i,onViewportActive:s,pickingFBO:o,deviceRect:{x:a,y:l,width:c,height:u},cullRect:f,effects:d,pass:h="picking",pickZ:p,moduleParameters:g}){const E=this.gl;this.pickZ=p;const m=this._resetColorEncoder(p),y=Zn(E,{scissorTest:!0,scissor:[a,l,c,u],clearColor:[0,0,0,0],depthMask:!0,depthTest:!0,depthRange:[0,1],colorMask:[!0,!0,!0,!0],...$b,blend:!p},()=>super.render({target:o,layers:e,layerFilter:n,views:r,viewports:i,onViewportActive:s,cullRect:f,effects:d==null?void 0:d.filter(b=>b.useInPicking),pass:h,isPicking:!0,moduleParameters:g}));return this._colorEncoderState=null,{decodePickingColor:m&&EB.bind(null,m),stats:y}}shouldDrawLayer(e){const{pickable:n,operation:r}=e.props;return n&&r.includes("draw")||r.includes("terrain")||r.includes("mask")}getModuleParameters(){return{pickingActive:1,pickingAttribute:this.pickZ,lightSources:{}}}getLayerParameters(e,n,r){const i={...e.props.parameters},{pickable:s,operation:o}=e.props;return this._colorEncoderState?s&&o.includes("draw")&&(Object.assign(i,$b),i.blend=!0,i.blendColor=bB(this._colorEncoderState,e,r)):i.blend=!1,o.includes("terrain")&&(i.blend=!1),i}_resetColorEncoder(e){return this._colorEncoderState=e?null:{byLayer:new Map,byAlpha:[]},this._colorEncoderState}}function bB(t,e,n){const{byLayer:r,byAlpha:i}=t;let s,o=r.get(e);return o?(o.viewports.push(n),s=o.a):(s=r.size+1,s<=255?(o={a:s,layer:e,viewports:[n]},r.set(e,o),i[s]=o):(ae.warn("Too many pickable layers, only picking the first 255")(),s=0)),[0,0,0,s/255]}function EB(t,e){const n=t.byAlpha[e[3]];return n&&{pickedLayer:n.layer,pickedViewports:n.viewports,pickedObjectIndex:n.layer.decodePickingColor(e)}}const lo={NO_STATE:"Awaiting state",MATCHED:"Matched. State transferred from previous layer",INITIALIZED:"Initialized",AWAITING_GC:"Discarded. Awaiting garbage collection",AWAITING_FINALIZATION:"No longer matched. Awaiting garbage collection",FINALIZED:"Finalized! Awaiting garbage collection"},od=Symbol.for("component"),Oi=Symbol.for("propTypes"),tg=Symbol.for("deprecatedProps"),ko=Symbol.for("asyncPropDefaults"),As=Symbol.for("asyncPropOriginal"),_i=Symbol.for("asyncPropResolved");function rv(t,e=()=>!0){return Array.isArray(t)?tA(t,e,[]):e(t)?[t]:[]}function tA(t,e,n){let r=-1;for(;++r<t.length;){const i=t[r];Array.isArray(i)?tA(i,e,n):e(i)&&n.push(i)}return n}function wB({target:t,source:e,start:n=0,count:r=1}){const i=e.length,s=r*i;let o=0;for(let a=n;o<i;o++)t[a++]=e[o];for(;o<s;)o<s-o?(t.copyWithin(n+o,n,n+o),o*=2):(t.copyWithin(n+o,n,n+s-o),o=s);return t}class xB{constructor(e,n,r){_(this,"id",void 0),_(this,"context",void 0),_(this,"isLoaded",void 0),_(this,"persistent",void 0),_(this,"_loadCount",0),_(this,"_subscribers",new Set),_(this,"_data",void 0),_(this,"_loader",void 0),_(this,"_error",void 0),_(this,"_content",void 0),this.id=e,this.context=r,this.setData(n)}subscribe(e){this._subscribers.add(e)}unsubscribe(e){this._subscribers.delete(e)}inUse(){return this._subscribers.size>0}delete(){}getData(){return this.isLoaded?this._error?Promise.reject(this._error):this._content:this._loader.then(()=>this.getData())}setData(e,n){if(e===this._data&&!n)return;this._data=e;const r=++this._loadCount;let i=e;typeof e=="string"&&(i=Kf(e)),i instanceof Promise?(this.isLoaded=!1,this._loader=i.then(s=>{this._loadCount===r&&(this.isLoaded=!0,this._error=void 0,this._content=s)}).catch(s=>{this._loadCount===r&&(this.isLoaded=!0,this._error=s||!0)})):(this.isLoaded=!0,this._error=void 0,this._content=e);for(const s of this._subscribers)s.onChange(this.getData())}}class TB{constructor({gl:e,protocol:n}){_(this,"protocol",void 0),_(this,"_context",void 0),_(this,"_resources",void 0),_(this,"_consumers",void 0),_(this,"_pruneRequest",void 0),this.protocol=n||"resource://",this._context={gl:e,resourceManager:this},this._resources={},this._consumers={},this._pruneRequest=null}contains(e){return e.startsWith(this.protocol)?!0:e in this._resources}add({resourceId:e,data:n,forceUpdate:r=!1,persistent:i=!0}){let s=this._resources[e];s?s.setData(n,r):(s=new xB(e,n,this._context),this._resources[e]=s),s.persistent=i}remove(e){const n=this._resources[e];n&&(n.delete(),delete this._resources[e])}unsubscribe({consumerId:e}){const n=this._consumers[e];if(n){for(const r in n){const i=n[r],s=this._resources[i.resourceId];s&&s.unsubscribe(i)}delete this._consumers[e],this.prune()}}subscribe({resourceId:e,onChange:n,consumerId:r,requestId:i="default"}){const{_resources:s,protocol:o}=this;e.startsWith(o)&&(e=e.replace(o,""),s[e]||this.add({resourceId:e,data:null,persistent:!1}));const a=s[e];if(this._track(r,i,a,n),a)return a.getData()}prune(){this._pruneRequest||(this._pruneRequest=setTimeout(()=>this._prune(),0))}finalize(){for(const e in this._resources)this._resources[e].delete()}_track(e,n,r,i){const s=this._consumers,o=s[e]=s[e]||{},a=o[n]||{},l=a.resourceId&&this._resources[a.resourceId];l&&(l.unsubscribe(a),this.prune()),r&&(o[n]=a,a.onChange=i,a.resourceId=r.id,r.subscribe(a))}_prune(){this._pruneRequest=null;for(const e of Object.keys(this._resources)){const n=this._resources[e];!n.persistent&&!n.inUse()&&(n.delete(),delete this._resources[e])}}}const SB=`
vec4 project_position_to_clipspace(
  vec3 position, vec3 position64Low, vec3 offset, out vec4 commonPosition
) {
  vec3 projectedPosition = project_position(position, position64Low);
  mat3 rotation;
  if (project_needs_rotation(projectedPosition, rotation)) {
    // offset is specified as ENU
    // when in globe projection, rotate offset so that the ground alighs with the surface of the globe
    offset = rotation * offset;
  }
  commonPosition = vec4(projectedPosition + offset, 1.0);
  return project_common_position_to_clipspace(commonPosition);
}

vec4 project_position_to_clipspace(
  vec3 position, vec3 position64Low, vec3 offset
) {
  vec4 commonPosition;
  return project_position_to_clipspace(position, position64Low, offset, commonPosition);
}
`,Sc={name:"project32",dependencies:[ev],vs:SB},Pc={inject:{"vs:DECKGL_FILTER_GL_POSITION":`
    // for picking depth values
    picking_setPickingAttribute(position.z / position.w);
  `,"vs:DECKGL_FILTER_COLOR":`
  picking_setPickingColor(geometry.pickingColor);
  `,"fs:#decl":`
uniform bool picking_uAttribute;
  `,"fs:DECKGL_FILTER_COLOR":{order:99,injection:`
  // use highlight color if this fragment belongs to the selected object.
  color = picking_filterHighlightColor(color);

  // use picking color if rendering to picking FBO.
  color = picking_filterPickingColor(color);
    `}},...FD},PB=[ev],AB=["vs:DECKGL_FILTER_SIZE(inout vec3 size, VertexGeometry geometry)","vs:DECKGL_FILTER_GL_POSITION(inout vec4 position, VertexGeometry geometry)","vs:DECKGL_FILTER_COLOR(inout vec4 color, VertexGeometry geometry)","fs:DECKGL_FILTER_COLOR(inout vec4 color, FragmentGeometry geometry)"];function CB(t){const e=wc.getDefaultProgramManager(t);for(const n of PB)e.addDefaultModule(n);for(const n of AB)e.addShaderHook(n);return e}const LB="layerManager.setLayers",RB="layerManager.activateViewport";class OB{constructor(e,{deck:n,stats:r,viewport:i,timeline:s}={}){_(this,"layers",void 0),_(this,"context",void 0),_(this,"resourceManager",void 0),_(this,"_lastRenderedLayers",[]),_(this,"_needsRedraw",!1),_(this,"_needsUpdate",!1),_(this,"_nextLayers",null),_(this,"_debug",!1),_(this,"activateViewport",o=>{Lt(RB,this,o),o&&(this.context.viewport=o)}),this.layers=[],this.resourceManager=new TB({gl:e,protocol:"deck://"}),this.context={mousePosition:null,userData:{},layerManager:this,gl:e,deck:n,programManager:e&&CB(e),stats:r||new Gy({id:"deck.gl"}),viewport:i||new va({id:"DEFAULT-INITIAL-VIEWPORT"}),timeline:s||new VP,resourceManager:this.resourceManager,onError:void 0},Object.seal(this)}finalize(){this.resourceManager.finalize();for(const e of this.layers)this._finalizeLayer(e)}needsRedraw(e={clearRedrawFlags:!1}){let n=this._needsRedraw;e.clearRedrawFlags&&(this._needsRedraw=!1);for(const r of this.layers){const i=r.getNeedsRedraw(e);n=n||i}return n}needsUpdate(){return this._nextLayers&&this._nextLayers!==this._lastRenderedLayers?"layers changed":this._needsUpdate}setNeedsRedraw(e){this._needsRedraw=this._needsRedraw||e}setNeedsUpdate(e){this._needsUpdate=this._needsUpdate||e}getLayers({layerIds:e}={}){return e?this.layers.filter(n=>e.find(r=>n.id.indexOf(r)===0)):this.layers}setProps(e){"debug"in e&&(this._debug=e.debug),"userData"in e&&(this.context.userData=e.userData),"layers"in e&&(this._nextLayers=e.layers),"onError"in e&&(this.context.onError=e.onError)}setLayers(e,n){Lt(LB,this,n,e),this._lastRenderedLayers=e;const r=rv(e,Boolean);for(const i of r)i.context=this.context;this._updateLayers(this.layers,r)}updateLayers(){const e=this.needsUpdate();e&&(this.setNeedsRedraw("updating layers: ".concat(e)),this.setLayers(this._nextLayers||this._lastRenderedLayers,e)),this._nextLayers=null}_handleError(e,n,r){r.raiseError(n,"".concat(e," of ").concat(r))}_updateLayers(e,n){const r={};for(const o of e)r[o.id]?ae.warn("Multiple old layers with same id ".concat(o.id))():r[o.id]=o;const i=[];this._updateSublayersRecursively(n,r,i),this._finalizeOldLayers(r);let s=!1;for(const o of i)if(o.hasUniformTransition()){s="Uniform transition in ".concat(o);break}this._needsUpdate=s,this.layers=i}_updateSublayersRecursively(e,n,r){for(const i of e){i.context=this.context;const s=n[i.id];s===null&&ae.warn("Multiple new layers with same id ".concat(i.id))(),n[i.id]=null;let o=null;try{this._debug&&s!==i&&i.validateProps(),s?(this._transferLayerState(s,i),this._updateLayer(i)):this._initializeLayer(i),r.push(i),o=i.isComposite?i.getSubLayers():null}catch(a){this._handleError("matching",a,i)}o&&this._updateSublayersRecursively(o,n,r)}}_finalizeOldLayers(e){for(const n in e){const r=e[n];r&&this._finalizeLayer(r)}}_initializeLayer(e){try{e._initialize(),e.lifecycle=lo.INITIALIZED}catch(n){this._handleError("initialization",n,e)}}_transferLayerState(e,n){n._transferState(e),n.lifecycle=lo.MATCHED,n!==e&&(e.lifecycle=lo.AWAITING_GC)}_updateLayer(e){try{e._update()}catch(n){this._handleError("update",n,e)}}_finalizeLayer(e){this._needsRedraw=this._needsRedraw||"finalized ".concat(e),e.lifecycle=lo.AWAITING_FINALIZATION;try{e._finalize(),e.lifecycle=lo.FINALIZED}catch(n){this._handleError("finalization",n,e)}}}function pr(t,e,n){if(t===e)return!0;if(!n||!t||!e)return!1;if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return!1;for(let r=0;r<t.length;r++)if(!pr(t[r],e[r],n-1))return!1;return!0}if(Array.isArray(e))return!1;if(typeof t=="object"&&typeof e=="object"){const r=Object.keys(t),i=Object.keys(e);if(r.length!==i.length)return!1;for(const s of r)if(!e.hasOwnProperty(s)||!pr(t[s],e[s],n-1))return!1;return!0}return!1}class IB{constructor(e){_(this,"width",void 0),_(this,"height",void 0),_(this,"views",void 0),_(this,"viewState",void 0),_(this,"controllers",void 0),_(this,"timeline",void 0),_(this,"_viewports",void 0),_(this,"_viewportMap",void 0),_(this,"_isUpdating",void 0),_(this,"_needsRedraw",void 0),_(this,"_needsUpdate",void 0),_(this,"_eventManager",void 0),_(this,"_eventCallbacks",void 0),this.views=[],this.width=100,this.height=100,this.viewState={},this.controllers={},this.timeline=e.timeline,this._viewports=[],this._viewportMap={},this._isUpdating=!1,this._needsRedraw="First render",this._needsUpdate="Initialize",this._eventManager=e.eventManager,this._eventCallbacks={onViewStateChange:e.onViewStateChange,onInteractionStateChange:e.onInteractionStateChange},Object.seal(this),this.setProps(e)}finalize(){for(const e in this.controllers){const n=this.controllers[e];n&&n.finalize()}this.controllers={}}needsRedraw(e={clearRedrawFlags:!1}){const n=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),n}setNeedsUpdate(e){this._needsUpdate=this._needsUpdate||e,this._needsRedraw=this._needsRedraw||e}updateViewStates(){for(const e in this.controllers){const n=this.controllers[e];n&&n.updateTransition()}}getViewports(e){return e?this._viewports.filter(n=>n.containsPixel(e)):this._viewports}getViews(){const e={};return this.views.forEach(n=>{e[n.id]=n}),e}getView(e){return this.views.find(n=>n.id===e)}getViewState(e){const n=typeof e=="string"?this.getView(e):e,r=n&&this.viewState[n.getViewStateId()]||this.viewState;return n?n.filterViewState(r):r}getViewport(e){return this._viewportMap[e]}unproject(e,n){const r=this.getViewports(),i={x:e[0],y:e[1]};for(let s=r.length-1;s>=0;--s){const o=r[s];if(o.containsPixel(i)){const a=e.slice();return a[0]-=o.x,a[1]-=o.y,o.unproject(a,n)}}return null}setProps(e){e.views&&this._setViews(e.views),e.viewState&&this._setViewState(e.viewState),("width"in e||"height"in e)&&this._setSize(e.width,e.height),this._isUpdating||this._update()}_update(){this._isUpdating=!0,this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._isUpdating=!1}_setSize(e,n){(e!==this.width||n!==this.height)&&(this.width=e,this.height=n,this.setNeedsUpdate("Size changed"))}_setViews(e){e=rv(e,Boolean),this._diffViews(e,this.views)&&this.setNeedsUpdate("views changed"),this.views=e}_setViewState(e){e?(!pr(e,this.viewState,3)&&this.setNeedsUpdate("viewState changed"),this.viewState=e):ae.warn("missing `viewState` or `initialViewState`")()}_onViewStateChange(e,n){this._eventCallbacks.onViewStateChange&&this._eventCallbacks.onViewStateChange({...n,viewId:e})}_createController(e,n){const r=n.type;return new r({timeline:this.timeline,eventManager:this._eventManager,onViewStateChange:this._onViewStateChange.bind(this,n.id),onStateChange:this._eventCallbacks.onInteractionStateChange,makeViewport:s=>{var o;return(o=this.getView(e.id))===null||o===void 0?void 0:o.makeViewport({viewState:s,width:this.width,height:this.height})}})}_updateController(e,n,r,i){const s=e.controller;if(s&&r){const o={...n,...s,id:e.id,x:r.x,y:r.y,width:r.width,height:r.height};return(!i||i.constructor!==s.type)&&(i=this._createController(e,o)),i&&i.setProps(o),i}return null}_rebuildViewports(){const{views:e}=this,n=this.controllers;this._viewports=[],this.controllers={};let r=!1;for(let i=e.length;i--;){const s=e[i],o=this.getViewState(s),a=s.makeViewport({viewState:o,width:this.width,height:this.height});let l=n[s.id];const c=!!s.controller;c&&!l&&(r=!0),(r||!c)&&l&&(l.finalize(),l=null),this.controllers[s.id]=this._updateController(s,o,a,l),a&&this._viewports.unshift(a)}for(const i in n){const s=n[i];s&&!this.controllers[i]&&s.finalize()}this._buildViewportMap()}_buildViewportMap(){this._viewportMap={},this._viewports.forEach(e=>{e.id&&(this._viewportMap[e.id]=this._viewportMap[e.id]||e)})}_diffViews(e,n){return e.length!==n.length?!0:e.some((r,i)=>!e[i].equals(n[i]))}}const MB=/([0-9]+\.?[0-9]*)(%|px)/;function ai(t){switch(typeof t){case"number":return{position:t,relative:!1};case"string":const e=MB.exec(t);if(e&&e.length>=3){const n=e[2]==="%",r=parseFloat(e[1]);return{position:n?r/100:r,relative:n}}default:throw new Error("Could not parse position string ".concat(t))}}function li(t,e){return t.relative?Math.round(t.position*e):t.position}function gt(t,e){if(!t)throw new Error(e||"deck.gl: assertion failed.")}class ia{constructor(e){_(this,"id",void 0),_(this,"viewportInstance",void 0),_(this,"_x",void 0),_(this,"_y",void 0),_(this,"_width",void 0),_(this,"_height",void 0),_(this,"_padding",void 0),_(this,"props",void 0);const{id:n,x:r=0,y:i=0,width:s="100%",height:o="100%",padding:a=null,viewportInstance:l}=e||{};gt(!l||l instanceof va),this.viewportInstance=l,this.id=n||this.constructor.displayName||"view",this.props={...e,id:this.id},this._x=ai(r),this._y=ai(i),this._width=ai(s),this._height=ai(o),this._padding=a&&{left:ai(a.left||0),right:ai(a.right||0),top:ai(a.top||0),bottom:ai(a.bottom||0)},this.equals=this.equals.bind(this),Object.seal(this)}equals(e){return this===e?!0:this.viewportInstance?e.viewportInstance?this.viewportInstance.equals(e.viewportInstance):!1:this.ViewportType===e.ViewportType&&pr(this.props,e.props,2)}makeViewport({width:e,height:n,viewState:r}){if(this.viewportInstance)return this.viewportInstance;r=this.filterViewState(r);const i=this.getDimensions({width:e,height:n});return!i.height||!i.width?null:new this.ViewportType({...r,...this.props,...i})}getViewStateId(){const{viewState:e}=this.props;return typeof e=="string"?e:(e==null?void 0:e.id)||this.id}filterViewState(e){if(this.props.viewState&&typeof this.props.viewState=="object"){if(!this.props.viewState.id)return this.props.viewState;const n={...e};for(const r in this.props.viewState)r!=="id"&&(n[r]=this.props.viewState[r]);return n}return e}getDimensions({width:e,height:n}){const r={x:li(this._x,e),y:li(this._y,n),width:li(this._width,e),height:li(this._height,n)};return this._padding&&(r.padding={left:li(this._padding.left,e),top:li(this._padding.top,n),right:li(this._padding.right,e),bottom:li(this._padding.bottom,n)}),r}get controller(){const e=this.props.controller;return e?e===!0?{type:this.ControllerType}:typeof e=="function"?{type:e}:{type:this.ControllerType,...e}:null}}let Ac=class{constructor(e){_(this,"_inProgress",void 0),_(this,"_handle",void 0),_(this,"_timeline",void 0),_(this,"time",void 0),_(this,"settings",void 0),this._inProgress=!1,this._handle=null,this._timeline=e,this.time=0,this.settings={duration:0}}get inProgress(){return this._inProgress}start(e){var n,r;this.cancel(),this.settings=e,this._inProgress=!0,(n=(r=this.settings).onStart)===null||n===void 0||n.call(r,this)}end(){if(this._inProgress){var e,n;this._timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1,(e=(n=this.settings).onEnd)===null||e===void 0||e.call(n,this)}}cancel(){if(this._inProgress){var e,n;(e=(n=this.settings).onInterrupt)===null||e===void 0||e.call(n,this),this._timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1}}update(){var e,n;if(!this._inProgress)return!1;if(this._handle===null){const{_timeline:r,settings:i}=this;this._handle=r.addChannel({delay:r.getTime(),duration:i.duration})}return this.time=this._timeline.getTime(this._handle),this._onUpdate(),(e=(n=this.settings).onUpdate)===null||e===void 0||e.call(n,this),this._timeline.isFinished(this._handle)&&this.end(),!0}_onUpdate(){}};const Gb=()=>{},Gm={BREAK:1,SNAP_TO_END:2,IGNORE:3},kB=t=>t,NB=Gm.BREAK;class FB{constructor(e){_(this,"getControllerState",void 0),_(this,"props",void 0),_(this,"propsInTransition",void 0),_(this,"transition",void 0),_(this,"onViewStateChange",void 0),_(this,"onStateChange",void 0),_(this,"_onTransitionUpdate",n=>{const{time:r,settings:{interpolator:i,startProps:s,endProps:o,duration:a,easing:l}}=n,c=l(r/a),u=i.interpolateProps(s,o,c);this.propsInTransition=this.getControllerState({...this.props,...u}).getViewportProps(),this.onViewStateChange({viewState:this.propsInTransition,oldViewState:this.props})}),this.getControllerState=e.getControllerState,this.propsInTransition=null,this.transition=new Ac(e.timeline),this.onViewStateChange=e.onViewStateChange||Gb,this.onStateChange=e.onStateChange||Gb}finalize(){this.transition.cancel()}getViewportInTransition(){return this.propsInTransition}processViewStateChange(e){let n=!1;const r=this.props;if(this.props=e,!r||this._shouldIgnoreViewportChange(r,e))return!1;if(this._isTransitionEnabled(e)){let i=r;if(this.transition.inProgress){const{interruption:s,endProps:o}=this.transition.settings;i={...r,...s===Gm.SNAP_TO_END?o:this.propsInTransition||r}}this._triggerTransition(i,e),n=!0}else this.transition.cancel();return n}updateTransition(){this.transition.update()}_isTransitionEnabled(e){const{transitionDuration:n,transitionInterpolator:r}=e;return(n>0||n==="auto")&&!!r}_isUpdateDueToCurrentTransition(e){return this.transition.inProgress&&this.propsInTransition?this.transition.settings.interpolator.arePropsEqual(e,this.propsInTransition):!1}_shouldIgnoreViewportChange(e,n){return this.transition.inProgress?this.transition.settings.interruption===Gm.IGNORE||this._isUpdateDueToCurrentTransition(n):this._isTransitionEnabled(n)?n.transitionInterpolator.arePropsEqual(e,n):!0}_triggerTransition(e,n){const r=this.getControllerState(e),i=this.getControllerState(n).shortestPathFrom(r),s=n.transitionInterpolator,o=s.getDuration?s.getDuration(e,n):n.transitionDuration;if(o===0)return;const a=s.initializeProps(e,i);this.propsInTransition={};const l={duration:o,easing:n.transitionEasing||kB,interpolator:s,interruption:n.transitionInterruption||NB,startProps:a.start,endProps:a.end,onStart:n.onTransitionStart,onUpdate:this._onTransitionUpdate,onInterrupt:this._onTransitionEnd(n.onTransitionInterrupt),onEnd:this._onTransitionEnd(n.onTransitionEnd)};this.transition.start(l),this.onStateChange({inTransition:!0}),this.updateTransition()}_onTransitionEnd(e){return n=>{this.propsInTransition=null,this.onStateChange({inTransition:!1,isZooming:!1,isPanning:!1,isRotating:!1}),e==null||e(n)}}}class DB{constructor(e){_(this,"_propsToCompare",void 0),_(this,"_propsToExtract",void 0),_(this,"_requiredProps",void 0);const{compare:n,extract:r,required:i}=e;this._propsToCompare=n,this._propsToExtract=r||n,this._requiredProps=i}arePropsEqual(e,n){for(const r of this._propsToCompare)if(!(r in e)||!(r in n)||!Hl(e[r],n[r]))return!1;return!0}initializeProps(e,n){const r={},i={};for(const s of this._propsToExtract)(s in e||s in n)&&(r[s]=e[s],i[s]=n[s]);return this._checkRequiredProps(r),this._checkRequiredProps(i),{start:r,end:i}}getDuration(e,n){return n.transitionDuration}_checkRequiredProps(e){this._requiredProps&&this._requiredProps.forEach(n=>{const r=e[n];gt(Number.isFinite(r)||Array.isArray(r),"".concat(n," is required for transition"))})}}const BB=["longitude","latitude","zoom","bearing","pitch"],zB=["longitude","latitude","zoom"];class nA extends DB{constructor(e={}){const n=Array.isArray(e)?e:e.transitionProps,r=Array.isArray(e)?{}:e;r.transitionProps=Array.isArray(n)?{compare:n,required:n}:n||{compare:BB,required:zB},super(r.transitionProps),_(this,"opts",void 0),this.opts=r}initializeProps(e,n){const r=super.initializeProps(e,n),{makeViewport:i,around:s}=this.opts;if(i&&s){const o=i(e),a=i(n),l=o.unproject(s);r.start.around=s,Object.assign(r.end,{around:a.project(l),aroundPosition:l,width:n.width,height:n.height})}return r}interpolateProps(e,n,r){const i={};for(const s of this._propsToExtract)i[s]=ed(e[s]||0,n[s]||0,r);if(n.aroundPosition&&this.opts.makeViewport){const s=this.opts.makeViewport({...n,...i});Object.assign(i,s.panByPosition(n.aroundPosition,ed(e.around,n.around,r)))}return i}}const ci={transitionDuration:0},UB=300,Su=t=>1-(1-t)*(1-t),eo={WHEEL:["wheel"],PAN:["panstart","panmove","panend"],PINCH:["pinchstart","pinchmove","pinchend"],TRIPLE_PAN:["tripanstart","tripanmove","tripanend"],DOUBLE_TAP:["doubletap"],KEYBOARD:["keydown"]},ts={};class jB{constructor(e){_(this,"props",void 0),_(this,"state",{}),_(this,"transitionManager",void 0),_(this,"eventManager",void 0),_(this,"onViewStateChange",void 0),_(this,"onStateChange",void 0),_(this,"makeViewport",void 0),_(this,"_controllerState",void 0),_(this,"_events",{}),_(this,"_interactionState",{isDragging:!1}),_(this,"_customEvents",[]),_(this,"_eventStartBlocked",null),_(this,"_panMove",!1),_(this,"invertPan",!1),_(this,"dragMode","rotate"),_(this,"inertia",0),_(this,"scrollZoom",!0),_(this,"dragPan",!0),_(this,"dragRotate",!0),_(this,"doubleClickZoom",!0),_(this,"touchZoom",!0),_(this,"touchRotate",!1),_(this,"keyboard",!0),this.transitionManager=new FB({...e,getControllerState:n=>new this.ControllerState(n),onViewStateChange:this._onTransition.bind(this),onStateChange:this._setInteractionState.bind(this)}),this.handleEvent=this.handleEvent.bind(this),this.eventManager=e.eventManager,this.onViewStateChange=e.onViewStateChange||(()=>{}),this.onStateChange=e.onStateChange||(()=>{}),this.makeViewport=e.makeViewport}set events(e){this.toggleEvents(this._customEvents,!1),this.toggleEvents(e,!0),this._customEvents=e,this.props&&this.setProps(this.props)}finalize(){for(const n in this._events)if(this._events[n]){var e;(e=this.eventManager)===null||e===void 0||e.off(n,this.handleEvent)}this.transitionManager.finalize()}handleEvent(e){this._controllerState=void 0;const n=this._eventStartBlocked;switch(e.type){case"panstart":return n?!1:this._onPanStart(e);case"panmove":return this._onPan(e);case"panend":return this._onPanEnd(e);case"pinchstart":return n?!1:this._onPinchStart(e);case"pinchmove":return this._onPinch(e);case"pinchend":return this._onPinchEnd(e);case"tripanstart":return n?!1:this._onTriplePanStart(e);case"tripanmove":return this._onTriplePan(e);case"tripanend":return this._onTriplePanEnd(e);case"doubletap":return this._onDoubleTap(e);case"wheel":return this._onWheel(e);case"keydown":return this._onKeyDown(e);default:return!1}}get controllerState(){return this._controllerState=this._controllerState||new this.ControllerState({makeViewport:this.makeViewport,...this.props,...this.state}),this._controllerState}getCenter(e){const{x:n,y:r}=this.props,{offsetCenter:i}=e;return[i.x-n,i.y-r]}isPointInBounds(e,n){const{width:r,height:i}=this.props;if(n&&n.handled)return!1;const s=e[0]>=0&&e[0]<=r&&e[1]>=0&&e[1]<=i;return s&&n&&n.stopPropagation(),s}isFunctionKeyPressed(e){const{srcEvent:n}=e;return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}isDragging(){return this._interactionState.isDragging||!1}blockEvents(e){const n=setTimeout(()=>{this._eventStartBlocked===n&&(this._eventStartBlocked=null)},e);this._eventStartBlocked=n}setProps(e){e.dragMode&&(this.dragMode=e.dragMode),this.props=e,"transitionInterpolator"in e||(e.transitionInterpolator=this._getTransitionProps().transitionInterpolator),this.transitionManager.processViewStateChange(e);const{inertia:n}=e;this.inertia=Number.isFinite(n)?n:n===!0?UB:0;const{scrollZoom:r=!0,dragPan:i=!0,dragRotate:s=!0,doubleClickZoom:o=!0,touchZoom:a=!0,touchRotate:l=!1,keyboard:c=!0}=e,u=!!this.onViewStateChange;this.toggleEvents(eo.WHEEL,u&&r),this.toggleEvents(eo.PAN,u),this.toggleEvents(eo.PINCH,u&&(a||l)),this.toggleEvents(eo.TRIPLE_PAN,u&&l),this.toggleEvents(eo.DOUBLE_TAP,u&&o),this.toggleEvents(eo.KEYBOARD,u&&c),this.scrollZoom=r,this.dragPan=i,this.dragRotate=s,this.doubleClickZoom=o,this.touchZoom=a,this.touchRotate=l,this.keyboard=c}updateTransition(){this.transitionManager.updateTransition()}toggleEvents(e,n){this.eventManager&&e.forEach(r=>{this._events[r]!==n&&(this._events[r]=n,n?this.eventManager.on(r,this.handleEvent):this.eventManager.off(r,this.handleEvent))})}updateViewport(e,n=null,r={}){const i={...e.getViewportProps(),...n},s=this.controllerState!==e;if(this.state=e.getState(),this._setInteractionState(r),s){const o=this.controllerState&&this.controllerState.getViewportProps();this.onViewStateChange&&this.onViewStateChange({viewState:i,interactionState:this._interactionState,oldViewState:o})}}_onTransition(e){this.onViewStateChange({...e,interactionState:this._interactionState})}_setInteractionState(e){Object.assign(this._interactionState,e),this.onStateChange(this._interactionState)}_onPanStart(e){const n=this.getCenter(e);if(!this.isPointInBounds(n,e))return!1;let r=this.isFunctionKeyPressed(e)||e.rightButton||!1;(this.invertPan||this.dragMode==="pan")&&(r=!r);const i=this.controllerState[r?"panStart":"rotateStart"]({pos:n});return this._panMove=r,this.updateViewport(i,ci,{isDragging:!0}),!0}_onPan(e){return this.isDragging()?this._panMove?this._onPanMove(e):this._onPanRotate(e):!1}_onPanEnd(e){return this.isDragging()?this._panMove?this._onPanMoveEnd(e):this._onPanRotateEnd(e):!1}_onPanMove(e){if(!this.dragPan)return!1;const n=this.getCenter(e),r=this.controllerState.pan({pos:n});return this.updateViewport(r,ci,{isDragging:!0,isPanning:!0}),!0}_onPanMoveEnd(e){const{inertia:n}=this;if(this.dragPan&&n&&e.velocity){const r=this.getCenter(e),i=[r[0]+e.velocityX*n/2,r[1]+e.velocityY*n/2],s=this.controllerState.pan({pos:i}).panEnd();this.updateViewport(s,{...this._getTransitionProps(),transitionDuration:n,transitionEasing:Su},{isDragging:!1,isPanning:!0})}else{const r=this.controllerState.panEnd();this.updateViewport(r,null,{isDragging:!1,isPanning:!1})}return!0}_onPanRotate(e){if(!this.dragRotate)return!1;const n=this.getCenter(e),r=this.controllerState.rotate({pos:n});return this.updateViewport(r,ci,{isDragging:!0,isRotating:!0}),!0}_onPanRotateEnd(e){const{inertia:n}=this;if(this.dragRotate&&n&&e.velocity){const r=this.getCenter(e),i=[r[0]+e.velocityX*n/2,r[1]+e.velocityY*n/2],s=this.controllerState.rotate({pos:i}).rotateEnd();this.updateViewport(s,{...this._getTransitionProps(),transitionDuration:n,transitionEasing:Su},{isDragging:!1,isRotating:!0})}else{const r=this.controllerState.rotateEnd();this.updateViewport(r,null,{isDragging:!1,isRotating:!1})}return!0}_onWheel(e){if(!this.scrollZoom)return!1;const n=this.getCenter(e);if(!this.isPointInBounds(n,e))return!1;e.srcEvent.preventDefault();const{speed:r=.01,smooth:i=!1}=this.scrollZoom===!0?{}:this.scrollZoom,{delta:s}=e;let o=2/(1+Math.exp(-Math.abs(s*r)));s<0&&o!==0&&(o=1/o);const a=this.controllerState.zoom({pos:n,scale:o});return this.updateViewport(a,{...this._getTransitionProps({around:n}),transitionDuration:i?250:1},{isZooming:!0,isPanning:!0}),!0}_onTriplePanStart(e){const n=this.getCenter(e);if(!this.isPointInBounds(n,e))return!1;const r=this.controllerState.rotateStart({pos:n});return this.updateViewport(r,ci,{isDragging:!0}),!0}_onTriplePan(e){if(!this.touchRotate||!this.isDragging())return!1;const n=this.getCenter(e);n[0]-=e.deltaX;const r=this.controllerState.rotate({pos:n});return this.updateViewport(r,ci,{isDragging:!0,isRotating:!0}),!0}_onTriplePanEnd(e){if(!this.isDragging())return!1;const{inertia:n}=this;if(this.touchRotate&&n&&e.velocityY){const r=this.getCenter(e),i=[r[0],r[1]+=e.velocityY*n/2],s=this.controllerState.rotate({pos:i});this.updateViewport(s,{...this._getTransitionProps(),transitionDuration:n,transitionEasing:Su},{isDragging:!1,isRotating:!0}),this.blockEvents(n)}else{const r=this.controllerState.rotateEnd();this.updateViewport(r,null,{isDragging:!1,isRotating:!1})}return!0}_onPinchStart(e){const n=this.getCenter(e);if(!this.isPointInBounds(n,e))return!1;const r=this.controllerState.zoomStart({pos:n}).rotateStart({pos:n});return ts._startPinchRotation=e.rotation,ts._lastPinchEvent=e,this.updateViewport(r,ci,{isDragging:!0}),!0}_onPinch(e){if(!this.touchZoom&&!this.touchRotate||!this.isDragging())return!1;let n=this.controllerState;if(this.touchZoom){const{scale:r}=e,i=this.getCenter(e);n=n.zoom({pos:i,scale:r})}if(this.touchRotate){const{rotation:r}=e;n=n.rotate({deltaAngleX:ts._startPinchRotation-r})}return this.updateViewport(n,ci,{isDragging:!0,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:this.touchRotate}),ts._lastPinchEvent=e,!0}_onPinchEnd(e){if(!this.isDragging())return!1;const{inertia:n}=this,{_lastPinchEvent:r}=ts;if(this.touchZoom&&n&&r&&e.scale!==r.scale){const i=this.getCenter(e);let s=this.controllerState.rotateEnd();const o=Math.log2(e.scale),a=(o-Math.log2(r.scale))/(e.deltaTime-r.deltaTime),l=Math.pow(2,o+a*n/2);s=s.zoom({pos:i,scale:l}).zoomEnd(),this.updateViewport(s,{...this._getTransitionProps({around:i}),transitionDuration:n,transitionEasing:Su},{isDragging:!1,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:!1}),this.blockEvents(n)}else{const i=this.controllerState.zoomEnd().rotateEnd();this.updateViewport(i,null,{isDragging:!1,isPanning:!1,isZooming:!1,isRotating:!1})}return ts._startPinchRotation=null,ts._lastPinchEvent=null,!0}_onDoubleTap(e){if(!this.doubleClickZoom)return!1;const n=this.getCenter(e);if(!this.isPointInBounds(n,e))return!1;const r=this.isFunctionKeyPressed(e),i=this.controllerState.zoom({pos:n,scale:r?.5:2});return this.updateViewport(i,this._getTransitionProps({around:n}),{isZooming:!0,isPanning:!0}),this.blockEvents(100),!0}_onKeyDown(e){if(!this.keyboard)return!1;const n=this.isFunctionKeyPressed(e),{zoomSpeed:r,moveSpeed:i,rotateSpeedX:s,rotateSpeedY:o}=this.keyboard===!0?{}:this.keyboard,{controllerState:a}=this;let l;const c={};switch(e.srcEvent.code){case"Minus":l=n?a.zoomOut(r).zoomOut(r):a.zoomOut(r),c.isZooming=!0;break;case"Equal":l=n?a.zoomIn(r).zoomIn(r):a.zoomIn(r),c.isZooming=!0;break;case"ArrowLeft":n?(l=a.rotateLeft(s),c.isRotating=!0):(l=a.moveLeft(i),c.isPanning=!0);break;case"ArrowRight":n?(l=a.rotateRight(s),c.isRotating=!0):(l=a.moveRight(i),c.isPanning=!0);break;case"ArrowUp":n?(l=a.rotateUp(o),c.isRotating=!0):(l=a.moveUp(i),c.isPanning=!0);break;case"ArrowDown":n?(l=a.rotateDown(o),c.isRotating=!0):(l=a.moveDown(i),c.isPanning=!0);break;default:return!1}return this.updateViewport(l,this._getTransitionProps(),c),!0}_getTransitionProps(e){const{transition:n}=this;return!n||!n.transitionInterpolator?ci:e?{...n,transitionInterpolator:new nA({...e,...n.transitionInterpolator.opts,makeViewport:this.controllerState.makeViewport})}:n}}class VB{constructor(e,n){_(this,"_viewportProps",void 0),_(this,"_state",void 0),this._viewportProps=this.applyConstraints(e),this._state=n}getViewportProps(){return this._viewportProps}getState(){return this._state}}const Wb=5,$B=1.2;class GB extends VB{constructor(e){const{width:n,height:r,latitude:i,longitude:s,zoom:o,bearing:a=0,pitch:l=0,altitude:c=1.5,position:u=[0,0,0],maxZoom:f=20,minZoom:d=0,maxPitch:h=60,minPitch:p=0,startPanLngLat:g,startZoomLngLat:E,startRotatePos:m,startBearing:y,startPitch:v,startZoom:b,normalize:T=!0}=e;gt(Number.isFinite(s)),gt(Number.isFinite(i)),gt(Number.isFinite(o)),super({width:n,height:r,latitude:i,longitude:s,zoom:o,bearing:a,pitch:l,altitude:c,maxZoom:f,minZoom:d,maxPitch:h,minPitch:p,normalize:T,position:u},{startPanLngLat:g,startZoomLngLat:E,startRotatePos:m,startBearing:y,startPitch:v,startZoom:b}),_(this,"makeViewport",void 0),this.makeViewport=e.makeViewport}panStart({pos:e}){return this._getUpdatedState({startPanLngLat:this._unproject(e)})}pan({pos:e,startPos:n}){const r=this.getState().startPanLngLat||this._unproject(n);if(!r)return this;const s=this.makeViewport(this.getViewportProps()).panByPosition(r,e);return this._getUpdatedState(s)}panEnd(){return this._getUpdatedState({startPanLngLat:null})}rotateStart({pos:e}){return this._getUpdatedState({startRotatePos:e,startBearing:this.getViewportProps().bearing,startPitch:this.getViewportProps().pitch})}rotate({pos:e,deltaAngleX:n=0,deltaAngleY:r=0}){const{startRotatePos:i,startBearing:s,startPitch:o}=this.getState();if(!i||s===void 0||o===void 0)return this;let a;return e?a=this._getNewRotation(e,i,o,s):a={bearing:s+n,pitch:o+r},this._getUpdatedState(a)}rotateEnd(){return this._getUpdatedState({startBearing:null,startPitch:null})}zoomStart({pos:e}){return this._getUpdatedState({startZoomLngLat:this._unproject(e),startZoom:this.getViewportProps().zoom})}zoom({pos:e,startPos:n,scale:r}){let{startZoom:i,startZoomLngLat:s}=this.getState();if(s||(i=this.getViewportProps().zoom,s=this._unproject(n)||this._unproject(e)),!s)return this;const{maxZoom:o,minZoom:a}=this.getViewportProps();let l=i+Math.log2(r);l=vi(l,a,o);const c=this.makeViewport({...this.getViewportProps(),zoom:l});return this._getUpdatedState({zoom:l,...c.panByPosition(s,e)})}zoomEnd(){return this._getUpdatedState({startZoomLngLat:null,startZoom:null})}zoomIn(e=2){return this._zoomFromCenter(e)}zoomOut(e=2){return this._zoomFromCenter(1/e)}moveLeft(e=100){return this._panFromCenter([e,0])}moveRight(e=100){return this._panFromCenter([-e,0])}moveUp(e=100){return this._panFromCenter([0,e])}moveDown(e=100){return this._panFromCenter([0,-e])}rotateLeft(e=15){return this._getUpdatedState({bearing:this.getViewportProps().bearing-e})}rotateRight(e=15){return this._getUpdatedState({bearing:this.getViewportProps().bearing+e})}rotateUp(e=10){return this._getUpdatedState({pitch:this.getViewportProps().pitch+e})}rotateDown(e=10){return this._getUpdatedState({pitch:this.getViewportProps().pitch-e})}shortestPathFrom(e){const n=e.getViewportProps(),r={...this.getViewportProps()},{bearing:i,longitude:s}=r;return Math.abs(i-n.bearing)>180&&(r.bearing=i<0?i+360:i-360),Math.abs(s-n.longitude)>180&&(r.longitude=s<0?s+360:s-360),r}applyConstraints(e){const{maxZoom:n,minZoom:r,zoom:i}=e;e.zoom=vi(i,r,n);const{maxPitch:s,minPitch:o,pitch:a}=e;e.pitch=vi(a,o,s);const{normalize:l=!0}=e;return l&&Object.assign(e,q4(e)),e}_zoomFromCenter(e){const{width:n,height:r}=this.getViewportProps();return this.zoom({pos:[n/2,r/2],scale:e})}_panFromCenter(e){const{width:n,height:r}=this.getViewportProps();return this.pan({startPos:[n/2,r/2],pos:[n/2+e[0],r/2+e[1]]})}_getUpdatedState(e){return new this.constructor({makeViewport:this.makeViewport,...this.getViewportProps(),...this.getState(),...e})}_unproject(e){const n=this.makeViewport(this.getViewportProps());return e&&n.unproject(e)}_getNewRotation(e,n,r,i){const s=e[0]-n[0],o=e[1]-n[1],a=e[1],l=n[1],{width:c,height:u}=this.getViewportProps(),f=s/c;let d=0;o>0?Math.abs(u-l)>Wb&&(d=o/(l-u)*$B):o<0&&l>Wb&&(d=1-a/l),d=vi(d,-1,1);const{minPitch:h,maxPitch:p}=this.getViewportProps(),g=i+180*f;let E=r;return d>0?E=r+d*(p-r):d<0&&(E=r-d*(h-r)),{pitch:E,bearing:g}}}class WB extends jB{constructor(...e){super(...e),_(this,"ControllerState",GB),_(this,"transition",{transitionDuration:300,transitionInterpolator:new nA({transitionProps:{compare:["longitude","latitude","zoom","bearing","pitch","position"],required:["longitude","latitude","zoom"]}})}),_(this,"dragMode","pan")}setProps(e){e.position=e.position||[0,0,0];const n=this.props;super.setProps(e),(!n||n.height!==e.height)&&this.updateViewport(new this.ControllerState({makeViewport:this.makeViewport,...e,...this.state}))}}class rA extends ia{get ViewportType(){return ra}get ControllerType(){return WB}}_(rA,"displayName","MapView");const HB=new QP;function XB(t,e){var n,r;const i=(n=t.order)!==null&&n!==void 0?n:1/0,s=(r=e.order)!==null&&r!==void 0?r:1/0;return i-s}class YB{constructor(){_(this,"effects",void 0),_(this,"_resolvedEffects",[]),_(this,"_defaultEffects",[]),_(this,"_needsRedraw",void 0),this.effects=[],this._needsRedraw="Initial render",this._setEffects([])}addDefaultEffect(e){const n=this._defaultEffects;if(!n.find(r=>r.id===e.id)){const r=n.findIndex(i=>XB(i,e)>0);r<0?n.push(e):n.splice(r,0,e),this._setEffects(this.effects)}}setProps(e){"effects"in e&&(pr(e.effects,this.effects,1)||this._setEffects(e.effects))}needsRedraw(e={clearRedrawFlags:!1}){const n=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),n}getEffects(){return this._resolvedEffects}_setEffects(e){const n={};for(const i of this.effects)n[i.id]=i;const r=[];for(const i of e){const s=n[i.id];s&&s!==i?s.setProps?(s.setProps(i.props),r.push(s)):(s.cleanup(),r.push(i)):r.push(i),delete n[i.id]}for(const i in n)n[i].cleanup();this.effects=r,this._resolvedEffects=r.concat(this._defaultEffects),e.some(i=>i instanceof QP)||this._resolvedEffects.push(HB),this._needsRedraw="effects changed"}finalize(){for(const e of this._resolvedEffects)e.cleanup();this.effects.length=0,this._resolvedEffects.length=0,this._defaultEffects.length=0}}class KB extends Jy{shouldDrawLayer(e){const{operation:n}=e.props;return n.includes("draw")||n.includes("terrain")}}const qB="deckRenderer.renderLayers";class ZB{constructor(e){_(this,"gl",void 0),_(this,"layerFilter",void 0),_(this,"drawPickingColors",void 0),_(this,"drawLayersPass",void 0),_(this,"pickLayersPass",void 0),_(this,"renderCount",void 0),_(this,"_needsRedraw",void 0),_(this,"renderBuffers",void 0),_(this,"lastPostProcessEffect",void 0),this.gl=e,this.layerFilter=null,this.drawPickingColors=!1,this.drawLayersPass=new KB(e),this.pickLayersPass=new eA(e),this.renderCount=0,this._needsRedraw="Initial render",this.renderBuffers=[],this.lastPostProcessEffect=null}setProps(e){this.layerFilter!==e.layerFilter&&(this.layerFilter=e.layerFilter,this._needsRedraw="layerFilter changed"),this.drawPickingColors!==e.drawPickingColors&&(this.drawPickingColors=e.drawPickingColors,this._needsRedraw="drawPickingColors changed")}renderLayers(e){if(!e.viewports.length)return;const n=this.drawPickingColors?this.pickLayersPass:this.drawLayersPass,r={layerFilter:this.layerFilter,isPicking:this.drawPickingColors,...e,target:e.target||ft.getDefaultFramebuffer(this.gl)};r.effects&&this._preRender(r.effects,r);const i=this.lastPostProcessEffect?this.renderBuffers[0]:r.target,s=n.render({...r,target:i});r.effects&&this._postRender(r.effects,r),this.renderCount++,Lt(qB,this,s,e)}needsRedraw(e={clearRedrawFlags:!1}){const n=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),n}finalize(){const{renderBuffers:e}=this;for(const n of e)n.delete();e.length=0}_preRender(e,n){this.lastPostProcessEffect=null,n.preRenderStats=n.preRenderStats||{};for(const r of e)n.preRenderStats[r.id]=r.preRender(this.gl,n),r.postRender&&(this.lastPostProcessEffect=r.id);this.lastPostProcessEffect&&this._resizeRenderBuffers()}_resizeRenderBuffers(){const{renderBuffers:e}=this;e.length===0&&e.push(new ft(this.gl),new ft(this.gl));for(const n of e)n.resize()}_postRender(e,n){const{renderBuffers:r}=this,i={...n,inputBuffer:r[0],swapBuffer:r[1],target:null};for(const s of e)if(s.postRender){if(s.id===this.lastPostProcessEffect){i.target=n.target,s.postRender(this.gl,i);break}const o=s.postRender(this.gl,i);i.inputBuffer=o,i.swapBuffer=o===r[0]?r[1]:r[0]}}}const QB={pickedColor:null,pickedObjectIndex:-1};function JB({pickedColors:t,decodePickingColor:e,deviceX:n,deviceY:r,deviceRadius:i,deviceRect:s}){const{x:o,y:a,width:l,height:c}=s;let u=i*i,f=-1,d=0;for(let h=0;h<c;h++){const p=h+a-r,g=p*p;if(g>u)d+=4*l;else for(let E=0;E<l;E++){if(t[d+3]-1>=0){const y=E+o-n,v=y*y+g;v<=u&&(u=v,f=d)}d+=4}}if(f>=0){const h=t.slice(f,f+4),p=e(h);if(p){const g=Math.floor(f/4/l),E=f/4-g*l;return{...p,pickedColor:h,pickedX:o+E,pickedY:a+g}}ae.error("Picked non-existent layer. Is picking buffer corrupt?")()}return QB}function ez({pickedColors:t,decodePickingColor:e}){const n=new Map;if(t){for(let r=0;r<t.length;r+=4)if(t[r+3]-1>=0){const s=t.slice(r,r+4),o=s.join(",");if(!n.has(o)){const a=e(s);a?n.set(o,{...a,color:s}):ae.error("Picked non-existent layer. Is picking buffer corrupt?")()}}}return Array.from(n.values())}function iA({pickInfo:t,viewports:e,pixelRatio:n,x:r,y:i,z:s}){let o=e[0];e.length>1&&(o=nz((t==null?void 0:t.pickedViewports)||e,{x:r,y:i}));let a;if(o){const l=[r-o.x,i-o.y];s!==void 0&&(l[2]=s),a=o.unproject(l)}return{color:null,layer:null,viewport:o,index:-1,picked:!1,x:r,y:i,pixel:[r,i],coordinate:a,devicePixel:t&&"pickedX"in t?[t.pickedX,t.pickedY]:void 0,pixelRatio:n}}function tz(t){const{pickInfo:e,lastPickedInfo:n,mode:r,layers:i}=t,{pickedColor:s,pickedLayer:o,pickedObjectIndex:a}=e,l=o?[o]:[];if(r==="hover"){const f=n.index,d=n.layerId,h=o?o.props.id:null;if(h!==d||a!==f){if(h!==d){const p=i.find(g=>g.props.id===d);p&&l.unshift(p)}n.layerId=h,n.index=a,n.info=null}}const c=iA(t),u=new Map;return u.set(null,c),l.forEach(f=>{let d={...c};f===o&&(d.color=s,d.index=a,d.picked=!0),d=sA({layer:f,info:d,mode:r});const h=d.layer;f===o&&r==="hover"&&(n.info=d),u.set(h.id,d),r==="hover"&&h.updateAutoHighlight(d)}),u}function sA({layer:t,info:e,mode:n}){for(;t&&e;){const r=e.layer||null;e.sourceLayer=r,e.layer=t,e=t.getPickingInfo({info:e,mode:n,sourceLayer:r}),t=t.parent}return e}function nz(t,e){for(let n=t.length-1;n>=0;n--){const r=t[n];if(r.containsPixel(e))return r}return t[0]}class rz{constructor(e){_(this,"gl",void 0),_(this,"pickingFBO",void 0),_(this,"depthFBO",void 0),_(this,"pickLayersPass",void 0),_(this,"layerFilter",void 0),_(this,"lastPickedInfo",void 0),_(this,"_pickable",!0),this.gl=e,this.pickLayersPass=new eA(e),this.lastPickedInfo={index:-1,layerId:null,info:null}}setProps(e){"layerFilter"in e&&(this.layerFilter=e.layerFilter),"_pickable"in e&&(this._pickable=e._pickable)}finalize(){this.pickingFBO&&this.pickingFBO.delete(),this.depthFBO&&(this.depthFBO.color.delete(),this.depthFBO.delete())}pickObject(e){return this._pickClosestObject(e)}pickObjects(e){return this._pickVisibleObjects(e)}getLastPickedObject({x:e,y:n,layers:r,viewports:i},s=this.lastPickedInfo.info){const o=s&&s.layer&&s.layer.id,a=s&&s.viewport&&s.viewport.id,l=o?r.find(d=>d.id===o):null,c=a&&i.find(d=>d.id===a)||i[0],u=c&&c.unproject([e-c.x,n-c.y]);return{...s,...{x:e,y:n,viewport:c,coordinate:u,layer:l}}}_resizeBuffer(){var e,n;const{gl:r}=this;if(!this.pickingFBO&&(this.pickingFBO=new ft(r),ft.isSupported(r,{colorBufferFloat:!0}))){const i=new ft(r);i.attach({36064:new yn(r,{format:le(r)?34836:6408,type:5126})}),this.depthFBO=i}(e=this.pickingFBO)===null||e===void 0||e.resize({width:r.canvas.width,height:r.canvas.height}),(n=this.depthFBO)===null||n===void 0||n.resize({width:r.canvas.width,height:r.canvas.height})}_getPickable(e){if(this._pickable===!1)return null;const n=e.filter(r=>this.pickLayersPass.shouldDrawLayer(r)&&!r.isComposite);return n.length?n:null}_pickClosestObject({layers:e,views:n,viewports:r,x:i,y:s,radius:o=0,depth:a=1,mode:l="query",unproject3D:c,onViewportActive:u,effects:f}){const d=this._getPickable(e),h=Ko(this.gl);if(!d)return{result:[],emptyInfo:iA({viewports:r,x:i,y:s,pixelRatio:h})};this._resizeBuffer();const p=Dp(this.gl,[i,s],!0),g=[p.x+Math.floor(p.width/2),p.y+Math.floor(p.height/2)],E=Math.round(o*h),{width:m,height:y}=this.pickingFBO,v=this._getPickingRect({deviceX:g[0],deviceY:g[1],deviceRadius:E,deviceWidth:m,deviceHeight:y}),b={x:i-o,y:s-o,width:o*2+1,height:o*2+1};let T;const S=[],P=new Set;for(let R=0;R<a;R++){let O;if(v){const M=this._drawAndSample({layers:d,views:n,viewports:r,onViewportActive:u,deviceRect:v,cullRect:b,effects:f,pass:"picking:".concat(l)});O=JB({...M,deviceX:g[0],deviceY:g[1],deviceRadius:E,deviceRect:v})}else O={pickedColor:null,pickedObjectIndex:-1};let L;if(O.pickedLayer&&c&&this.depthFBO){const{pickedColors:M}=this._drawAndSample({layers:[O.pickedLayer],views:n,viewports:r,onViewportActive:u,deviceRect:{x:O.pickedX,y:O.pickedY,width:1,height:1},cullRect:b,effects:f,pass:"picking:".concat(l,":z")},!0);M[3]&&(L=M[0])}O.pickedLayer&&R+1<a&&(P.add(O.pickedLayer),O.pickedLayer.disablePickingIndex(O.pickedObjectIndex)),T=tz({pickInfo:O,lastPickedInfo:this.lastPickedInfo,mode:l,layers:d,viewports:r,x:i,y:s,z:L,pixelRatio:h});for(const M of T.values())M.layer&&S.push(M);if(!O.pickedColor)break}for(const R of P)R.restorePickingColors();return{result:S,emptyInfo:T.get(null)}}_pickVisibleObjects({layers:e,views:n,viewports:r,x:i,y:s,width:o=1,height:a=1,mode:l="query",maxObjects:c=null,onViewportActive:u,effects:f}){const d=this._getPickable(e);if(!d)return[];this._resizeBuffer();const h=Ko(this.gl),p=Dp(this.gl,[i,s],!0),g=p.x,E=p.y+p.height,m=Dp(this.gl,[i+o,s+a],!0),y=m.x+m.width,v=m.y,b={x:g,y:v,width:y-g,height:E-v},T=this._drawAndSample({layers:d,views:n,viewports:r,onViewportActive:u,deviceRect:b,cullRect:{x:i,y:s,width:o,height:a},effects:f,pass:"picking:".concat(l)}),S=ez(T),P=new Map,R=Number.isFinite(c);for(let O=0;O<S.length&&!(R&&c&&P.size>=c);O++){const L=S[O];let M={color:L.pickedColor,layer:null,index:L.pickedObjectIndex,picked:!0,x:i,y:s,pixelRatio:h};M=sA({layer:L.pickedLayer,info:M,mode:l}),P.has(M.object)||P.set(M.object,M)}return Array.from(P.values())}_drawAndSample({layers:e,views:n,viewports:r,onViewportActive:i,deviceRect:s,cullRect:o,effects:a,pass:l},c=!1){const u=c?this.depthFBO:this.pickingFBO,f={layers:e,layerFilter:this.layerFilter,views:n,viewports:r,onViewportActive:i,pickingFBO:u,deviceRect:s,cullRect:o,effects:a,pass:l,pickZ:c,preRenderStats:{}};for(const y of a)y.useInPicking&&(f.preRenderStats[y.id]=y.preRender(this.gl,f));const{decodePickingColor:d}=this.pickLayersPass.render(f),{x:h,y:p,width:g,height:E}=s,m=new(c?Float32Array:Uint8Array)(g*E*4);return fh(u,{sourceX:h,sourceY:p,sourceWidth:g,sourceHeight:E,target:m}),{pickedColors:m,decodePickingColor:d}}_getPickingRect({deviceX:e,deviceY:n,deviceRadius:r,deviceWidth:i,deviceHeight:s}){const o=Math.max(0,e-r),a=Math.max(0,n-r),l=Math.min(i,e+r+1)-o,c=Math.min(s,n+r+1)-a;return l<=0||c<=0?null:{x:o,y:a,width:l,height:c}}}const iz={zIndex:"1",position:"absolute",pointerEvents:"none",color:"#a0a7b4",backgroundColor:"#29323c",padding:"10px",top:"0",left:"0",display:"none"};let sz=class{constructor(e){_(this,"el",null),_(this,"isVisible",!1);const n=e.parentElement;n&&(this.el=document.createElement("div"),this.el.className="deck-tooltip",Object.assign(this.el.style,iz),n.appendChild(this.el))}setTooltip(e,n,r){const i=this.el;if(i){if(typeof e=="string")i.innerText=e;else if(e)e.text&&(i.innerText=e.text),e.html&&(i.innerHTML=e.html),e.className&&(i.className=e.className);else{this.isVisible=!1,i.style.display="none";return}this.isVisible=!0,i.style.display="block",i.style.transform="translate(".concat(n,"px, ").concat(r,"px)"),e&&typeof e=="object"&&"style"in e&&Object.assign(i.style,e.style)}}remove(){this.el&&(this.el.remove(),this.el=null)}};var oA={exports:{}};/*! Hammer.JS - v2.0.7 - 2016-04-22
 * http://hammerjs.github.io/
 *
 * Copyright (c) 2016 Jorik Tangelder;
 * Licensed under the MIT license */(function(t){(function(e,n,r,i){var s=["","webkit","Moz","MS","ms","o"],o=n.createElement("div"),a="function",l=Math.round,c=Math.abs,u=Date.now;function f(w,x,C){return setTimeout(v(w,C),x)}function d(w,x,C){return Array.isArray(w)?(h(w,C[x],C),!0):!1}function h(w,x,C){var I;if(w)if(w.forEach)w.forEach(x,C);else if(w.length!==i)for(I=0;I<w.length;)x.call(C,w[I],I,w),I++;else for(I in w)w.hasOwnProperty(I)&&x.call(C,w[I],I,w)}function p(w,x,C){var I="DEPRECATED METHOD: "+x+`
`+C+` AT 
`;return function(){var B=new Error("get-stack-trace"),W=B&&B.stack?B.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",oe=e.console&&(e.console.warn||e.console.log);return oe&&oe.call(e.console,I,W),w.apply(this,arguments)}}var g;typeof Object.assign!="function"?g=function(x){if(x===i||x===null)throw new TypeError("Cannot convert undefined or null to object");for(var C=Object(x),I=1;I<arguments.length;I++){var B=arguments[I];if(B!==i&&B!==null)for(var W in B)B.hasOwnProperty(W)&&(C[W]=B[W])}return C}:g=Object.assign;var E=p(function(x,C,I){for(var B=Object.keys(C),W=0;W<B.length;)(!I||I&&x[B[W]]===i)&&(x[B[W]]=C[B[W]]),W++;return x},"extend","Use `assign`."),m=p(function(x,C){return E(x,C,!0)},"merge","Use `assign`.");function y(w,x,C){var I=x.prototype,B;B=w.prototype=Object.create(I),B.constructor=w,B._super=I,C&&g(B,C)}function v(w,x){return function(){return w.apply(x,arguments)}}function b(w,x){return typeof w==a?w.apply(x&&x[0]||i,x):w}function T(w,x){return w===i?x:w}function S(w,x,C){h(L(x),function(I){w.addEventListener(I,C,!1)})}function P(w,x,C){h(L(x),function(I){w.removeEventListener(I,C,!1)})}function R(w,x){for(;w;){if(w==x)return!0;w=w.parentNode}return!1}function O(w,x){return w.indexOf(x)>-1}function L(w){return w.trim().split(/\s+/g)}function M(w,x,C){if(w.indexOf&&!C)return w.indexOf(x);for(var I=0;I<w.length;){if(C&&w[I][C]==x||!C&&w[I]===x)return I;I++}return-1}function j(w){return Array.prototype.slice.call(w,0)}function U(w,x,C){for(var I=[],B=[],W=0;W<w.length;){var oe=x?w[W][x]:w[W];M(B,oe)<0&&I.push(w[W]),B[W]=oe,W++}return C&&(x?I=I.sort(function(vt,Ft){return vt[x]>Ft[x]}):I=I.sort()),I}function V(w,x){for(var C,I,B=x[0].toUpperCase()+x.slice(1),W=0;W<s.length;){if(C=s[W],I=C?C+B:x,I in w)return I;W++}return i}var X=1;function q(){return X++}function J(w){var x=w.ownerDocument||w;return x.defaultView||x.parentWindow||e}var D=/mobile|tablet|ip(ad|hone|od)|android/i,G="ontouchstart"in e,Y=V(e,"PointerEvent")!==i,re=G&&D.test(navigator.userAgent),ee="touch",tt="pen",he="mouse",Re="kinect",ke=25,ue=1,Le=2,Q=4,we=8,it=1,se=2,ie=4,xe=8,te=16,ve=se|ie,nt=xe|te,_e=ve|nt,Ne=["x","y"],be=["clientX","clientY"];function Oe(w,x){var C=this;this.manager=w,this.callback=x,this.element=w.element,this.target=w.options.inputTarget,this.domHandler=function(I){b(w.options.enable,[w])&&C.handler(I)},this.init()}Oe.prototype={handler:function(){},init:function(){this.evEl&&S(this.element,this.evEl,this.domHandler),this.evTarget&&S(this.target,this.evTarget,this.domHandler),this.evWin&&S(J(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&P(this.element,this.evEl,this.domHandler),this.evTarget&&P(this.target,this.evTarget,this.domHandler),this.evWin&&P(J(this.element),this.evWin,this.domHandler)}};function Vt(w){var x,C=w.options.inputClass;return C?x=C:Y?x=Us:re?x=ni:G?x=kt:x=Yi,new x(w,en)}function en(w,x,C){var I=C.pointers.length,B=C.changedPointers.length,W=x&ue&&I-B===0,oe=x&(Q|we)&&I-B===0;C.isFirst=!!W,C.isFinal=!!oe,W&&(w.session={}),C.eventType=x,Pe(w,C),w.emit("hammer.input",C),w.recognize(C),w.session.prevInput=C}function Pe(w,x){var C=w.session,I=x.pointers,B=I.length;C.firstInput||(C.firstInput=tn(x)),B>1&&!C.firstMultiple?C.firstMultiple=tn(x):B===1&&(C.firstMultiple=!1);var W=C.firstInput,oe=C.firstMultiple,ht=oe?oe.center:W.center,vt=x.center=nn(I);x.timeStamp=u(),x.deltaTime=x.timeStamp-W.timeStamp,x.angle=xn(ht,vt),x.distance=er(ht,vt),Fe(C,x),x.offsetDirection=Mt(x.deltaX,x.deltaY);var Ft=Z(x.deltaTime,x.deltaX,x.deltaY);x.overallVelocityX=Ft.x,x.overallVelocityY=Ft.y,x.overallVelocity=c(Ft.x)>c(Ft.y)?Ft.x:Ft.y,x.scale=oe?zc(oe.pointers,I):1,x.rotation=oe?Xi(oe.pointers,I):0,x.maxPointers=C.prevInput?x.pointers.length>C.prevInput.maxPointers?x.pointers.length:C.prevInput.maxPointers:x.pointers.length,dt(C,x);var nr=w.element;R(x.srcEvent.target,nr)&&(nr=x.srcEvent.target),x.target=nr}function Fe(w,x){var C=x.center,I=w.offsetDelta||{},B=w.prevDelta||{},W=w.prevInput||{};(x.eventType===ue||W.eventType===Q)&&(B=w.prevDelta={x:W.deltaX||0,y:W.deltaY||0},I=w.offsetDelta={x:C.x,y:C.y}),x.deltaX=B.x+(C.x-I.x),x.deltaY=B.y+(C.y-I.y)}function dt(w,x){var C=w.lastInterval||x,I=x.timeStamp-C.timeStamp,B,W,oe,ht;if(x.eventType!=we&&(I>ke||C.velocity===i)){var vt=x.deltaX-C.deltaX,Ft=x.deltaY-C.deltaY,nr=Z(I,vt,Ft);W=nr.x,oe=nr.y,B=c(nr.x)>c(nr.y)?nr.x:nr.y,ht=Mt(vt,Ft),w.lastInterval=x}else B=C.velocity,W=C.velocityX,oe=C.velocityY,ht=C.direction;x.velocity=B,x.velocityX=W,x.velocityY=oe,x.direction=ht}function tn(w){for(var x=[],C=0;C<w.pointers.length;)x[C]={clientX:l(w.pointers[C].clientX),clientY:l(w.pointers[C].clientY)},C++;return{timeStamp:u(),pointers:x,center:nn(x),deltaX:w.deltaX,deltaY:w.deltaY}}function nn(w){var x=w.length;if(x===1)return{x:l(w[0].clientX),y:l(w[0].clientY)};for(var C=0,I=0,B=0;B<x;)C+=w[B].clientX,I+=w[B].clientY,B++;return{x:l(C/x),y:l(I/x)}}function Z(w,x,C){return{x:x/w||0,y:C/w||0}}function Mt(w,x){return w===x?it:c(w)>=c(x)?w<0?se:ie:x<0?xe:te}function er(w,x,C){C||(C=Ne);var I=x[C[0]]-w[C[0]],B=x[C[1]]-w[C[1]];return Math.sqrt(I*I+B*B)}function xn(w,x,C){C||(C=Ne);var I=x[C[0]]-w[C[0]],B=x[C[1]]-w[C[1]];return Math.atan2(B,I)*180/Math.PI}function Xi(w,x){return xn(x[1],x[0],be)+xn(w[1],w[0],be)}function zc(w,x){return er(x[0],x[1],be)/er(w[0],w[1],be)}var zs={mousedown:ue,mousemove:Le,mouseup:Q},wa="mousedown",Uc="mousemove mouseup";function Yi(){this.evEl=wa,this.evWin=Uc,this.pressed=!1,Oe.apply(this,arguments)}y(Yi,Oe,{handler:function(x){var C=zs[x.type];C&ue&&x.button===0&&(this.pressed=!0),C&Le&&x.which!==1&&(C=Q),this.pressed&&(C&Q&&(this.pressed=!1),this.callback(this.manager,C,{pointers:[x],changedPointers:[x],pointerType:he,srcEvent:x}))}});var Wh={pointerdown:ue,pointermove:Le,pointerup:Q,pointercancel:we,pointerout:we},Hh={2:ee,3:tt,4:he,5:Re},jc="pointerdown",xa="pointermove pointerup pointercancel";e.MSPointerEvent&&!e.PointerEvent&&(jc="MSPointerDown",xa="MSPointerMove MSPointerUp MSPointerCancel");function Us(){this.evEl=jc,this.evWin=xa,Oe.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}y(Us,Oe,{handler:function(x){var C=this.store,I=!1,B=x.type.toLowerCase().replace("ms",""),W=Wh[B],oe=Hh[x.pointerType]||x.pointerType,ht=oe==ee,vt=M(C,x.pointerId,"pointerId");W&ue&&(x.button===0||ht)?vt<0&&(C.push(x),vt=C.length-1):W&(Q|we)&&(I=!0),!(vt<0)&&(C[vt]=x,this.callback(this.manager,W,{pointers:C,changedPointers:[x],pointerType:oe,srcEvent:x}),I&&C.splice(vt,1))}});var Vc={touchstart:ue,touchmove:Le,touchend:Q,touchcancel:we},$c="touchstart",Gc="touchstart touchmove touchend touchcancel";function Ta(){this.evTarget=$c,this.evWin=Gc,this.started=!1,Oe.apply(this,arguments)}y(Ta,Oe,{handler:function(x){var C=Vc[x.type];if(C===ue&&(this.started=!0),!!this.started){var I=Xh.call(this,x,C);C&(Q|we)&&I[0].length-I[1].length===0&&(this.started=!1),this.callback(this.manager,C,{pointers:I[0],changedPointers:I[1],pointerType:ee,srcEvent:x})}}});function Xh(w,x){var C=j(w.touches),I=j(w.changedTouches);return x&(Q|we)&&(C=U(C.concat(I),"identifier",!0)),[C,I]}var Yh={touchstart:ue,touchmove:Le,touchend:Q,touchcancel:we},Kh="touchstart touchmove touchend touchcancel";function ni(){this.evTarget=Kh,this.targetIds={},Oe.apply(this,arguments)}y(ni,Oe,{handler:function(x){var C=Yh[x.type],I=qh.call(this,x,C);I&&this.callback(this.manager,C,{pointers:I[0],changedPointers:I[1],pointerType:ee,srcEvent:x})}});function qh(w,x){var C=j(w.touches),I=this.targetIds;if(x&(ue|Le)&&C.length===1)return I[C[0].identifier]=!0,[C,C];var B,W,oe=j(w.changedTouches),ht=[],vt=this.target;if(W=C.filter(function(Ft){return R(Ft.target,vt)}),x===ue)for(B=0;B<W.length;)I[W[B].identifier]=!0,B++;for(B=0;B<oe.length;)I[oe[B].identifier]&&ht.push(oe[B]),x&(Q|we)&&delete I[oe[B].identifier],B++;if(ht.length)return[U(W.concat(ht),"identifier",!0),ht]}var Ki=2500,js=25;function kt(){Oe.apply(this,arguments);var w=v(this.handler,this);this.touch=new ni(this.manager,w),this.mouse=new Yi(this.manager,w),this.primaryTouch=null,this.lastTouches=[]}y(kt,Oe,{handler:function(x,C,I){var B=I.pointerType==ee,W=I.pointerType==he;if(!(W&&I.sourceCapabilities&&I.sourceCapabilities.firesTouchEvents)){if(B)qi.call(this,C,I);else if(W&&Zi.call(this,I))return;this.callback(x,C,I)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});function qi(w,x){w&ue?(this.primaryTouch=x.changedPointers[0].identifier,Wc.call(this,x)):w&(Q|we)&&Wc.call(this,x)}function Wc(w){var x=w.changedPointers[0];if(x.identifier===this.primaryTouch){var C={x:x.clientX,y:x.clientY};this.lastTouches.push(C);var I=this.lastTouches,B=function(){var W=I.indexOf(C);W>-1&&I.splice(W,1)};setTimeout(B,Ki)}}function Zi(w){for(var x=w.srcEvent.clientX,C=w.srcEvent.clientY,I=0;I<this.lastTouches.length;I++){var B=this.lastTouches[I],W=Math.abs(x-B.x),oe=Math.abs(C-B.y);if(W<=js&&oe<=js)return!0}return!1}var Vs=V(o.style,"touchAction"),Sa=Vs!==i,Pa="compute",Aa="auto",$s="manipulation",Sr="none",Qi="pan-x",Ji="pan-y",Gs=d2();function ne(w,x){this.manager=w,this.set(x)}ne.prototype={set:function(w){w==Pa&&(w=this.compute()),Sa&&this.manager.element.style&&Gs[w]&&(this.manager.element.style[Vs]=w),this.actions=w.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var w=[];return h(this.manager.recognizers,function(x){b(x.options.enable,[x])&&(w=w.concat(x.getTouchAction()))}),Nt(w.join(" "))},preventDefaults:function(w){var x=w.srcEvent,C=w.offsetDirection;if(this.manager.session.prevented){x.preventDefault();return}var I=this.actions,B=O(I,Sr)&&!Gs[Sr],W=O(I,Ji)&&!Gs[Ji],oe=O(I,Qi)&&!Gs[Qi];if(B){var ht=w.pointers.length===1,vt=w.distance<2,Ft=w.deltaTime<250;if(ht&&vt&&Ft)return}if(!(oe&&W)&&(B||W&&C&ve||oe&&C&nt))return this.preventSrc(x)},preventSrc:function(w){this.manager.session.prevented=!0,w.preventDefault()}};function Nt(w){if(O(w,Sr))return Sr;var x=O(w,Qi),C=O(w,Ji);return x&&C?Sr:x||C?x?Qi:Ji:O(w,$s)?$s:Aa}function d2(){if(!Sa)return!1;var w={},x=e.CSS&&e.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(C){w[C]=x?e.CSS.supports("touch-action",C):!0}),w}var Hc=1,Tn=2,Ws=4,ri=8,Pr=ri,Ca=16,tr=32;function Ar(w){this.options=g({},this.defaults,w||{}),this.id=q(),this.manager=null,this.options.enable=T(this.options.enable,!0),this.state=Hc,this.simultaneous={},this.requireFail=[]}Ar.prototype={defaults:{},set:function(w){return g(this.options,w),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(w){if(d(w,"recognizeWith",this))return this;var x=this.simultaneous;return w=Xc(w,this),x[w.id]||(x[w.id]=w,w.recognizeWith(this)),this},dropRecognizeWith:function(w){return d(w,"dropRecognizeWith",this)?this:(w=Xc(w,this),delete this.simultaneous[w.id],this)},requireFailure:function(w){if(d(w,"requireFailure",this))return this;var x=this.requireFail;return w=Xc(w,this),M(x,w)===-1&&(x.push(w),w.requireFailure(this)),this},dropRequireFailure:function(w){if(d(w,"dropRequireFailure",this))return this;w=Xc(w,this);var x=M(this.requireFail,w);return x>-1&&this.requireFail.splice(x,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(w){return!!this.simultaneous[w.id]},emit:function(w){var x=this,C=this.state;function I(B){x.manager.emit(B,w)}C<ri&&I(x.options.event+n_(C)),I(x.options.event),w.additionalEvent&&I(w.additionalEvent),C>=ri&&I(x.options.event+n_(C))},tryEmit:function(w){if(this.canEmit())return this.emit(w);this.state=tr},canEmit:function(){for(var w=0;w<this.requireFail.length;){if(!(this.requireFail[w].state&(tr|Hc)))return!1;w++}return!0},recognize:function(w){var x=g({},w);if(!b(this.options.enable,[this,x])){this.reset(),this.state=tr;return}this.state&(Pr|Ca|tr)&&(this.state=Hc),this.state=this.process(x),this.state&(Tn|Ws|ri|Ca)&&this.tryEmit(x)},process:function(w){},getTouchAction:function(){},reset:function(){}};function n_(w){return w&Ca?"cancel":w&ri?"end":w&Ws?"move":w&Tn?"start":""}function r_(w){return w==te?"down":w==xe?"up":w==se?"left":w==ie?"right":""}function Xc(w,x){var C=x.manager;return C?C.get(w):w}function jn(){Ar.apply(this,arguments)}y(jn,Ar,{defaults:{pointers:1},attrTest:function(w){var x=this.options.pointers;return x===0||w.pointers.length===x},process:function(w){var x=this.state,C=w.eventType,I=x&(Tn|Ws),B=this.attrTest(w);return I&&(C&we||!B)?x|Ca:I||B?C&Q?x|ri:x&Tn?x|Ws:Tn:tr}});function Yc(){jn.apply(this,arguments),this.pX=null,this.pY=null}y(Yc,jn,{defaults:{event:"pan",threshold:10,pointers:1,direction:_e},getTouchAction:function(){var w=this.options.direction,x=[];return w&ve&&x.push(Ji),w&nt&&x.push(Qi),x},directionTest:function(w){var x=this.options,C=!0,I=w.distance,B=w.direction,W=w.deltaX,oe=w.deltaY;return B&x.direction||(x.direction&ve?(B=W===0?it:W<0?se:ie,C=W!=this.pX,I=Math.abs(w.deltaX)):(B=oe===0?it:oe<0?xe:te,C=oe!=this.pY,I=Math.abs(w.deltaY))),w.direction=B,C&&I>x.threshold&&B&x.direction},attrTest:function(w){return jn.prototype.attrTest.call(this,w)&&(this.state&Tn||!(this.state&Tn)&&this.directionTest(w))},emit:function(w){this.pX=w.deltaX,this.pY=w.deltaY;var x=r_(w.direction);x&&(w.additionalEvent=this.options.event+x),this._super.emit.call(this,w)}});function Zh(){jn.apply(this,arguments)}y(Zh,jn,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[Sr]},attrTest:function(w){return this._super.attrTest.call(this,w)&&(Math.abs(w.scale-1)>this.options.threshold||this.state&Tn)},emit:function(w){if(w.scale!==1){var x=w.scale<1?"in":"out";w.additionalEvent=this.options.event+x}this._super.emit.call(this,w)}});function Qh(){Ar.apply(this,arguments),this._timer=null,this._input=null}y(Qh,Ar,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[Aa]},process:function(w){var x=this.options,C=w.pointers.length===x.pointers,I=w.distance<x.threshold,B=w.deltaTime>x.time;if(this._input=w,!I||!C||w.eventType&(Q|we)&&!B)this.reset();else if(w.eventType&ue)this.reset(),this._timer=f(function(){this.state=Pr,this.tryEmit()},x.time,this);else if(w.eventType&Q)return Pr;return tr},reset:function(){clearTimeout(this._timer)},emit:function(w){this.state===Pr&&(w&&w.eventType&Q?this.manager.emit(this.options.event+"up",w):(this._input.timeStamp=u(),this.manager.emit(this.options.event,this._input)))}});function Jh(){jn.apply(this,arguments)}y(Jh,jn,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[Sr]},attrTest:function(w){return this._super.attrTest.call(this,w)&&(Math.abs(w.rotation)>this.options.threshold||this.state&Tn)}});function ep(){jn.apply(this,arguments)}y(ep,jn,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:ve|nt,pointers:1},getTouchAction:function(){return Yc.prototype.getTouchAction.call(this)},attrTest:function(w){var x=this.options.direction,C;return x&(ve|nt)?C=w.overallVelocity:x&ve?C=w.overallVelocityX:x&nt&&(C=w.overallVelocityY),this._super.attrTest.call(this,w)&&x&w.offsetDirection&&w.distance>this.options.threshold&&w.maxPointers==this.options.pointers&&c(C)>this.options.velocity&&w.eventType&Q},emit:function(w){var x=r_(w.offsetDirection);x&&this.manager.emit(this.options.event+x,w),this.manager.emit(this.options.event,w)}});function Kc(){Ar.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}y(Kc,Ar,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[$s]},process:function(w){var x=this.options,C=w.pointers.length===x.pointers,I=w.distance<x.threshold,B=w.deltaTime<x.time;if(this.reset(),w.eventType&ue&&this.count===0)return this.failTimeout();if(I&&B&&C){if(w.eventType!=Q)return this.failTimeout();var W=this.pTime?w.timeStamp-this.pTime<x.interval:!0,oe=!this.pCenter||er(this.pCenter,w.center)<x.posThreshold;this.pTime=w.timeStamp,this.pCenter=w.center,!oe||!W?this.count=1:this.count+=1,this._input=w;var ht=this.count%x.taps;if(ht===0)return this.hasRequireFailures()?(this._timer=f(function(){this.state=Pr,this.tryEmit()},x.interval,this),Tn):Pr}return tr},failTimeout:function(){return this._timer=f(function(){this.state=tr},this.options.interval,this),tr},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==Pr&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}});function Cr(w,x){return x=x||{},x.recognizers=T(x.recognizers,Cr.defaults.preset),new tp(w,x)}Cr.VERSION="2.0.7",Cr.defaults={domEvents:!1,touchAction:Pa,enable:!0,inputTarget:null,inputClass:null,preset:[[Jh,{enable:!1}],[Zh,{enable:!1},["rotate"]],[ep,{direction:ve}],[Yc,{direction:ve},["swipe"]],[Kc],[Kc,{event:"doubletap",taps:2},["tap"]],[Qh]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var h2=1,i_=2;function tp(w,x){this.options=g({},Cr.defaults,x||{}),this.options.inputTarget=this.options.inputTarget||w,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=w,this.input=Vt(this),this.touchAction=new ne(this,this.options.touchAction),s_(this,!0),h(this.options.recognizers,function(C){var I=this.add(new C[0](C[1]));C[2]&&I.recognizeWith(C[2]),C[3]&&I.requireFailure(C[3])},this)}tp.prototype={set:function(w){return g(this.options,w),w.touchAction&&this.touchAction.update(),w.inputTarget&&(this.input.destroy(),this.input.target=w.inputTarget,this.input.init()),this},stop:function(w){this.session.stopped=w?i_:h2},recognize:function(w){var x=this.session;if(!x.stopped){this.touchAction.preventDefaults(w);var C,I=this.recognizers,B=x.curRecognizer;(!B||B&&B.state&Pr)&&(B=x.curRecognizer=null);for(var W=0;W<I.length;)C=I[W],x.stopped!==i_&&(!B||C==B||C.canRecognizeWith(B))?C.recognize(w):C.reset(),!B&&C.state&(Tn|Ws|ri)&&(B=x.curRecognizer=C),W++}},get:function(w){if(w instanceof Ar)return w;for(var x=this.recognizers,C=0;C<x.length;C++)if(x[C].options.event==w)return x[C];return null},add:function(w){if(d(w,"add",this))return this;var x=this.get(w.options.event);return x&&this.remove(x),this.recognizers.push(w),w.manager=this,this.touchAction.update(),w},remove:function(w){if(d(w,"remove",this))return this;if(w=this.get(w),w){var x=this.recognizers,C=M(x,w);C!==-1&&(x.splice(C,1),this.touchAction.update())}return this},on:function(w,x){if(w!==i&&x!==i){var C=this.handlers;return h(L(w),function(I){C[I]=C[I]||[],C[I].push(x)}),this}},off:function(w,x){if(w!==i){var C=this.handlers;return h(L(w),function(I){x?C[I]&&C[I].splice(M(C[I],x),1):delete C[I]}),this}},emit:function(w,x){this.options.domEvents&&p2(w,x);var C=this.handlers[w]&&this.handlers[w].slice();if(!(!C||!C.length)){x.type=w,x.preventDefault=function(){x.srcEvent.preventDefault()};for(var I=0;I<C.length;)C[I](x),I++}},destroy:function(){this.element&&s_(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}};function s_(w,x){var C=w.element;if(C.style){var I;h(w.options.cssProps,function(B,W){I=V(C.style,W),x?(w.oldCssProps[I]=C.style[I],C.style[I]=B):C.style[I]=w.oldCssProps[I]||""}),x||(w.oldCssProps={})}}function p2(w,x){var C=n.createEvent("Event");C.initEvent(w,!0,!0),C.gesture=x,x.target.dispatchEvent(C)}g(Cr,{INPUT_START:ue,INPUT_MOVE:Le,INPUT_END:Q,INPUT_CANCEL:we,STATE_POSSIBLE:Hc,STATE_BEGAN:Tn,STATE_CHANGED:Ws,STATE_ENDED:ri,STATE_RECOGNIZED:Pr,STATE_CANCELLED:Ca,STATE_FAILED:tr,DIRECTION_NONE:it,DIRECTION_LEFT:se,DIRECTION_RIGHT:ie,DIRECTION_UP:xe,DIRECTION_DOWN:te,DIRECTION_HORIZONTAL:ve,DIRECTION_VERTICAL:nt,DIRECTION_ALL:_e,Manager:tp,Input:Oe,TouchAction:ne,TouchInput:ni,MouseInput:Yi,PointerEventInput:Us,TouchMouseInput:kt,SingleTouchInput:Ta,Recognizer:Ar,AttrRecognizer:jn,Tap:Kc,Pan:Yc,Swipe:ep,Pinch:Zh,Rotate:Jh,Press:Qh,on:S,off:P,each:h,merge:m,extend:E,assign:g,inherit:y,bindFn:v,prefixed:V});var g2=typeof e<"u"?e:typeof self<"u"?self:{};g2.Hammer=Cr,typeof i=="function"&&i.amd?i(function(){return Cr}):t.exports?t.exports=Cr:e[r]=Cr})(window,document,"Hammer")})(oA);var Cc=oA.exports;const oz=Td(Cc),sr=dx({__proto__:null,default:oz},[Cc]),aA=1,lA=2,Wm=4,az={mousedown:aA,mousemove:lA,mouseup:Wm};function lz(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return!0;return!1}function cz(t){const e=t.prototype.handler;t.prototype.handler=function(r){const i=this.store;r.button>0&&r.type==="pointerdown"&&(lz(i,s=>s.pointerId===r.pointerId)||i.push(r)),e.call(this,r)}}function uz(t){t.prototype.handler=function(n){let r=az[n.type];r&aA&&n.button>=0&&(this.pressed=!0),r&lA&&n.which===0&&(r=Wm),this.pressed&&(r&Wm&&(this.pressed=!1),this.callback(this.manager,r,{pointers:[n],changedPointers:[n],pointerType:"mouse",srcEvent:n}))}}cz(Cc.PointerEventInput);uz(Cc.MouseInput);const fz=Cc.Manager;class dh{constructor(e,n,r){this.element=e,this.callback=n,this.options={enable:!0,...r}}}const dz=sr?[[sr.Pan,{event:"tripan",pointers:3,threshold:0,enable:!1}],[sr.Rotate,{enable:!1}],[sr.Pinch,{enable:!1}],[sr.Swipe,{enable:!1}],[sr.Pan,{threshold:0,enable:!1}],[sr.Press,{enable:!1}],[sr.Tap,{event:"doubletap",taps:2,enable:!1}],[sr.Tap,{event:"anytap",enable:!1}],[sr.Tap,{enable:!1}]]:null,Hb={tripan:["rotate","pinch","pan"],rotate:["pinch"],pinch:["pan"],pan:["press","doubletap","anytap","tap"],doubletap:["anytap"],anytap:["tap"]},hz={doubletap:["tap"]},pz={pointerdown:"pointerdown",pointermove:"pointermove",pointerup:"pointerup",touchstart:"pointerdown",touchmove:"pointermove",touchend:"pointerup",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup"},iv={KEY_EVENTS:["keydown","keyup"],MOUSE_EVENTS:["mousedown","mousemove","mouseup","mouseover","mouseout","mouseleave"],WHEEL_EVENTS:["wheel","mousewheel"]},gz={tap:"tap",anytap:"anytap",doubletap:"doubletap",press:"press",pinch:"pinch",pinchin:"pinch",pinchout:"pinch",pinchstart:"pinch",pinchmove:"pinch",pinchend:"pinch",pinchcancel:"pinch",rotate:"rotate",rotatestart:"rotate",rotatemove:"rotate",rotateend:"rotate",rotatecancel:"rotate",tripan:"tripan",tripanstart:"tripan",tripanmove:"tripan",tripanup:"tripan",tripandown:"tripan",tripanleft:"tripan",tripanright:"tripan",tripanend:"tripan",tripancancel:"tripan",pan:"pan",panstart:"pan",panmove:"pan",panup:"pan",pandown:"pan",panleft:"pan",panright:"pan",panend:"pan",pancancel:"pan",swipe:"swipe",swipeleft:"swipe",swiperight:"swipe",swipeup:"swipe",swipedown:"swipe"},Xb={click:"tap",anyclick:"anytap",dblclick:"doubletap",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup",mouseover:"pointerover",mouseout:"pointerout",mouseleave:"pointerleave"},mz=typeof navigator<"u"&&navigator.userAgent?navigator.userAgent.toLowerCase():"",To=typeof window<"u"?window:global;let Hm=!1;try{const t={get passive(){return Hm=!0,!0}};To.addEventListener("test",null,t),To.removeEventListener("test",null)}catch{Hm=!1}const yz=mz.indexOf("firefox")!==-1,{WHEEL_EVENTS:vz}=iv,Yb="wheel",Kb=4.000244140625,_z=40,bz=.25;class Ez extends dh{constructor(e,n,r){super(e,n,r),this.handleEvent=i=>{if(!this.options.enable)return;let s=i.deltaY;To.WheelEvent&&(yz&&i.deltaMode===To.WheelEvent.DOM_DELTA_PIXEL&&(s/=To.devicePixelRatio),i.deltaMode===To.WheelEvent.DOM_DELTA_LINE&&(s*=_z)),s!==0&&s%Kb===0&&(s=Math.floor(s/Kb)),i.shiftKey&&s&&(s=s*bz),this.callback({type:Yb,center:{x:i.clientX,y:i.clientY},delta:-s,srcEvent:i,pointerType:"mouse",target:i.target})},this.events=(this.options.events||[]).concat(vz),this.events.forEach(i=>e.addEventListener(i,this.handleEvent,Hm?{passive:!1}:!1))}destroy(){this.events.forEach(e=>this.element.removeEventListener(e,this.handleEvent))}enableEventType(e,n){e===Yb&&(this.options.enable=n)}}const{MOUSE_EVENTS:wz}=iv,qb="pointermove",Zb="pointerover",Qb="pointerout",Jb="pointerenter",eE="pointerleave";class xz extends dh{constructor(e,n,r){super(e,n,r),this.handleEvent=s=>{this.handleOverEvent(s),this.handleOutEvent(s),this.handleEnterEvent(s),this.handleLeaveEvent(s),this.handleMoveEvent(s)},this.pressed=!1;const{enable:i}=this.options;this.enableMoveEvent=i,this.enableLeaveEvent=i,this.enableEnterEvent=i,this.enableOutEvent=i,this.enableOverEvent=i,this.events=(this.options.events||[]).concat(wz),this.events.forEach(s=>e.addEventListener(s,this.handleEvent))}destroy(){this.events.forEach(e=>this.element.removeEventListener(e,this.handleEvent))}enableEventType(e,n){e===qb&&(this.enableMoveEvent=n),e===Zb&&(this.enableOverEvent=n),e===Qb&&(this.enableOutEvent=n),e===Jb&&(this.enableEnterEvent=n),e===eE&&(this.enableLeaveEvent=n)}handleOverEvent(e){this.enableOverEvent&&e.type==="mouseover"&&this._emit(Zb,e)}handleOutEvent(e){this.enableOutEvent&&e.type==="mouseout"&&this._emit(Qb,e)}handleEnterEvent(e){this.enableEnterEvent&&e.type==="mouseenter"&&this._emit(Jb,e)}handleLeaveEvent(e){this.enableLeaveEvent&&e.type==="mouseleave"&&this._emit(eE,e)}handleMoveEvent(e){if(this.enableMoveEvent)switch(e.type){case"mousedown":e.button>=0&&(this.pressed=!0);break;case"mousemove":e.which===0&&(this.pressed=!1),this.pressed||this._emit(qb,e);break;case"mouseup":this.pressed=!1;break}}_emit(e,n){this.callback({type:e,center:{x:n.clientX,y:n.clientY},srcEvent:n,pointerType:"mouse",target:n.target})}}const{KEY_EVENTS:Tz}=iv,tE="keydown",nE="keyup";class Sz extends dh{constructor(e,n,r){super(e,n,r),this.handleEvent=i=>{const s=i.target||i.srcElement;s.tagName==="INPUT"&&s.type==="text"||s.tagName==="TEXTAREA"||(this.enableDownEvent&&i.type==="keydown"&&this.callback({type:tE,srcEvent:i,key:i.key,target:i.target}),this.enableUpEvent&&i.type==="keyup"&&this.callback({type:nE,srcEvent:i,key:i.key,target:i.target}))},this.enableDownEvent=this.options.enable,this.enableUpEvent=this.options.enable,this.events=(this.options.events||[]).concat(Tz),e.tabIndex=this.options.tabIndex||0,e.style.outline="none",this.events.forEach(i=>e.addEventListener(i,this.handleEvent))}destroy(){this.events.forEach(e=>this.element.removeEventListener(e,this.handleEvent))}enableEventType(e,n){e===tE&&(this.enableDownEvent=n),e===nE&&(this.enableUpEvent=n)}}const rE="contextmenu";class Pz extends dh{constructor(e,n,r){super(e,n,r),this.handleEvent=i=>{this.options.enable&&this.callback({type:rE,center:{x:i.clientX,y:i.clientY},srcEvent:i,pointerType:"mouse",target:i.target})},e.addEventListener("contextmenu",this.handleEvent)}destroy(){this.element.removeEventListener("contextmenu",this.handleEvent)}enableEventType(e,n){e===rE&&(this.options.enable=n)}}const Xm=1,ad=2,Ym=4,Az={pointerdown:Xm,pointermove:ad,pointerup:Ym,mousedown:Xm,mousemove:ad,mouseup:Ym},Cz=1,Lz=2,Rz=3,Oz=0,Iz=1,Mz=2,kz=1,Nz=2,Fz=4;function Dz(t){const e=Az[t.srcEvent.type];if(!e)return null;const{buttons:n,button:r,which:i}=t.srcEvent;let s=!1,o=!1,a=!1;return e===Ym||e===ad&&!Number.isFinite(n)?(s=i===Cz,o=i===Lz,a=i===Rz):e===ad?(s=!!(n&kz),o=!!(n&Fz),a=!!(n&Nz)):e===Xm&&(s=r===Oz,o=r===Iz,a=r===Mz),{leftButton:s,middleButton:o,rightButton:a}}function Bz(t,e){const n=t.center;if(!n)return null;const r=e.getBoundingClientRect(),i=r.width/e.offsetWidth||1,s=r.height/e.offsetHeight||1,o={x:(n.x-r.left-e.clientLeft)/i,y:(n.y-r.top-e.clientTop)/s};return{center:n,offsetCenter:o}}const ng={srcElement:"root",priority:0};class zz{constructor(e){this.handleEvent=n=>{if(this.isEmpty())return;const r=this._normalizeEvent(n);let i=n.srcEvent.target;for(;i&&i!==r.rootElement;){if(this._emit(r,i),r.handled)return;i=i.parentNode}this._emit(r,"root")},this.eventManager=e,this.handlers=[],this.handlersByElement=new Map,this._active=!1}isEmpty(){return!this._active}add(e,n,r,i=!1,s=!1){const{handlers:o,handlersByElement:a}=this;let l=ng;typeof r=="string"||r&&r.addEventListener?l={...ng,srcElement:r}:r&&(l={...ng,...r});let c=a.get(l.srcElement);c||(c=[],a.set(l.srcElement,c));const u={type:e,handler:n,srcElement:l.srcElement,priority:l.priority};i&&(u.once=!0),s&&(u.passive=!0),o.push(u),this._active=this._active||!u.passive;let f=c.length-1;for(;f>=0&&!(c[f].priority>=u.priority);)f--;c.splice(f+1,0,u)}remove(e,n){const{handlers:r,handlersByElement:i}=this;for(let s=r.length-1;s>=0;s--){const o=r[s];if(o.type===e&&o.handler===n){r.splice(s,1);const a=i.get(o.srcElement);a.splice(a.indexOf(o),1),a.length===0&&i.delete(o.srcElement)}}this._active=r.some(s=>!s.passive)}_emit(e,n){const r=this.handlersByElement.get(n);if(r){let i=!1;const s=()=>{e.handled=!0},o=()=>{e.handled=!0,i=!0},a=[];for(let l=0;l<r.length;l++){const{type:c,handler:u,once:f}=r[l];if(u({...e,type:c,stopPropagation:s,stopImmediatePropagation:o}),f&&a.push(r[l]),i)break}for(let l=0;l<a.length;l++){const{type:c,handler:u}=a[l];this.remove(c,u)}}}_normalizeEvent(e){const n=this.eventManager.getElement();return{...e,...Dz(e),...Bz(e,n),preventDefault:()=>{e.srcEvent.preventDefault()},stopImmediatePropagation:null,stopPropagation:null,handled:!1,rootElement:n}}}const Uz={events:null,recognizers:null,recognizerOptions:{},Manager:fz,touchAction:"none",tabIndex:0};class jz{constructor(e=null,n){this._onBasicInput=i=>{const{srcEvent:s}=i,o=pz[s.type];o&&this.manager.emit(o,i)},this._onOtherEvent=i=>{this.manager.emit(i.type,i)},this.options={...Uz,...n},this.events=new Map,this.setElement(e);const{events:r}=this.options;r&&this.on(r)}getElement(){return this.element}setElement(e){if(this.element&&this.destroy(),this.element=e,!e)return;const{options:n}=this,r=n.Manager;this.manager=new r(e,{touchAction:n.touchAction,recognizers:n.recognizers||dz}).on("hammer.input",this._onBasicInput),n.recognizers||Object.keys(Hb).forEach(i=>{const s=this.manager.get(i);s&&Hb[i].forEach(o=>{s.recognizeWith(o)})});for(const i in n.recognizerOptions){const s=this.manager.get(i);if(s){const o=n.recognizerOptions[i];delete o.enable,s.set(o)}}this.wheelInput=new Ez(e,this._onOtherEvent,{enable:!1}),this.moveInput=new xz(e,this._onOtherEvent,{enable:!1}),this.keyInput=new Sz(e,this._onOtherEvent,{enable:!1,tabIndex:n.tabIndex}),this.contextmenuInput=new Pz(e,this._onOtherEvent,{enable:!1});for(const[i,s]of this.events)s.isEmpty()||(this._toggleRecognizer(s.recognizerName,!0),this.manager.on(i,s.handleEvent))}destroy(){this.element&&(this.wheelInput.destroy(),this.moveInput.destroy(),this.keyInput.destroy(),this.contextmenuInput.destroy(),this.manager.destroy(),this.wheelInput=null,this.moveInput=null,this.keyInput=null,this.contextmenuInput=null,this.manager=null,this.element=null)}on(e,n,r){this._addEventHandler(e,n,r,!1)}once(e,n,r){this._addEventHandler(e,n,r,!0)}watch(e,n,r){this._addEventHandler(e,n,r,!1,!0)}off(e,n){this._removeEventHandler(e,n)}_toggleRecognizer(e,n){const{manager:r}=this;if(!r)return;const i=r.get(e);if(i&&i.options.enable!==n){i.set({enable:n});const s=hz[e];s&&!this.options.recognizers&&s.forEach(o=>{const a=r.get(o);n?(a.requireFailure(e),i.dropRequireFailure(o)):a.dropRequireFailure(e)})}this.wheelInput.enableEventType(e,n),this.moveInput.enableEventType(e,n),this.keyInput.enableEventType(e,n),this.contextmenuInput.enableEventType(e,n)}_addEventHandler(e,n,r,i,s){if(typeof e!="string"){r=n;for(const u in e)this._addEventHandler(u,e[u],r,i,s);return}const{manager:o,events:a}=this,l=Xb[e]||e;let c=a.get(l);c||(c=new zz(this),a.set(l,c),c.recognizerName=gz[l]||l,o&&o.on(l,c.handleEvent)),c.add(e,n,r,i,s),c.isEmpty()||this._toggleRecognizer(c.recognizerName,!0)}_removeEventHandler(e,n){if(typeof e!="string"){for(const o in e)this._removeEventHandler(o,e[o]);return}const{events:r}=this,i=Xb[e]||e,s=r.get(i);if(s&&(s.remove(e,n),s.isEmpty())){const{recognizerName:o}=s;let a=!1;for(const l of r.values())if(l.recognizerName===o&&!l.isEmpty()){a=!0;break}a||this._toggleRecognizer(o,!1)}}}function ns(){}const Vz=({isDragging:t})=>t?"grabbing":"grab",cA={id:"",width:"100%",height:"100%",style:null,viewState:null,initialViewState:null,pickingRadius:0,layerFilter:null,glOptions:{},parameters:{},parent:null,gl:null,canvas:null,layers:[],effects:[],views:null,controller:null,useDevicePixels:!0,touchAction:"none",eventRecognizerOptions:{},_framebuffer:null,_animate:!1,_pickable:!0,_typedArrayManagerProps:{},_customRender:null,onWebGLInitialized:ns,onResize:ns,onViewStateChange:ns,onInteractionStateChange:ns,onBeforeRender:ns,onAfterRender:ns,onLoad:ns,onError:t=>ae.error(t.message,t.cause)(),onHover:null,onClick:null,onDragStart:null,onDrag:null,onDragEnd:null,_onMetrics:null,getCursor:Vz,getTooltip:null,debug:!1,drawPickingColors:!1};class hh{constructor(e){_(this,"props",void 0),_(this,"width",0),_(this,"height",0),_(this,"userData",{}),_(this,"canvas",null),_(this,"viewManager",null),_(this,"layerManager",null),_(this,"effectManager",null),_(this,"deckRenderer",null),_(this,"deckPicker",null),_(this,"eventManager",null),_(this,"tooltip",null),_(this,"metrics",void 0),_(this,"animationLoop",void 0),_(this,"stats",void 0),_(this,"viewState",void 0),_(this,"cursorState",void 0),_(this,"_needsRedraw",void 0),_(this,"_pickRequest",void 0),_(this,"_lastPointerDownInfo",null),_(this,"_metricsCounter",void 0),_(this,"_onPointerMove",n=>{const{_pickRequest:r}=this;if(n.type==="pointerleave")r.x=-1,r.y=-1,r.radius=0;else{if(n.leftButton||n.rightButton)return;{const i=n.offsetCenter;if(!i)return;r.x=i.x,r.y=i.y,r.radius=this.props.pickingRadius}}this.layerManager&&(this.layerManager.context.mousePosition={x:r.x,y:r.y}),r.event=n}),_(this,"_onEvent",n=>{const r=U1[n.type],i=n.offsetCenter;if(!r||!i||!this.layerManager)return;const s=this.layerManager.getLayers(),o=this.deckPicker.getLastPickedObject({x:i.x,y:i.y,layers:s,viewports:this.getViewports(i)},this._lastPointerDownInfo),{layer:a}=o,l=a&&(a[r.handler]||a.props[r.handler]),c=this.props[r.handler];let u=!1;l&&(u=l.call(a,o,n)),!u&&c&&c(o,n)}),_(this,"_onPointerDown",n=>{const r=n.offsetCenter,i=this._pick("pickObject","pickObject Time",{x:r.x,y:r.y,radius:this.props.pickingRadius});this._lastPointerDownInfo=i.result[0]||i.emptyInfo}),this.props={...cA,...e},e=this.props,this._needsRedraw="Initial render",this._pickRequest={mode:"hover",x:-1,y:-1,radius:0,event:null},this.cursorState={isHovering:!1,isDragging:!1},e.viewState&&e.initialViewState&&ae.warn("View state tracking is disabled. Use either `initialViewState` for auto update or `viewState` for manual update.")(),sP()==="IE"&&ae.warn("IE 11 is not supported")(),this.viewState=e.initialViewState,e.gl||typeof document<"u"&&(this.canvas=this._createCanvas(e)),this.animationLoop=this._createAnimationLoop(e),this.stats=new Gy({id:"deck.gl"}),this.metrics={fps:0,setPropsTime:0,updateAttributesTime:0,framesRedrawn:0,pickTime:0,pickCount:0,gpuTime:0,gpuTimePerFrame:0,cpuTime:0,cpuTimePerFrame:0,bufferMemory:0,textureMemory:0,renderbufferMemory:0,gpuMemory:0},this._metricsCounter=0,this.setProps(e),e._typedArrayManagerProps&&na.setOptions(e._typedArrayManagerProps),this.animationLoop.start()}finalize(){var e,n,r,i,s,o,a,l;if((e=this.animationLoop)===null||e===void 0||e.stop(),this.animationLoop=null,this._lastPointerDownInfo=null,(n=this.layerManager)===null||n===void 0||n.finalize(),this.layerManager=null,(r=this.viewManager)===null||r===void 0||r.finalize(),this.viewManager=null,(i=this.effectManager)===null||i===void 0||i.finalize(),this.effectManager=null,(s=this.deckRenderer)===null||s===void 0||s.finalize(),this.deckRenderer=null,(o=this.deckPicker)===null||o===void 0||o.finalize(),this.deckPicker=null,(a=this.eventManager)===null||a===void 0||a.destroy(),this.eventManager=null,(l=this.tooltip)===null||l===void 0||l.remove(),this.tooltip=null,!this.props.canvas&&!this.props.gl&&this.canvas){var c;(c=this.canvas.parentElement)===null||c===void 0||c.removeChild(this.canvas),this.canvas=null}}setProps(e){this.stats.get("setProps Time").timeStart(),"onLayerHover"in e&&ae.removed("onLayerHover","onHover")(),"onLayerClick"in e&&ae.removed("onLayerClick","onClick")(),e.initialViewState&&!pr(this.props.initialViewState,e.initialViewState,3)&&(this.viewState=e.initialViewState),Object.assign(this.props,e),this._setCanvasSize(this.props);const n=Object.create(this.props);Object.assign(n,{views:this._getViews(),width:this.width,height:this.height,viewState:this._getViewState()}),this.animationLoop.setProps(n),this.layerManager&&(this.viewManager.setProps(n),this.layerManager.activateViewport(this.getViewports()[0]),this.layerManager.setProps(n),this.effectManager.setProps(n),this.deckRenderer.setProps(n),this.deckPicker.setProps(n)),this.stats.get("setProps Time").timeEnd()}needsRedraw(e={clearRedrawFlags:!1}){if(!this.layerManager)return!1;if(this.props._animate)return"Deck._animate";let n=this._needsRedraw;e.clearRedrawFlags&&(this._needsRedraw=!1);const r=this.viewManager.needsRedraw(e),i=this.layerManager.needsRedraw(e),s=this.effectManager.needsRedraw(e),o=this.deckRenderer.needsRedraw(e);return n=n||r||i||s||o,n}redraw(e){if(!this.layerManager)return;let n=this.needsRedraw({clearRedrawFlags:!0});n=e||n,n&&(this.stats.get("Redraw Count").incrementCount(),this.props._customRender?this.props._customRender(n):this._drawLayers(n))}get isInitialized(){return this.viewManager!==null}getViews(){return gt(this.viewManager),this.viewManager.views}getViewports(e){return gt(this.viewManager),this.viewManager.getViewports(e)}getCanvas(){return this.canvas}pickObject(e){const n=this._pick("pickObject","pickObject Time",e).result;return n.length?n[0]:null}pickMultipleObjects(e){return e.depth=e.depth||10,this._pick("pickObject","pickMultipleObjects Time",e).result}pickObjects(e){return this._pick("pickObjects","pickObjects Time",e)}_addResources(e,n=!1){for(const r in e)this.layerManager.resourceManager.add({resourceId:r,data:e[r],forceUpdate:n})}_removeResources(e){for(const n of e)this.layerManager.resourceManager.remove(n)}_addDefaultEffect(e){this.effectManager.addDefaultEffect(e)}_pick(e,n,r){gt(this.deckPicker);const{stats:i}=this;i.get("Pick Count").incrementCount(),i.get(n).timeStart();const s=this.deckPicker[e]({layers:this.layerManager.getLayers(r),views:this.viewManager.getViews(),viewports:this.getViewports(r),onViewportActive:this.layerManager.activateViewport,effects:this.effectManager.getEffects(),...r});return i.get(n).timeEnd(),s}_createCanvas(e){let n=e.canvas;return typeof n=="string"&&(n=document.getElementById(n),gt(n)),n||(n=document.createElement("canvas"),n.id=e.id||"deckgl-overlay",(e.parent||document.body).appendChild(n)),Object.assign(n.style,e.style),n}_setCanvasSize(e){if(!this.canvas)return;const{width:n,height:r}=e;if(n||n===0){const s=Number.isFinite(n)?"".concat(n,"px"):n;this.canvas.style.width=s}if(r||r===0){var i;const s=Number.isFinite(r)?"".concat(r,"px"):r;this.canvas.style.position=((i=e.style)===null||i===void 0?void 0:i.position)||"absolute",this.canvas.style.height=s}}_updateCanvasSize(){var e,n;const{canvas:r}=this;if(!r)return;const i=(e=r.clientWidth)!==null&&e!==void 0?e:r.width,s=(n=r.clientHeight)!==null&&n!==void 0?n:r.height;if(i!==this.width||s!==this.height){var o,a;this.width=i,this.height=s,(o=this.viewManager)===null||o===void 0||o.setProps({width:i,height:s}),(a=this.layerManager)===null||a===void 0||a.activateViewport(this.getViewports()[0]),this.props.onResize({width:i,height:s})}}_createAnimationLoop(e){const{width:n,height:r,gl:i,glOptions:s,debug:o,onError:a,onBeforeRender:l,onAfterRender:c,useDevicePixels:u}=e;return new WN({width:n,height:r,useDevicePixels:u,autoResizeDrawingBuffer:!i,autoResizeViewport:!1,gl:i,onCreateContext:f=>dP({...s,...f,canvas:this.canvas,debug:o,onContextLost:()=>this._onContextLost()}),onInitialize:f=>this._setGLContext(f.gl),onRender:this._onRenderFrame.bind(this),onBeforeRender:l,onAfterRender:c,onError:a})}_getViewState(){return this.props.viewState||this.viewState}_getViews(){let e=this.props.views||[new rA({id:"default-view"})];return e=Array.isArray(e)?e:[e],e.length&&this.props.controller&&(e[0].props.controller=this.props.controller),e}_onContextLost(){const{onError:e}=this.props;this.animationLoop&&e&&e(new Error("WebGL context is lost"))}_pickAndCallback(){const{_pickRequest:e}=this;if(e.event){const{result:r,emptyInfo:i}=this._pick("pickObject","pickObject Time",e);this.cursorState.isHovering=r.length>0;let s=i,o=!1;for(const a of r){var n;s=a,o=((n=a.layer)===null||n===void 0?void 0:n.onHover(a,e.event))||o}if(!o&&this.props.onHover&&this.props.onHover(s,e.event),this.props.getTooltip&&this.tooltip){const a=this.props.getTooltip(s);this.tooltip.setTooltip(a,s.x,s.y)}e.event=null}}_updateCursor(){const e=this.props.parent||this.canvas;e&&(e.style.cursor=this.props.getCursor(this.cursorState))}_setGLContext(e){if(this.layerManager)return;this.canvas||(this.canvas=e.canvas,$y(e,{enable:!0,copyState:!0})),this.tooltip=new sz(this.canvas),Xr(e,{blend:!0,blendFunc:[770,771,1,771],polygonOffsetFill:!0,depthTest:!0,depthFunc:515}),this.props.onWebGLInitialized(e);const n=new VP;n.play(),this.animationLoop.attachTimeline(n),this.eventManager=new jz(this.props.parent||e.canvas,{touchAction:this.props.touchAction,recognizerOptions:this.props.eventRecognizerOptions,events:{pointerdown:this._onPointerDown,pointermove:this._onPointerMove,pointerleave:this._onPointerMove}});for(const i in U1)this.eventManager.on(i,this._onEvent);this.viewManager=new IB({timeline:n,eventManager:this.eventManager,onViewStateChange:this._onViewStateChange.bind(this),onInteractionStateChange:this._onInteractionStateChange.bind(this),views:this._getViews(),viewState:this._getViewState(),width:this.width,height:this.height});const r=this.viewManager.getViewports()[0];this.layerManager=new OB(e,{deck:this,stats:this.stats,viewport:r,timeline:n}),this.effectManager=new YB,this.deckRenderer=new ZB(e),this.deckPicker=new rz(e),this.setProps(this.props),this._updateCanvasSize(),this.props.onLoad()}_drawLayers(e,n){const{gl:r}=this.layerManager.context;Xr(r,this.props.parameters),this.props.onBeforeRender({gl:r}),this.deckRenderer.renderLayers({target:this.props._framebuffer,layers:this.layerManager.getLayers(),viewports:this.viewManager.getViewports(),onViewportActive:this.layerManager.activateViewport,views:this.viewManager.getViews(),pass:"screen",effects:this.effectManager.getEffects(),...n}),this.props.onAfterRender({gl:r})}_onRenderFrame(e){this._getFrameStats(),this._metricsCounter++%60===0&&(this._getMetrics(),this.stats.reset(),ae.table(4,this.metrics)(),this.props._onMetrics&&this.props._onMetrics(this.metrics)),this._updateCanvasSize(),this._updateCursor(),this.tooltip.isVisible&&this.viewManager.needsRedraw()&&this.tooltip.setTooltip(null),this.layerManager.updateLayers(),this._pickAndCallback(),this.redraw(),this.viewManager&&this.viewManager.updateViewStates()}_onViewStateChange(e){const n=this.props.onViewStateChange(e)||e.viewState;this.viewState&&(this.viewState={...this.viewState,[e.viewId]:n},this.props.viewState||this.viewManager&&this.viewManager.setProps({viewState:this.viewState}))}_onInteractionStateChange(e){this.cursorState.isDragging=e.isDragging||!1,this.props.onInteractionStateChange(e)}_getFrameStats(){const{stats:e}=this;e.get("frameRate").timeEnd(),e.get("frameRate").timeStart();const n=this.animationLoop.stats;e.get("GPU Time").addTime(n.get("GPU Time").lastTiming),e.get("CPU Time").addTime(n.get("CPU Time").lastTiming)}_getMetrics(){const{metrics:e,stats:n}=this;e.fps=n.get("frameRate").getHz(),e.setPropsTime=n.get("setProps Time").time,e.updateAttributesTime=n.get("Update Attributes").time,e.framesRedrawn=n.get("Redraw Count").count,e.pickTime=n.get("pickObject Time").time+n.get("pickMultipleObjects Time").time+n.get("pickObjects Time").time,e.pickCount=n.get("Pick Count").count,e.gpuTime=n.get("GPU Time").time,e.cpuTime=n.get("CPU Time").time,e.gpuTimePerFrame=n.get("GPU Time").getAverageTime(),e.cpuTimePerFrame=n.get("CPU Time").getAverageTime();const r=ds.get("Memory Usage");e.bufferMemory=r.get("Buffer Memory").count,e.textureMemory=r.get("Texture Memory").count,e.renderbufferMemory=r.get("Renderbuffer Memory").count,e.gpuMemory=r.get("GPU Memory").count}}_(hh,"defaultProps",cA);_(hh,"VERSION",qI);class rg{constructor(e,n){_(this,"opts",void 0),_(this,"source",void 0),this.opts=n,this.source=e}get value(){return this.source.value}getValue(){const e=this.source.getBuffer(),n=this.getAccessor();if(e)return[e,n];const{value:r}=this.source,{size:i}=n;let s=r;if(r&&r.length!==i){s=new Float32Array(i);const o=n.elementOffset||0;for(let a=0;a<i;++a)s[a]=r[o+a]}return s}getAccessor(){return{...this.source.getAccessor(),...this.opts}}}function $z(t){switch(t){case 5126:return Float32Array;case 5130:return Float64Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return Uint8ClampedArray;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Unknown GL type")}}function af(t){return t.stride||t.size*t.bytesPerElement}function uA(t,e){e.offset&&ae.removed("shaderAttribute.offset","vertexOffset, elementOffset")();const n=af(t),r=e.vertexOffset!==void 0?e.vertexOffset:t.vertexOffset||0,i=e.elementOffset||0,s=r*n+i*t.bytesPerElement+(t.offset||0);return{...e,offset:s,stride:n}}function Gz(t,e){const n=uA(t,e);return{high:n,low:{...n,offset:n.offset+t.size*4}}}class Wz{constructor(e,n,r){_(this,"gl",void 0),_(this,"id",void 0),_(this,"size",void 0),_(this,"settings",void 0),_(this,"value",void 0),_(this,"doublePrecision",void 0),_(this,"_buffer",void 0),_(this,"state",void 0),this.gl=e,this.id=n.id||"",this.size=n.size||1;const i=n.logicalType||n.type,s=i===5130;let{defaultValue:o}=n;o=Number.isFinite(o)?[o]:o||new Array(this.size).fill(0);let a;s?a=5126:!i&&n.isIndexed?a=e&&Ek(e,ze.ELEMENT_INDEX_UINT32)?5125:5123:a=i||5126;let l=$z(i||a||5126);this.doublePrecision=s,s&&n.fp64===!1&&(l=Float32Array),this.value=null,this.settings={...n,defaultType:l,defaultValue:o,logicalType:i,type:a,size:this.size,bytesPerElement:l.BYTES_PER_ELEMENT},this.state={...r,externalBuffer:null,bufferAccessor:this.settings,allocatedValue:null,numInstances:0,bounds:null,constant:!1},this._buffer=null}get isConstant(){return this.state.constant}get buffer(){if(!this._buffer){const{isIndexed:e,type:n}=this.settings;this._buffer=new Ae(this.gl,{id:this.id,target:e?34963:34962,accessor:{type:n}})}return this._buffer}get byteOffset(){const e=this.getAccessor();return e.vertexOffset?e.vertexOffset*af(e):0}get numInstances(){return this.state.numInstances}set numInstances(e){this.state.numInstances=e}delete(){this._buffer&&(this._buffer.delete(),this._buffer=null),na.release(this.state.allocatedValue)}getShaderAttributes(e,n){if(this.doublePrecision){const r={},i=this.value instanceof Float64Array,s=Gz(this.getAccessor(),n||{});return r[e]=new rg(this,s.high),r["".concat(e,"64Low")]=i?new rg(this,s.low):new Float32Array(this.size),r}if(n){const r=uA(this.getAccessor(),n);return{[e]:new rg(this,r)}}return{[e]:this}}getBuffer(){return this.state.constant?null:this.state.externalBuffer||this._buffer}getValue(){return this.state.constant?this.value:[this.getBuffer(),this.getAccessor()]}getAccessor(){return this.state.bufferAccessor}getBounds(){if(this.state.bounds)return this.state.bounds;let e=null;if(this.state.constant&&this.value){const n=Array.from(this.value);e=[n,n]}else{const{value:n,numInstances:r,size:i}=this,s=r*i;if(n&&s&&n.length>=s){const o=new Array(i).fill(1/0),a=new Array(i).fill(-1/0);for(let l=0;l<s;)for(let c=0;c<i;c++){const u=n[l++];u<o[c]&&(o[c]=u),u>a[c]&&(a[c]=u)}e=[o,a]}}return this.state.bounds=e,e}setData(e){const{state:n}=this;let r;ArrayBuffer.isView(e)?r={value:e}:e instanceof Ae?r={buffer:e}:r=e;const i={...this.settings,...r};if(n.bufferAccessor=i,n.bounds=null,r.constant){let s=r.value;if(s=this._normalizeValue(s,[],0),this.settings.normalized&&(s=this.normalizeConstant(s)),!(!n.constant||!this._areValuesEqual(s,this.value)))return!1;n.externalBuffer=null,n.constant=!0,this.value=s}else if(r.buffer){const s=r.buffer;n.externalBuffer=s,n.constant=!1,this.value=r.value||null;const o=r.value instanceof Float64Array;i.type=r.type||s.accessor.type,i.bytesPerElement=s.accessor.BYTES_PER_ELEMENT*(o?2:1),i.stride=af(i)}else if(r.value){this._checkExternalBuffer(r);let s=r.value;n.externalBuffer=null,n.constant=!1,this.value=s,i.bytesPerElement=s.BYTES_PER_ELEMENT,i.stride=af(i);const{buffer:o,byteOffset:a}=this;this.doublePrecision&&s instanceof Float64Array&&(s=Jp(s,i));const l=s.byteLength+a+i.stride*2;o.byteLength<l&&o.reallocate(l),o.setAccessor(null),o.subData({data:s,offset:a}),i.type=r.type||o.accessor.type}return!0}updateSubBuffer(e={}){this.state.bounds=null;const n=this.value,{startOffset:r=0,endOffset:i}=e;this.buffer.subData({data:this.doublePrecision&&n instanceof Float64Array?Jp(n,{size:this.size,startIndex:r,endIndex:i}):n.subarray(r,i),offset:r*n.BYTES_PER_ELEMENT+this.byteOffset})}allocate(e,n=!1){const{state:r}=this,i=r.allocatedValue,s=na.allocate(i,e+1,{size:this.size,type:this.settings.defaultType,copy:n});this.value=s;const{buffer:o,byteOffset:a}=this;return o.byteLength<s.byteLength+a&&(o.reallocate(s.byteLength+a),n&&i&&o.subData({data:i instanceof Float64Array?Jp(i,this):i,offset:a})),r.allocatedValue=s,r.constant=!1,r.externalBuffer=null,r.bufferAccessor=this.settings,!0}_checkExternalBuffer(e){const{value:n}=e;if(!ArrayBuffer.isView(n))throw new Error("Attribute ".concat(this.id," value is not TypedArray"));const r=this.settings.defaultType;let i=!1;if(this.doublePrecision&&(i=n.BYTES_PER_ELEMENT<4),i)throw new Error("Attribute ".concat(this.id," does not support ").concat(n.constructor.name));!(n instanceof r)&&this.settings.normalized&&!("normalized"in e)&&ae.warn("Attribute ".concat(this.id," is normalized"))()}normalizeConstant(e){switch(this.settings.type){case 5120:return new Float32Array(e).map(n=>(n+128)/255*2-1);case 5122:return new Float32Array(e).map(n=>(n+32768)/65535*2-1);case 5121:return new Float32Array(e).map(n=>n/255);case 5123:return new Float32Array(e).map(n=>n/65535);default:return e}}_normalizeValue(e,n,r){const{defaultValue:i,size:s}=this.settings;if(Number.isFinite(e))return n[r]=e,n;if(!e){let o=s;for(;--o>=0;)n[r+o]=i[o];return n}switch(s){case 4:n[r+3]=Number.isFinite(e[3])?e[3]:i[3];case 3:n[r+2]=Number.isFinite(e[2])?e[2]:i[2];case 2:n[r+1]=Number.isFinite(e[1])?e[1]:i[1];case 1:n[r+0]=Number.isFinite(e[0])?e[0]:i[0];break;default:let o=s;for(;--o>=0;)n[r+o]=Number.isFinite(e[o])?e[o]:i[o]}return n}_areValuesEqual(e,n){if(!e||!n)return!1;const{size:r}=this;for(let i=0;i<r;i++)if(e[i]!==n[i])return!1;return!0}}const iE=[],sE=[];function ph(t,e=0,n=1/0){let r=iE;const i={index:-1,data:t,target:[]};return t?typeof t[Symbol.iterator]=="function"?r=t:t.length>0&&(sE.length=t.length,r=sE):r=iE,(e>0||Number.isFinite(n))&&(r=(Array.isArray(r)?r:Array.from(r)).slice(e,n),i.index=e-1),{iterable:r,objectInfo:i}}function fA(t){return t&&t[Symbol.asyncIterator]}function dA(t,e){const{size:n,stride:r,offset:i,startIndices:s,nested:o}=e,a=t.BYTES_PER_ELEMENT,l=r?r/a:n,c=i?i/a:0,u=Math.floor((t.length-c)/l);return(f,{index:d,target:h})=>{if(!s){const m=d*l+c;for(let y=0;y<n;y++)h[y]=t[m+y];return h}const p=s[d],g=s[d+1]||u;let E;if(o){E=new Array(g-p);for(let m=p;m<g;m++){const y=m*l+c;h=new Array(n);for(let v=0;v<n;v++)h[v]=t[y+v];E[m-p]=h}}else if(l===n)E=t.subarray(p*n+c,g*n+c);else{E=new t.constructor((g-p)*n);let m=0;for(let y=p;y<g;y++){const v=y*l+c;for(let b=0;b<n;b++)E[m++]=t[v+b]}}return E}}const Hz=[],lf=[[0,1/0]];function Xz(t,e){if(t===lf||(e[0]<0&&(e[0]=0),e[0]>=e[1]))return t;const n=[],r=t.length;let i=0;for(let s=0;s<r;s++){const o=t[s];o[1]<e[0]?(n.push(o),i=s+1):o[0]>e[1]?n.push(o):e=[Math.min(o[0],e[0]),Math.max(o[1],e[1])]}return n.splice(i,0,e),n}function ig(t){const{source:e,target:n,start:r=0,size:i,getData:s}=t,o=t.end||n.length,a=e.length,l=o-r;if(a>l){n.set(e.subarray(0,l),r);return}if(n.set(e,r),!s)return;let c=a;for(;c<l;){const u=s(c,e);for(let f=0;f<i;f++)n[r+c]=u[f]||0,c++}}function Yz({source:t,target:e,size:n,getData:r,sourceStartIndices:i,targetStartIndices:s}){if(!Array.isArray(s))return ig({source:t,target:e,size:n,getData:r}),e;let o=0,a=0;const l=r&&((u,f)=>r(u+a,f)),c=Math.min(i.length,s.length);for(let u=1;u<c;u++){const f=i[u]*n,d=s[u]*n;ig({source:t.subarray(o,f),target:e,start:a,end:d,size:n,getData:l}),o=f,a=d}return a<e.length&&ig({source:[],target:e,start:a,size:n,getData:l}),e}const Kz={interpolation:{duration:0,easing:t=>t},spring:{stiffness:.05,damping:.5}};function hA(t,e){if(!t)return null;Number.isFinite(t)&&(t={type:"interpolation",duration:t});const n=t.type||"interpolation";return{...Kz[n],...e,...t,type:n}}function pA(t,e){const n=e.getBuffer();return n?[n,{divisor:0,size:e.size,normalized:e.settings.normalized}]:e.value}function gA(t){switch(t){case 1:return"float";case 2:return"vec2";case 3:return"vec3";case 4:return"vec4";default:throw new Error('No defined attribute type for size "'.concat(t,'"'))}}function mA(t){t.push(t.shift())}function sv(t,e){const{doublePrecision:n,settings:r,value:i,size:s}=t,o=n&&i instanceof Float64Array?2:1;return(r.noAlloc?i.length:e*s)*o}function yA({buffer:t,numInstances:e,attribute:n,fromLength:r,fromStartIndices:i,getData:s=o=>o}){const o=n.doublePrecision&&n.value instanceof Float64Array?2:1,a=n.size*o,l=n.byteOffset,c=n.startIndices,u=i&&c,f=sv(n,e),d=n.isConstant;if(!u&&r>=f)return;const h=d?n.value:n.getBuffer().getData({srcByteOffset:l});if(n.settings.normalized&&!d){const m=s;s=(y,v)=>n.normalizeConstant(m(y,v))}const p=d?(m,y)=>s(h,y):(m,y)=>s(h.subarray(m,m+a),y),g=t.getData({length:r}),E=new Float32Array(f);Yz({source:g,target:E,sourceStartIndices:i,targetStartIndices:c,size:a,getData:p}),t.byteLength<E.byteLength+l&&t.reallocate(E.byteLength+l),t.subData({data:E,offset:l})}class ov extends Wz{constructor(e,n){super(e,n,{startIndices:null,lastExternalBuffer:null,binaryValue:null,binaryAccessor:null,needsUpdate:!0,needsRedraw:!1,updateRanges:lf}),_(this,"constant",!1),this.settings.update=n.update||(n.accessor?this._autoUpdater:void 0),Object.seal(this.settings),Object.seal(this.state),this._validateAttributeUpdaters()}get startIndices(){return this.state.startIndices}set startIndices(e){this.state.startIndices=e}needsUpdate(){return this.state.needsUpdate}needsRedraw({clearChangedFlags:e=!1}={}){const n=this.state.needsRedraw;return this.state.needsRedraw=n&&!e,n}getUpdateTriggers(){const{accessor:e}=this.settings;return[this.id].concat(typeof e!="function"&&e||[])}supportsTransition(){return!!this.settings.transition}getTransitionSetting(e){if(!e||!this.supportsTransition())return null;const{accessor:n}=this.settings,r=this.settings.transition,i=Array.isArray(n)?e[n.find(s=>e[s])]:e[n];return hA(i,r)}setNeedsUpdate(e=this.id,n){if(this.state.needsUpdate=this.state.needsUpdate||e,this.setNeedsRedraw(e),n){const{startRow:r=0,endRow:i=1/0}=n;this.state.updateRanges=Xz(this.state.updateRanges,[r,i])}else this.state.updateRanges=lf}clearNeedsUpdate(){this.state.needsUpdate=!1,this.state.updateRanges=Hz}setNeedsRedraw(e=this.id){this.state.needsRedraw=this.state.needsRedraw||e}allocate(e){const{state:n,settings:r}=this;return r.noAlloc?!1:r.update?(super.allocate(e,n.updateRanges!==lf),!0):!1}updateBuffer({numInstances:e,data:n,props:r,context:i}){if(!this.needsUpdate())return!1;const{state:{updateRanges:s},settings:{update:o,noAlloc:a}}=this;let l=!0;if(o){for(const[c,u]of s)o.call(i,this,{data:n,startRow:c,endRow:u,props:r,numInstances:e});if(this.value)if(this.constant||this.buffer.byteLength<this.value.byteLength+this.byteOffset)this.setData({value:this.value,constant:this.constant}),this.constant=!1;else for(const[c,u]of s){const f=Number.isFinite(c)?this.getVertexOffset(c):0,d=Number.isFinite(u)?this.getVertexOffset(u):a||!Number.isFinite(e)?this.value.length:e*this.size;super.updateSubBuffer({startOffset:f,endOffset:d})}this._checkAttributeArray()}else l=!1;return this.clearNeedsUpdate(),this.setNeedsRedraw(),l}setConstantValue(e){return e===void 0||typeof e=="function"?!1:(this.setData({constant:!0,value:e})&&this.setNeedsRedraw(),this.clearNeedsUpdate(),!0)}setExternalBuffer(e){const{state:n}=this;return e?(this.clearNeedsUpdate(),n.lastExternalBuffer===e||(n.lastExternalBuffer=e,this.setNeedsRedraw(),this.setData(e)),!0):(n.lastExternalBuffer=null,!1)}setBinaryValue(e,n=null){const{state:r,settings:i}=this;if(!e)return r.binaryValue=null,r.binaryAccessor=null,!1;if(i.noAlloc)return!1;if(r.binaryValue===e)return this.clearNeedsUpdate(),!0;if(r.binaryValue=e,this.setNeedsRedraw(),i.transform||n!==this.startIndices){ArrayBuffer.isView(e)&&(e={value:e});const o=e;gt(ArrayBuffer.isView(o.value),"invalid ".concat(i.accessor));const a=!!o.size&&o.size!==this.size;return r.binaryAccessor=dA(o.value,{size:o.size||this.size,stride:o.stride,offset:o.offset,startIndices:n,nested:a}),!1}return this.clearNeedsUpdate(),this.setData(e),!0}getVertexOffset(e){const{startIndices:n}=this;return(n?e<n.length?n[e]:this.numInstances:e)*this.size}getShaderAttributes(){const e=this.settings.shaderAttributes||{[this.id]:null},n={};for(const r in e)Object.assign(n,super.getShaderAttributes(r,e[r]));return n}_autoUpdater(e,{data:n,startRow:r,endRow:i,props:s,numInstances:o}){if(e.constant)return;const{settings:a,state:l,value:c,size:u,startIndices:f}=e,{accessor:d,transform:h}=a,p=l.binaryAccessor||(typeof d=="function"?d:s[d]);gt(typeof p=="function",'accessor "'.concat(d,'" is not a function'));let g=e.getVertexOffset(r);const{iterable:E,objectInfo:m}=ph(n,r,i);for(const y of E){m.index++;let v=p(y,m);if(h&&(v=h.call(this,v)),f){const b=(m.index<f.length-1?f[m.index+1]:o)-f[m.index];if(v&&Array.isArray(v[0])){let T=g;for(const S of v)e._normalizeValue(S,c,T),T+=u}else v&&v.length>u?c.set(v,g):(e._normalizeValue(v,m.target,0),wB({target:c,source:m.target,start:g,count:b}));g+=b*u}else e._normalizeValue(v,c,g),g+=u}}_validateAttributeUpdaters(){const{settings:e}=this;if(!(e.noAlloc||typeof e.update=="function"))throw new Error("Attribute ".concat(this.id," missing update or accessor"))}_checkAttributeArray(){const{value:e}=this,n=Math.min(4,this.size);if(e&&e.length>=n){let r=!0;switch(n){case 4:r=r&&Number.isFinite(e[3]);case 3:r=r&&Number.isFinite(e[2]);case 2:r=r&&Number.isFinite(e[1]);case 1:r=r&&Number.isFinite(e[0]);break;default:r=!1}if(!r)throw new Error("Illegal attribute generated for ".concat(this.id))}}}class qz{constructor({gl:e,attribute:n,timeline:r}){_(this,"gl",void 0),_(this,"type","interpolation"),_(this,"attributeInTransition",void 0),_(this,"settings",void 0),_(this,"attribute",void 0),_(this,"transition",void 0),_(this,"currentStartIndices",void 0),_(this,"currentLength",void 0),_(this,"transform",void 0),_(this,"buffers",void 0),this.gl=e,this.transition=new Ac(r),this.attribute=n,this.attributeInTransition=new ov(e,n.settings),this.currentStartIndices=n.startIndices,this.currentLength=0,this.transform=Qz(e,n);const i={byteLength:0,usage:35050};this.buffers=[new Ae(e,i),new Ae(e,i)]}get inProgress(){return this.transition.inProgress}start(e,n){if(e.duration<=0){this.transition.cancel();return}this.settings=e;const{gl:r,buffers:i,attribute:s}=this;mA(i);const o={numInstances:n,attribute:s,fromLength:this.currentLength,fromStartIndices:this.currentStartIndices,getData:e.enter};for(const a of i)yA({buffer:a,...o});this.currentStartIndices=s.startIndices,this.currentLength=sv(s,n),this.attributeInTransition.setData({buffer:i[1],value:s.value}),this.transition.start(e),this.transform.update({elementCount:Math.floor(this.currentLength/s.size),sourceBuffers:{aFrom:i[0],aTo:pA(r,s)},feedbackBuffers:{vCurrent:i[1]}})}update(){const e=this.transition.update();if(e){const{duration:n,easing:r}=this.settings,{time:i}=this.transition;let s=i/n;r&&(s=r(s)),this.transform.run({uniforms:{time:s}})}return e}cancel(){this.transition.cancel(),this.transform.delete();for(const e of this.buffers)e.delete();this.buffers.length=0}}const Zz=`
#define SHADER_NAME interpolation-transition-vertex-shader

uniform float time;
attribute ATTRIBUTE_TYPE aFrom;
attribute ATTRIBUTE_TYPE aTo;
varying ATTRIBUTE_TYPE vCurrent;

void main(void) {
  vCurrent = mix(aFrom, aTo, time);
  gl_Position = vec4(0.0);
}
`;function Qz(t,e){const n=gA(e.size);return new Qy(t,{vs:Zz,defines:{ATTRIBUTE_TYPE:n},varyings:["vCurrent"]})}class Jz{constructor({gl:e,attribute:n,timeline:r}){_(this,"gl",void 0),_(this,"type","spring"),_(this,"attributeInTransition",void 0),_(this,"settings",void 0),_(this,"attribute",void 0),_(this,"transition",void 0),_(this,"currentStartIndices",void 0),_(this,"currentLength",void 0),_(this,"texture",void 0),_(this,"framebuffer",void 0),_(this,"transform",void 0),_(this,"buffers",void 0),this.gl=e,this.type="spring",this.transition=new Ac(r),this.attribute=n,this.attributeInTransition=new ov(e,{...n.settings,normalized:!1}),this.currentStartIndices=n.startIndices,this.currentLength=0,this.texture=t5(e),this.framebuffer=n5(e,this.texture),this.transform=e5(e,n,this.framebuffer);const i={byteLength:0,usage:35050};this.buffers=[new Ae(e,i),new Ae(e,i),new Ae(e,i)]}get inProgress(){return this.transition.inProgress}start(e,n){const{gl:r,buffers:i,attribute:s}=this,o={numInstances:n,attribute:s,fromLength:this.currentLength,fromStartIndices:this.currentStartIndices,getData:e.enter};for(const a of i)yA({buffer:a,...o});this.settings=e,this.currentStartIndices=s.startIndices,this.currentLength=sv(s,n),this.attributeInTransition.setData({buffer:i[1],value:s.value}),this.transition.start({...e,duration:1/0}),this.transform.update({elementCount:Math.floor(this.currentLength/s.size),sourceBuffers:{aTo:pA(r,s)}})}update(){const{buffers:e,transform:n,framebuffer:r,transition:i}=this;if(!i.update())return!1;const o=this.settings;return n.update({sourceBuffers:{aPrev:e[0],aCur:e[1]},feedbackBuffers:{vNext:e[2]}}),n.run({framebuffer:r,discard:!1,clearRenderTarget:!0,uniforms:{stiffness:o.stiffness,damping:o.damping},parameters:{depthTest:!1,blend:!0,viewport:[0,0,1,1],blendFunc:[1,1],blendEquation:[32776,32776]}}),mA(e),this.attributeInTransition.setData({buffer:e[1],value:this.attribute.value}),fh(r)[0]>0||i.end(),!0}cancel(){this.transition.cancel(),this.transform.delete();for(const e of this.buffers)e.delete();this.buffers.length=0,this.texture.delete(),this.framebuffer.delete()}}function e5(t,e,n){const r=gA(e.size);return new Qy(t,{framebuffer:n,vs:`
#define SHADER_NAME spring-transition-vertex-shader

#define EPSILON 0.00001

uniform float stiffness;
uniform float damping;
attribute ATTRIBUTE_TYPE aPrev;
attribute ATTRIBUTE_TYPE aCur;
attribute ATTRIBUTE_TYPE aTo;
varying ATTRIBUTE_TYPE vNext;
varying float vIsTransitioningFlag;

ATTRIBUTE_TYPE getNextValue(ATTRIBUTE_TYPE cur, ATTRIBUTE_TYPE prev, ATTRIBUTE_TYPE dest) {
  ATTRIBUTE_TYPE velocity = cur - prev;
  ATTRIBUTE_TYPE delta = dest - cur;
  ATTRIBUTE_TYPE spring = delta * stiffness;
  ATTRIBUTE_TYPE damper = velocity * -1.0 * damping;
  return spring + damper + velocity + cur;
}

void main(void) {
  bool isTransitioning = length(aCur - aPrev) > EPSILON || length(aTo - aCur) > EPSILON;
  vIsTransitioningFlag = isTransitioning ? 1.0 : 0.0;

  vNext = getNextValue(aCur, aPrev, aTo);
  gl_Position = vec4(0, 0, 0, 1);
  gl_PointSize = 100.0;
}
`,fs:`
#define SHADER_NAME spring-transition-is-transitioning-fragment-shader

varying float vIsTransitioningFlag;

void main(void) {
  if (vIsTransitioningFlag == 0.0) {
    discard;
  }
  gl_FragColor = vec4(1.0);
}`,defines:{ATTRIBUTE_TYPE:r},varyings:["vNext"]})}function t5(t){return new yn(t,{data:new Uint8Array(4),format:6408,type:5121,border:0,mipmaps:!1,dataFormat:6408,width:1,height:1})}function n5(t,e){return new ft(t,{id:"spring-transition-is-transitioning-framebuffer",width:1,height:1,attachments:{36064:e}})}const r5={interpolation:qz,spring:Jz};class i5{constructor(e,{id:n,timeline:r}){_(this,"id",void 0),_(this,"isSupported",void 0),_(this,"gl",void 0),_(this,"timeline",void 0),_(this,"transitions",void 0),_(this,"needsRedraw",void 0),_(this,"numInstances",void 0),this.id=n,this.gl=e,this.timeline=r,this.transitions={},this.needsRedraw=!1,this.numInstances=1,this.isSupported=Qy.isSupported(e)}finalize(){for(const e in this.transitions)this._removeTransition(e)}update({attributes:e,transitions:n,numInstances:r}){this.numInstances=r||1;for(const i in e){const s=e[i],o=s.getTransitionSetting(n);o&&this._updateAttribute(i,s,o)}for(const i in this.transitions){const s=e[i];(!s||!s.getTransitionSetting(n))&&this._removeTransition(i)}}hasAttribute(e){const n=this.transitions[e];return n&&n.inProgress}getAttributes(){const e={};for(const n in this.transitions){const r=this.transitions[n];r.inProgress&&(e[n]=r.attributeInTransition)}return e}run(){if(!this.isSupported||this.numInstances===0)return!1;for(const n in this.transitions)this.transitions[n].update()&&(this.needsRedraw=!0);const e=this.needsRedraw;return this.needsRedraw=!1,e}_removeTransition(e){this.transitions[e].cancel(),delete this.transitions[e]}_updateAttribute(e,n,r){const i=this.transitions[e];let s=!i||i.type!==r.type;if(s){if(!this.isSupported){ae.warn("WebGL2 not supported by this browser. Transition for ".concat(e," is disabled."))();return}i&&this._removeTransition(e);const o=r5[r.type];o?this.transitions[e]=new o({attribute:n,timeline:this.timeline,gl:this.gl}):(ae.error("unsupported transition type '".concat(r.type,"'"))(),s=!1)}(s||n.needsRedraw())&&(this.needsRedraw=!0,this.transitions[e].start(r,this.numInstances))}}const oE="attributeManager.invalidate",s5="attributeManager.updateStart",o5="attributeManager.updateEnd",a5="attribute.updateStart",l5="attribute.allocate",c5="attribute.updateEnd";class u5{constructor(e,{id:n="attribute-manager",stats:r,timeline:i}={}){_(this,"id",void 0),_(this,"gl",void 0),_(this,"attributes",void 0),_(this,"updateTriggers",void 0),_(this,"needsRedraw",void 0),_(this,"userData",void 0),_(this,"stats",void 0),_(this,"attributeTransitionManager",void 0),_(this,"mergeBoundsMemoized",Tc(hB)),this.id=n,this.gl=e,this.attributes={},this.updateTriggers={},this.needsRedraw=!0,this.userData={},this.stats=r,this.attributeTransitionManager=new i5(e,{id:"".concat(n,"-transitions"),timeline:i}),Object.seal(this)}finalize(){for(const e in this.attributes)this.attributes[e].delete();this.attributeTransitionManager.finalize()}getNeedsRedraw(e={clearRedrawFlags:!1}){const n=this.needsRedraw;return this.needsRedraw=this.needsRedraw&&!e.clearRedrawFlags,n&&this.id}setNeedsRedraw(){this.needsRedraw=!0}add(e){this._add(e)}addInstanced(e){this._add(e,{instanced:1})}remove(e){for(const n of e)this.attributes[n]!==void 0&&(this.attributes[n].delete(),delete this.attributes[n])}invalidate(e,n){const r=this._invalidateTrigger(e,n);Lt(oE,this,e,r)}invalidateAll(e){for(const n in this.attributes)this.attributes[n].setNeedsUpdate(n,e);Lt(oE,this,"all")}update({data:e,numInstances:n,startIndices:r=null,transitions:i,props:s={},buffers:o={},context:a={}}){let l=!1;Lt(s5,this),this.stats&&this.stats.get("Update Attributes").timeStart();for(const c in this.attributes){const u=this.attributes[c],f=u.settings.accessor;u.startIndices=r,u.numInstances=n,s[c]&&ae.removed("props.".concat(c),"data.attributes.".concat(c))(),u.setExternalBuffer(o[c])||u.setBinaryValue(typeof f=="string"?o[f]:void 0,e.startIndices)||typeof f=="string"&&!o[f]&&u.setConstantValue(s[f])||u.needsUpdate()&&(l=!0,this._updateAttribute({attribute:u,numInstances:n,data:e,props:s,context:a})),this.needsRedraw=this.needsRedraw||u.needsRedraw()}l&&Lt(o5,this,n),this.stats&&this.stats.get("Update Attributes").timeEnd(),this.attributeTransitionManager.update({attributes:this.attributes,numInstances:n,transitions:i})}updateTransition(){const{attributeTransitionManager:e}=this,n=e.run();return this.needsRedraw=this.needsRedraw||n,n}getAttributes(){return this.attributes}getBounds(e){const n=e.map(r=>{var i;return(i=this.attributes[r])===null||i===void 0?void 0:i.getBounds()});return this.mergeBoundsMemoized(n)}getChangedAttributes(e={clearChangedFlags:!1}){const{attributes:n,attributeTransitionManager:r}=this,i={...r.getAttributes()};for(const s in n){const o=n[s];o.needsRedraw(e)&&!r.hasAttribute(s)&&(i[s]=o)}return i}getShaderAttributes(e,n={}){e||(e=this.getAttributes());const r={};for(const i in e)n[i]||Object.assign(r,e[i].getShaderAttributes());return r}_add(e,n={}){for(const r in e){const i=e[r];this.attributes[r]=this._createAttribute(r,i,n)}this._mapUpdateTriggersToAttributes()}_createAttribute(e,n,r){const i={...n,id:e,size:n.isIndexed&&1||n.size||1,divisor:r.instanced?1:n.divisor||0};return new ov(this.gl,i)}_mapUpdateTriggersToAttributes(){const e={};for(const n in this.attributes)this.attributes[n].getUpdateTriggers().forEach(i=>{e[i]||(e[i]=[]),e[i].push(n)});this.updateTriggers=e}_invalidateTrigger(e,n){const{attributes:r,updateTriggers:i}=this,s=i[e];return s&&s.forEach(o=>{const a=r[o];a&&a.setNeedsUpdate(a.id,n)}),s}_updateAttribute(e){const{attribute:n,numInstances:r}=e;if(Lt(a5,n),n.constant){n.setConstantValue(n.value);return}n.allocate(r)&&Lt(l5,n,r),n.updateBuffer(e)&&(this.needsRedraw=!0,Lt(c5,n,r))}}class f5 extends Ac{get value(){return this._value}_onUpdate(){const{time:e,settings:{fromValue:n,toValue:r,duration:i,easing:s}}=this,o=s(e/i);this._value=ed(n,r,o)}}const aE=1e-5;function lE(t,e,n,r,i){const s=e-t,a=(n-e)*i,l=-s*r;return a+l+s+e}function d5(t,e,n,r,i){if(Array.isArray(n)){const s=[];for(let o=0;o<n.length;o++)s[o]=lE(t[o],e[o],n[o],r,i);return s}return lE(t,e,n,r,i)}function cE(t,e){if(Array.isArray(t)){let n=0;for(let r=0;r<t.length;r++){const i=t[r]-e[r];n+=i*i}return Math.sqrt(n)}return Math.abs(t-e)}class h5 extends Ac{get value(){return this._currValue}_onUpdate(){const{fromValue:e,toValue:n,damping:r,stiffness:i}=this.settings,{_prevValue:s=e,_currValue:o=e}=this;let a=d5(s,o,n,r,i);const l=cE(a,n),c=cE(a,o);l<aE&&c<aE&&(a=n,this.end()),this._prevValue=o,this._currValue=a}}const p5={interpolation:f5,spring:h5};class g5{constructor(e){this.transitions=new Map,this.timeline=e}get active(){return this.transitions.size>0}add(e,n,r,i){const{transitions:s}=this;if(s.has(e)){const l=s.get(e),{value:c=l.settings.fromValue}=l;n=c,this.remove(e)}if(i=hA(i),!i)return;const o=p5[i.type];if(!o){ae.error("unsupported transition type '".concat(i.type,"'"))();return}const a=new o(this.timeline);a.start({...i,fromValue:n,toValue:r}),s.set(e,a)}remove(e){const{transitions:n}=this;n.has(e)&&(n.get(e).cancel(),n.delete(e))}update(){const e={};for(const[n,r]of this.transitions)r.update(),e[n]=r.value,r.inProgress||this.remove(n);return e}clear(){for(const e of this.transitions.keys())this.remove(e)}}function m5(t){const e=t[Oi];for(const n in e){const r=e[n],{validate:i}=r;if(i&&!i(t[n],r))throw new Error("Invalid prop ".concat(n,": ").concat(t[n]))}}function y5(t,e){const n=vA({newProps:t,oldProps:e,propTypes:t[Oi],ignoreProps:{data:null,updateTriggers:null,extensions:null,transitions:null}}),r=_5(t,e);let i=!1;return r||(i=b5(t,e)),{dataChanged:r,propsChanged:n,updateTriggersChanged:i,extensionsChanged:E5(t,e),transitionsChanged:v5(t,e)}}function v5(t,e){if(!t.transitions)return!1;const n={},r=t[Oi];let i=!1;for(const s in t.transitions){const o=r[s],a=o&&o.type;(a==="number"||a==="color"||a==="array")&&Km(t[s],e[s],o)&&(n[s]=!0,i=!0)}return i?n:!1}function vA({newProps:t,oldProps:e,ignoreProps:n={},propTypes:r={},triggerName:i="props"}){if(e===t)return!1;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return"".concat(i," changed shallowly");for(const s of Object.keys(t))if(!(s in n)){if(!(s in e))return"".concat(i,".").concat(s," added");const o=Km(t[s],e[s],r[s]);if(o)return"".concat(i,".").concat(s," ").concat(o)}for(const s of Object.keys(e))if(!(s in n)){if(!(s in t))return"".concat(i,".").concat(s," dropped");if(!Object.hasOwnProperty.call(t,s)){const o=Km(t[s],e[s],r[s]);if(o)return"".concat(i,".").concat(s," ").concat(o)}}return!1}function Km(t,e,n){let r=n&&n.equal;return r&&!r(t,e,n)||!r&&(r=t&&e&&t.equals,r&&!r.call(t,e))?"changed deeply":!r&&e!==t?"changed shallowly":null}function _5(t,e){if(e===null)return"oldProps is null, initial diff";let n=!1;const{dataComparator:r,_dataDiff:i}=t;return r?r(t.data,e.data)||(n="Data comparator detected a change"):t.data!==e.data&&(n="A new data container was supplied"),n&&i&&(n=i(t.data,e.data)||n),n}function b5(t,e){if(e===null)return{all:!0};if("all"in t.updateTriggers&&uE(t,e,"all"))return{all:!0};const n={};let r=!1;for(const i in t.updateTriggers)i!=="all"&&uE(t,e,i)&&(n[i]=!0,r=!0);return r?n:!1}function E5(t,e){if(e===null)return!0;const n=e.extensions,{extensions:r}=t;if(r===n)return!1;if(!n||!r||r.length!==n.length)return!0;for(let i=0;i<r.length;i++)if(!r[i].equals(n[i]))return!0;return!1}function uE(t,e,n){let r=t.updateTriggers[n];r=r??{};let i=e.updateTriggers[n];return i=i??{},vA({oldProps:i,newProps:r,triggerName:n})}const w5="count(): argument not an object",x5="count(): argument not a container";function T5(t){if(!P5(t))throw new Error(w5);if(typeof t.count=="function")return t.count();if(Number.isFinite(t.size))return t.size;if(Number.isFinite(t.length))return t.length;if(S5(t))return Object.keys(t).length;throw new Error(x5)}function S5(t){return t!==null&&typeof t=="object"&&t.constructor===Object}function P5(t){return t!==null&&typeof t=="object"}function A5(t,e){if(!e)return t;const n={...t,...e};if("defines"in e&&(n.defines={...t.defines,...e.defines}),"modules"in e&&(n.modules=(t.modules||[]).concat(e.modules),e.modules.some(r=>r.name==="project64"))){const r=n.modules.findIndex(i=>i.name==="project32");r>=0&&n.modules.splice(r,1)}if("inject"in e)if(!t.inject)n.inject=e.inject;else{const r={...t.inject};for(const i in e.inject)r[i]=(r[i]||"")+e.inject[i];n.inject=r}return n}const C5={10241:9987,10240:9729,10242:33071,10243:33071},qm={};function L5(t,e,n,r){if(n instanceof yn)return n;n.constructor&&n.constructor.name!=="Object"&&(n={data:n});let i=null;n.compressed&&(i={10241:n.data.length>1?9985:9729});const s=new yn(e,{...n,parameters:{...C5,...i,...r}});return qm[s.id]=t,s}function R5(t,e){!e||!(e instanceof yn)||qm[e.id]===t&&(e.delete(),delete qm[e.id])}const O5={boolean:{validate(t,e){return!0},equal(t,e,n){return!!t==!!e}},number:{validate(t,e){return Number.isFinite(t)&&(!("max"in e)||t<=e.max)&&(!("min"in e)||t>=e.min)}},color:{validate(t,e){return e.optional&&!t||Zm(t)&&(t.length===3||t.length===4)},equal(t,e,n){return pr(t,e,1)}},accessor:{validate(t,e){const n=ld(t);return n==="function"||n===ld(e.value)},equal(t,e,n){return typeof e=="function"?!0:pr(t,e,1)}},array:{validate(t,e){return e.optional&&!t||Zm(t)},equal(t,e,n){const{compare:r}=n,i=Number.isInteger(r)?r:r?1:0;return r?pr(t,e,i):t===e}},object:{equal(t,e,n){if(n.ignore)return!0;const{compare:r}=n,i=Number.isInteger(r)?r:r?1:0;return r?pr(t,e,i):t===e}},function:{validate(t,e){return e.optional&&!t||typeof t=="function"},equal(t,e,n){return!n.compare&&n.ignore!==!1||t===e}},data:{transform:(t,e,n)=>{const{dataTransform:r}=n.props;return r&&t?r(t):t}},image:{transform:(t,e,n)=>{const r=n.context;return!r||!r.gl?null:L5(n.id,r.gl,t,{...e.parameters,...n.props.textureParameters})},release:(t,e,n)=>{R5(n.id,t)}}};function I5(t){const e={},n={},r={};for(const[i,s]of Object.entries(t)){const o=s==null?void 0:s.deprecatedFor;if(o)r[i]=Array.isArray(o)?o:[o];else{const a=M5(i,s);e[i]=a,n[i]=a.value}}return{propTypes:e,defaultProps:n,deprecatedProps:r}}function M5(t,e){switch(ld(e)){case"object":return $a(t,e);case"array":return $a(t,{type:"array",value:e,compare:!1});case"boolean":return $a(t,{type:"boolean",value:e});case"number":return $a(t,{type:"number",value:e});case"function":return $a(t,{type:"function",value:e,compare:!0});default:return{name:t,type:"unknown",value:e}}}function $a(t,e){return"type"in e?{name:t,...O5[e.type],...e}:"value"in e?{name:t,type:ld(e.value),...e}:{name:t,type:"object",value:e}}function Zm(t){return Array.isArray(t)||ArrayBuffer.isView(t)}function ld(t){return Zm(t)?"array":t===null?"null":typeof t}function k5(t,e){let n;for(let s=e.length-1;s>=0;s--){const o=e[s];"extensions"in o&&(n=o.extensions)}const r=Qm(t.constructor,n),i=Object.create(r);i[od]=t,i[As]={},i[_i]={};for(let s=0;s<e.length;++s){const o=e[s];for(const a in o)i[a]=o[a]}return Object.freeze(i),i}const N5="_mergedDefaultProps";function Qm(t,e){let n=N5;if(e)for(const i of e){const s=i.constructor;s&&(n+=":".concat(s.extensionName||s.name))}const r=_A(t,n);return r||(t[n]=F5(t,e||[]))}function F5(t,e){if(!t.prototype)return null;const r=Object.getPrototypeOf(t),i=Qm(r),s=_A(t,"defaultProps")||{},o=I5(s),a=Object.assign(Object.create(null),i,o.defaultProps),l=Object.assign(Object.create(null),i==null?void 0:i[Oi],o.propTypes),c=Object.assign(Object.create(null),i==null?void 0:i[tg],o.deprecatedProps);for(const u of e){const f=Qm(u.constructor);f&&(Object.assign(a,f),Object.assign(l,f[Oi]),Object.assign(c,f[tg]))}return D5(a,t),z5(a,l),B5(a,c),a[Oi]=l,a[tg]=c,e.length===0&&!av(t,"_propTypes")&&(t._propTypes=l),a}function D5(t,e){const n=j5(e);Object.defineProperties(t,{id:{writable:!0,value:n}})}function B5(t,e){for(const n in e)Object.defineProperty(t,n,{enumerable:!1,set(r){const i="".concat(this.id,": ").concat(n);for(const s of e[n])av(this,s)||(this[s]=r);ae.deprecated(i,e[n].join("/"))()}})}function z5(t,e){const n={},r={};for(const i in e){const s=e[i],{name:o,value:a}=s;s.async&&(n[o]=a,r[o]=U5(o))}t[ko]=n,t[As]={},Object.defineProperties(t,r)}function U5(t){return{enumerable:!0,set(e){typeof e=="string"||e instanceof Promise||fA(e)?this[As][t]=e:this[_i][t]=e},get(){if(this[_i]){if(t in this[_i])return this[_i][t]||this[ko][t];if(t in this[As]){const e=this[od]&&this[od].internalState;if(e&&e.hasAsyncProp(t))return e.getAsyncProp(t)||this[ko][t]}}return this[ko][t]}}}function av(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function _A(t,e){return av(t,e)&&t[e]}function j5(t){const e=t.componentName;return e||ae.warn("".concat(t.name,".componentName not specified"))(),e||t.name}let V5=0;class lv{constructor(...e){_(this,"id",void 0),_(this,"props",void 0),_(this,"count",void 0),this.props=k5(this,e),this.id=this.props.id,this.count=V5++}clone(e){const{props:n}=this,r={};for(const i in n[ko])i in n[_i]?r[i]=n[_i][i]:i in n[As]&&(r[i]=n[As][i]);return new this.constructor({...n,...r,...e})}}_(lv,"componentName","Component");_(lv,"defaultProps",{});const $5=Object.freeze({});class G5{constructor(e){_(this,"component",void 0),_(this,"onAsyncPropUpdated",void 0),_(this,"asyncProps",void 0),_(this,"oldProps",void 0),_(this,"oldAsyncProps",void 0),this.component=e,this.asyncProps={},this.onAsyncPropUpdated=()=>{},this.oldProps=null,this.oldAsyncProps=null}finalize(){for(const e in this.asyncProps){const n=this.asyncProps[e];n&&n.type&&n.type.release&&n.type.release(n.resolvedValue,n.type,this.component)}this.asyncProps={},this.component=null,this.resetOldProps()}getOldProps(){return this.oldAsyncProps||this.oldProps||$5}resetOldProps(){this.oldAsyncProps=null,this.oldProps=this.component?this.component.props:null}hasAsyncProp(e){return e in this.asyncProps}getAsyncProp(e){const n=this.asyncProps[e];return n&&n.resolvedValue}isAsyncPropLoading(e){if(e){const n=this.asyncProps[e];return!!(n&&n.pendingLoadCount>0&&n.pendingLoadCount!==n.resolvedLoadCount)}for(const n in this.asyncProps)if(this.isAsyncPropLoading(n))return!0;return!1}reloadAsyncProp(e,n){this._watchPromise(e,Promise.resolve(n))}setAsyncProps(e){this.component=e[od]||this.component;const n=e[_i]||{},r=e[As]||e,i=e[ko]||{};for(const s in n){const o=n[s];this._createAsyncPropData(s,i[s]),this._updateAsyncProp(s,o),n[s]=this.getAsyncProp(s)}for(const s in r){const o=r[s];this._createAsyncPropData(s,i[s]),this._updateAsyncProp(s,o)}}_fetch(e,n){return null}_onResolve(e,n){}_onError(e,n){}_updateAsyncProp(e,n){if(this._didAsyncInputValueChange(e,n)){if(typeof n=="string"&&(n=this._fetch(e,n)),n instanceof Promise){this._watchPromise(e,n);return}if(fA(n)){this._resolveAsyncIterable(e,n);return}this._setPropValue(e,n)}}_freezeAsyncOldProps(){if(!this.oldAsyncProps&&this.oldProps){this.oldAsyncProps=Object.create(this.oldProps);for(const e in this.asyncProps)Object.defineProperty(this.oldAsyncProps,e,{enumerable:!0,value:this.oldProps[e]})}}_didAsyncInputValueChange(e,n){const r=this.asyncProps[e];return n===r.resolvedValue||n===r.lastValue?!1:(r.lastValue=n,!0)}_setPropValue(e,n){this._freezeAsyncOldProps();const r=this.asyncProps[e];r&&(n=this._postProcessValue(r,n),r.resolvedValue=n,r.pendingLoadCount++,r.resolvedLoadCount=r.pendingLoadCount)}_setAsyncPropValue(e,n,r){const i=this.asyncProps[e];i&&r>=i.resolvedLoadCount&&n!==void 0&&(this._freezeAsyncOldProps(),i.resolvedValue=n,i.resolvedLoadCount=r,this.onAsyncPropUpdated(e,n))}_watchPromise(e,n){const r=this.asyncProps[e];if(r){r.pendingLoadCount++;const i=r.pendingLoadCount;n.then(s=>{this.component&&(s=this._postProcessValue(r,s),this._setAsyncPropValue(e,s,i),this._onResolve(e,s))}).catch(s=>{this._onError(e,s)})}}async _resolveAsyncIterable(e,n){if(e!=="data"){this._setPropValue(e,n);return}const r=this.asyncProps[e];if(!r)return;r.pendingLoadCount++;const i=r.pendingLoadCount;let s=[],o=0;for await(const a of n){if(!this.component)return;const{dataTransform:l}=this.component.props;l?s=l(a,s):s=s.concat(a),Object.defineProperty(s,"__diff",{enumerable:!1,value:[{startRow:o,endRow:s.length}]}),o=s.length,this._setAsyncPropValue(e,s,i)}this._onResolve(e,s)}_postProcessValue(e,n){const r=e.type;return r&&this.component&&(r.release&&r.release(e.resolvedValue,r,this.component),r.transform)?r.transform(n,r,this.component):n}_createAsyncPropData(e,n){if(!this.asyncProps[e]){const i=this.component&&this.component.props[Oi];this.asyncProps[e]={type:i&&i[e],lastValue:null,resolvedValue:n,pendingLoadCount:0,resolvedLoadCount:0}}}}class W5 extends G5{constructor({attributeManager:e,layer:n}){super(n),_(this,"attributeManager",void 0),_(this,"needsRedraw",void 0),_(this,"needsUpdate",void 0),_(this,"subLayers",void 0),_(this,"usesPickingColorCache",void 0),_(this,"hasPickingBuffer",void 0),_(this,"changeFlags",void 0),_(this,"viewport",void 0),_(this,"uniformTransitions",void 0),_(this,"propsInTransition",void 0),this.attributeManager=e,this.needsRedraw=!0,this.needsUpdate=!0,this.subLayers=null,this.usesPickingColorCache=!1}get layer(){return this.component}_fetch(e,n){const r=this.layer,i=r==null?void 0:r.props.fetch;return i?i(n,{propName:e,layer:r}):super._fetch(e,n)}_onResolve(e,n){const r=this.layer;if(r){const i=r.props.onDataLoad;e==="data"&&i&&i(n,{propName:e,layer:r})}}_onError(e,n){const r=this.layer;r&&r.raiseError(n,"loading ".concat(e," of ").concat(this.layer))}}const H5="layer.changeFlag",X5="layer.initialize",Y5="layer.update",K5="layer.finalize",q5="layer.matched",fE=2**24-1,Z5=Object.freeze([]),Q5=Tc(({oldViewport:t,viewport:e})=>t.equals(e));let or=new Uint8ClampedArray(0);const J5={data:{type:"data",value:Z5,async:!0},dataComparator:{type:"function",value:null,optional:!0},_dataDiff:{type:"function",value:t=>t&&t.__diff,optional:!0},dataTransform:{type:"function",value:null,optional:!0},onDataLoad:{type:"function",value:null,optional:!0},onError:{type:"function",value:null,optional:!0},fetch:{type:"function",value:(t,{propName:e,layer:n,loaders:r,loadOptions:i,signal:s})=>{const{resourceManager:o}=n.context;if(i=i||n.getLoadOptions(),r=r||n.props.loaders,s){var a;i={...i,fetch:{...(a=i)===null||a===void 0?void 0:a.fetch,signal:s}}}let l=o.contains(t);return!l&&!i&&(o.add({resourceId:t,data:Kf(t,r),persistent:!1}),l=!0),l?o.subscribe({resourceId:t,onChange:c=>{var u;return(u=n.internalState)===null||u===void 0?void 0:u.reloadAsyncProp(e,c)},consumerId:n.id,requestId:e}):Kf(t,r,i)}},updateTriggers:{},visible:!0,pickable:!1,opacity:{type:"number",min:0,max:1,value:1},operation:"draw",onHover:{type:"function",value:null,optional:!0},onClick:{type:"function",value:null,optional:!0},onDragStart:{type:"function",value:null,optional:!0},onDrag:{type:"function",value:null,optional:!0},onDragEnd:{type:"function",value:null,optional:!0},coordinateSystem:ge.DEFAULT,coordinateOrigin:{type:"array",value:[0,0,0],compare:!0},modelMatrix:{type:"array",value:null,compare:!0,optional:!0},wrapLongitude:!1,positionFormat:"XYZ",colorFormat:"RGBA",parameters:{type:"object",value:{},optional:!0,compare:2},loadOptions:{type:"object",value:null,optional:!0,ignore:!0},transitions:null,extensions:[],loaders:{type:"array",value:[],optional:!0,ignore:!0},getPolygonOffset:{type:"function",value:({layerIndex:t})=>[0,-t*100]},highlightedObjectIndex:null,autoHighlight:!1,highlightColor:{type:"accessor",value:[0,0,128,128]}};class ei extends lv{constructor(...e){super(...e),_(this,"internalState",null),_(this,"lifecycle",lo.NO_STATE),_(this,"context",void 0),_(this,"state",void 0),_(this,"parent",null)}static get componentName(){return Object.prototype.hasOwnProperty.call(this,"layerName")?this.layerName:""}get root(){let e=this;for(;e.parent;)e=e.parent;return e}toString(){const e=this.constructor.layerName||this.constructor.name;return"".concat(e,"({id: '").concat(this.props.id,"'})")}project(e){gt(this.internalState);const n=this.internalState.viewport||this.context.viewport,r=JP(e,{viewport:n,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem}),[i,s,o]=ZP(r,n.pixelProjectionMatrix);return e.length===2?[i,s]:[i,s,o]}unproject(e){return gt(this.internalState),(this.internalState.viewport||this.context.viewport).unproject(e)}projectPosition(e,n){gt(this.internalState);const r=this.internalState.viewport||this.context.viewport;return _B(e,{viewport:r,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem,...n})}get isComposite(){return!1}setState(e){this.setChangeFlags({stateChanged:!0}),Object.assign(this.state,e),this.setNeedsRedraw()}setNeedsRedraw(){this.internalState&&(this.internalState.needsRedraw=!0)}setNeedsUpdate(){this.internalState&&(this.context.layerManager.setNeedsUpdate(String(this)),this.internalState.needsUpdate=!0)}get isLoaded(){return this.internalState?!this.internalState.isAsyncPropLoading():!1}get wrapLongitude(){return this.props.wrapLongitude}isPickable(){return this.props.pickable&&this.props.visible}getModels(){return this.state&&(this.state.models||this.state.model&&[this.state.model])||[]}setModuleParameters(e){for(const n of this.getModels())n.updateModuleSettings(e)}getAttributeManager(){return this.internalState&&this.internalState.attributeManager}getCurrentLayer(){return this.internalState&&this.internalState.layer}getLoadOptions(){return this.props.loadOptions}use64bitPositions(){const{coordinateSystem:e}=this.props;return e===ge.DEFAULT||e===ge.LNGLAT||e===ge.CARTESIAN}onHover(e,n){return this.props.onHover&&this.props.onHover(e,n)||!1}onClick(e,n){return this.props.onClick&&this.props.onClick(e,n)||!1}nullPickingColor(){return[0,0,0]}encodePickingColor(e,n=[]){return n[0]=e+1&255,n[1]=e+1>>8&255,n[2]=e+1>>8>>8&255,n}decodePickingColor(e){gt(e instanceof Uint8Array);const[n,r,i]=e;return n+r*256+i*65536-1}getNumInstances(){return Number.isFinite(this.props.numInstances)?this.props.numInstances:this.state&&this.state.numInstances!==void 0?this.state.numInstances:T5(this.props.data)}getStartIndices(){return this.props.startIndices?this.props.startIndices:this.state&&this.state.startIndices?this.state.startIndices:null}getBounds(){var e;return(e=this.getAttributeManager())===null||e===void 0?void 0:e.getBounds(["positions","instancePositions"])}getShaders(e){for(const n of this.props.extensions)e=A5(e,n.getShaders.call(this,n));return e}shouldUpdateState(e){return e.changeFlags.propsOrDataChanged}updateState(e){const n=this.getAttributeManager(),{dataChanged:r}=e.changeFlags;if(r&&n)if(Array.isArray(r))for(const i of r)n.invalidateAll(i);else n.invalidateAll();if(n){const{props:i}=e,s=this.internalState.hasPickingBuffer,o=Number.isInteger(i.highlightedObjectIndex)||i.pickable||i.extensions.some(a=>a.getNeedsPickingBuffer.call(this,a));if(s!==o){this.internalState.hasPickingBuffer=o;const{pickingColors:a,instancePickingColors:l}=n.attributes,c=a||l;c&&(o&&c.constant&&(c.constant=!1,n.invalidate(c.id)),!c.value&&!o&&(c.constant=!0,c.value=[0,0,0]))}}}finalizeState(e){for(const r of this.getModels())r.delete();const n=this.getAttributeManager();n&&n.finalize(),this.context&&this.context.resourceManager.unsubscribe({consumerId:this.id}),this.internalState&&(this.internalState.uniformTransitions.clear(),this.internalState.finalize())}draw(e){for(const n of this.getModels())n.draw(e)}getPickingInfo({info:e,mode:n,sourceLayer:r}){const{index:i}=e;return i>=0&&Array.isArray(this.props.data)&&(e.object=this.props.data[i]),e}raiseError(e,n){var r,i;if(n&&(e=new Error("".concat(n,": ").concat(e.message),{cause:e})),!((r=(i=this.props).onError)!==null&&r!==void 0&&r.call(i,e))){var s,o;(s=this.context)===null||s===void 0||(o=s.onError)===null||o===void 0||o.call(s,e,this)}}getNeedsRedraw(e={clearRedrawFlags:!1}){return this._getNeedsRedraw(e)}needsUpdate(){return this.internalState?this.internalState.needsUpdate||this.hasUniformTransition()||this.shouldUpdateState(this._getUpdateParams()):!1}hasUniformTransition(){var e;return((e=this.internalState)===null||e===void 0?void 0:e.uniformTransitions.active)||!1}activateViewport(e){if(!this.internalState)return;const n=this.internalState.viewport;this.internalState.viewport=e,(!n||!Q5({oldViewport:n,viewport:e}))&&(this.setChangeFlags({viewportChanged:!0}),this.isComposite?this.needsUpdate()&&this.setNeedsUpdate():this._update())}invalidateAttribute(e="all"){const n=this.getAttributeManager();n&&(e==="all"?n.invalidateAll():n.invalidate(e))}updateAttributes(e){for(const n of this.getModels())this._setModelAttributes(n,e)}_updateAttributes(){const e=this.getAttributeManager();if(!e)return;const n=this.props,r=this.getNumInstances(),i=this.getStartIndices();e.update({data:n.data,numInstances:r,startIndices:i,props:n,transitions:n.transitions,buffers:n.data.attributes,context:this});const s=e.getChangedAttributes({clearChangedFlags:!0});this.updateAttributes(s)}_updateAttributeTransition(){const e=this.getAttributeManager();e&&e.updateTransition()}_updateUniformTransition(){const{uniformTransitions:e}=this.internalState;if(e.active){const n=e.update(),r=Object.create(this.props);for(const i in n)Object.defineProperty(r,i,{value:n[i]});return r}return this.props}calculateInstancePickingColors(e,{numInstances:n}){if(e.constant)return;const r=Math.floor(or.length/3);if(this.internalState.usesPickingColorCache=!0,r<n){n>fE&&ae.warn("Layer has too many data objects. Picking might not be able to distinguish all objects.")(),or=na.allocate(or,n,{size:3,copy:!0,maxCount:Math.max(n,fE)});const i=Math.floor(or.length/3),s=[];for(let o=r;o<i;o++)this.encodePickingColor(o,s),or[o*3+0]=s[0],or[o*3+1]=s[1],or[o*3+2]=s[2]}e.value=or.subarray(0,n*3)}_setModelAttributes(e,n){const r=this.getAttributeManager(),i=e.userData.excludeAttributes||{},s=r.getShaderAttributes(n,i);e.setAttributes(s)}disablePickingIndex(e){const n=this.props.data;if(!("attributes"in n)){this._disablePickingIndex(e);return}const{pickingColors:r,instancePickingColors:i}=this.getAttributeManager().attributes,s=r||i,o=s&&n.attributes&&n.attributes[s.id];if(o&&o.value){const a=o.value,l=this.encodePickingColor(e);for(let c=0;c<n.length;c++){const u=s.getVertexOffset(c);a[u]===l[0]&&a[u+1]===l[1]&&a[u+2]===l[2]&&this._disablePickingIndex(c)}}else this._disablePickingIndex(e)}_disablePickingIndex(e){const{pickingColors:n,instancePickingColors:r}=this.getAttributeManager().attributes,i=n||r;if(!i)return;const s=i.getVertexOffset(e),o=i.getVertexOffset(e+1);i.buffer.subData({data:new Uint8Array(o-s),offset:s})}restorePickingColors(){const{pickingColors:e,instancePickingColors:n}=this.getAttributeManager().attributes,r=e||n;r&&(this.internalState.usesPickingColorCache&&r.value.buffer!==or.buffer&&(r.value=or.subarray(0,r.value.length)),r.updateSubBuffer({startOffset:0}))}_initialize(){gt(!this.internalState),gt(Number.isFinite(this.props.coordinateSystem)),Lt(X5,this);const e=this._getAttributeManager();e&&e.addInstanced({instancePickingColors:{type:5121,size:3,noAlloc:!0,update:this.calculateInstancePickingColors}}),this.internalState=new W5({attributeManager:e,layer:this}),this._clearChangeFlags(),this.state={},Object.defineProperty(this.state,"attributeManager",{get:()=>(ae.deprecated("layer.state.attributeManager","layer.getAttributeManager()")(),e)}),this.internalState.uniformTransitions=new g5(this.context.timeline),this.internalState.onAsyncPropUpdated=this._onAsyncPropUpdated.bind(this),this.internalState.setAsyncProps(this.props),this.initializeState(this.context);for(const n of this.props.extensions)n.initializeState.call(this,this.context,n);this.setChangeFlags({dataChanged:"init",propsChanged:"init",viewportChanged:!0,extensionsChanged:!0}),this._update()}_transferState(e){Lt(q5,this,this===e);const{state:n,internalState:r}=e;this!==e&&(this.internalState=r,this.state=n,this.internalState.setAsyncProps(this.props),this._diffProps(this.props,this.internalState.getOldProps()))}_update(){const e=this.needsUpdate();if(Lt(Y5,this,e),!e)return;const n=this.props,r=this.context,i=this.internalState,s=r.viewport,o=this._updateUniformTransition();i.propsInTransition=o,r.viewport=i.viewport||s,this.props=o;try{const a=this._getUpdateParams(),l=this.getModels();if(r.gl)this.updateState(a);else try{this.updateState(a)}catch{}for(const u of this.props.extensions)u.updateState.call(this,a,u);const c=this.getModels()[0]!==l[0];this._postUpdate(a,c)}finally{r.viewport=s,this.props=n,this._clearChangeFlags(),i.needsUpdate=!1,i.resetOldProps()}}_finalize(){Lt(K5,this),this.finalizeState(this.context);for(const e of this.props.extensions)e.finalizeState.call(this,this.context,e)}_drawLayer({moduleParameters:e=null,uniforms:n={},parameters:r={}}){this._updateAttributeTransition();const i=this.props,s=this.context;this.props=this.internalState.propsInTransition||i;const o=this.props.opacity;n.opacity=Math.pow(o,1/2.2);try{e&&this.setModuleParameters(e);const{getPolygonOffset:a}=this.props,l=a&&a(n)||[0,0];Xr(s.gl,{polygonOffset:l}),Zn(s.gl,r,()=>{const c={moduleParameters:e,uniforms:n,parameters:r,context:s};for(const u of this.props.extensions)u.draw.call(this,c,u);this.draw(c)})}finally{this.props=i}}getChangeFlags(){var e;return(e=this.internalState)===null||e===void 0?void 0:e.changeFlags}setChangeFlags(e){if(!this.internalState)return;const{changeFlags:n}=this.internalState;for(const i in e)if(e[i]){let s=!1;switch(i){case"dataChanged":const o=e[i],a=n[i];o&&Array.isArray(a)&&(n.dataChanged=Array.isArray(o)?a.concat(o):o,s=!0);default:n[i]||(n[i]=e[i],s=!0)}s&&Lt(H5,this,i,e)}const r=!!(n.dataChanged||n.updateTriggersChanged||n.propsChanged||n.extensionsChanged);n.propsOrDataChanged=r,n.somethingChanged=r||n.viewportChanged||n.stateChanged}_clearChangeFlags(){this.internalState.changeFlags={dataChanged:!1,propsChanged:!1,updateTriggersChanged:!1,viewportChanged:!1,stateChanged:!1,extensionsChanged:!1,propsOrDataChanged:!1,somethingChanged:!1}}_diffProps(e,n){const r=y5(e,n);if(r.updateTriggersChanged)for(const s in r.updateTriggersChanged)r.updateTriggersChanged[s]&&this.invalidateAttribute(s);if(r.transitionsChanged)for(const s in r.transitionsChanged){var i;this.internalState.uniformTransitions.add(s,n[s],e[s],(i=e.transitions)===null||i===void 0?void 0:i[s])}return this.setChangeFlags(r)}validateProps(){m5(this.props)}updateAutoHighlight(e){this.props.autoHighlight&&!Number.isInteger(this.props.highlightedObjectIndex)&&this._updateAutoHighlight(e)}_updateAutoHighlight(e){const n={pickingSelectedColor:e.picked?e.color:null},{highlightColor:r}=this.props;e.picked&&typeof r=="function"&&(n.pickingHighlightColor=r(e)),this.setModuleParameters(n),this.setNeedsRedraw()}_getAttributeManager(){const e=this.context;return new u5(e.gl,{id:this.props.id,stats:e.stats,timeline:e.timeline})}_postUpdate(e,n){const{props:r,oldProps:i}=e;this.setNeedsRedraw(),this._updateAttributes();const{model:s}=this.state;s==null||s.setInstanceCount(this.getNumInstances());const{autoHighlight:o,highlightedObjectIndex:a,highlightColor:l}=r;if(n||i.autoHighlight!==o||i.highlightedObjectIndex!==a||i.highlightColor!==l){const c={};o||(c.pickingSelectedColor=null),Array.isArray(l)&&(c.pickingHighlightColor=l),(n||a!==i.highlightedObjectIndex)&&(c.pickingSelectedColor=Number.isFinite(a)&&a>=0?this.encodePickingColor(a):null),this.setModuleParameters(c)}}_getUpdateParams(){return{props:this.props,oldProps:this.internalState.getOldProps(),context:this.context,changeFlags:this.internalState.changeFlags}}_getNeedsRedraw(e){if(!this.internalState)return!1;let n=!1;n=n||this.internalState.needsRedraw&&this.id;const r=this.getAttributeManager(),i=r?r.getNeedsRedraw(e):!1;if(n=n||i,n)for(const s of this.props.extensions)s.onNeedsRedraw.call(this,s);return this.internalState.needsRedraw=this.internalState.needsRedraw&&!e.clearRedrawFlags,n}_onAsyncPropUpdated(){this._diffProps(this.props,this.internalState.getOldProps()),this.setNeedsUpdate()}}_(ei,"defaultProps",J5);_(ei,"layerName","Layer");const eU="compositeLayer.renderLayers";class cv extends ei{get isComposite(){return!0}get isLoaded(){return super.isLoaded&&this.getSubLayers().every(e=>e.isLoaded)}getSubLayers(){return this.internalState&&this.internalState.subLayers||[]}initializeState(e){}setState(e){super.setState(e),this.setNeedsUpdate()}getPickingInfo({info:e}){const{object:n}=e;return n&&n.__source&&n.__source.parent&&n.__source.parent.id===this.id&&(e.object=n.__source.object,e.index=n.__source.index),e}filterSubLayer(e){return!0}shouldRenderSubLayer(e,n){return n&&n.length}getSubLayerClass(e,n){const{_subLayerProps:r}=this.props;return r&&r[e]&&r[e].type||n}getSubLayerRow(e,n,r){return e.__source={parent:this,object:n,index:r},e}getSubLayerAccessor(e){if(typeof e=="function"){const n={index:-1,data:this.props.data,target:[]};return(r,i)=>r&&r.__source?(n.index=r.__source.index,e(r.__source.object,n)):e(r,i)}return e}getSubLayerProps(e={}){var n;const{opacity:r,pickable:i,visible:s,parameters:o,getPolygonOffset:a,highlightedObjectIndex:l,autoHighlight:c,highlightColor:u,coordinateSystem:f,coordinateOrigin:d,wrapLongitude:h,positionFormat:p,modelMatrix:g,extensions:E,fetch:m,operation:y,_subLayerProps:v}=this.props,b={id:"",updateTriggers:{},opacity:r,pickable:i,visible:s,parameters:o,getPolygonOffset:a,highlightedObjectIndex:l,autoHighlight:c,highlightColor:u,coordinateSystem:f,coordinateOrigin:d,wrapLongitude:h,positionFormat:p,modelMatrix:g,extensions:E,fetch:m,operation:y},T=v&&e.id&&v[e.id],S=T&&T.updateTriggers,P=e.id||"sublayer";if(T){const R=this.props[Oi],O=e.type?e.type._propTypes:{};for(const L in T){const M=O[L]||R[L];M&&M.type==="accessor"&&(T[L]=this.getSubLayerAccessor(T[L]))}}Object.assign(b,e,T),b.id="".concat(this.props.id,"-").concat(P),b.updateTriggers={all:(n=this.props.updateTriggers)===null||n===void 0?void 0:n.all,...e.updateTriggers,...S};for(const R of E){const O=R.getSubLayerProps.call(this,R);O&&Object.assign(b,O,{updateTriggers:Object.assign(b.updateTriggers,O.updateTriggers)})}return b}_updateAutoHighlight(e){for(const n of this.getSubLayers())n.updateAutoHighlight(e)}_getAttributeManager(){return null}_postUpdate(e,n){let r=this.internalState.subLayers;const i=!r||this.needsUpdate();if(i){const s=this.renderLayers();r=rv(s,Boolean),this.internalState.subLayers=r}Lt(eU,this,i,r);for(const s of r)s.parent=this}}_(cv,"layerName","CompositeLayer");class bA{constructor(e){_(this,"opts",void 0),_(this,"typedArrayManager",void 0),_(this,"indexStarts",[0]),_(this,"vertexStarts",[0]),_(this,"vertexCount",0),_(this,"instanceCount",0),_(this,"attributes",void 0),_(this,"_attributeDefs",void 0),_(this,"data",void 0),_(this,"getGeometry",void 0),_(this,"geometryBuffer",void 0),_(this,"buffers",void 0),_(this,"positionSize",void 0),_(this,"normalize",void 0);const{attributes:n={}}=e;this.typedArrayManager=na,this.attributes={},this._attributeDefs=n,this.opts=e,this.updateGeometry(e)}updateGeometry(e){Object.assign(this.opts,e);const{data:n,buffers:r={},getGeometry:i,geometryBuffer:s,positionFormat:o,dataChanged:a,normalize:l=!0}=this.opts;if(this.data=n,this.getGeometry=i,this.positionSize=s&&s.size||(o==="XY"?2:3),this.buffers=r,this.normalize=l,s&&(gt(n.startIndices),this.getGeometry=this.getGeometryFromBuffer(s),l||(r.positions=s)),this.geometryBuffer=r.positions,Array.isArray(a))for(const c of a)this._rebuildGeometry(c);else this._rebuildGeometry()}updatePartialGeometry({startRow:e,endRow:n}){this._rebuildGeometry({startRow:e,endRow:n})}getGeometryFromBuffer(e){const n=e.value||e;return ArrayBuffer.isView(n)?dA(n,{size:this.positionSize,offset:e.offset,stride:e.stride,startIndices:this.data.startIndices}):null}_allocate(e,n){const{attributes:r,buffers:i,_attributeDefs:s,typedArrayManager:o}=this;for(const a in s)if(a in i)o.release(r[a]),r[a]=null;else{const l=s[a];l.copy=n,r[a]=o.allocate(r[a],e,l)}}_forEachGeometry(e,n,r){const{data:i,getGeometry:s}=this,{iterable:o,objectInfo:a}=ph(i,n,r);for(const l of o){a.index++;const c=s?s(l,a):null;e(c,a.index)}}_rebuildGeometry(e){if(!this.data)return;let{indexStarts:n,vertexStarts:r,instanceCount:i}=this;const{data:s,geometryBuffer:o}=this,{startRow:a=0,endRow:l=1/0}=e||{},c={};if(e||(n=[0],r=[0]),this.normalize||!o)this._forEachGeometry((f,d)=>{const h=f&&this.normalizeGeometry(f);c[d]=h,r[d+1]=r[d]+(h?this.getGeometrySize(h):0)},a,l),i=r[r.length-1];else if(r=s.startIndices,i=r[s.length]||0,ArrayBuffer.isView(o))i=i||o.length/this.positionSize;else if(o instanceof Ae){const f=o.accessor.stride||this.positionSize*4;i=i||o.byteLength/f}else if(o.buffer){const f=o.stride||this.positionSize*4;i=i||o.buffer.byteLength/f}else if(o.value){const f=o.value,d=o.stride/f.BYTES_PER_ELEMENT||this.positionSize;i=i||f.length/d}this._allocate(i,!!e),this.indexStarts=n,this.vertexStarts=r,this.instanceCount=i;const u={};this._forEachGeometry((f,d)=>{const h=c[d]||f;u.vertexStart=r[d],u.indexStart=n[d];const p=d<r.length-1?r[d+1]:i;u.geometrySize=p-r[d],u.geometryIndex=d,this.updateGeometryAttributes(h,u)},a,l),this.vertexCount=n[n.length-1]}}const tU=typeof window<"u"?A.useLayoutEffect:A.useEffect,nU=tU;function cd(t,e){for(;t;){if(t===e)return!0;t=Object.getPrototypeOf(t)}return!1}const rU={position:"absolute",zIndex:-1};function EA(t,e){if(typeof t=="function")return t(e);if(Array.isArray(t))return t.map(n=>EA(n,e));if(gh(t)){if(iU(t))return e.style=rU,A.cloneElement(t,e);if(sU(t))return A.cloneElement(t,e)}return t}function gh(t){return t&&typeof t=="object"&&"type"in t||!1}function iU(t){var e;return(e=t.props)===null||e===void 0?void 0:e.mapStyle}function sU(t){const e=t.type;return e&&e.deckGLViewProps}function Jm(t){if(typeof t=="function")return A.createElement(ia,{},t);if(Array.isArray(t))return t.map(Jm);if(gh(t)){if(t.type===A.Fragment)return Jm(t.props.children);if(cd(t.type,ia))return t}return t}function oU({children:t,layers:e=[],views:n=null}){const r=[],i=[],s={};return A.Children.forEach(Jm(t),o=>{if(gh(o)){const a=o.type;if(cd(a,ei)){const l=aU(a,o.props);i.push(l)}else r.push(o);if(cd(a,ia)&&a!==ia&&o.props.id){const l=new a(o.props);s[l.id]=l}}else o&&r.push(o)}),Object.keys(s).length>0&&(Array.isArray(n)?n.forEach(o=>{s[o.id]=o}):n&&(s[n.id]=n),n=Object.values(s)),e=i.length>0?[...i,...e]:e,{layers:e,children:r,views:n}}function aU(t,e){const n={},r=t.defaultProps||{};for(const i in e)r[i]!==e[i]&&(n[i]=e[i]);return new t(n)}function lU({children:t,deck:e,ContextProvider:n}){const{viewManager:r}=e||{};if(!r||!r.views.length)return[];const i={},s=r.views[0].id;for(const o of t){let a=s,l=o;gh(o)&&cd(o.type,ia)&&(a=o.props.id||s,l=o.props.children);const c=r.getViewport(a),u=r.getViewState(a);if(c){u.padding=c.padding;const{x:f,y:d,width:h,height:p}=c;l=EA(l,{x:f,y:d,width:h,height:p,viewport:c,viewState:u}),i[a]||(i[a]={viewport:c,children:[]}),i[a].children.push(l)}}return Object.keys(i).map(o=>{const{viewport:a,children:l}=i[o],{x:c,y:u,width:f,height:d}=a,h={position:"absolute",left:c,top:u,width:f,height:d},p="view-".concat(o),g=A.createElement("div",{key:p,id:p,style:h},...l);if(n){const E={viewport:a,container:e.canvas.offsetParent,eventManager:e.eventManager,onViewStateChange:m=>{m.viewId=o,e._onViewStateChange(m)}};return A.createElement(n,{key:p,value:E},g)}return g})}const cU={mixBlendMode:null};function uU({width:t,height:e,style:n}){const r={position:"absolute",zIndex:0,left:0,top:0,width:t,height:e},i={left:0,top:0};if(n)for(const s in n)s in cU?i[s]=n[s]:r[s]=n[s];return{containerStyle:r,canvasStyle:i}}function fU(t){return{get deck(){return t.deck},pickObject:e=>t.deck.pickObject(e),pickMultipleObjects:e=>t.deck.pickMultipleObjects(e),pickObjects:e=>t.deck.pickObjects(e)}}function wA(t){t.redrawReason&&(t.deck._drawLayers(t.redrawReason),t.redrawReason=null)}function dU(t,e,n){const r=new e({...n,_customRender:i=>{t.redrawReason=i;const s=r.getViewports();t.lastRenderedViewports!==s?t.forceUpdate():wA(t)}});return r}const xA=A.forwardRef((t,e)=>{const[n,r]=A.useState(0),s=A.useRef({control:null,version:n,forceUpdate:()=>r(T=>T+1)}).current,o=A.useRef(null),a=A.useRef(null),l=A.useMemo(()=>oU(t),[t.layers,t.views,t.children]);let c=!0;const u=T=>{var S;return c&&t.viewState?(s.viewStateUpdateRequested=T,null):(s.viewStateUpdateRequested=null,(S=t.onViewStateChange)===null||S===void 0?void 0:S.call(t,T))},f=T=>{if(c)s.interactionStateUpdateRequested=T;else{var S;s.interactionStateUpdateRequested=null,(S=t.onInteractionStateChange)===null||S===void 0||S.call(t,T)}},d=A.useMemo(()=>{const T={...t,style:null,width:"100%",height:"100%",parent:o.current,canvas:a.current,layers:l.layers,views:l.views,onViewStateChange:u,onInteractionStateChange:f};return delete T._customRender,s.deck&&s.deck.setProps(T),T},[t]);A.useEffect(()=>{const T=t.Deck||hh;return s.deck=dU(s,T,{...d,parent:o.current,canvas:a.current}),()=>{var S;return(S=s.deck)===null||S===void 0?void 0:S.finalize()}},[]),nU(()=>{wA(s);const{viewStateUpdateRequested:T,interactionStateUpdateRequested:S}=s;T&&u(T),S&&f(S)}),A.useImperativeHandle(e,()=>fU(s),[]);const h=s.deck&&s.deck.isInitialized?s.deck.getViewports():void 0,{ContextProvider:p,width:g,height:E,id:m,style:y}=t,{containerStyle:v,canvasStyle:b}=A.useMemo(()=>uU({width:g,height:E,style:y}),[g,E,y]);if(!s.viewStateUpdateRequested&&s.lastRenderedViewports===h||s.version!==n){s.lastRenderedViewports=h,s.version=n;const T=lU({children:l.children,deck:s.deck,ContextProvider:p}),S=A.createElement("canvas",{key:"canvas",id:m||"deckgl-overlay",ref:a,style:b});s.control=A.createElement("div",{id:"".concat(m||"deckgl","-wrapper"),ref:o,style:v},[S,T])}return c=!1,s.control});xA.defaultProps=hh.defaultProps;const hU=xA,pU="modulepreload",gU=function(t){return"/your-crop-app/"+t},dE={},mU=function(e,n,r){if(!n||n.length===0)return e();const i=document.getElementsByTagName("link");return Promise.all(n.map(s=>{if(s=gU(s),s in dE)return;dE[s]=!0;const o=s.endsWith(".css"),a=o?'[rel="stylesheet"]':"";if(!!r)for(let u=i.length-1;u>=0;u--){const f=i[u];if(f.href===s&&(!o||f.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${s}"]${a}`))return;const c=document.createElement("link");if(c.rel=o?"stylesheet":pU,o||(c.as="script",c.crossOrigin=""),c.href=s,document.head.appendChild(c),o)return new Promise((u,f)=>{c.addEventListener("load",u),c.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${s}`)))})})).then(()=>e()).catch(s=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s})},yU=A.createContext(null);function vU(t,e){const n=Array.isArray(t)?t[0]:t?t.x:0,r=Array.isArray(t)?t[1]:t?t.y:0,i=Array.isArray(e)?e[0]:e?e.x:0,s=Array.isArray(e)?e[1]:e?e.y:0;return n===i&&r===s}function Mr(t,e){if(t===e)return!0;if(!t||!e)return!1;if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(!Mr(t[n],e[n]))return!1;return!0}else if(Array.isArray(e))return!1;if(typeof t=="object"&&typeof e=="object"){const n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(const i of n)if(!e.hasOwnProperty(i)||!Mr(t[i],e[i]))return!1;return!0}return!1}function _U(t){const e=t.clone();return e.pixelsToGLUnits=t.pixelsToGLUnits,e}function hE(t,e){if(!t.getProjection)return;const n=t.getProjection(),r=e.getProjection();Mr(n,r)||e.setProjection(n)}function pE(t){return{longitude:t.center.lng,latitude:t.center.lat,zoom:t.zoom,pitch:t.pitch,bearing:t.bearing,padding:t.padding}}function gE(t,e){const n=e.viewState||e;let r=!1;if("longitude"in n&&"latitude"in n){const i=t.center;t.center=new i.constructor(n.longitude,n.latitude),r=r||i!==t.center}if("zoom"in n){const i=t.zoom;t.zoom=n.zoom,r=r||i!==t.zoom}if("bearing"in n){const i=t.bearing;t.bearing=n.bearing,r=r||i!==t.bearing}if("pitch"in n){const i=t.pitch;t.pitch=n.pitch,r=r||i!==t.pitch}return n.padding&&!t.isPaddingEqual(n.padding)&&(r=!0,t.padding=n.padding),r}const bU=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function mE(t){if(!t)return null;if(typeof t=="string"||("toJS"in t&&(t=t.toJS()),!t.layers))return t;const e={};for(const r of t.layers)e[r.id]=r;const n=t.layers.map(r=>{let i=null;"interactive"in r&&(i=Object.assign({},r),delete i.interactive);const s=e[r.ref];if(s){i=i||Object.assign({},r),delete i.ref;for(const o of bU)o in s&&(i[o]=s[o])}return i||r});return{...t,layers:n}}const yE={version:8,sources:{},layers:[]},vE={mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",click:"onClick",dblclick:"onDblClick",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mouseout:"onMouseOut",contextmenu:"onContextMenu",touchstart:"onTouchStart",touchend:"onTouchEnd",touchmove:"onTouchMove",touchcancel:"onTouchCancel"},sg={movestart:"onMoveStart",move:"onMove",moveend:"onMoveEnd",dragstart:"onDragStart",drag:"onDrag",dragend:"onDragEnd",zoomstart:"onZoomStart",zoom:"onZoom",zoomend:"onZoomEnd",rotatestart:"onRotateStart",rotate:"onRotate",rotateend:"onRotateEnd",pitchstart:"onPitchStart",pitch:"onPitch",pitchend:"onPitchEnd"},_E={wheel:"onWheel",boxzoomstart:"onBoxZoomStart",boxzoomend:"onBoxZoomEnd",boxzoomcancel:"onBoxZoomCancel",resize:"onResize",load:"onLoad",render:"onRender",idle:"onIdle",remove:"onRemove",data:"onData",styledata:"onStyleData",sourcedata:"onSourceData",error:"onError"},EU=["minZoom","maxZoom","minPitch","maxPitch","maxBounds","projection","renderWorldCopies"],wU=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate","touchPitch"];class sa{constructor(e,n,r){this._map=null,this._internalUpdate=!1,this._inRender=!1,this._hoveredFeatures=null,this._deferredEvents={move:!1,zoom:!1,pitch:!1,rotate:!1},this._onEvent=i=>{const s=this.props[_E[i.type]];s?s(i):i.type==="error"&&console.error(i.error)},this._onPointerEvent=i=>{(i.type==="mousemove"||i.type==="mouseout")&&this._updateHover(i);const s=this.props[vE[i.type]];s&&(this.props.interactiveLayerIds&&i.type!=="mouseover"&&i.type!=="mouseout"&&(i.features=this._hoveredFeatures||this._queryRenderedFeatures(i.point)),s(i),delete i.features)},this._onCameraEvent=i=>{if(!this._internalUpdate){const s=this.props[sg[i.type]];s&&s(i)}i.type in this._deferredEvents&&(this._deferredEvents[i.type]=!1)},this._MapClass=e,this.props=n,this._initialize(r)}get map(){return this._map}get transform(){return this._renderTransform}setProps(e){const n=this.props;this.props=e;const r=this._updateSettings(e,n);r&&this._createShadowTransform(this._map);const i=this._updateSize(e),s=this._updateViewState(e,!0);this._updateStyle(e,n),this._updateStyleComponents(e,n),this._updateHandlers(e,n),(r||i||s&&!this._map.isMoving())&&this.redraw()}static reuse(e,n){const r=sa.savedMaps.pop();if(!r)return null;const i=r.map,s=i.getContainer();for(n.className=s.className;s.childNodes.length>0;)n.appendChild(s.childNodes[0]);i._container=n;const o=i._resizeObserver;o&&(o.disconnect(),o.observe(n)),r.setProps({...e,styleDiffing:!1}),i.resize();const{initialViewState:a}=e;return a&&(a.bounds?i.fitBounds(a.bounds,{...a.fitBoundsOptions,duration:0}):r._updateViewState(a,!1)),i.isStyleLoaded()?i.fire("load"):i.once("styledata",()=>i.fire("load")),i._update(),r}_initialize(e){const{props:n}=this,{mapStyle:r=yE}=n,i={...n,...n.initialViewState,accessToken:n.mapboxAccessToken||xU()||null,container:e,style:mE(r)},s=i.initialViewState||i.viewState||i;if(Object.assign(i,{center:[s.longitude||0,s.latitude||0],zoom:s.zoom||0,pitch:s.pitch||0,bearing:s.bearing||0}),n.gl){const u=HTMLCanvasElement.prototype.getContext;HTMLCanvasElement.prototype.getContext=()=>(HTMLCanvasElement.prototype.getContext=u,n.gl)}const o=new this._MapClass(i);s.padding&&o.setPadding(s.padding),n.cursor&&(o.getCanvas().style.cursor=n.cursor),this._createShadowTransform(o);const a=o._render;o._render=u=>{this._inRender=!0,a.call(o,u),this._inRender=!1};const l=o._renderTaskQueue.run;o._renderTaskQueue.run=u=>{l.call(o._renderTaskQueue,u),this._onBeforeRepaint()},o.on("render",()=>this._onAfterRepaint());const c=o.fire;o.fire=this._fireEvent.bind(this,c),o.on("resize",()=>{this._renderTransform.resize(o.transform.width,o.transform.height)}),o.on("styledata",()=>{this._updateStyleComponents(this.props,{}),hE(o.transform,this._renderTransform)}),o.on("sourcedata",()=>this._updateStyleComponents(this.props,{}));for(const u in vE)o.on(u,this._onPointerEvent);for(const u in sg)o.on(u,this._onCameraEvent);for(const u in _E)o.on(u,this._onEvent);this._map=o}recycle(){const n=this.map.getContainer().querySelector("[mapboxgl-children]");n==null||n.remove(),sa.savedMaps.push(this)}destroy(){this._map.remove()}redraw(){const e=this._map;!this._inRender&&e.style&&(e._frame&&(e._frame.cancel(),e._frame=null),e._render())}_createShadowTransform(e){const n=_U(e.transform);e.painter.transform=n,this._renderTransform=n}_updateSize(e){const{viewState:n}=e;if(n){const r=this._map;if(n.width!==r.transform.width||n.height!==r.transform.height)return r.resize(),!0}return!1}_updateViewState(e,n){if(this._internalUpdate)return!1;const r=this._map,i=this._renderTransform,{zoom:s,pitch:o,bearing:a}=i,l=r.isMoving();l&&(i.cameraElevationReference="sea");const c=gE(i,{...pE(r.transform),...e});if(l&&(i.cameraElevationReference="ground"),c&&n){const u=this._deferredEvents;u.move=!0,u.zoom||(u.zoom=s!==i.zoom),u.rotate||(u.rotate=a!==i.bearing),u.pitch||(u.pitch=o!==i.pitch)}return l||gE(r.transform,e),c}_updateSettings(e,n){const r=this._map;let i=!1;for(const s of EU)if(s in e&&!Mr(e[s],n[s])){i=!0;const o=r[`set${s[0].toUpperCase()}${s.slice(1)}`];o==null||o.call(r,e[s])}return i}_updateStyle(e,n){if(e.cursor!==n.cursor&&(this._map.getCanvas().style.cursor=e.cursor||""),e.mapStyle!==n.mapStyle){const{mapStyle:r=yE,styleDiffing:i=!0}=e,s={diff:i};return"localIdeographFontFamily"in e&&(s.localIdeographFontFamily=e.localIdeographFontFamily),this._map.setStyle(mE(r),s),!0}return!1}_updateStyleComponents(e,n){const r=this._map;let i=!1;return r.isStyleLoaded()&&("light"in e&&r.setLight&&!Mr(e.light,n.light)&&(i=!0,r.setLight(e.light)),"fog"in e&&r.setFog&&!Mr(e.fog,n.fog)&&(i=!0,r.setFog(e.fog)),"terrain"in e&&r.setTerrain&&!Mr(e.terrain,n.terrain)&&(!e.terrain||r.getSource(e.terrain.source))&&(i=!0,r.setTerrain(e.terrain))),i}_updateHandlers(e,n){var r,i;const s=this._map;let o=!1;for(const a of wU){const l=(r=e[a])!==null&&r!==void 0?r:!0,c=(i=n[a])!==null&&i!==void 0?i:!0;Mr(l,c)||(o=!0,l?s[a].enable(l):s[a].disable())}return o}_queryRenderedFeatures(e){const n=this._map,r=n.transform,{interactiveLayerIds:i=[]}=this.props;try{return n.transform=this._renderTransform,n.queryRenderedFeatures(e,{layers:i.filter(n.getLayer.bind(n))})}catch{return[]}finally{n.transform=r}}_updateHover(e){var n;const{props:r}=this;if(r.interactiveLayerIds&&(r.onMouseMove||r.onMouseEnter||r.onMouseLeave)){const s=e.type,o=((n=this._hoveredFeatures)===null||n===void 0?void 0:n.length)>0,a=this._queryRenderedFeatures(e.point),l=a.length>0;!l&&o&&(e.type="mouseleave",this._onPointerEvent(e)),this._hoveredFeatures=a,l&&!o&&(e.type="mouseenter",this._onPointerEvent(e)),e.type=s}else this._hoveredFeatures=null}_fireEvent(e,n,r){const i=this._map,s=i.transform,o=typeof n=="string"?n:n.type;return o==="move"&&this._updateViewState(this.props,!1),o in sg&&(typeof n=="object"&&(n.viewState=pE(s)),this._map.isMoving())?(i.transform=this._renderTransform,e.call(i,n,r),i.transform=s,i):(e.call(i,n,r),i)}_onBeforeRepaint(){const e=this._map;this._internalUpdate=!0;for(const r in this._deferredEvents)this._deferredEvents[r]&&e.fire(r);this._internalUpdate=!1;const n=this._map.transform;e.transform=this._renderTransform,this._onAfterRepaint=()=>{hE(this._renderTransform,n),e.transform=n}}}sa.savedMaps=[];function xU(){let t=null;if(typeof location<"u"){const e=/access_token=([^&\/]*)/.exec(location.search);t=e&&e[1]}try{t=t||{}.MapboxAccessToken}catch{}try{t=t||{}.REACT_APP_MAPBOX_ACCESS_TOKEN}catch{}return t}const TU=["setMaxBounds","setMinZoom","setMaxZoom","setMinPitch","setMaxPitch","setRenderWorldCopies","setProjection","setStyle","addSource","removeSource","addLayer","removeLayer","setLayerZoomRange","setFilter","setPaintProperty","setLayoutProperty","setLight","setTerrain","setFog","remove"];function SU(t){if(!t)return null;const e=t.map,n={getMap:()=>e,getCenter:()=>t.transform.center,getZoom:()=>t.transform.zoom,getBearing:()=>t.transform.bearing,getPitch:()=>t.transform.pitch,getPadding:()=>t.transform.padding,getBounds:()=>t.transform.getBounds(),project:r=>{const i=e.transform;e.transform=t.transform;const s=e.project(r);return e.transform=i,s},unproject:r=>{const i=e.transform;e.transform=t.transform;const s=e.unproject(r);return e.transform=i,s},queryTerrainElevation:(r,i)=>{const s=e.transform;e.transform=t.transform;const o=e.queryTerrainElevation(r,i);return e.transform=s,o},queryRenderedFeatures:(r,i)=>{const s=e.transform;e.transform=t.transform;const o=e.queryRenderedFeatures(r,i);return e.transform=s,o}};for(const r of PU(e))!(r in n)&&!TU.includes(r)&&(n[r]=e[r].bind(e));return n}function PU(t){const e=new Set;let n=t;for(;n;){for(const r of Object.getOwnPropertyNames(n))r[0]!=="_"&&typeof t[r]=="function"&&r!=="fire"&&r!=="setEventedParent"&&e.add(r);n=Object.getPrototypeOf(n)}return Array.from(e)}const AU=typeof document<"u"?A.useLayoutEffect:A.useEffect,CU=["baseApiUrl","maxParallelImageRequests","workerClass","workerCount","workerUrl"];function LU(t,e){for(const r of CU)r in e&&(t[r]=e[r]);const{RTLTextPlugin:n="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-rtl-text/v0.2.3/mapbox-gl-rtl-text.js"}=e;n&&t.getRTLTextPluginStatus&&t.getRTLTextPluginStatus()==="unavailable"&&t.setRTLTextPlugin(n,r=>{r&&console.error(r)},!1)}const mh=A.createContext(null);function RU(t,e,n){const r=A.useContext(yU),[i,s]=A.useState(null),o=A.useRef(),{current:a}=A.useRef({mapLib:null,map:null});A.useEffect(()=>{const u=t.mapLib;let f=!0,d;return Promise.resolve(u||n).then(h=>{if(!f)return;if(!h)throw new Error("Invalid mapLib");const p="Map"in h?h:h.default;if(!p.Map)throw new Error("Invalid mapLib");if(LU(p,t),!p.supported||p.supported(t))t.reuseMaps&&(d=sa.reuse(t,o.current)),d||(d=new sa(p.Map,t,o.current)),a.map=SU(d),a.mapLib=p,s(d),r==null||r.onMapMount(a.map,t.id);else throw new Error("Map is not supported by this browser")}).catch(h=>{const{onError:p}=t;p?p({type:"error",target:null,originalEvent:null,error:h}):console.error(h)}),()=>{f=!1,d&&(r==null||r.onMapUnmount(t.id),t.reuseMaps?d.recycle():d.destroy())}},[]),AU(()=>{i&&i.setProps(t)}),A.useImperativeHandle(e,()=>a.map,[i]);const l=A.useMemo(()=>({position:"relative",width:"100%",height:"100%",...t.style}),[t.style]),c={height:"100%"};return A.createElement("div",{id:t.id,ref:o,style:l},i&&A.createElement(mh.Provider,{value:a},A.createElement("div",{"mapboxgl-children":"",style:c},t.children)))}const OU=/box|flex|grid|column|lineHeight|fontWeight|opacity|order|tabSize|zIndex/;function Ds(t,e){if(!t||!e)return;const n=t.style;for(const r in e){const i=e[r];Number.isFinite(i)&&!OU.test(r)?n[r]=`${i}px`:n[r]=i}}function IU(t,e){const{map:n,mapLib:r}=A.useContext(mh),i=A.useRef({props:t});i.current.props=t;const s=A.useMemo(()=>{let g=!1;A.Children.forEach(t.children,y=>{y&&(g=!0)});const E={...t,element:g?document.createElement("div"):null},m=new r.Marker(E);return m.setLngLat([t.longitude,t.latitude]),m.getElement().addEventListener("click",y=>{var v,b;(b=(v=i.current.props).onClick)===null||b===void 0||b.call(v,{type:"click",target:m,originalEvent:y})}),m.on("dragstart",y=>{var v,b;const T=y;T.lngLat=s.getLngLat(),(b=(v=i.current.props).onDragStart)===null||b===void 0||b.call(v,T)}),m.on("drag",y=>{var v,b;const T=y;T.lngLat=s.getLngLat(),(b=(v=i.current.props).onDrag)===null||b===void 0||b.call(v,T)}),m.on("dragend",y=>{var v,b;const T=y;T.lngLat=s.getLngLat(),(b=(v=i.current.props).onDragEnd)===null||b===void 0||b.call(v,T)}),m},[]);A.useEffect(()=>(s.addTo(n.getMap()),()=>{s.remove()}),[]);const{longitude:o,latitude:a,offset:l,style:c,draggable:u=!1,popup:f=null,rotation:d=0,rotationAlignment:h="auto",pitchAlignment:p="auto"}=t;return A.useEffect(()=>{Ds(s.getElement(),c)},[c]),A.useImperativeHandle(e,()=>s,[]),(s.getLngLat().lng!==o||s.getLngLat().lat!==a)&&s.setLngLat([o,a]),l&&!vU(s.getOffset(),l)&&s.setOffset(l),s.isDraggable()!==u&&s.setDraggable(u),s.getRotation()!==d&&s.setRotation(d),s.getRotationAlignment()!==h&&s.setRotationAlignment(h),s.getPitchAlignment()!==p&&s.setPitchAlignment(p),s.getPopup()!==f&&s.setPopup(f),ya.createPortal(t.children,s.getElement())}A.memo(A.forwardRef(IU));function bE(t){return new Set(t?t.trim().split(/\s+/):[])}function MU(t,e){const{map:n,mapLib:r}=A.useContext(mh),i=A.useMemo(()=>document.createElement("div"),[]),s=A.useRef({props:t});s.current.props=t;const o=A.useMemo(()=>{const a={...t},l=new r.Popup(a);return l.setLngLat([t.longitude,t.latitude]),l.once("open",c=>{var u,f;(f=(u=s.current.props).onOpen)===null||f===void 0||f.call(u,c)}),l},[]);if(A.useEffect(()=>{const a=l=>{var c,u;(u=(c=s.current.props).onClose)===null||u===void 0||u.call(c,l)};return o.on("close",a),o.setDOMContent(i).addTo(n.getMap()),()=>{o.off("close",a),o.isOpen()&&o.remove()}},[]),A.useEffect(()=>{Ds(o.getElement(),t.style)},[t.style]),A.useImperativeHandle(e,()=>o,[]),o.isOpen()&&((o.getLngLat().lng!==t.longitude||o.getLngLat().lat!==t.latitude)&&o.setLngLat([t.longitude,t.latitude]),t.offset&&!Mr(o.options.offset,t.offset)&&o.setOffset(t.offset),(o.options.anchor!==t.anchor||o.options.maxWidth!==t.maxWidth)&&(o.options.anchor=t.anchor,o.setMaxWidth(t.maxWidth)),o.options.className!==t.className)){const a=bE(o.options.className),l=bE(t.className);for(const c of a)l.has(c)||o.removeClassName(c);for(const c of l)a.has(c)||o.addClassName(c);o.options.className=t.className}return ya.createPortal(t.children,i)}A.memo(A.forwardRef(MU));function Lc(t,e,n,r){const i=A.useContext(mh),s=A.useMemo(()=>t(i),[]);return A.useEffect(()=>{const o=r||n||e,a=typeof e=="function"&&typeof n=="function"?e:null,l=typeof n=="function"?n:typeof e=="function"?e:null,{map:c}=i;return c.hasControl(s)||(c.addControl(s,o==null?void 0:o.position),a&&a(i)),()=>{l&&l(i),c.hasControl(s)&&c.removeControl(s)}},[]),s}function kU(t){const e=Lc(({mapLib:n})=>new n.AttributionControl(t),{position:t.position});return A.useEffect(()=>{Ds(e._container,t.style)},[t.style]),null}A.memo(kU);function NU(t){const e=Lc(({mapLib:n})=>new n.FullscreenControl({container:t.containerId&&document.getElementById(t.containerId)}),{position:t.position});return A.useEffect(()=>{Ds(e._controlContainer,t.style)},[t.style]),null}A.memo(NU);function FU(t,e){const n=A.useRef({props:t}),r=Lc(({mapLib:i})=>{const s=new i.GeolocateControl(t),o=s._setupUI;return s._setupUI=a=>{s._container.hasChildNodes()||o(a)},s.on("geolocate",a=>{var l,c;(c=(l=n.current.props).onGeolocate)===null||c===void 0||c.call(l,a)}),s.on("error",a=>{var l,c;(c=(l=n.current.props).onError)===null||c===void 0||c.call(l,a)}),s.on("outofmaxbounds",a=>{var l,c;(c=(l=n.current.props).onOutOfMaxBounds)===null||c===void 0||c.call(l,a)}),s.on("trackuserlocationstart",a=>{var l,c;(c=(l=n.current.props).onTrackUserLocationStart)===null||c===void 0||c.call(l,a)}),s.on("trackuserlocationend",a=>{var l,c;(c=(l=n.current.props).onTrackUserLocationEnd)===null||c===void 0||c.call(l,a)}),s},{position:t.position});return n.current.props=t,A.useImperativeHandle(e,()=>r,[]),A.useEffect(()=>{Ds(r._container,t.style)},[t.style]),null}A.memo(A.forwardRef(FU));function DU(t){const e=Lc(({mapLib:n})=>new n.NavigationControl(t),{position:t.position});return A.useEffect(()=>{Ds(e._container,t.style)},[t.style]),null}A.memo(DU);function BU(t){const e=Lc(({mapLib:s})=>new s.ScaleControl(t),{position:t.position}),n=A.useRef(t),r=n.current;n.current=t;const{style:i}=t;return t.maxWidth!==void 0&&t.maxWidth!==r.maxWidth&&(e.options.maxWidth=t.maxWidth),t.unit!==void 0&&t.unit!==r.unit&&e.setUnit(t.unit),A.useEffect(()=>{Ds(e._container,i)},[i]),null}A.memo(BU);const zU=mU(()=>import("./mapbox-gl-b207d8da.js").then(t=>t.m),[]),UU=(()=>A.forwardRef(function(e,n){return RU(e,n,zU)}))();const jU="mapbox://styles/mapbox/satellite-v9",VU="pk.eyJ1IjoibWFyY29kZXYxIiwiYSI6ImNsbG10YWg3dzAzMXIzZW83Z3pmYWduNTAifQ.-NDJRTa8cVuKMxxjwHEOXw",bi=()=>{},Gt=bi(),og=Object,pe=t=>t===Gt,Br=t=>typeof t=="function",Di=(t,e)=>({...t,...e}),$U=t=>Br(t.then),Pu=new WeakMap;let GU=0;const Xl=t=>{const e=typeof t,n=t&&t.constructor,r=n==Date;let i,s;if(og(t)===t&&!r&&n!=RegExp){if(i=Pu.get(t),i)return i;if(i=++GU+"~",Pu.set(t,i),n==Array){for(i="@",s=0;s<t.length;s++)i+=Xl(t[s])+",";Pu.set(t,i)}if(n==og){i="#";const o=og.keys(t).sort();for(;!pe(s=o.pop());)pe(t[s])||(i+=s+":"+Xl(t[s])+",");Pu.set(t,i)}}else i=r?t.toJSON():e=="symbol"?t.toString():e=="string"?JSON.stringify(t):""+t;return i},kr=new WeakMap,ag={},Au={},uv="undefined",yh=typeof window!=uv,e0=typeof document!=uv,WU=()=>yh&&typeof window.requestAnimationFrame!=uv,TA=(t,e)=>{const n=kr.get(t);return[()=>!pe(e)&&t.get(e)||ag,r=>{if(!pe(e)){const i=t.get(e);e in Au||(Au[e]=i),n[5](e,Di(i,r),i||ag)}},n[6],()=>!pe(e)&&e in Au?Au[e]:!pe(e)&&t.get(e)||ag]};let t0=!0;const HU=()=>t0,[n0,r0]=yh&&window.addEventListener?[window.addEventListener.bind(window),window.removeEventListener.bind(window)]:[bi,bi],XU=()=>{const t=e0&&document.visibilityState;return pe(t)||t!=="hidden"},YU=t=>(e0&&document.addEventListener("visibilitychange",t),n0("focus",t),()=>{e0&&document.removeEventListener("visibilitychange",t),r0("focus",t)}),KU=t=>{const e=()=>{t0=!0,t()},n=()=>{t0=!1};return n0("online",e),n0("offline",n),()=>{r0("online",e),r0("offline",n)}},qU={isOnline:HU,isVisible:XU},ZU={initFocus:YU,initReconnect:KU},EE=!Wt.useId,Yl=!yh||"Deno"in window,QU=t=>WU()?window.requestAnimationFrame(t):setTimeout(t,1),lg=Yl?A.useEffect:A.useLayoutEffect,cg=typeof navigator<"u"&&navigator.connection,wE=!Yl&&cg&&(["slow-2g","2g"].includes(cg.effectiveType)||cg.saveData),fv=t=>{if(Br(t))try{t=t()}catch{t=""}const e=t;return t=typeof t=="string"?t:(Array.isArray(t)?t.length:t)?Xl(t):"",[t,e]};let JU=0;const i0=()=>++JU,SA=0,PA=1,AA=2,ej=3;var Ga={__proto__:null,ERROR_REVALIDATE_EVENT:ej,FOCUS_EVENT:SA,MUTATE_EVENT:AA,RECONNECT_EVENT:PA};async function CA(...t){const[e,n,r,i]=t,s=Di({populateCache:!0,throwOnError:!0},typeof i=="boolean"?{revalidate:i}:i||{});let o=s.populateCache;const a=s.rollbackOnError;let l=s.optimisticData;const c=s.revalidate!==!1,u=h=>typeof a=="function"?a(h):a!==!1,f=s.throwOnError;if(Br(n)){const h=n,p=[],g=e.keys();for(const E of g)!/^\$(inf|sub)\$/.test(E)&&h(e.get(E)._k)&&p.push(E);return Promise.all(p.map(d))}return d(n);async function d(h){const[p]=fv(h);if(!p)return;const[g,E]=TA(e,p),[m,y,v,b]=kr.get(e),T=()=>{const V=m[p];return c&&(delete v[p],delete b[p],V&&V[0])?V[0](AA).then(()=>g().data):g().data};if(t.length<3)return T();let S=r,P;const R=i0();y[p]=[R,0];const O=!pe(l),L=g(),M=L.data,j=L._c,U=pe(j)?M:j;if(O&&(l=Br(l)?l(U,M):l,E({data:l,_c:U})),Br(S))try{S=S(U)}catch(V){P=V}if(S&&$U(S))if(S=await S.catch(V=>{P=V}),R!==y[p][0]){if(P)throw P;return S}else P&&O&&u(P)&&(o=!0,E({data:U,_c:Gt}));if(o&&!P)if(Br(o)){const V=o(S,U);E({data:V,error:Gt,_c:Gt})}else E({data:S,error:Gt,_c:Gt});if(y[p][1]=i0(),Promise.resolve(T()).then(()=>{E({_c:Gt})}),P){if(f)throw P;return}return S}}const xE=(t,e)=>{for(const n in t)t[n][0]&&t[n][0](e)},tj=(t,e)=>{if(!kr.has(t)){const n=Di(ZU,e),r={},i=CA.bind(Gt,t);let s=bi;const o={},a=(u,f)=>{const d=o[u]||[];return o[u]=d,d.push(f),()=>d.splice(d.indexOf(f),1)},l=(u,f,d)=>{t.set(u,f);const h=o[u];if(h)for(const p of h)p(f,d)},c=()=>{if(!kr.has(t)&&(kr.set(t,[r,{},{},{},i,l,a]),!Yl)){const u=n.initFocus(setTimeout.bind(Gt,xE.bind(Gt,r,SA))),f=n.initReconnect(setTimeout.bind(Gt,xE.bind(Gt,r,PA)));s=()=>{u&&u(),f&&f(),kr.delete(t)}}};return c(),[t,i,c,s]}return[t,kr.get(t)[4]]},nj=(t,e,n,r,i)=>{const s=n.errorRetryCount,o=i.retryCount,a=~~((Math.random()+.5)*(1<<(o<8?o:8)))*n.errorRetryInterval;!pe(s)&&o>s||setTimeout(r,a,i)},rj=(t,e)=>Xl(t)==Xl(e),[LA,ij]=tj(new Map),sj=Di({onLoadingSlow:bi,onSuccess:bi,onError:bi,onErrorRetry:nj,onDiscarded:bi,revalidateOnFocus:!0,revalidateOnReconnect:!0,revalidateIfStale:!0,shouldRetryOnError:!0,errorRetryInterval:wE?1e4:5e3,focusThrottleInterval:5*1e3,dedupingInterval:2*1e3,loadingTimeout:wE?5e3:3e3,compare:rj,isPaused:()=>!1,cache:LA,mutate:ij,fallback:{}},qU),oj=(t,e)=>{const n=Di(t,e);if(e){const{use:r,fallback:i}=t,{use:s,fallback:o}=e;r&&s&&(n.use=r.concat(s)),i&&o&&(n.fallback=Di(i,o))}return n},aj=A.createContext({}),lj="$inf$",RA=yh&&window.__SWR_DEVTOOLS_USE__,cj=RA?window.__SWR_DEVTOOLS_USE__:[],uj=()=>{RA&&(window.__SWR_DEVTOOLS_REACT__=Wt)},fj=t=>Br(t[1])?[t[0],t[1],t[2]||{}]:[t[0],null,(t[1]===null?t[2]:t[1])||{}],dj=()=>Di(sj,A.useContext(aj)),hj=t=>(e,n,r)=>t(e,n&&((...s)=>{const[o]=fv(e),[,,,a]=kr.get(LA);if(o.startsWith(lj))return n(...s);const l=a[o];return pe(l)?n(...s):(delete a[o],l)}),r),pj=cj.concat(hj),gj=t=>function(...n){const r=dj(),[i,s,o]=fj(n),a=oj(r,o);let l=t;const{use:c}=a,u=(c||[]).concat(pj);for(let f=u.length;f--;)l=u[f](l);return l(i,s||a.fetcher||null,a)},mj=(t,e,n)=>{const r=e[t]||(e[t]=[]);return r.push(n),()=>{const i=r.indexOf(n);i>=0&&(r[i]=r[r.length-1],r.pop())}};uj();const TE=Wt.use||(t=>{if(t.status==="pending")throw t;if(t.status==="fulfilled")return t.value;throw t.status==="rejected"?t.reason:(t.status="pending",t.then(e=>{t.status="fulfilled",t.value=e},e=>{t.status="rejected",t.reason=e}),t)}),ug={dedupe:!0},yj=(t,e,n)=>{const{cache:r,compare:i,suspense:s,fallbackData:o,revalidateOnMount:a,revalidateIfStale:l,refreshInterval:c,refreshWhenHidden:u,refreshWhenOffline:f,keepPreviousData:d}=n,[h,p,g,E]=kr.get(r),[m,y]=fv(t),v=A.useRef(!1),b=A.useRef(!1),T=A.useRef(m),S=A.useRef(e),P=A.useRef(n),R=()=>P.current,O=()=>R().isVisible()&&R().isOnline(),[L,M,j,U]=TA(r,m),V=A.useRef({}).current,X=pe(o)?n.fallback[m]:o,q=(se,ie)=>{for(const xe in V){const te=xe;if(te==="data"){if(!i(se[te],ie[te])&&(!pe(se[te])||!i(Re,ie[te])))return!1}else if(ie[te]!==se[te])return!1}return!0},J=A.useMemo(()=>{const se=(()=>!m||!e?!1:pe(a)?R().isPaused()||s?!1:pe(l)?!0:l:a)(),ie=Ne=>{const be=Di(Ne);return delete be._k,se?{isValidating:!0,isLoading:!0,...be}:be},xe=L(),te=U(),ve=ie(xe),nt=xe===te?ve:ie(te);let _e=ve;return[()=>{const Ne=ie(L());return q(Ne,_e)?(_e.data=Ne.data,_e.isLoading=Ne.isLoading,_e.isValidating=Ne.isValidating,_e.error=Ne.error,_e):(_e=Ne,Ne)},()=>nt]},[r,m]),D=LS.useSyncExternalStore(A.useCallback(se=>j(m,(ie,xe)=>{q(xe,ie)||se()}),[r,m]),J[0],J[1]),G=!v.current,Y=h[m]&&h[m].length>0,re=D.data,ee=pe(re)?X:re,tt=D.error,he=A.useRef(ee),Re=d?pe(re)?he.current:re:ee,ke=(()=>Y&&!pe(tt)?!1:G&&!pe(a)?a:R().isPaused()?!1:s?pe(ee)?!1:l:pe(ee)||l)(),ue=!!(m&&e&&G&&ke),Le=pe(D.isValidating)?ue:D.isValidating,Q=pe(D.isLoading)?ue:D.isLoading,we=A.useCallback(async se=>{const ie=S.current;if(!m||!ie||b.current||R().isPaused())return!1;let xe,te,ve=!0;const nt=se||{},_e=!g[m]||!nt.dedupe,Ne=()=>EE?!b.current&&m===T.current&&v.current:m===T.current,be={isValidating:!1,isLoading:!1},Oe=()=>{M(be)},Vt=()=>{const Pe=g[m];Pe&&Pe[1]===te&&delete g[m]},en={isValidating:!0};pe(L().data)&&(en.isLoading=!0);try{if(_e&&(M(en),n.loadingTimeout&&pe(L().data)&&setTimeout(()=>{ve&&Ne()&&R().onLoadingSlow(m,n)},n.loadingTimeout),g[m]=[ie(y),i0()]),[xe,te]=g[m],xe=await xe,_e&&setTimeout(Vt,n.dedupingInterval),!g[m]||g[m][1]!==te)return _e&&Ne()&&R().onDiscarded(m),!1;be.error=Gt;const Pe=p[m];if(!pe(Pe)&&(te<=Pe[0]||te<=Pe[1]||Pe[1]===0))return Oe(),_e&&Ne()&&R().onDiscarded(m),!1;const Fe=L().data;be.data=i(Fe,xe)?Fe:xe,_e&&Ne()&&R().onSuccess(xe,m,n)}catch(Pe){Vt();const Fe=R(),{shouldRetryOnError:dt}=Fe;Fe.isPaused()||(be.error=Pe,_e&&Ne()&&(Fe.onError(Pe,m,Fe),(dt===!0||Br(dt)&&dt(Pe))&&O()&&Fe.onErrorRetry(Pe,m,Fe,tn=>{const nn=h[m];nn&&nn[0]&&nn[0](Ga.ERROR_REVALIDATE_EVENT,tn)},{retryCount:(nt.retryCount||0)+1,dedupe:!0})))}return ve=!1,Oe(),!0},[m,r]),it=A.useCallback((...se)=>CA(r,T.current,...se),[]);if(lg(()=>{S.current=e,P.current=n,pe(re)||(he.current=re)}),lg(()=>{if(!m)return;const se=we.bind(Gt,ug);let ie=0;const te=mj(m,h,(ve,nt={})=>{if(ve==Ga.FOCUS_EVENT){const _e=Date.now();R().revalidateOnFocus&&_e>ie&&O()&&(ie=_e+R().focusThrottleInterval,se())}else if(ve==Ga.RECONNECT_EVENT)R().revalidateOnReconnect&&O()&&se();else{if(ve==Ga.MUTATE_EVENT)return we();if(ve==Ga.ERROR_REVALIDATE_EVENT)return we(nt)}});return b.current=!1,T.current=m,v.current=!0,M({_k:y}),ke&&(pe(ee)||Yl?se():QU(se)),()=>{b.current=!0,te()}},[m]),lg(()=>{let se;function ie(){const te=Br(c)?c(L().data):c;te&&se!==-1&&(se=setTimeout(xe,te))}function xe(){!L().error&&(u||R().isVisible())&&(f||R().isOnline())?we(ug).then(ie):ie()}return ie(),()=>{se&&(clearTimeout(se),se=-1)}},[c,u,f,m]),A.useDebugValue(Re),s&&pe(ee)&&m){if(!EE&&Yl)throw new Error("Fallback data is required when using suspense in SSR.");S.current=e,P.current=n,b.current=!1;const se=E[m];if(!pe(se)){const ie=it(se);TE(ie)}if(pe(tt)){const ie=we(ug);pe(Re)||(ie.status="fulfilled",ie.value=!0),TE(ie)}else throw tt}return{mutate:it,get data(){return V.data=!0,Re},get error(){return V.error=!0,tt},get isValidating(){return V.isValidating=!0,Le},get isLoading(){return V.isLoading=!0,Q}}},vh=gj(yj);function OA(t,e){return function(){return t.apply(e,arguments)}}const{toString:vj}=Object.prototype,{getPrototypeOf:dv}=Object,_h=(t=>e=>{const n=vj.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Tr=t=>(t=t.toLowerCase(),e=>_h(e)===t),bh=t=>e=>typeof e===t,{isArray:_a}=Array,Kl=bh("undefined");function _j(t){return t!==null&&!Kl(t)&&t.constructor!==null&&!Kl(t.constructor)&&Mn(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const IA=Tr("ArrayBuffer");function bj(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&IA(t.buffer),e}const Ej=bh("string"),Mn=bh("function"),MA=bh("number"),Eh=t=>t!==null&&typeof t=="object",wj=t=>t===!0||t===!1,cf=t=>{if(_h(t)!=="object")return!1;const e=dv(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},xj=Tr("Date"),Tj=Tr("File"),Sj=Tr("Blob"),Pj=Tr("FileList"),Aj=t=>Eh(t)&&Mn(t.pipe),Cj=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||Mn(t.append)&&((e=_h(t))==="formdata"||e==="object"&&Mn(t.toString)&&t.toString()==="[object FormData]"))},Lj=Tr("URLSearchParams"),Rj=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Rc(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let r,i;if(typeof t!="object"&&(t=[t]),_a(t))for(r=0,i=t.length;r<i;r++)e.call(null,t[r],r,t);else{const s=n?Object.getOwnPropertyNames(t):Object.keys(t),o=s.length;let a;for(r=0;r<o;r++)a=s[r],e.call(null,t[a],a,t)}}function kA(t,e){e=e.toLowerCase();const n=Object.keys(t);let r=n.length,i;for(;r-- >0;)if(i=n[r],e===i.toLowerCase())return i;return null}const NA=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),FA=t=>!Kl(t)&&t!==NA;function s0(){const{caseless:t}=FA(this)&&this||{},e={},n=(r,i)=>{const s=t&&kA(e,i)||i;cf(e[s])&&cf(r)?e[s]=s0(e[s],r):cf(r)?e[s]=s0({},r):_a(r)?e[s]=r.slice():e[s]=r};for(let r=0,i=arguments.length;r<i;r++)arguments[r]&&Rc(arguments[r],n);return e}const Oj=(t,e,n,{allOwnKeys:r}={})=>(Rc(e,(i,s)=>{n&&Mn(i)?t[s]=OA(i,n):t[s]=i},{allOwnKeys:r}),t),Ij=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),Mj=(t,e,n,r)=>{t.prototype=Object.create(e.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},kj=(t,e,n,r)=>{let i,s,o;const a={};if(e=e||{},t==null)return e;do{for(i=Object.getOwnPropertyNames(t),s=i.length;s-- >0;)o=i[s],(!r||r(o,t,e))&&!a[o]&&(e[o]=t[o],a[o]=!0);t=n!==!1&&dv(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},Nj=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const r=t.indexOf(e,n);return r!==-1&&r===n},Fj=t=>{if(!t)return null;if(_a(t))return t;let e=t.length;if(!MA(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},Dj=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&dv(Uint8Array)),Bj=(t,e)=>{const r=(t&&t[Symbol.iterator]).call(t);let i;for(;(i=r.next())&&!i.done;){const s=i.value;e.call(t,s[0],s[1])}},zj=(t,e)=>{let n;const r=[];for(;(n=t.exec(e))!==null;)r.push(n);return r},Uj=Tr("HTMLFormElement"),jj=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,i){return r.toUpperCase()+i}),SE=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),Vj=Tr("RegExp"),DA=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),r={};Rc(n,(i,s)=>{let o;(o=e(i,s,t))!==!1&&(r[s]=o||i)}),Object.defineProperties(t,r)},$j=t=>{DA(t,(e,n)=>{if(Mn(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=t[n];if(Mn(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},Gj=(t,e)=>{const n={},r=i=>{i.forEach(s=>{n[s]=!0})};return _a(t)?r(t):r(String(t).split(e)),n},Wj=()=>{},Hj=(t,e)=>(t=+t,Number.isFinite(t)?t:e),fg="abcdefghijklmnopqrstuvwxyz",PE="0123456789",BA={DIGIT:PE,ALPHA:fg,ALPHA_DIGIT:fg+fg.toUpperCase()+PE},Xj=(t=16,e=BA.ALPHA_DIGIT)=>{let n="";const{length:r}=e;for(;t--;)n+=e[Math.random()*r|0];return n};function Yj(t){return!!(t&&Mn(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}const Kj=t=>{const e=new Array(10),n=(r,i)=>{if(Eh(r)){if(e.indexOf(r)>=0)return;if(!("toJSON"in r)){e[i]=r;const s=_a(r)?[]:{};return Rc(r,(o,a)=>{const l=n(o,i+1);!Kl(l)&&(s[a]=l)}),e[i]=void 0,s}}return r};return n(t,0)},qj=Tr("AsyncFunction"),Zj=t=>t&&(Eh(t)||Mn(t))&&Mn(t.then)&&Mn(t.catch),k={isArray:_a,isArrayBuffer:IA,isBuffer:_j,isFormData:Cj,isArrayBufferView:bj,isString:Ej,isNumber:MA,isBoolean:wj,isObject:Eh,isPlainObject:cf,isUndefined:Kl,isDate:xj,isFile:Tj,isBlob:Sj,isRegExp:Vj,isFunction:Mn,isStream:Aj,isURLSearchParams:Lj,isTypedArray:Dj,isFileList:Pj,forEach:Rc,merge:s0,extend:Oj,trim:Rj,stripBOM:Ij,inherits:Mj,toFlatObject:kj,kindOf:_h,kindOfTest:Tr,endsWith:Nj,toArray:Fj,forEachEntry:Bj,matchAll:zj,isHTMLForm:Uj,hasOwnProperty:SE,hasOwnProp:SE,reduceDescriptors:DA,freezeMethods:$j,toObjectSet:Gj,toCamelCase:jj,noop:Wj,toFiniteNumber:Hj,findKey:kA,global:NA,isContextDefined:FA,ALPHABET:BA,generateString:Xj,isSpecCompliantForm:Yj,toJSONObject:Kj,isAsyncFn:qj,isThenable:Zj};function fe(t,e,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i)}k.inherits(fe,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:k.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const zA=fe.prototype,UA={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{UA[t]={value:t}});Object.defineProperties(fe,UA);Object.defineProperty(zA,"isAxiosError",{value:!0});fe.from=(t,e,n,r,i,s)=>{const o=Object.create(zA);return k.toFlatObject(t,o,function(l){return l!==Error.prototype},a=>a!=="isAxiosError"),fe.call(o,t.message,e,n,r,i),o.cause=t,o.name=t.name,s&&Object.assign(o,s),o};const Qj=null;function o0(t){return k.isPlainObject(t)||k.isArray(t)}function jA(t){return k.endsWith(t,"[]")?t.slice(0,-2):t}function AE(t,e,n){return t?t.concat(e).map(function(i,s){return i=jA(i),!n&&s?"["+i+"]":i}).join(n?".":""):e}function Jj(t){return k.isArray(t)&&!t.some(o0)}const e6=k.toFlatObject(k,{},null,function(e){return/^is[A-Z]/.test(e)});function wh(t,e,n){if(!k.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=k.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(g,E){return!k.isUndefined(E[g])});const r=n.metaTokens,i=n.visitor||u,s=n.dots,o=n.indexes,l=(n.Blob||typeof Blob<"u"&&Blob)&&k.isSpecCompliantForm(e);if(!k.isFunction(i))throw new TypeError("visitor must be a function");function c(p){if(p===null)return"";if(k.isDate(p))return p.toISOString();if(!l&&k.isBlob(p))throw new fe("Blob is not supported. Use a Buffer instead.");return k.isArrayBuffer(p)||k.isTypedArray(p)?l&&typeof Blob=="function"?new Blob([p]):Buffer.from(p):p}function u(p,g,E){let m=p;if(p&&!E&&typeof p=="object"){if(k.endsWith(g,"{}"))g=r?g:g.slice(0,-2),p=JSON.stringify(p);else if(k.isArray(p)&&Jj(p)||(k.isFileList(p)||k.endsWith(g,"[]"))&&(m=k.toArray(p)))return g=jA(g),m.forEach(function(v,b){!(k.isUndefined(v)||v===null)&&e.append(o===!0?AE([g],b,s):o===null?g:g+"[]",c(v))}),!1}return o0(p)?!0:(e.append(AE(E,g,s),c(p)),!1)}const f=[],d=Object.assign(e6,{defaultVisitor:u,convertValue:c,isVisitable:o0});function h(p,g){if(!k.isUndefined(p)){if(f.indexOf(p)!==-1)throw Error("Circular reference detected in "+g.join("."));f.push(p),k.forEach(p,function(m,y){(!(k.isUndefined(m)||m===null)&&i.call(e,m,k.isString(y)?y.trim():y,g,d))===!0&&h(m,g?g.concat(y):[y])}),f.pop()}}if(!k.isObject(t))throw new TypeError("data must be an object");return h(t),e}function CE(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function hv(t,e){this._pairs=[],t&&wh(t,this,e)}const VA=hv.prototype;VA.append=function(e,n){this._pairs.push([e,n])};VA.toString=function(e){const n=e?function(r){return e.call(this,r,CE)}:CE;return this._pairs.map(function(i){return n(i[0])+"="+n(i[1])},"").join("&")};function t6(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function $A(t,e,n){if(!e)return t;const r=n&&n.encode||t6,i=n&&n.serialize;let s;if(i?s=i(e,n):s=k.isURLSearchParams(e)?e.toString():new hv(e,n).toString(r),s){const o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+s}return t}class n6{constructor(){this.handlers=[]}use(e,n,r){return this.handlers.push({fulfilled:e,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){k.forEach(this.handlers,function(r){r!==null&&e(r)})}}const LE=n6,GA={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},r6=typeof URLSearchParams<"u"?URLSearchParams:hv,i6=typeof FormData<"u"?FormData:null,s6=typeof Blob<"u"?Blob:null,o6=(()=>{let t;return typeof navigator<"u"&&((t=navigator.product)==="ReactNative"||t==="NativeScript"||t==="NS")?!1:typeof window<"u"&&typeof document<"u"})(),a6=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),gr={isBrowser:!0,classes:{URLSearchParams:r6,FormData:i6,Blob:s6},isStandardBrowserEnv:o6,isStandardBrowserWebWorkerEnv:a6,protocols:["http","https","file","blob","url","data"]};function l6(t,e){return wh(t,new gr.classes.URLSearchParams,Object.assign({visitor:function(n,r,i,s){return gr.isNode&&k.isBuffer(n)?(this.append(r,n.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)}},e))}function c6(t){return k.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function u6(t){const e={},n=Object.keys(t);let r;const i=n.length;let s;for(r=0;r<i;r++)s=n[r],e[s]=t[s];return e}function WA(t){function e(n,r,i,s){let o=n[s++];const a=Number.isFinite(+o),l=s>=n.length;return o=!o&&k.isArray(i)?i.length:o,l?(k.hasOwnProp(i,o)?i[o]=[i[o],r]:i[o]=r,!a):((!i[o]||!k.isObject(i[o]))&&(i[o]=[]),e(n,r,i[o],s)&&k.isArray(i[o])&&(i[o]=u6(i[o])),!a)}if(k.isFormData(t)&&k.isFunction(t.entries)){const n={};return k.forEachEntry(t,(r,i)=>{e(c6(r),i,n,0)}),n}return null}function f6(t,e,n){if(k.isString(t))try{return(e||JSON.parse)(t),k.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(t)}const pv={transitional:GA,adapter:["xhr","http"],transformRequest:[function(e,n){const r=n.getContentType()||"",i=r.indexOf("application/json")>-1,s=k.isObject(e);if(s&&k.isHTMLForm(e)&&(e=new FormData(e)),k.isFormData(e))return i&&i?JSON.stringify(WA(e)):e;if(k.isArrayBuffer(e)||k.isBuffer(e)||k.isStream(e)||k.isFile(e)||k.isBlob(e))return e;if(k.isArrayBufferView(e))return e.buffer;if(k.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(s){if(r.indexOf("application/x-www-form-urlencoded")>-1)return l6(e,this.formSerializer).toString();if((a=k.isFileList(e))||r.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return wh(a?{"files[]":e}:e,l&&new l,this.formSerializer)}}return s||i?(n.setContentType("application/json",!1),f6(e)):e}],transformResponse:[function(e){const n=this.transitional||pv.transitional,r=n&&n.forcedJSONParsing,i=this.responseType==="json";if(e&&k.isString(e)&&(r&&!this.responseType||i)){const o=!(n&&n.silentJSONParsing)&&i;try{return JSON.parse(e)}catch(a){if(o)throw a.name==="SyntaxError"?fe.from(a,fe.ERR_BAD_RESPONSE,this,null,this.response):a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:gr.classes.FormData,Blob:gr.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};k.forEach(["delete","get","head","post","put","patch"],t=>{pv.headers[t]={}});const gv=pv,d6=k.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),h6=t=>{const e={};let n,r,i;return t&&t.split(`
`).forEach(function(o){i=o.indexOf(":"),n=o.substring(0,i).trim().toLowerCase(),r=o.substring(i+1).trim(),!(!n||e[n]&&d6[n])&&(n==="set-cookie"?e[n]?e[n].push(r):e[n]=[r]:e[n]=e[n]?e[n]+", "+r:r)}),e},RE=Symbol("internals");function Wa(t){return t&&String(t).trim().toLowerCase()}function uf(t){return t===!1||t==null?t:k.isArray(t)?t.map(uf):String(t)}function p6(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(t);)e[r[1]]=r[2];return e}const g6=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function dg(t,e,n,r,i){if(k.isFunction(r))return r.call(this,e,n);if(i&&(e=n),!!k.isString(e)){if(k.isString(r))return e.indexOf(r)!==-1;if(k.isRegExp(r))return r.test(e)}}function m6(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,r)=>n.toUpperCase()+r)}function y6(t,e){const n=k.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+n,{value:function(i,s,o){return this[r].call(this,e,i,s,o)},configurable:!0})})}class xh{constructor(e){e&&this.set(e)}set(e,n,r){const i=this;function s(a,l,c){const u=Wa(l);if(!u)throw new Error("header name must be a non-empty string");const f=k.findKey(i,u);(!f||i[f]===void 0||c===!0||c===void 0&&i[f]!==!1)&&(i[f||l]=uf(a))}const o=(a,l)=>k.forEach(a,(c,u)=>s(c,u,l));return k.isPlainObject(e)||e instanceof this.constructor?o(e,n):k.isString(e)&&(e=e.trim())&&!g6(e)?o(h6(e),n):e!=null&&s(n,e,r),this}get(e,n){if(e=Wa(e),e){const r=k.findKey(this,e);if(r){const i=this[r];if(!n)return i;if(n===!0)return p6(i);if(k.isFunction(n))return n.call(this,i,r);if(k.isRegExp(n))return n.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=Wa(e),e){const r=k.findKey(this,e);return!!(r&&this[r]!==void 0&&(!n||dg(this,this[r],r,n)))}return!1}delete(e,n){const r=this;let i=!1;function s(o){if(o=Wa(o),o){const a=k.findKey(r,o);a&&(!n||dg(r,r[a],a,n))&&(delete r[a],i=!0)}}return k.isArray(e)?e.forEach(s):s(e),i}clear(e){const n=Object.keys(this);let r=n.length,i=!1;for(;r--;){const s=n[r];(!e||dg(this,this[s],s,e,!0))&&(delete this[s],i=!0)}return i}normalize(e){const n=this,r={};return k.forEach(this,(i,s)=>{const o=k.findKey(r,s);if(o){n[o]=uf(i),delete n[s];return}const a=e?m6(s):String(s).trim();a!==s&&delete n[s],n[a]=uf(i),r[a]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return k.forEach(this,(r,i)=>{r!=null&&r!==!1&&(n[i]=e&&k.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const r=new this(e);return n.forEach(i=>r.set(i)),r}static accessor(e){const r=(this[RE]=this[RE]={accessors:{}}).accessors,i=this.prototype;function s(o){const a=Wa(o);r[a]||(y6(i,o),r[a]=!0)}return k.isArray(e)?e.forEach(s):s(e),this}}xh.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);k.reduceDescriptors(xh.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(r){this[n]=r}}});k.freezeMethods(xh);const jr=xh;function hg(t,e){const n=this||gv,r=e||n,i=jr.from(r.headers);let s=r.data;return k.forEach(t,function(a){s=a.call(n,s,i.normalize(),e?e.status:void 0)}),i.normalize(),s}function HA(t){return!!(t&&t.__CANCEL__)}function Oc(t,e,n){fe.call(this,t??"canceled",fe.ERR_CANCELED,e,n),this.name="CanceledError"}k.inherits(Oc,fe,{__CANCEL__:!0});function v6(t,e,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?t(n):e(new fe("Request failed with status code "+n.status,[fe.ERR_BAD_REQUEST,fe.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}const _6=gr.isStandardBrowserEnv?function(){return{write:function(n,r,i,s,o,a){const l=[];l.push(n+"="+encodeURIComponent(r)),k.isNumber(i)&&l.push("expires="+new Date(i).toGMTString()),k.isString(s)&&l.push("path="+s),k.isString(o)&&l.push("domain="+o),a===!0&&l.push("secure"),document.cookie=l.join("; ")},read:function(n){const r=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return r?decodeURIComponent(r[3]):null},remove:function(n){this.write(n,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}();function b6(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function E6(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t}function XA(t,e){return t&&!b6(e)?E6(t,e):e}const w6=gr.isStandardBrowserEnv?function(){const e=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");let r;function i(s){let o=s;return e&&(n.setAttribute("href",o),o=n.href),n.setAttribute("href",o),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return r=i(window.location.href),function(o){const a=k.isString(o)?i(o):o;return a.protocol===r.protocol&&a.host===r.host}}():function(){return function(){return!0}}();function x6(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function T6(t,e){t=t||10;const n=new Array(t),r=new Array(t);let i=0,s=0,o;return e=e!==void 0?e:1e3,function(l){const c=Date.now(),u=r[s];o||(o=c),n[i]=l,r[i]=c;let f=s,d=0;for(;f!==i;)d+=n[f++],f=f%t;if(i=(i+1)%t,i===s&&(s=(s+1)%t),c-o<e)return;const h=u&&c-u;return h?Math.round(d*1e3/h):void 0}}function OE(t,e){let n=0;const r=T6(50,250);return i=>{const s=i.loaded,o=i.lengthComputable?i.total:void 0,a=s-n,l=r(a),c=s<=o;n=s;const u={loaded:s,total:o,progress:o?s/o:void 0,bytes:a,rate:l||void 0,estimated:l&&o&&c?(o-s)/l:void 0,event:i};u[e?"download":"upload"]=!0,t(u)}}const S6=typeof XMLHttpRequest<"u",P6=S6&&function(t){return new Promise(function(n,r){let i=t.data;const s=jr.from(t.headers).normalize(),o=t.responseType;let a;function l(){t.cancelToken&&t.cancelToken.unsubscribe(a),t.signal&&t.signal.removeEventListener("abort",a)}let c;k.isFormData(i)&&(gr.isStandardBrowserEnv||gr.isStandardBrowserWebWorkerEnv?s.setContentType(!1):s.getContentType(/^\s*multipart\/form-data/)?k.isString(c=s.getContentType())&&s.setContentType(c.replace(/^\s*(multipart\/form-data);+/,"$1")):s.setContentType("multipart/form-data"));let u=new XMLHttpRequest;if(t.auth){const p=t.auth.username||"",g=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";s.set("Authorization","Basic "+btoa(p+":"+g))}const f=XA(t.baseURL,t.url);u.open(t.method.toUpperCase(),$A(f,t.params,t.paramsSerializer),!0),u.timeout=t.timeout;function d(){if(!u)return;const p=jr.from("getAllResponseHeaders"in u&&u.getAllResponseHeaders()),E={data:!o||o==="text"||o==="json"?u.responseText:u.response,status:u.status,statusText:u.statusText,headers:p,config:t,request:u};v6(function(y){n(y),l()},function(y){r(y),l()},E),u=null}if("onloadend"in u?u.onloadend=d:u.onreadystatechange=function(){!u||u.readyState!==4||u.status===0&&!(u.responseURL&&u.responseURL.indexOf("file:")===0)||setTimeout(d)},u.onabort=function(){u&&(r(new fe("Request aborted",fe.ECONNABORTED,t,u)),u=null)},u.onerror=function(){r(new fe("Network Error",fe.ERR_NETWORK,t,u)),u=null},u.ontimeout=function(){let g=t.timeout?"timeout of "+t.timeout+"ms exceeded":"timeout exceeded";const E=t.transitional||GA;t.timeoutErrorMessage&&(g=t.timeoutErrorMessage),r(new fe(g,E.clarifyTimeoutError?fe.ETIMEDOUT:fe.ECONNABORTED,t,u)),u=null},gr.isStandardBrowserEnv){const p=(t.withCredentials||w6(f))&&t.xsrfCookieName&&_6.read(t.xsrfCookieName);p&&s.set(t.xsrfHeaderName,p)}i===void 0&&s.setContentType(null),"setRequestHeader"in u&&k.forEach(s.toJSON(),function(g,E){u.setRequestHeader(E,g)}),k.isUndefined(t.withCredentials)||(u.withCredentials=!!t.withCredentials),o&&o!=="json"&&(u.responseType=t.responseType),typeof t.onDownloadProgress=="function"&&u.addEventListener("progress",OE(t.onDownloadProgress,!0)),typeof t.onUploadProgress=="function"&&u.upload&&u.upload.addEventListener("progress",OE(t.onUploadProgress)),(t.cancelToken||t.signal)&&(a=p=>{u&&(r(!p||p.type?new Oc(null,t,u):p),u.abort(),u=null)},t.cancelToken&&t.cancelToken.subscribe(a),t.signal&&(t.signal.aborted?a():t.signal.addEventListener("abort",a)));const h=x6(f);if(h&&gr.protocols.indexOf(h)===-1){r(new fe("Unsupported protocol "+h+":",fe.ERR_BAD_REQUEST,t));return}u.send(i||null)})},a0={http:Qj,xhr:P6};k.forEach(a0,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const IE=t=>`- ${t}`,A6=t=>k.isFunction(t)||t===null||t===!1,YA={getAdapter:t=>{t=k.isArray(t)?t:[t];const{length:e}=t;let n,r;const i={};for(let s=0;s<e;s++){n=t[s];let o;if(r=n,!A6(n)&&(r=a0[(o=String(n)).toLowerCase()],r===void 0))throw new fe(`Unknown adapter '${o}'`);if(r)break;i[o||"#"+s]=r}if(!r){const s=Object.entries(i).map(([a,l])=>`adapter ${a} `+(l===!1?"is not supported by the environment":"is not available in the build"));let o=e?s.length>1?`since :
`+s.map(IE).join(`
`):" "+IE(s[0]):"as no adapter specified";throw new fe("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return r},adapters:a0};function pg(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Oc(null,t)}function ME(t){return pg(t),t.headers=jr.from(t.headers),t.data=hg.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),YA.getAdapter(t.adapter||gv.adapter)(t).then(function(r){return pg(t),r.data=hg.call(t,t.transformResponse,r),r.headers=jr.from(r.headers),r},function(r){return HA(r)||(pg(t),r&&r.response&&(r.response.data=hg.call(t,t.transformResponse,r.response),r.response.headers=jr.from(r.response.headers))),Promise.reject(r)})}const kE=t=>t instanceof jr?t.toJSON():t;function oa(t,e){e=e||{};const n={};function r(c,u,f){return k.isPlainObject(c)&&k.isPlainObject(u)?k.merge.call({caseless:f},c,u):k.isPlainObject(u)?k.merge({},u):k.isArray(u)?u.slice():u}function i(c,u,f){if(k.isUndefined(u)){if(!k.isUndefined(c))return r(void 0,c,f)}else return r(c,u,f)}function s(c,u){if(!k.isUndefined(u))return r(void 0,u)}function o(c,u){if(k.isUndefined(u)){if(!k.isUndefined(c))return r(void 0,c)}else return r(void 0,u)}function a(c,u,f){if(f in e)return r(c,u);if(f in t)return r(void 0,c)}const l={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(c,u)=>i(kE(c),kE(u),!0)};return k.forEach(Object.keys(Object.assign({},t,e)),function(u){const f=l[u]||i,d=f(t[u],e[u],u);k.isUndefined(d)&&f!==a||(n[u]=d)}),n}const KA="1.5.1",mv={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{mv[t]=function(r){return typeof r===t||"a"+(e<1?"n ":" ")+t}});const NE={};mv.transitional=function(e,n,r){function i(s,o){return"[Axios v"+KA+"] Transitional option '"+s+"'"+o+(r?". "+r:"")}return(s,o,a)=>{if(e===!1)throw new fe(i(o," has been removed"+(n?" in "+n:"")),fe.ERR_DEPRECATED);return n&&!NE[o]&&(NE[o]=!0,console.warn(i(o," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(s,o,a):!0}};function C6(t,e,n){if(typeof t!="object")throw new fe("options must be an object",fe.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let i=r.length;for(;i-- >0;){const s=r[i],o=e[s];if(o){const a=t[s],l=a===void 0||o(a,s,t);if(l!==!0)throw new fe("option "+s+" must be "+l,fe.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new fe("Unknown option "+s,fe.ERR_BAD_OPTION)}}const l0={assertOptions:C6,validators:mv},ui=l0.validators;class ud{constructor(e){this.defaults=e,this.interceptors={request:new LE,response:new LE}}request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=oa(this.defaults,n);const{transitional:r,paramsSerializer:i,headers:s}=n;r!==void 0&&l0.assertOptions(r,{silentJSONParsing:ui.transitional(ui.boolean),forcedJSONParsing:ui.transitional(ui.boolean),clarifyTimeoutError:ui.transitional(ui.boolean)},!1),i!=null&&(k.isFunction(i)?n.paramsSerializer={serialize:i}:l0.assertOptions(i,{encode:ui.function,serialize:ui.function},!0)),n.method=(n.method||this.defaults.method||"get").toLowerCase();let o=s&&k.merge(s.common,s[n.method]);s&&k.forEach(["delete","get","head","post","put","patch","common"],p=>{delete s[p]}),n.headers=jr.concat(o,s);const a=[];let l=!0;this.interceptors.request.forEach(function(g){typeof g.runWhen=="function"&&g.runWhen(n)===!1||(l=l&&g.synchronous,a.unshift(g.fulfilled,g.rejected))});const c=[];this.interceptors.response.forEach(function(g){c.push(g.fulfilled,g.rejected)});let u,f=0,d;if(!l){const p=[ME.bind(this),void 0];for(p.unshift.apply(p,a),p.push.apply(p,c),d=p.length,u=Promise.resolve(n);f<d;)u=u.then(p[f++],p[f++]);return u}d=a.length;let h=n;for(f=0;f<d;){const p=a[f++],g=a[f++];try{h=p(h)}catch(E){g.call(this,E);break}}try{u=ME.call(this,h)}catch(p){return Promise.reject(p)}for(f=0,d=c.length;f<d;)u=u.then(c[f++],c[f++]);return u}getUri(e){e=oa(this.defaults,e);const n=XA(e.baseURL,e.url);return $A(n,e.params,e.paramsSerializer)}}k.forEach(["delete","get","head","options"],function(e){ud.prototype[e]=function(n,r){return this.request(oa(r||{},{method:e,url:n,data:(r||{}).data}))}});k.forEach(["post","put","patch"],function(e){function n(r){return function(s,o,a){return this.request(oa(a||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:s,data:o}))}}ud.prototype[e]=n(),ud.prototype[e+"Form"]=n(!0)});const ff=ud;class yv{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(s){n=s});const r=this;this.promise.then(i=>{if(!r._listeners)return;let s=r._listeners.length;for(;s-- >0;)r._listeners[s](i);r._listeners=null}),this.promise.then=i=>{let s;const o=new Promise(a=>{r.subscribe(a),s=a}).then(i);return o.cancel=function(){r.unsubscribe(s)},o},e(function(s,o,a){r.reason||(r.reason=new Oc(s,o,a),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}static source(){let e;return{token:new yv(function(i){e=i}),cancel:e}}}const L6=yv;function R6(t){return function(n){return t.apply(null,n)}}function O6(t){return k.isObject(t)&&t.isAxiosError===!0}const c0={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(c0).forEach(([t,e])=>{c0[e]=t});const I6=c0;function qA(t){const e=new ff(t),n=OA(ff.prototype.request,e);return k.extend(n,ff.prototype,e,{allOwnKeys:!0}),k.extend(n,e,null,{allOwnKeys:!0}),n.create=function(i){return qA(oa(t,i))},n}const at=qA(gv);at.Axios=ff;at.CanceledError=Oc;at.CancelToken=L6;at.isCancel=HA;at.VERSION=KA;at.toFormData=wh;at.AxiosError=fe;at.Cancel=at.CanceledError;at.all=function(e){return Promise.all(e)};at.spread=R6;at.isAxiosError=O6;at.mergeConfig=oa;at.AxiosHeaders=jr;at.formToJSON=t=>WA(k.isHTMLForm(t)?new FormData(t):t);at.getAdapter=YA.getAdapter;at.HttpStatusCode=I6;at.default=at;const M6=at,k6="../../public/data",Th=M6.create({baseURL:k6}),N6=async t=>{try{return(await Th.get(`maps/${t}`)).data}catch(e){console.log(e)}};function F6(){const{data:t,error:e,isLoading:n}=vh("map-la-vega-baja.json",N6,{suspense:!0});return{dataMap:t,errorMap:e,loadingMap:n}}const D6=async t=>{try{return(await Th.get(`areas/${t}`)).data}catch(e){console.log(e)}};function B6(){const{data:t,error:e,isLoading:n}=vh("areas-la-vega-baja.json",D6,{suspense:!0});return{dataAreas:t,errorAreas:e,loadingAreas:n}}const z6=`#define SHADER_NAME icon-layer-vertex-shader

attribute vec2 positions;

attribute vec3 instancePositions;
attribute vec3 instancePositions64Low;
attribute float instanceSizes;
attribute float instanceAngles;
attribute vec4 instanceColors;
attribute vec3 instancePickingColors;
attribute vec4 instanceIconFrames;
attribute float instanceColorModes;
attribute vec2 instanceOffsets;
attribute vec2 instancePixelOffset;

uniform float sizeScale;
uniform vec2 iconsTextureDim;
uniform float sizeMinPixels;
uniform float sizeMaxPixels;
uniform bool billboard;
uniform int sizeUnits;

varying float vColorMode;
varying vec4 vColor;
varying vec2 vTextureCoords;
varying vec2 uv;

vec2 rotate_by_angle(vec2 vertex, float angle) {
  float angle_radian = angle * PI / 180.0;
  float cos_angle = cos(angle_radian);
  float sin_angle = sin(angle_radian);
  mat2 rotationMatrix = mat2(cos_angle, -sin_angle, sin_angle, cos_angle);
  return rotationMatrix * vertex;
}

void main(void) {
  geometry.worldPosition = instancePositions;
  geometry.uv = positions;
  geometry.pickingColor = instancePickingColors;
  uv = positions;

  vec2 iconSize = instanceIconFrames.zw;
  float sizePixels = clamp(
    project_size_to_pixel(instanceSizes * sizeScale, sizeUnits), 
    sizeMinPixels, sizeMaxPixels
  );
  float instanceScale = iconSize.y == 0.0 ? 0.0 : sizePixels / iconSize.y;
  vec2 pixelOffset = positions / 2.0 * iconSize + instanceOffsets;
  pixelOffset = rotate_by_angle(pixelOffset, instanceAngles) * instanceScale;
  pixelOffset += instancePixelOffset;
  pixelOffset.y *= -1.0;

  if (billboard)  {
    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);
    DECKGL_FILTER_GL_POSITION(gl_Position, geometry);
    vec3 offset = vec3(pixelOffset, 0.0);
    DECKGL_FILTER_SIZE(offset, geometry);
    gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);

  } else {
    vec3 offset_common = vec3(project_pixel_size(pixelOffset), 0.0);
    DECKGL_FILTER_SIZE(offset_common, geometry);
    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset_common, geometry.position); 
    DECKGL_FILTER_GL_POSITION(gl_Position, geometry);
  }

  vTextureCoords = mix(
    instanceIconFrames.xy,
    instanceIconFrames.xy + iconSize,
    (positions.xy + 1.0) / 2.0
  ) / iconsTextureDim;

  vColor = instanceColors;
  DECKGL_FILTER_COLOR(vColor, geometry);

  vColorMode = instanceColorModes;
}
`,U6=`#define SHADER_NAME icon-layer-fragment-shader

precision highp float;

uniform float opacity;
uniform sampler2D iconsTexture;
uniform float alphaCutoff;

varying float vColorMode;
varying vec4 vColor;
varying vec2 vTextureCoords;
varying vec2 uv;

void main(void) {
  geometry.uv = uv;

  vec4 texColor = texture2D(iconsTexture, vTextureCoords);
  vec3 color = mix(texColor.rgb, vColor.rgb, vColorMode);
  float a = texColor.a * opacity * vColor.a;

  if (a < alphaCutoff) {
    discard;
  }

  gl_FragColor = vec4(color, a);
  DECKGL_FILTER_COLOR(gl_FragColor, geometry);
}
`,j6=1024,V6=4,FE=()=>{},DE={10241:9987,10240:9729,10242:33071,10243:33071};function $6(t){return Math.pow(2,Math.ceil(Math.log2(t)))}function G6(t,e,n,r){const i=Math.min(n/e.width,r/e.height),s=Math.floor(e.width*i),o=Math.floor(e.height*i);return i===1?{data:e,width:s,height:o}:(t.canvas.height=o,t.canvas.width=s,t.clearRect(0,0,s,o),t.drawImage(e,0,0,e.width,e.height,0,0,s,o),{data:t.canvas,width:s,height:o})}function ql(t){return t&&(t.id||t.url)}function W6(t,e,n,r){const i=t.width,s=t.height,o=new yn(t.gl,{width:e,height:n,parameters:r});return yk(t,o,{targetY:0,width:i,height:s}),t.delete(),o}function BE(t,e,n){for(let r=0;r<e.length;r++){const{icon:i,xOffset:s}=e[r],o=ql(i);t[o]={...i,x:s,y:n}}}function H6({icons:t,buffer:e,mapping:n={},xOffset:r=0,yOffset:i=0,rowHeight:s=0,canvasWidth:o}){let a=[];for(let l=0;l<t.length;l++){const c=t[l],u=ql(c);if(!n[u]){const{height:f,width:d}=c;r+d+e>o&&(BE(n,a,i),r=0,i=s+i+e,s=0,a=[]),a.push({icon:c,xOffset:r}),r=r+d+e,s=Math.max(s,f)}}return a.length>0&&BE(n,a,i),{mapping:n,rowHeight:s,xOffset:r,yOffset:i,canvasWidth:o,canvasHeight:$6(s+i+e)}}function X6(t,e,n){if(!t||!e)return null;n=n||{};const r={},{iterable:i,objectInfo:s}=ph(t);for(const o of i){s.index++;const a=e(o,s),l=ql(a);if(!a)throw new Error("Icon is missing.");if(!a.url)throw new Error("Icon url is missing.");!r[l]&&(!n[l]||a.url!==n[l].url)&&(r[l]={...a,source:o,sourceIndex:s.index})}return r}class Y6{constructor(e,{onUpdate:n=FE,onError:r=FE}){_(this,"gl",void 0),_(this,"onUpdate",void 0),_(this,"onError",void 0),_(this,"_loadOptions",null),_(this,"_texture",null),_(this,"_externalTexture",null),_(this,"_mapping",{}),_(this,"_textureParameters",null),_(this,"_pendingCount",0),_(this,"_autoPacking",!1),_(this,"_xOffset",0),_(this,"_yOffset",0),_(this,"_rowHeight",0),_(this,"_buffer",V6),_(this,"_canvasWidth",j6),_(this,"_canvasHeight",0),_(this,"_canvas",null),this.gl=e,this.onUpdate=n,this.onError=r}finalize(){var e;(e=this._texture)===null||e===void 0||e.delete()}getTexture(){return this._texture||this._externalTexture}getIconMapping(e){const n=this._autoPacking?ql(e):e;return this._mapping[n]||{}}setProps({loadOptions:e,autoPacking:n,iconAtlas:r,iconMapping:i,textureParameters:s}){if(e&&(this._loadOptions=e),n!==void 0&&(this._autoPacking=n),i&&(this._mapping=i),r){var o;(o=this._texture)===null||o===void 0||o.delete(),this._texture=null,this._externalTexture=r}s&&(this._textureParameters=s)}get isLoaded(){return this._pendingCount===0}packIcons(e,n){if(!this._autoPacking||typeof document>"u")return;const r=Object.values(X6(e,n,this._mapping)||{});if(r.length>0){const{mapping:i,xOffset:s,yOffset:o,rowHeight:a,canvasHeight:l}=H6({icons:r,buffer:this._buffer,canvasWidth:this._canvasWidth,mapping:this._mapping,rowHeight:this._rowHeight,xOffset:this._xOffset,yOffset:this._yOffset});this._rowHeight=a,this._mapping=i,this._xOffset=s,this._yOffset=o,this._canvasHeight=l,this._texture||(this._texture=new yn(this.gl,{width:this._canvasWidth,height:this._canvasHeight,parameters:this._textureParameters||DE})),this._texture.height!==this._canvasHeight&&(this._texture=W6(this._texture,this._canvasWidth,this._canvasHeight,this._textureParameters||DE)),this.onUpdate(),this._canvas=this._canvas||document.createElement("canvas"),this._loadIcons(r)}}_loadIcons(e){const n=this._canvas.getContext("2d",{willReadFrequently:!0});for(const r of e)this._pendingCount++,Kf(r.url,this._loadOptions).then(i=>{const s=ql(r),o=this._mapping[s],{x:a,y:l,width:c,height:u}=o,{data:f,width:d,height:h}=G6(n,i,c,u);this._texture.setSubImageData({data:f,x:a+(c-d)/2,y:l+(u-h)/2,width:d,height:h}),o.width=d,o.height=h,this._texture.generateMipmap(),this.onUpdate()}).catch(i=>{this.onError({url:r.url,source:r.source,sourceIndex:r.sourceIndex,loadOptions:this._loadOptions,error:i})}).finally(()=>{this._pendingCount--})}}const ZA=[0,0,0,255],K6={iconAtlas:{type:"image",value:null,async:!0},iconMapping:{type:"object",value:{},async:!0},sizeScale:{type:"number",value:1,min:0},billboard:!0,sizeUnits:"pixels",sizeMinPixels:{type:"number",min:0,value:0},sizeMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},alphaCutoff:{type:"number",value:.05,min:0,max:1},getPosition:{type:"accessor",value:t=>t.position},getIcon:{type:"accessor",value:t=>t.icon},getColor:{type:"accessor",value:ZA},getSize:{type:"accessor",value:1},getAngle:{type:"accessor",value:0},getPixelOffset:{type:"accessor",value:[0,0]},onIconError:{type:"function",value:null,optional:!0},textureParameters:{type:"object",ignore:!0}};class Ic extends ei{constructor(...e){super(...e),_(this,"state",void 0)}getShaders(){return super.getShaders({vs:z6,fs:U6,modules:[Sc,Pc]})}initializeState(){this.state={iconManager:new Y6(this.context.gl,{onUpdate:this._onUpdate.bind(this),onError:this._onError.bind(this)})},this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceSizes:{size:1,transition:!0,accessor:"getSize",defaultValue:1},instanceOffsets:{size:2,accessor:"getIcon",transform:this.getInstanceOffset},instanceIconFrames:{size:4,accessor:"getIcon",transform:this.getInstanceIconFrame},instanceColorModes:{size:1,type:5121,accessor:"getIcon",transform:this.getInstanceColorMode},instanceColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:!0,accessor:"getColor",defaultValue:ZA},instanceAngles:{size:1,transition:!0,accessor:"getAngle"},instancePixelOffset:{size:2,transition:!0,accessor:"getPixelOffset"}})}updateState(e){super.updateState(e);const{props:n,oldProps:r,changeFlags:i}=e,s=this.getAttributeManager(),{iconAtlas:o,iconMapping:a,data:l,getIcon:c,textureParameters:u}=n,{iconManager:f}=this.state,d=o||this.internalState.isAsyncPropLoading("iconAtlas");if(f.setProps({loadOptions:n.loadOptions,autoPacking:!d,iconAtlas:o,iconMapping:d?a:null,textureParameters:u}),d?r.iconMapping!==n.iconMapping&&s.invalidate("getIcon"):(i.dataChanged||i.updateTriggersChanged&&(i.updateTriggersChanged.all||i.updateTriggersChanged.getIcon))&&f.packIcons(l,c),i.extensionsChanged){var h;const{gl:p}=this.context;(h=this.state.model)===null||h===void 0||h.delete(),this.state.model=this._getModel(p),s.invalidateAll()}}get isLoaded(){return super.isLoaded&&this.state.iconManager.isLoaded}finalizeState(e){super.finalizeState(e),this.state.iconManager.finalize()}draw({uniforms:e}){const{sizeScale:n,sizeMinPixels:r,sizeMaxPixels:i,sizeUnits:s,billboard:o,alphaCutoff:a}=this.props,{iconManager:l}=this.state,c=l.getTexture();c&&this.state.model.setUniforms(e).setUniforms({iconsTexture:c,iconsTextureDim:[c.width,c.height],sizeUnits:Ts[s],sizeScale:n,sizeMinPixels:r,sizeMaxPixels:i,billboard:o,alphaCutoff:a}).draw()}_getModel(e){const n=[-1,-1,-1,1,1,1,1,-1];return new Ps(e,{...this.getShaders(),id:this.props.id,geometry:new xc({drawMode:6,attributes:{positions:{size:2,value:new Float32Array(n)}}}),isInstanced:!0})}_onUpdate(){this.setNeedsRedraw()}_onError(e){var n;const r=(n=this.getCurrentLayer())===null||n===void 0?void 0:n.props.onIconError;r?r(e):ae.error(e.error.message)()}getInstanceOffset(e){const{width:n,height:r,anchorX:i=n/2,anchorY:s=r/2}=this.state.iconManager.getIconMapping(e);return[n/2-i,r/2-s]}getInstanceColorMode(e){return this.state.iconManager.getIconMapping(e).mask?1:0}getInstanceIconFrame(e){const{x:n,y:r,width:i,height:s}=this.state.iconManager.getIconMapping(e);return[n,r,i,s]}}_(Ic,"defaultProps",K6);_(Ic,"layerName","IconLayer");const q6=`#define SHADER_NAME scatterplot-layer-vertex-shader

attribute vec3 positions;

attribute vec3 instancePositions;
attribute vec3 instancePositions64Low;
attribute float instanceRadius;
attribute float instanceLineWidths;
attribute vec4 instanceFillColors;
attribute vec4 instanceLineColors;
attribute vec3 instancePickingColors;

uniform float opacity;
uniform float radiusScale;
uniform float radiusMinPixels;
uniform float radiusMaxPixels;
uniform float lineWidthScale;
uniform float lineWidthMinPixels;
uniform float lineWidthMaxPixels;
uniform float stroked;
uniform bool filled;
uniform bool antialiasing;
uniform bool billboard;
uniform int radiusUnits;
uniform int lineWidthUnits;

varying vec4 vFillColor;
varying vec4 vLineColor;
varying vec2 unitPosition;
varying float innerUnitRadius;
varying float outerRadiusPixels;


void main(void) {
  geometry.worldPosition = instancePositions;
  outerRadiusPixels = clamp(
    project_size_to_pixel(radiusScale * instanceRadius, radiusUnits),
    radiusMinPixels, radiusMaxPixels
  );
  float lineWidthPixels = clamp(
    project_size_to_pixel(lineWidthScale * instanceLineWidths, lineWidthUnits),
    lineWidthMinPixels, lineWidthMaxPixels
  );
  outerRadiusPixels += stroked * lineWidthPixels / 2.0;
  float edgePadding = antialiasing ? (outerRadiusPixels + SMOOTH_EDGE_RADIUS) / outerRadiusPixels : 1.0;
  unitPosition = edgePadding * positions.xy;
  geometry.uv = unitPosition;
  geometry.pickingColor = instancePickingColors;

  innerUnitRadius = 1.0 - stroked * lineWidthPixels / outerRadiusPixels;
  
  if (billboard) {
    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);
    DECKGL_FILTER_GL_POSITION(gl_Position, geometry);
    vec3 offset = edgePadding * positions * outerRadiusPixels;
    DECKGL_FILTER_SIZE(offset, geometry);
    gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);
  } else {
    vec3 offset = edgePadding * positions * project_pixel_size(outerRadiusPixels);
    DECKGL_FILTER_SIZE(offset, geometry);
    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset, geometry.position);
    DECKGL_FILTER_GL_POSITION(gl_Position, geometry);
  }
  vFillColor = vec4(instanceFillColors.rgb, instanceFillColors.a * opacity);
  DECKGL_FILTER_COLOR(vFillColor, geometry);
  vLineColor = vec4(instanceLineColors.rgb, instanceLineColors.a * opacity);
  DECKGL_FILTER_COLOR(vLineColor, geometry);
}
`,Z6=`#define SHADER_NAME scatterplot-layer-fragment-shader

precision highp float;

uniform bool filled;
uniform float stroked;
uniform bool antialiasing;

varying vec4 vFillColor;
varying vec4 vLineColor;
varying vec2 unitPosition;
varying float innerUnitRadius;
varying float outerRadiusPixels;

void main(void) {
  geometry.uv = unitPosition;

  float distToCenter = length(unitPosition) * outerRadiusPixels;
  float inCircle = antialiasing ? 
    smoothedge(distToCenter, outerRadiusPixels) : 
    step(distToCenter, outerRadiusPixels);

  if (inCircle == 0.0) {
    discard;
  }

  if (stroked > 0.5) {
    float isLine = antialiasing ? 
      smoothedge(innerUnitRadius * outerRadiusPixels, distToCenter) :
      step(innerUnitRadius * outerRadiusPixels, distToCenter);

    if (filled) {
      gl_FragColor = mix(vFillColor, vLineColor, isLine);
    } else {
      if (isLine == 0.0) {
        discard;
      }
      gl_FragColor = vec4(vLineColor.rgb, vLineColor.a * isLine);
    }
  } else if (!filled) {
    discard;
  } else {
    gl_FragColor = vFillColor;
  }

  gl_FragColor.a *= inCircle;
  DECKGL_FILTER_COLOR(gl_FragColor, geometry);
}
`,zE=[0,0,0,255],Q6={radiusUnits:"meters",radiusScale:{type:"number",min:0,value:1},radiusMinPixels:{type:"number",min:0,value:0},radiusMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},lineWidthUnits:"meters",lineWidthScale:{type:"number",min:0,value:1},lineWidthMinPixels:{type:"number",min:0,value:0},lineWidthMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},stroked:!1,filled:!0,billboard:!1,antialiasing:!0,getPosition:{type:"accessor",value:t=>t.position},getRadius:{type:"accessor",value:1},getFillColor:{type:"accessor",value:zE},getLineColor:{type:"accessor",value:zE},getLineWidth:{type:"accessor",value:1},strokeWidth:{deprecatedFor:"getLineWidth"},outline:{deprecatedFor:"stroked"},getColor:{deprecatedFor:["getFillColor","getLineColor"]}};class vv extends ei{getShaders(){return super.getShaders({vs:q6,fs:Z6,modules:[Sc,Pc]})}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceRadius:{size:1,transition:!0,accessor:"getRadius",defaultValue:1},instanceFillColors:{size:this.props.colorFormat.length,transition:!0,normalized:!0,type:5121,accessor:"getFillColor",defaultValue:[0,0,0,255]},instanceLineColors:{size:this.props.colorFormat.length,transition:!0,normalized:!0,type:5121,accessor:"getLineColor",defaultValue:[0,0,0,255]},instanceLineWidths:{size:1,transition:!0,accessor:"getLineWidth",defaultValue:1}})}updateState(e){if(super.updateState(e),e.changeFlags.extensionsChanged){var n;const{gl:r}=this.context;(n=this.state.model)===null||n===void 0||n.delete(),this.state.model=this._getModel(r),this.getAttributeManager().invalidateAll()}}draw({uniforms:e}){const{radiusUnits:n,radiusScale:r,radiusMinPixels:i,radiusMaxPixels:s,stroked:o,filled:a,billboard:l,antialiasing:c,lineWidthUnits:u,lineWidthScale:f,lineWidthMinPixels:d,lineWidthMaxPixels:h}=this.props;this.state.model.setUniforms(e).setUniforms({stroked:o?1:0,filled:a,billboard:l,antialiasing:c,radiusUnits:Ts[n],radiusScale:r,radiusMinPixels:i,radiusMaxPixels:s,lineWidthUnits:Ts[u],lineWidthScale:f,lineWidthMinPixels:d,lineWidthMaxPixels:h}).draw()}_getModel(e){const n=[-1,-1,0,1,-1,0,1,1,0,-1,1,0];return new Ps(e,{...this.getShaders(),id:this.props.id,geometry:new xc({drawMode:6,vertexCount:4,attributes:{positions:{size:3,value:new Float32Array(n)}}}),isInstanced:!0})}}_(vv,"defaultProps",Q6);_(vv,"layerName","ScatterplotLayer");const QA={CLOCKWISE:1,COUNTER_CLOCKWISE:-1};function JA(t,e,n={}){return J6(t,n)!==e?(tV(t,n),!0):!1}function J6(t,e={}){return Math.sign(eV(t,e))}function eV(t,e={}){const{start:n=0,end:r=t.length}=e,i=e.size||2;let s=0;for(let o=n,a=r-i;o<r;o+=i)s+=(t[o]-t[a])*(t[o+1]+t[a+1]),a=o;return s/2}function tV(t,e){const{start:n=0,end:r=t.length,size:i=2}=e,s=(r-n)/i,o=Math.floor(s/2);for(let a=0;a<o;++a){const l=n+a*i,c=n+(s-1-a)*i;for(let u=0;u<i;++u){const f=t[l+u];t[l+u]=t[c+u],t[c+u]=f}}}function Yn(t,e){const n=e.length,r=t.length;if(r>0){let i=!0;for(let s=0;s<n;s++)if(t[r-n+s]!==e[s]){i=!1;break}if(i)return!1}for(let i=0;i<n;i++)t[r+i]=e[i];return!0}function u0(t,e){const n=e.length;for(let r=0;r<n;r++)t[r]=e[r]}function Zl(t,e,n,r,i=[]){const s=r+e*n;for(let o=0;o<n;o++)i[o]=t[s+o];return i}function f0(t,e,n,r,i=[]){let s,o;if(n&8)s=(r[3]-t[1])/(e[1]-t[1]),o=3;else if(n&4)s=(r[1]-t[1])/(e[1]-t[1]),o=1;else if(n&2)s=(r[2]-t[0])/(e[0]-t[0]),o=2;else if(n&1)s=(r[0]-t[0])/(e[0]-t[0]),o=0;else return null;for(let a=0;a<t.length;a++)i[a]=(o&1)===a?r[o]:s*(e[a]-t[a])+t[a];return i}function df(t,e){let n=0;return t[0]<e[0]?n|=1:t[0]>e[2]&&(n|=2),t[1]<e[1]?n|=4:t[1]>e[3]&&(n|=8),n}function eC(t,e){const{size:n=2,broken:r=!1,gridResolution:i=10,gridOffset:s=[0,0],startIndex:o=0,endIndex:a=t.length}=e||{},l=(a-o)/n;let c=[];const u=[c],f=Zl(t,0,n,o);let d,h;const p=nC(f,i,s,[]),g=[];Yn(c,f);for(let E=1;E<l;E++){for(d=Zl(t,E,n,o,d),h=df(d,p);h;){f0(f,d,h,p,g);const m=df(g,p);m&&(f0(f,g,m,p,g),h=m),Yn(c,g),u0(f,g),rV(p,i,h),r&&c.length>n&&(c=[],u.push(c),Yn(c,f)),h=df(d,p)}Yn(c,d),u0(f,d)}return r?u:u[0]}const UE=0,nV=1;function Cu(t,e){for(let n=0;n<e.length;n++)t.push(e[n]);return t}function tC(t,e=null,n){if(!t.length)return[];const{size:r=2,gridResolution:i=10,gridOffset:s=[0,0],edgeTypes:o=!1}=n||{},a=[],l=[{pos:t,types:o?new Array(t.length/r).fill(nV):null,holes:e||[]}],c=[[],[]];let u=[];for(;l.length;){const{pos:f,types:d,holes:h}=l.shift();iV(f,r,h[0]||f.length,c),u=nC(c[0],i,s,u);const p=df(c[1],u);if(p){let g=jE(f,d,r,0,h[0]||f.length,u,p);const E={pos:g[0].pos,types:g[0].types,holes:[]},m={pos:g[1].pos,types:g[1].types,holes:[]};l.push(E,m);for(let y=0;y<h.length;y++)g=jE(f,d,r,h[y],h[y+1]||f.length,u,p),g[0]&&(E.holes.push(E.pos.length),E.pos=Cu(E.pos,g[0].pos),o&&(E.types=Cu(E.types,g[0].types))),g[1]&&(m.holes.push(m.pos.length),m.pos=Cu(m.pos,g[1].pos),o&&(m.types=Cu(m.types,g[1].types)))}else{const g={positions:f};o&&(g.edgeTypes=d),h.length&&(g.holeIndices=h),a.push(g)}}return a}function jE(t,e,n,r,i,s,o){const a=(i-r)/n,l=[],c=[],u=[],f=[],d=[];let h,p,g;const E=Zl(t,a-1,n,r);let m=Math.sign(o&8?E[1]-s[3]:E[0]-s[2]),y=e&&e[a-1],v=0,b=0;for(let T=0;T<a;T++)h=Zl(t,T,n,r,h),p=Math.sign(o&8?h[1]-s[3]:h[0]-s[2]),g=e&&e[r/n+T],p&&m&&m!==p&&(f0(E,h,o,s,d),Yn(l,d)&&u.push(y),Yn(c,d)&&f.push(y)),p<=0?(Yn(l,h)&&u.push(g),v-=p):u.length&&(u[u.length-1]=UE),p>=0?(Yn(c,h)&&f.push(g),b+=p):f.length&&(f[f.length-1]=UE),u0(E,h),m=p,y=g;return[v?{pos:l,types:e&&u}:null,b?{pos:c,types:e&&f}:null]}function nC(t,e,n,r){const i=Math.floor((t[0]-n[0])/e)*e+n[0],s=Math.floor((t[1]-n[1])/e)*e+n[1];return r[0]=i,r[1]=s,r[2]=i+e,r[3]=s+e,r}function rV(t,e,n){n&8?(t[1]+=e,t[3]+=e):n&4?(t[1]-=e,t[3]-=e):n&2?(t[0]+=e,t[2]+=e):n&1&&(t[0]-=e,t[2]-=e)}function iV(t,e,n,r){let i=1/0,s=-1/0,o=1/0,a=-1/0;for(let l=0;l<n;l+=e){const c=t[l],u=t[l+1];i=c<i?c:i,s=c>s?c:s,o=u<o?u:o,a=u>a?u:a}return r[0][0]=i,r[0][1]=o,r[1][0]=s,r[1][1]=a,r}const sV=85.051129;function oV(t,e){const{size:n=2,startIndex:r=0,endIndex:i=t.length,normalize:s=!0}=e||{},o=t.slice(r,i);rC(o,n,0,i-r);const a=eC(o,{size:n,broken:!0,gridResolution:360,gridOffset:[-180,-180]});if(s)for(const l of a)iC(l,n);return a}function aV(t,e=null,n){const{size:r=2,normalize:i=!0,edgeTypes:s=!1}=n||{};e=e||[];const o=[],a=[];let l=0,c=0;for(let f=0;f<=e.length;f++){const d=e[f]||t.length,h=c,p=lV(t,r,l,d);for(let g=p;g<d;g++)o[c++]=t[g];for(let g=l;g<p;g++)o[c++]=t[g];rC(o,r,h,c),cV(o,r,h,c,n==null?void 0:n.maxLatitude),l=d,a[f]=c}a.pop();const u=tC(o,a,{size:r,gridResolution:360,gridOffset:[-180,-180],edgeTypes:s});if(i)for(const f of u)iC(f.positions,r);return u}function lV(t,e,n,r){let i=-1,s=-1;for(let o=n+1;o<r;o+=e){const a=Math.abs(t[o]);a>i&&(i=a,s=o-1)}return s}function cV(t,e,n,r,i=sV){const s=t[n],o=t[r-e];if(Math.abs(s-o)>180){const a=Zl(t,0,e,n);a[0]+=Math.round((o-s)/360)*360,Yn(t,a),a[1]=Math.sign(a[1])*i,Yn(t,a),a[0]=s,Yn(t,a)}}function rC(t,e,n,r){let i=t[0],s;for(let o=n;o<r;o+=e){s=t[o];const a=s-i;(a>180||a<-180)&&(s-=Math.round(a/360)*360),t[o]=i=s}}function iC(t,e){let n;const r=t.length/e;for(let s=0;s<r&&(n=t[s*e],(n+180)%360===0);s++);const i=-Math.round(n/360)*360;if(i!==0)for(let s=0;s<r;s++)t[s*e]+=i}function uV(t,e,n,r){let i;if(Array.isArray(t[0])){const s=t.length*e;i=new Array(s);for(let o=0;o<t.length;o++)for(let a=0;a<e;a++)i[o*e+a]=t[o][a]||0}else i=t;return n?eC(i,{size:e,gridResolution:n}):r?oV(i,{size:e}):i}const fV=1,dV=2,gg=4;class hV extends bA{constructor(e){super({...e,attributes:{positions:{size:3,padding:18,initialize:!0,type:e.fp64?Float64Array:Float32Array},segmentTypes:{size:1,type:Uint8ClampedArray}}})}get(e){return this.attributes[e]}getGeometryFromBuffer(e){return this.normalize?super.getGeometryFromBuffer(e):null}normalizeGeometry(e){return this.normalize?uV(e,this.positionSize,this.opts.resolution,this.opts.wrapLongitude):e}getGeometrySize(e){if(VE(e)){let r=0;for(const i of e)r+=this.getGeometrySize(i);return r}const n=this.getPathLength(e);return n<2?0:this.isClosed(e)?n<3?0:n+2:n}updateGeometryAttributes(e,n){if(n.geometrySize!==0)if(e&&VE(e))for(const r of e){const i=this.getGeometrySize(r);n.geometrySize=i,this.updateGeometryAttributes(r,n),n.vertexStart+=i}else this._updateSegmentTypes(e,n),this._updatePositions(e,n)}_updateSegmentTypes(e,n){const r=this.attributes.segmentTypes,i=e?this.isClosed(e):!1,{vertexStart:s,geometrySize:o}=n;r.fill(0,s,s+o),i?(r[s]=gg,r[s+o-2]=gg):(r[s]+=fV,r[s+o-2]+=dV),r[s+o-1]=gg}_updatePositions(e,n){const{positions:r}=this.attributes;if(!r||!e)return;const{vertexStart:i,geometrySize:s}=n,o=new Array(3);for(let a=i,l=0;l<s;a++,l++)this.getPointOnPath(e,l,o),r[a*3]=o[0],r[a*3+1]=o[1],r[a*3+2]=o[2]}getPathLength(e){return e.length/this.positionSize}getPointOnPath(e,n,r=[]){const{positionSize:i}=this;n*i>=e.length&&(n+=1-e.length/i);const s=n*i;return r[0]=e[s],r[1]=e[s+1],r[2]=i===3&&e[s+2]||0,r}isClosed(e){if(!this.normalize)return!!this.opts.loop;const{positionSize:n}=this,r=e.length-n;return e[0]===e[r]&&e[1]===e[r+1]&&(n===2||e[2]===e[r+2])}}function VE(t){return Array.isArray(t[0])}const pV=`#define SHADER_NAME path-layer-vertex-shader

attribute vec2 positions;

attribute float instanceTypes;
attribute vec3 instanceStartPositions;
attribute vec3 instanceEndPositions;
attribute vec3 instanceLeftPositions;
attribute vec3 instanceRightPositions;
attribute vec3 instanceLeftPositions64Low;
attribute vec3 instanceStartPositions64Low;
attribute vec3 instanceEndPositions64Low;
attribute vec3 instanceRightPositions64Low;
attribute float instanceStrokeWidths;
attribute vec4 instanceColors;
attribute vec3 instancePickingColors;

uniform float widthScale;
uniform float widthMinPixels;
uniform float widthMaxPixels;
uniform float jointType;
uniform float capType;
uniform float miterLimit;
uniform bool billboard;
uniform int widthUnits;

uniform float opacity;

varying vec4 vColor;
varying vec2 vCornerOffset;
varying float vMiterLength;
varying vec2 vPathPosition;
varying float vPathLength;
varying float vJointType;

const float EPSILON = 0.001;
const vec3 ZERO_OFFSET = vec3(0.0);

float flipIfTrue(bool flag) {
  return -(float(flag) * 2. - 1.);
}
vec3 getLineJoinOffset(
  vec3 prevPoint, vec3 currPoint, vec3 nextPoint,
  vec2 width
) {
  bool isEnd = positions.x > 0.0;
  float sideOfPath = positions.y;
  float isJoint = float(sideOfPath == 0.0);

  vec3 deltaA3 = (currPoint - prevPoint);
  vec3 deltaB3 = (nextPoint - currPoint);

  mat3 rotationMatrix;
  bool needsRotation = !billboard && project_needs_rotation(currPoint, rotationMatrix);
  if (needsRotation) {
    deltaA3 = deltaA3 * rotationMatrix;
    deltaB3 = deltaB3 * rotationMatrix;
  }
  vec2 deltaA = deltaA3.xy / width;
  vec2 deltaB = deltaB3.xy / width;

  float lenA = length(deltaA);
  float lenB = length(deltaB);

  vec2 dirA = lenA > 0. ? normalize(deltaA) : vec2(0.0, 0.0);
  vec2 dirB = lenB > 0. ? normalize(deltaB) : vec2(0.0, 0.0);

  vec2 perpA = vec2(-dirA.y, dirA.x);
  vec2 perpB = vec2(-dirB.y, dirB.x);
  vec2 tangent = dirA + dirB;
  tangent = length(tangent) > 0. ? normalize(tangent) : perpA;
  vec2 miterVec = vec2(-tangent.y, tangent.x);
  vec2 dir = isEnd ? dirA : dirB;
  vec2 perp = isEnd ? perpA : perpB;
  float L = isEnd ? lenA : lenB;
  float sinHalfA = abs(dot(miterVec, perp));
  float cosHalfA = abs(dot(dirA, miterVec));
  float turnDirection = flipIfTrue(dirA.x * dirB.y >= dirA.y * dirB.x);
  float cornerPosition = sideOfPath * turnDirection;

  float miterSize = 1.0 / max(sinHalfA, EPSILON);
  miterSize = mix(
    min(miterSize, max(lenA, lenB) / max(cosHalfA, EPSILON)),
    miterSize,
    step(0.0, cornerPosition)
  );

  vec2 offsetVec = mix(miterVec * miterSize, perp, step(0.5, cornerPosition))
    * (sideOfPath + isJoint * turnDirection);
  bool isStartCap = lenA == 0.0 || (!isEnd && (instanceTypes == 1.0 || instanceTypes == 3.0));
  bool isEndCap = lenB == 0.0 || (isEnd && (instanceTypes == 2.0 || instanceTypes == 3.0));
  bool isCap = isStartCap || isEndCap;
  if (isCap) {
    offsetVec = mix(perp * sideOfPath, dir * capType * 4.0 * flipIfTrue(isStartCap), isJoint);
    vJointType = capType;
  } else {
    vJointType = jointType;
  }
  vPathLength = L;
  vCornerOffset = offsetVec;
  vMiterLength = dot(vCornerOffset, miterVec * turnDirection);
  vMiterLength = isCap ? isJoint : vMiterLength;

  vec2 offsetFromStartOfPath = vCornerOffset + deltaA * float(isEnd);
  vPathPosition = vec2(
    dot(offsetFromStartOfPath, perp),
    dot(offsetFromStartOfPath, dir)
  );
  geometry.uv = vPathPosition;

  float isValid = step(instanceTypes, 3.5);
  vec3 offset = vec3(offsetVec * width * isValid, 0.0);

  if (needsRotation) {
    offset = rotationMatrix * offset;
  }
  return offset;
}
void clipLine(inout vec4 position, vec4 refPosition) {
  if (position.w < EPSILON) {
    float r = (EPSILON - refPosition.w) / (position.w - refPosition.w);
    position = refPosition + (position - refPosition) * r;
  }
}

void main() {
  geometry.pickingColor = instancePickingColors;

  vColor = vec4(instanceColors.rgb, instanceColors.a * opacity);

  float isEnd = positions.x;

  vec3 prevPosition = mix(instanceLeftPositions, instanceStartPositions, isEnd);
  vec3 prevPosition64Low = mix(instanceLeftPositions64Low, instanceStartPositions64Low, isEnd);

  vec3 currPosition = mix(instanceStartPositions, instanceEndPositions, isEnd);
  vec3 currPosition64Low = mix(instanceStartPositions64Low, instanceEndPositions64Low, isEnd);

  vec3 nextPosition = mix(instanceEndPositions, instanceRightPositions, isEnd);
  vec3 nextPosition64Low = mix(instanceEndPositions64Low, instanceRightPositions64Low, isEnd);

  geometry.worldPosition = currPosition;
  vec2 widthPixels = vec2(clamp(
    project_size_to_pixel(instanceStrokeWidths * widthScale, widthUnits),
    widthMinPixels, widthMaxPixels) / 2.0);
  vec3 width;

  if (billboard) {
    vec4 prevPositionScreen = project_position_to_clipspace(prevPosition, prevPosition64Low, ZERO_OFFSET);
    vec4 currPositionScreen = project_position_to_clipspace(currPosition, currPosition64Low, ZERO_OFFSET, geometry.position);
    vec4 nextPositionScreen = project_position_to_clipspace(nextPosition, nextPosition64Low, ZERO_OFFSET);

    clipLine(prevPositionScreen, currPositionScreen);
    clipLine(nextPositionScreen, currPositionScreen);
    clipLine(currPositionScreen, mix(nextPositionScreen, prevPositionScreen, isEnd));

    width = vec3(widthPixels, 0.0);
    DECKGL_FILTER_SIZE(width, geometry);

    vec3 offset = getLineJoinOffset(
      prevPositionScreen.xyz / prevPositionScreen.w,
      currPositionScreen.xyz / currPositionScreen.w,
      nextPositionScreen.xyz / nextPositionScreen.w,
      project_pixel_size_to_clipspace(width.xy)
    );

    DECKGL_FILTER_GL_POSITION(currPositionScreen, geometry);
    gl_Position = vec4(currPositionScreen.xyz + offset * currPositionScreen.w, currPositionScreen.w);
  } else {
    prevPosition = project_position(prevPosition, prevPosition64Low);
    currPosition = project_position(currPosition, currPosition64Low);
    nextPosition = project_position(nextPosition, nextPosition64Low);

    width = vec3(project_pixel_size(widthPixels), 0.0);
    DECKGL_FILTER_SIZE(width, geometry);

    vec3 offset = getLineJoinOffset(prevPosition, currPosition, nextPosition, width.xy);
    geometry.position = vec4(currPosition + offset, 1.0);
    gl_Position = project_common_position_to_clipspace(geometry.position);
    DECKGL_FILTER_GL_POSITION(gl_Position, geometry);
  }
  DECKGL_FILTER_COLOR(vColor, geometry);
}
`,gV=`#define SHADER_NAME path-layer-fragment-shader

precision highp float;

uniform float miterLimit;

varying vec4 vColor;
varying vec2 vCornerOffset;
varying float vMiterLength;
varying vec2 vPathPosition;
varying float vPathLength;
varying float vJointType;

void main(void) {
  geometry.uv = vPathPosition;

  if (vPathPosition.y < 0.0 || vPathPosition.y > vPathLength) {
    if (vJointType > 0.5 && length(vCornerOffset) > 1.0) {
      discard;
    }
    if (vJointType < 0.5 && vMiterLength > miterLimit + 1.0) {
      discard;
    }
  }
  gl_FragColor = vColor;

  DECKGL_FILTER_COLOR(gl_FragColor, geometry);
}
`,sC=[0,0,0,255],mV={widthUnits:"meters",widthScale:{type:"number",min:0,value:1},widthMinPixels:{type:"number",min:0,value:0},widthMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},jointRounded:!1,capRounded:!1,miterLimit:{type:"number",min:0,value:4},billboard:!1,_pathType:null,getPath:{type:"accessor",value:t=>t.path},getColor:{type:"accessor",value:sC},getWidth:{type:"accessor",value:1},rounded:{deprecatedFor:["jointRounded","capRounded"]}},mg={enter:(t,e)=>e.length?e.subarray(e.length-t.length):t};class _v extends ei{constructor(...e){super(...e),_(this,"state",void 0)}getShaders(){return super.getShaders({vs:pV,fs:gV,modules:[Sc,Pc]})}get wrapLongitude(){return!1}initializeState(){this.getAttributeManager().addInstanced({positions:{size:3,vertexOffset:1,type:5130,fp64:this.use64bitPositions(),transition:mg,accessor:"getPath",update:this.calculatePositions,noAlloc:!0,shaderAttributes:{instanceLeftPositions:{vertexOffset:0},instanceStartPositions:{vertexOffset:1},instanceEndPositions:{vertexOffset:2},instanceRightPositions:{vertexOffset:3}}},instanceTypes:{size:1,type:5121,update:this.calculateSegmentTypes,noAlloc:!0},instanceStrokeWidths:{size:1,accessor:"getWidth",transition:mg,defaultValue:1},instanceColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,accessor:"getColor",transition:mg,defaultValue:sC},instancePickingColors:{size:3,type:5121,accessor:(r,{index:i,target:s})=>this.encodePickingColor(r&&r.__source?r.__source.index:i,s)}}),this.setState({pathTesselator:new hV({fp64:this.use64bitPositions()})})}updateState(e){super.updateState(e);const{props:n,changeFlags:r}=e,i=this.getAttributeManager();if(r.dataChanged||r.updateTriggersChanged&&(r.updateTriggersChanged.all||r.updateTriggersChanged.getPath)){const{pathTesselator:a}=this.state,l=n.data.attributes||{};a.updateGeometry({data:n.data,geometryBuffer:l.getPath,buffers:l,normalize:!n._pathType,loop:n._pathType==="loop",getGeometry:n.getPath,positionFormat:n.positionFormat,wrapLongitude:n.wrapLongitude,resolution:this.context.viewport.resolution,dataChanged:r.dataChanged}),this.setState({numInstances:a.instanceCount,startIndices:a.vertexStarts}),r.dataChanged||i.invalidateAll()}if(r.extensionsChanged){var o;const{gl:a}=this.context;(o=this.state.model)===null||o===void 0||o.delete(),this.state.model=this._getModel(a),i.invalidateAll()}}getPickingInfo(e){const n=super.getPickingInfo(e),{index:r}=n,{data:i}=this.props;return i[0]&&i[0].__source&&(n.object=i.find(s=>s.__source.index===r)),n}disablePickingIndex(e){const{data:n}=this.props;if(n[0]&&n[0].__source)for(let r=0;r<n.length;r++)n[r].__source.index===e&&this._disablePickingIndex(r);else super.disablePickingIndex(e)}draw({uniforms:e}){const{jointRounded:n,capRounded:r,billboard:i,miterLimit:s,widthUnits:o,widthScale:a,widthMinPixels:l,widthMaxPixels:c}=this.props;this.state.model.setUniforms(e).setUniforms({jointType:Number(n),capType:Number(r),billboard:i,widthUnits:Ts[o],widthScale:a,miterLimit:s,widthMinPixels:l,widthMaxPixels:c}).draw()}_getModel(e){const n=[0,1,2,1,4,2,1,3,4,3,5,4],r=[0,0,0,-1,0,1,1,-1,1,1,1,0];return new Ps(e,{...this.getShaders(),id:this.props.id,geometry:new xc({drawMode:4,attributes:{indices:new Uint16Array(n),positions:{value:new Float32Array(r),size:2}}}),isInstanced:!0})}calculatePositions(e){const{pathTesselator:n}=this.state;e.startIndices=n.vertexStarts,e.value=n.get("positions")}calculateSegmentTypes(e){const{pathTesselator:n}=this.state;e.startIndices=n.vertexStarts,e.value=n.get("segmentTypes")}}_(_v,"defaultProps",mV);_(_v,"layerName","PathLayer");var bv={exports:{}};bv.exports=Sh;bv.exports.default=Sh;function Sh(t,e,n){n=n||2;var r=e&&e.length,i=r?e[0]*n:t.length,s=oC(t,0,i,n,!0),o=[];if(!s||s.next===s.prev)return o;var a,l,c,u,f,d,h;if(r&&(s=EV(t,e,s,n)),t.length>80*n){a=c=t[0],l=u=t[1];for(var p=n;p<i;p+=n)f=t[p],d=t[p+1],f<a&&(a=f),d<l&&(l=d),f>c&&(c=f),d>u&&(u=d);h=Math.max(c-a,u-l),h=h!==0?32767/h:0}return Ql(s,o,n,a,l,h,0),o}function oC(t,e,n,r,i){var s,o;if(i===p0(t,e,n,r)>0)for(s=e;s<n;s+=r)o=$E(s,t[s],t[s+1],o);else for(s=n-r;s>=e;s-=r)o=$E(s,t[s],t[s+1],o);return o&&Ph(o,o.next)&&(ec(o),o=o.next),o}function Cs(t,e){if(!t)return t;e||(e=t);var n=t,r;do if(r=!1,!n.steiner&&(Ph(n,n.next)||He(n.prev,n,n.next)===0)){if(ec(n),n=e=n.prev,n===n.next)break;r=!0}else n=n.next;while(r||n!==e);return e}function Ql(t,e,n,r,i,s,o){if(t){!o&&s&&PV(t,r,i,s);for(var a=t,l,c;t.prev!==t.next;){if(l=t.prev,c=t.next,s?vV(t,r,i,s):yV(t)){e.push(l.i/n|0),e.push(t.i/n|0),e.push(c.i/n|0),ec(t),t=c.next,a=c.next;continue}if(t=c,t===a){o?o===1?(t=_V(Cs(t),e,n),Ql(t,e,n,r,i,s,2)):o===2&&bV(t,e,n,r,i,s):Ql(Cs(t),e,n,r,i,s,1);break}}}}function yV(t){var e=t.prev,n=t,r=t.next;if(He(e,n,r)>=0)return!1;for(var i=e.x,s=n.x,o=r.x,a=e.y,l=n.y,c=r.y,u=i<s?i<o?i:o:s<o?s:o,f=a<l?a<c?a:c:l<c?l:c,d=i>s?i>o?i:o:s>o?s:o,h=a>l?a>c?a:c:l>c?l:c,p=r.next;p!==e;){if(p.x>=u&&p.x<=d&&p.y>=f&&p.y<=h&&So(i,a,s,l,o,c,p.x,p.y)&&He(p.prev,p,p.next)>=0)return!1;p=p.next}return!0}function vV(t,e,n,r){var i=t.prev,s=t,o=t.next;if(He(i,s,o)>=0)return!1;for(var a=i.x,l=s.x,c=o.x,u=i.y,f=s.y,d=o.y,h=a<l?a<c?a:c:l<c?l:c,p=u<f?u<d?u:d:f<d?f:d,g=a>l?a>c?a:c:l>c?l:c,E=u>f?u>d?u:d:f>d?f:d,m=d0(h,p,e,n,r),y=d0(g,E,e,n,r),v=t.prevZ,b=t.nextZ;v&&v.z>=m&&b&&b.z<=y;){if(v.x>=h&&v.x<=g&&v.y>=p&&v.y<=E&&v!==i&&v!==o&&So(a,u,l,f,c,d,v.x,v.y)&&He(v.prev,v,v.next)>=0||(v=v.prevZ,b.x>=h&&b.x<=g&&b.y>=p&&b.y<=E&&b!==i&&b!==o&&So(a,u,l,f,c,d,b.x,b.y)&&He(b.prev,b,b.next)>=0))return!1;b=b.nextZ}for(;v&&v.z>=m;){if(v.x>=h&&v.x<=g&&v.y>=p&&v.y<=E&&v!==i&&v!==o&&So(a,u,l,f,c,d,v.x,v.y)&&He(v.prev,v,v.next)>=0)return!1;v=v.prevZ}for(;b&&b.z<=y;){if(b.x>=h&&b.x<=g&&b.y>=p&&b.y<=E&&b!==i&&b!==o&&So(a,u,l,f,c,d,b.x,b.y)&&He(b.prev,b,b.next)>=0)return!1;b=b.nextZ}return!0}function _V(t,e,n){var r=t;do{var i=r.prev,s=r.next.next;!Ph(i,s)&&aC(i,r,r.next,s)&&Jl(i,s)&&Jl(s,i)&&(e.push(i.i/n|0),e.push(r.i/n|0),e.push(s.i/n|0),ec(r),ec(r.next),r=t=s),r=r.next}while(r!==t);return Cs(r)}function bV(t,e,n,r,i,s){var o=t;do{for(var a=o.next.next;a!==o.prev;){if(o.i!==a.i&&LV(o,a)){var l=lC(o,a);o=Cs(o,o.next),l=Cs(l,l.next),Ql(o,e,n,r,i,s,0),Ql(l,e,n,r,i,s,0);return}a=a.next}o=o.next}while(o!==t)}function EV(t,e,n,r){var i=[],s,o,a,l,c;for(s=0,o=e.length;s<o;s++)a=e[s]*r,l=s<o-1?e[s+1]*r:t.length,c=oC(t,a,l,r,!1),c===c.next&&(c.steiner=!0),i.push(CV(c));for(i.sort(wV),s=0;s<i.length;s++)n=xV(i[s],n);return n}function wV(t,e){return t.x-e.x}function xV(t,e){var n=TV(t,e);if(!n)return e;var r=lC(n,t);return Cs(r,r.next),Cs(n,n.next)}function TV(t,e){var n=e,r=t.x,i=t.y,s=-1/0,o;do{if(i<=n.y&&i>=n.next.y&&n.next.y!==n.y){var a=n.x+(i-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(a<=r&&a>s&&(s=a,o=n.x<n.next.x?n:n.next,a===r))return o}n=n.next}while(n!==e);if(!o)return null;var l=o,c=o.x,u=o.y,f=1/0,d;n=o;do r>=n.x&&n.x>=c&&r!==n.x&&So(i<u?r:s,i,c,u,i<u?s:r,i,n.x,n.y)&&(d=Math.abs(i-n.y)/(r-n.x),Jl(n,t)&&(d<f||d===f&&(n.x>o.x||n.x===o.x&&SV(o,n)))&&(o=n,f=d)),n=n.next;while(n!==l);return o}function SV(t,e){return He(t.prev,t,e.prev)<0&&He(e.next,t,t.next)<0}function PV(t,e,n,r){var i=t;do i.z===0&&(i.z=d0(i.x,i.y,e,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,AV(i)}function AV(t){var e,n,r,i,s,o,a,l,c=1;do{for(n=t,t=null,s=null,o=0;n;){for(o++,r=n,a=0,e=0;e<c&&(a++,r=r.nextZ,!!r);e++);for(l=c;a>0||l>0&&r;)a!==0&&(l===0||!r||n.z<=r.z)?(i=n,n=n.nextZ,a--):(i=r,r=r.nextZ,l--),s?s.nextZ=i:t=i,i.prevZ=s,s=i;n=r}s.nextZ=null,c*=2}while(o>1);return t}function d0(t,e,n,r,i){return t=(t-n)*i|0,e=(e-r)*i|0,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t|e<<1}function CV(t){var e=t,n=t;do(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next;while(e!==t);return n}function So(t,e,n,r,i,s,o,a){return(i-o)*(e-a)>=(t-o)*(s-a)&&(t-o)*(r-a)>=(n-o)*(e-a)&&(n-o)*(s-a)>=(i-o)*(r-a)}function LV(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!RV(t,e)&&(Jl(t,e)&&Jl(e,t)&&OV(t,e)&&(He(t.prev,t,e.prev)||He(t,e.prev,e))||Ph(t,e)&&He(t.prev,t,t.next)>0&&He(e.prev,e,e.next)>0)}function He(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function Ph(t,e){return t.x===e.x&&t.y===e.y}function aC(t,e,n,r){var i=Ru(He(t,e,n)),s=Ru(He(t,e,r)),o=Ru(He(n,r,t)),a=Ru(He(n,r,e));return!!(i!==s&&o!==a||i===0&&Lu(t,n,e)||s===0&&Lu(t,r,e)||o===0&&Lu(n,t,r)||a===0&&Lu(n,e,r))}function Lu(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function Ru(t){return t>0?1:t<0?-1:0}function RV(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&aC(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}function Jl(t,e){return He(t.prev,t,t.next)<0?He(t,e,t.next)>=0&&He(t,t.prev,e)>=0:He(t,e,t.prev)<0||He(t,t.next,e)<0}function OV(t,e){var n=t,r=!1,i=(t.x+e.x)/2,s=(t.y+e.y)/2;do n.y>s!=n.next.y>s&&n.next.y!==n.y&&i<(n.next.x-n.x)*(s-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next;while(n!==t);return r}function lC(t,e){var n=new h0(t.i,t.x,t.y),r=new h0(e.i,e.x,e.y),i=t.next,s=e.prev;return t.next=e,e.prev=t,n.next=i,i.prev=n,r.next=n,n.prev=r,s.next=r,r.prev=s,r}function $E(t,e,n,r){var i=new h0(t,e,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function ec(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function h0(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}Sh.deviation=function(t,e,n,r){var i=e&&e.length,s=i?e[0]*n:t.length,o=Math.abs(p0(t,0,s,n));if(i)for(var a=0,l=e.length;a<l;a++){var c=e[a]*n,u=a<l-1?e[a+1]*n:t.length;o-=Math.abs(p0(t,c,u,n))}var f=0;for(a=0;a<r.length;a+=3){var d=r[a]*n,h=r[a+1]*n,p=r[a+2]*n;f+=Math.abs((t[d]-t[p])*(t[h+1]-t[d+1])-(t[d]-t[h])*(t[p+1]-t[d+1]))}return o===0&&f===0?0:Math.abs((f-o)/o)};function p0(t,e,n,r){for(var i=0,s=e,o=n-r;s<n;s+=r)i+=(t[o]-t[s])*(t[s+1]+t[o+1]),o=s;return i}Sh.flatten=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},r=0,i=0;i<t.length;i++){for(var s=0;s<t[i].length;s++)for(var o=0;o<e;o++)n.vertices.push(t[i][s][o]);i>0&&(r+=t[i-1].length,n.holes.push(r))}return n};var IV=bv.exports;const MV=Td(IV),Ou=QA.CLOCKWISE,GE=QA.COUNTER_CLOCKWISE,Ei={isClosed:!0};function kV(t){if(t=t&&t.positions||t,!Array.isArray(t)&&!ArrayBuffer.isView(t))throw new Error("invalid polygon")}function il(t){return"positions"in t?t.positions:t}function hf(t){return"holeIndices"in t?t.holeIndices:null}function NV(t){return Array.isArray(t[0])}function FV(t){return t.length>=1&&t[0].length>=2&&Number.isFinite(t[0][0])}function DV(t){const e=t[0],n=t[t.length-1];return e[0]===n[0]&&e[1]===n[1]&&e[2]===n[2]}function BV(t,e,n,r){for(let i=0;i<e;i++)if(t[n+i]!==t[r-e+i])return!1;return!0}function WE(t,e,n,r,i){let s=e;const o=n.length;for(let a=0;a<o;a++)for(let l=0;l<r;l++)t[s++]=n[a][l]||0;if(!DV(n))for(let a=0;a<r;a++)t[s++]=n[0][a]||0;return Ei.start=e,Ei.end=s,Ei.size=r,JA(t,i,Ei),s}function HE(t,e,n,r,i=0,s,o){s=s||n.length;const a=s-i;if(a<=0)return e;let l=e;for(let c=0;c<a;c++)t[l++]=n[i+c];if(!BV(n,r,i,s))for(let c=0;c<r;c++)t[l++]=n[i+c];return Ei.start=e,Ei.end=l,Ei.size=r,JA(t,o,Ei),l}function zV(t,e){kV(t);const n=[],r=[];if("positions"in t){const{positions:i,holeIndices:s}=t;if(s){let o=0;for(let a=0;a<=s.length;a++)o=HE(n,o,i,e,s[a-1],s[a],a===0?Ou:GE),r.push(o);return r.pop(),{positions:n,holeIndices:r}}t=i}if(!NV(t))return HE(n,0,t,e,0,n.length,Ou),n;if(!FV(t)){let i=0;for(const[s,o]of t.entries())i=WE(n,i,o,e,s===0?Ou:GE),r.push(i);return r.pop(),{positions:n,holeIndices:r}}return WE(n,0,t,e,Ou),n}function yg(t,e,n){const r=t.length/3;let i=0;for(let s=0;s<r;s++){const o=(s+1)%r;i+=t[s*3+e]*t[o*3+n],i-=t[o*3+e]*t[s*3+n]}return Math.abs(i/2)}function XE(t,e,n,r){const i=t.length/3;for(let s=0;s<i;s++){const o=s*3,a=t[o+0],l=t[o+1],c=t[o+2];t[o+e]=a,t[o+n]=l,t[o+r]=c}}function UV(t,e,n,r){let i=hf(t);i&&(i=i.map(a=>a/e));let s=il(t);const o=r&&e===3;if(n){const a=s.length;s=s.slice();const l=[];for(let c=0;c<a;c+=e){l[0]=s[c],l[1]=s[c+1],o&&(l[2]=s[c+2]);const u=n(l);s[c]=u[0],s[c+1]=u[1],o&&(s[c+2]=u[2])}}if(o){const a=yg(s,0,1),l=yg(s,0,2),c=yg(s,1,2);if(!a&&!l&&!c)return[];a>l&&a>c||(l>c?(n||(s=s.slice()),XE(s,0,2,1)):(n||(s=s.slice()),XE(s,2,0,1)))}return MV(s,i,e)}class jV extends bA{constructor(e){const{fp64:n,IndexType:r=Uint32Array}=e;super({...e,attributes:{positions:{size:3,type:n?Float64Array:Float32Array},vertexValid:{type:Uint8ClampedArray,size:1},indices:{type:r,size:1}}})}get(e){const{attributes:n}=this;return e==="indices"?n.indices&&n.indices.subarray(0,this.vertexCount):n[e]}updateGeometry(e){super.updateGeometry(e);const n=this.buffers.indices;if(n)this.vertexCount=(n.value||n).length;else if(this.data&&!this.getGeometry)throw new Error("missing indices buffer")}normalizeGeometry(e){if(this.normalize){const n=zV(e,this.positionSize);return this.opts.resolution?tC(il(n),hf(n),{size:this.positionSize,gridResolution:this.opts.resolution,edgeTypes:!0}):this.opts.wrapLongitude?aV(il(n),hf(n),{size:this.positionSize,maxLatitude:86,edgeTypes:!0}):n}return e}getGeometrySize(e){if(YE(e)){let n=0;for(const r of e)n+=this.getGeometrySize(r);return n}return il(e).length/this.positionSize}getGeometryFromBuffer(e){return this.normalize||!this.buffers.indices?super.getGeometryFromBuffer(e):null}updateGeometryAttributes(e,n){if(e&&YE(e))for(const r of e){const i=this.getGeometrySize(r);n.geometrySize=i,this.updateGeometryAttributes(r,n),n.vertexStart+=i,n.indexStart=this.indexStarts[n.geometryIndex+1]}else this._updateIndices(e,n),this._updatePositions(e,n),this._updateVertexValid(e,n)}_updateIndices(e,{geometryIndex:n,vertexStart:r,indexStart:i}){const{attributes:s,indexStarts:o,typedArrayManager:a}=this;let l=s.indices;if(!l||!e)return;let c=i;const u=UV(e,this.positionSize,this.opts.preproject,this.opts.full3d);l=a.allocate(l,i+u.length,{copy:!0});for(let f=0;f<u.length;f++)l[c++]=u[f]+r;o[n+1]=i+u.length,s.indices=l}_updatePositions(e,{vertexStart:n,geometrySize:r}){const{attributes:{positions:i},positionSize:s}=this;if(!i||!e)return;const o=il(e);for(let a=n,l=0;l<r;a++,l++){const c=o[l*s],u=o[l*s+1],f=s>2?o[l*s+2]:0;i[a*3]=c,i[a*3+1]=u,i[a*3+2]=f}}_updateVertexValid(e,{vertexStart:n,geometrySize:r}){const{positionSize:i}=this,s=this.attributes.vertexValid,o=e&&hf(e);if(e&&e.edgeTypes?s.set(e.edgeTypes,n):s.fill(1,n,n+r),o)for(let a=0;a<o.length;a++)s[n+o[a]/i-1]=0;s[n+r-1]=0}}function YE(t){return Array.isArray(t)&&t.length>0&&!Number.isFinite(t[0])}const cC=`
attribute vec2 vertexPositions;
attribute float vertexValid;

uniform bool extruded;
uniform bool isWireframe;
uniform float elevationScale;
uniform float opacity;

varying vec4 vColor;

struct PolygonProps {
  vec4 fillColors;
  vec4 lineColors;
  vec3 positions;
  vec3 nextPositions;
  vec3 pickingColors;
  vec3 positions64Low;
  vec3 nextPositions64Low;
  float elevations;
};

vec3 project_offset_normal(vec3 vector) {
  if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||
    project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSETS) {
    return normalize(vector * project_uCommonUnitsPerWorldUnit);
  }
  return project_normal(vector);
}

void calculatePosition(PolygonProps props) {
#ifdef IS_SIDE_VERTEX
  if(vertexValid < 0.5){
    gl_Position = vec4(0.);
    return;
  }
#endif

  vec3 pos;
  vec3 pos64Low;
  vec3 normal;
  vec4 colors = isWireframe ? props.lineColors : props.fillColors;

  geometry.worldPosition = props.positions;
  geometry.worldPositionAlt = props.nextPositions;
  geometry.pickingColor = props.pickingColors;

#ifdef IS_SIDE_VERTEX
  pos = mix(props.positions, props.nextPositions, vertexPositions.x);
  pos64Low = mix(props.positions64Low, props.nextPositions64Low, vertexPositions.x);
#else
  pos = props.positions;
  pos64Low = props.positions64Low;
#endif

  if (extruded) {
    pos.z += props.elevations * vertexPositions.y * elevationScale;
  }
  gl_Position = project_position_to_clipspace(pos, pos64Low, vec3(0.), geometry.position);

  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);

  if (extruded) {
  #ifdef IS_SIDE_VERTEX
    normal = vec3(
      props.positions.y - props.nextPositions.y + (props.positions64Low.y - props.nextPositions64Low.y),
      props.nextPositions.x - props.positions.x + (props.nextPositions64Low.x - props.positions64Low.x),
      0.0);
    normal = project_offset_normal(normal);
  #else
    normal = project_normal(vec3(0.0, 0.0, 1.0));
  #endif
    geometry.normal = normal;
    vec3 lightColor = lighting_getLightColor(colors.rgb, project_uCameraPosition, geometry.position.xyz, normal);
    vColor = vec4(lightColor, colors.a * opacity);
  } else {
    vColor = vec4(colors.rgb, colors.a * opacity);
  }
  DECKGL_FILTER_COLOR(vColor, geometry);
}
`,VV=`#define SHADER_NAME solid-polygon-layer-vertex-shader

attribute vec3 positions;
attribute vec3 positions64Low;
attribute float elevations;
attribute vec4 fillColors;
attribute vec4 lineColors;
attribute vec3 pickingColors;

`.concat(cC,`

void main(void) {
  PolygonProps props;

  props.positions = positions;
  props.positions64Low = positions64Low;
  props.elevations = elevations;
  props.fillColors = fillColors;
  props.lineColors = lineColors;
  props.pickingColors = pickingColors;

  calculatePosition(props);
}
`),$V=`#define SHADER_NAME solid-polygon-layer-vertex-shader-side
#define IS_SIDE_VERTEX


attribute vec3 instancePositions;
attribute vec3 nextPositions;
attribute vec3 instancePositions64Low;
attribute vec3 nextPositions64Low;
attribute float instanceElevations;
attribute vec4 instanceFillColors;
attribute vec4 instanceLineColors;
attribute vec3 instancePickingColors;

`.concat(cC,`

void main(void) {
  PolygonProps props;

  #if RING_WINDING_ORDER_CW == 1
    props.positions = instancePositions;
    props.positions64Low = instancePositions64Low;
    props.nextPositions = nextPositions;
    props.nextPositions64Low = nextPositions64Low;
  #else
    props.positions = nextPositions;
    props.positions64Low = nextPositions64Low;
    props.nextPositions = instancePositions;
    props.nextPositions64Low = instancePositions64Low;
  #endif
  props.elevations = instanceElevations;
  props.fillColors = instanceFillColors;
  props.lineColors = instanceLineColors;
  props.pickingColors = instancePickingColors;

  calculatePosition(props);
}
`),GV=`#define SHADER_NAME solid-polygon-layer-fragment-shader

precision highp float;

varying vec4 vColor;

void main(void) {
  gl_FragColor = vColor;

  DECKGL_FILTER_COLOR(gl_FragColor, geometry);
}
`,fd=[0,0,0,255],WV={filled:!0,extruded:!1,wireframe:!1,_normalize:!0,_windingOrder:"CW",_full3d:!1,elevationScale:{type:"number",min:0,value:1},getPolygon:{type:"accessor",value:t=>t.polygon},getElevation:{type:"accessor",value:1e3},getFillColor:{type:"accessor",value:fd},getLineColor:{type:"accessor",value:fd},material:!0},Iu={enter:(t,e)=>e.length?e.subarray(e.length-t.length):t};class Ev extends ei{constructor(...e){super(...e),_(this,"state",void 0)}getShaders(e){return super.getShaders({vs:e==="top"?VV:$V,fs:GV,defines:{RING_WINDING_ORDER_CW:!this.props._normalize&&this.props._windingOrder==="CCW"?0:1},modules:[Sc,jD,Pc]})}get wrapLongitude(){return!1}initializeState(){const{gl:e,viewport:n}=this.context;let{coordinateSystem:r}=this.props;const{_full3d:i}=this.props;n.isGeospatial&&r===ge.DEFAULT&&(r=ge.LNGLAT);let s;r===ge.LNGLAT&&(i?s=n.projectPosition.bind(n):s=n.projectFlat.bind(n)),this.setState({numInstances:0,polygonTesselator:new jV({preproject:s,fp64:this.use64bitPositions(),IndexType:!e||Xy(e,ze.ELEMENT_INDEX_UINT32)?Uint32Array:Uint16Array})});const o=this.getAttributeManager(),a=!0;o.remove(["instancePickingColors"]),o.add({indices:{size:1,isIndexed:!0,update:this.calculateIndices,noAlloc:a},positions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:Iu,accessor:"getPolygon",update:this.calculatePositions,noAlloc:a,shaderAttributes:{positions:{vertexOffset:0,divisor:0},instancePositions:{vertexOffset:0,divisor:1},nextPositions:{vertexOffset:1,divisor:1}}},vertexValid:{size:1,divisor:1,type:5121,update:this.calculateVertexValid,noAlloc:a},elevations:{size:1,transition:Iu,accessor:"getElevation",shaderAttributes:{elevations:{divisor:0},instanceElevations:{divisor:1}}},fillColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:Iu,accessor:"getFillColor",defaultValue:fd,shaderAttributes:{fillColors:{divisor:0},instanceFillColors:{divisor:1}}},lineColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:Iu,accessor:"getLineColor",defaultValue:fd,shaderAttributes:{lineColors:{divisor:0},instanceLineColors:{divisor:1}}},pickingColors:{size:3,type:5121,accessor:(l,{index:c,target:u})=>this.encodePickingColor(l&&l.__source?l.__source.index:c,u),shaderAttributes:{pickingColors:{divisor:0},instancePickingColors:{divisor:1}}}})}getPickingInfo(e){const n=super.getPickingInfo(e),{index:r}=n,{data:i}=this.props;return i[0]&&i[0].__source&&(n.object=i.find(s=>s.__source.index===r)),n}disablePickingIndex(e){const{data:n}=this.props;if(n[0]&&n[0].__source)for(let r=0;r<n.length;r++)n[r].__source.index===e&&this._disablePickingIndex(r);else super.disablePickingIndex(e)}draw({uniforms:e}){const{extruded:n,filled:r,wireframe:i,elevationScale:s}=this.props,{topModel:o,sideModel:a,polygonTesselator:l}=this.state,c={...e,extruded:!!n,elevationScale:s};a&&(a.setInstanceCount(l.instanceCount-1),a.setUniforms(c),i&&(a.setDrawMode(3),a.setUniforms({isWireframe:!0}).draw()),r&&(a.setDrawMode(6),a.setUniforms({isWireframe:!1}).draw())),o&&(o.setVertexCount(l.vertexCount),o.setUniforms(c).draw())}updateState(e){super.updateState(e),this.updateGeometry(e);const{props:n,oldProps:r,changeFlags:i}=e,s=this.getAttributeManager();if(i.extensionsChanged||n.filled!==r.filled||n.extruded!==r.extruded){var a;(a=this.state.models)===null||a===void 0||a.forEach(l=>l.delete()),this.setState(this._getModels(this.context.gl)),s.invalidateAll()}}updateGeometry({props:e,oldProps:n,changeFlags:r}){if(r.dataChanged||r.updateTriggersChanged&&(r.updateTriggersChanged.all||r.updateTriggersChanged.getPolygon)){const{polygonTesselator:s}=this.state,o=e.data.attributes||{};s.updateGeometry({data:e.data,normalize:e._normalize,geometryBuffer:o.getPolygon,buffers:o,getGeometry:e.getPolygon,positionFormat:e.positionFormat,wrapLongitude:e.wrapLongitude,resolution:this.context.viewport.resolution,fp64:this.use64bitPositions(),dataChanged:r.dataChanged,full3d:e._full3d}),this.setState({numInstances:s.instanceCount,startIndices:s.vertexStarts}),r.dataChanged||this.getAttributeManager().invalidateAll()}}_getModels(e){const{id:n,filled:r,extruded:i}=this.props;let s,o;if(r){const a=this.getShaders("top");a.defines.NON_INSTANCED_MODEL=1,s=new Ps(e,{...a,id:"".concat(n,"-top"),drawMode:4,attributes:{vertexPositions:new Float32Array([0,1])},uniforms:{isWireframe:!1,isSideVertex:!1},vertexCount:0,isIndexed:!0})}return i&&(o=new Ps(e,{...this.getShaders("side"),id:"".concat(n,"-side"),geometry:new xc({drawMode:1,vertexCount:4,attributes:{vertexPositions:{size:2,value:new Float32Array([1,0,0,0,0,1,1,1])}}}),instanceCount:0,isInstanced:1}),o.userData.excludeAttributes={indices:!0}),{models:[o,s].filter(Boolean),topModel:s,sideModel:o}}calculateIndices(e){const{polygonTesselator:n}=this.state;e.startIndices=n.indexStarts,e.value=n.get("indices")}calculatePositions(e){const{polygonTesselator:n}=this.state;e.startIndices=n.vertexStarts,e.value=n.get("positions")}calculateVertexValid(e){e.value=this.state.polygonTesselator.get("vertexValid")}}_(Ev,"defaultProps",WV);_(Ev,"layerName","SolidPolygonLayer");function HV({data:t,getIndex:e,dataRange:n,replace:r}){const{startRow:i=0,endRow:s=1/0}=n,o=t.length;let a=o,l=o;for(let d=0;d<o;d++){const h=e(t[d]);if(a>d&&h>=i&&(a=d),h>=s){l=d;break}}let c=a;const f=l-a!==r.length?t.slice(l):void 0;for(let d=0;d<r.length;d++)t[c++]=r[d];if(f){for(let d=0;d<f.length;d++)t[c++]=f[d];t.length=c}return{startRow:a,endRow:a+r.length}}function XV(t,e){if(!t)return null;const n="startIndices"in t?t.startIndices[e]:e,r=t.featureIds.value[n];return n!==-1?YV(t,r,n):null}function YV(t,e,n){const r={properties:{...t.properties[e]}};for(const i in t.numericProps)r.properties[i]=t.numericProps[i].value[n];return r}function KV(t,e){const n={points:null,lines:null,polygons:null};for(const r in n){const i=t[r].globalFeatureIds.value;n[r]=new Uint8ClampedArray(i.length*3);const s=[];for(let o=0;o<i.length;o++)e(i[o],s),n[r][o*3+0]=s[0],n[r][o*3+1]=s[1],n[r][o*3+2]=s[2]}return n}const qV=`#define SHADER_NAME multi-icon-layer-fragment-shader

precision highp float;

uniform float opacity;
uniform sampler2D iconsTexture;
uniform float gamma;
uniform bool sdf;
uniform float alphaCutoff;
uniform float sdfBuffer;
uniform float outlineBuffer;
uniform vec4 outlineColor;

varying vec4 vColor;
varying vec2 vTextureCoords;
varying vec2 uv;

void main(void) {
  geometry.uv = uv;

  if (!picking_uActive) {
    float alpha = texture2D(iconsTexture, vTextureCoords).a;
    vec4 color = vColor;
    if (sdf) {
      float distance = alpha;
      alpha = smoothstep(sdfBuffer - gamma, sdfBuffer + gamma, distance);

      if (outlineBuffer > 0.0) {
        float inFill = alpha;
        float inBorder = smoothstep(outlineBuffer - gamma, outlineBuffer + gamma, distance);
        color = mix(outlineColor, vColor, inFill);
        alpha = inBorder;
      }
    }
    float a = alpha * color.a;
    
    if (a < alphaCutoff) {
      discard;
    }

    gl_FragColor = vec4(color.rgb, a * opacity);
  }

  DECKGL_FILTER_COLOR(gl_FragColor, geometry);
}
`,vg=192/256,KE=[],ZV={getIconOffsets:{type:"accessor",value:t=>t.offsets},alphaCutoff:.001,smoothing:.1,outlineWidth:0,outlineColor:{type:"color",value:[0,0,0,255]}};class wv extends Ic{constructor(...e){super(...e),_(this,"state",void 0)}getShaders(){return{...super.getShaders(),fs:qV}}initializeState(){super.initializeState(),this.getAttributeManager().addInstanced({instanceOffsets:{size:2,accessor:"getIconOffsets"},instancePickingColors:{type:5121,size:3,accessor:(n,{index:r,target:i})=>this.encodePickingColor(r,i)}})}updateState(e){super.updateState(e);const{props:n,oldProps:r}=e;let{outlineColor:i}=n;i!==r.outlineColor&&(i=i.map(s=>s/255),i[3]=Number.isFinite(i[3])?i[3]:1,this.setState({outlineColor:i})),!n.sdf&&n.outlineWidth&&ae.warn("".concat(this.id,": fontSettings.sdf is required to render outline"))()}draw(e){const{sdf:n,smoothing:r,outlineWidth:i}=this.props,{outlineColor:s}=this.state,o=i?Math.max(r,vg*(1-i)):-1;if(e.uniforms={...e.uniforms,sdfBuffer:vg,outlineBuffer:o,gamma:r,sdf:!!n,outlineColor:s},super.draw(e),n&&i){const{iconManager:a}=this.state;a.getTexture()&&this.state.model.draw({uniforms:{outlineBuffer:vg}})}}getInstanceOffset(e){return e?Array.from(e).flatMap(n=>super.getInstanceOffset(n)):KE}getInstanceColorMode(e){return 1}getInstanceIconFrame(e){return e?Array.from(e).flatMap(n=>super.getInstanceIconFrame(n)):KE}}_(wv,"defaultProps",ZV);_(wv,"layerName","MultiIconLayer");const El=1e20;class QV{constructor({fontSize:e=24,buffer:n=3,radius:r=8,cutoff:i=.25,fontFamily:s="sans-serif",fontWeight:o="normal",fontStyle:a="normal"}={}){this.buffer=n,this.cutoff=i,this.radius=r;const l=this.size=e+n*4,c=this._createCanvas(l),u=this.ctx=c.getContext("2d",{willReadFrequently:!0});u.font=`${a} ${o} ${e}px ${s}`,u.textBaseline="alphabetic",u.textAlign="left",u.fillStyle="black",this.gridOuter=new Float64Array(l*l),this.gridInner=new Float64Array(l*l),this.f=new Float64Array(l),this.z=new Float64Array(l+1),this.v=new Uint16Array(l)}_createCanvas(e){const n=document.createElement("canvas");return n.width=n.height=e,n}draw(e){const{width:n,actualBoundingBoxAscent:r,actualBoundingBoxDescent:i,actualBoundingBoxLeft:s,actualBoundingBoxRight:o}=this.ctx.measureText(e),a=Math.ceil(r),l=0,c=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(o-s))),u=Math.min(this.size-this.buffer,a+Math.ceil(i)),f=c+2*this.buffer,d=u+2*this.buffer,h=Math.max(f*d,0),p=new Uint8ClampedArray(h),g={data:p,width:f,height:d,glyphWidth:c,glyphHeight:u,glyphTop:a,glyphLeft:l,glyphAdvance:n};if(c===0||u===0)return g;const{ctx:E,buffer:m,gridInner:y,gridOuter:v}=this;E.clearRect(m,m,c,u),E.fillText(e,m,m+a);const b=E.getImageData(m,m,c,u);v.fill(El,0,h),y.fill(0,0,h);for(let T=0;T<u;T++)for(let S=0;S<c;S++){const P=b.data[4*(T*c+S)+3]/255;if(P===0)continue;const R=(T+m)*f+S+m;if(P===1)v[R]=0,y[R]=El;else{const O=.5-P;v[R]=O>0?O*O:0,y[R]=O<0?O*O:0}}qE(v,0,0,f,d,f,this.f,this.v,this.z),qE(y,m,m,c,u,f,this.f,this.v,this.z);for(let T=0;T<h;T++){const S=Math.sqrt(v[T])-Math.sqrt(y[T]);p[T]=Math.round(255-255*(S/this.radius+this.cutoff))}return g}}function qE(t,e,n,r,i,s,o,a,l){for(let c=e;c<e+r;c++)ZE(t,n*s+c,s,i,o,a,l);for(let c=n;c<n+i;c++)ZE(t,c*s+e,1,r,o,a,l)}function ZE(t,e,n,r,i,s,o){s[0]=0,o[0]=-El,o[1]=El,i[0]=t[e];for(let a=1,l=0,c=0;a<r;a++){i[a]=t[e+a*n];const u=a*a;do{const f=s[l];c=(i[a]-i[f]+u-f*f)/(a-f)/2}while(c<=o[l]&&--l>-1);l++,s[l]=a,o[l]=c,o[l+1]=El}for(let a=0,l=0;a<r;a++){for(;o[l+1]<a;)l++;const c=s[l],u=a-c;t[e+a*n]=i[c]+u*u}}const JV=32,e8=[];function t8(t){return Math.pow(2,Math.ceil(Math.log2(t)))}function n8({characterSet:t,getFontWidth:e,fontHeight:n,buffer:r,maxCanvasWidth:i,mapping:s={},xOffset:o=0,yOffset:a=0}){let l=0,c=o;const u=n+r*2;for(const f of t)if(!s[f]){const d=e(f);c+d+r*2>i&&(c=0,l++),s[f]={x:c+r,y:a+l*u+r,width:d,height:u,layoutWidth:d,layoutHeight:n},c+=d+r*2}return{mapping:s,xOffset:c,yOffset:a+l*u,canvasHeight:t8(a+(l+1)*u)}}function uC(t,e,n,r){let i=0;for(let o=e;o<n;o++){var s;const a=t[o];i+=((s=r[a])===null||s===void 0?void 0:s.layoutWidth)||0}return i}function fC(t,e,n,r,i,s){let o=e,a=0;for(let l=e;l<n;l++){const c=uC(t,l,l+1,i);a+c>r&&(o<l&&s.push(l),o=l,a=0),a+=c}return a}function r8(t,e,n,r,i,s){let o=e,a=e,l=e,c=0;for(let u=e;u<n;u++)if((t[u]===" "||t[u+1]===" "||u+1===n)&&(l=u+1),l>a){let f=uC(t,a,l,i);c+f>r&&(o<a&&(s.push(a),o=a,c=0),f>r&&(f=fC(t,a,l,r,i,s),o=s[s.length-1])),a=l,c+=f}return c}function i8(t,e,n,r,i=0,s){s===void 0&&(s=t.length);const o=[];return e==="break-all"?fC(t,i,s,n,r,o):r8(t,i,s,n,r,o),o}function s8(t,e,n,r,i,s){let o=0,a=0;for(let l=e;l<n;l++){const c=t[l],u=r[c];u?(a||(a=u.layoutHeight),i[l]=o+u.layoutWidth/2,o+=u.layoutWidth):(ae.warn("Missing character: ".concat(c," (").concat(c.codePointAt(0),")"))(),i[l]=o,o+=JV)}s[0]=o,s[1]=a}function o8(t,e,n,r,i){const s=Array.from(t),o=s.length,a=new Array(o),l=new Array(o),c=new Array(o),u=(n==="break-word"||n==="break-all")&&isFinite(r)&&r>0,f=[0,0],d=[0,0];let h=0,p=0,g=0;for(let m=0;m<=o;m++){const y=s[m];if((y===`
`||m===o)&&(g=m),g>p){const v=u?i8(s,n,r,i,p,g):e8;for(let b=0;b<=v.length;b++){const T=b===0?p:v[b-1],S=b<v.length?v[b]:g;s8(s,T,S,i,a,d);for(let P=T;P<S;P++){var E;const R=s[P],O=((E=i[R])===null||E===void 0?void 0:E.layoutOffsetY)||0;l[P]=h+d[1]/2+O,c[P]=d[0]}h=h+d[1]*e,f[0]=Math.max(f[0],d[0])}p=g}y===`
`&&(a[p]=0,l[p]=0,c[p]=0,p++)}return f[1]=h,{x:a,y:l,rowWidth:c,size:f}}function a8({value:t,length:e,stride:n,offset:r,startIndices:i,characterSet:s}){const o=t.BYTES_PER_ELEMENT,a=n?n/o:1,l=r?r/o:0,c=i[e]||Math.ceil((t.length-l)/a),u=s&&new Set,f=new Array(e);let d=t;if(a>1||l>0){const h=t.constructor;d=new h(c);for(let p=0;p<c;p++)d[p]=t[p*a+l]}for(let h=0;h<e;h++){const p=i[h],g=i[h+1]||c,E=d.subarray(p,g);f[h]=String.fromCodePoint.apply(null,E),u&&E.forEach(u.add,u)}if(u)for(const h of u)s.add(String.fromCodePoint(h));return{texts:f,characterCount:c}}class dC{constructor(e=5){_(this,"limit",void 0),_(this,"_cache",{}),_(this,"_order",[]),this.limit=e}get(e){const n=this._cache[e];return n&&(this._deleteOrder(e),this._appendOrder(e)),n}set(e,n){this._cache[e]?(this.delete(e),this._cache[e]=n,this._appendOrder(e)):(Object.keys(this._cache).length===this.limit&&this.delete(this._order[0]),this._cache[e]=n,this._appendOrder(e))}delete(e){this._cache[e]&&(delete this._cache[e],this._deleteOrder(e))}_deleteOrder(e){const n=this._order.indexOf(e);n>=0&&this._order.splice(n,1)}_appendOrder(e){this._order.push(e)}}function l8(){const t=[];for(let e=32;e<128;e++)t.push(String.fromCharCode(e));return t}const No={fontFamily:"Monaco, monospace",fontWeight:"normal",characterSet:l8(),fontSize:64,buffer:4,sdf:!1,cutoff:.25,radius:12,smoothing:.1},QE=1024,JE=.9,ew=1.2,hC=3;let dd=new dC(hC);function c8(t,e){let n;typeof e=="string"?n=new Set(Array.from(e)):n=new Set(e);const r=dd.get(t);if(!r)return n;for(const i in r.mapping)n.has(i)&&n.delete(i);return n}function u8(t,e){for(let n=0;n<t.length;n++)e.data[4*n+3]=t[n]}function tw(t,e,n,r){t.font="".concat(r," ").concat(n,"px ").concat(e),t.fillStyle="#000",t.textBaseline="alphabetic",t.textAlign="left"}function f8(t){ae.assert(Number.isFinite(t)&&t>=hC,"Invalid cache limit"),dd=new dC(t)}class d8{constructor(){_(this,"props",{...No}),_(this,"_key",void 0),_(this,"_atlas",void 0)}get texture(){return this._atlas}get mapping(){return this._atlas&&this._atlas.mapping}get scale(){const{fontSize:e,buffer:n}=this.props;return(e*ew+n*2)/e}setProps(e={}){Object.assign(this.props,e),this._key=this._getKey();const n=c8(this._key,this.props.characterSet),r=dd.get(this._key);if(r&&n.size===0){this._atlas!==r&&(this._atlas=r);return}const i=this._generateFontAtlas(n,r);this._atlas=i,dd.set(this._key,i)}_generateFontAtlas(e,n){const{fontFamily:r,fontWeight:i,fontSize:s,buffer:o,sdf:a,radius:l,cutoff:c}=this.props;let u=n&&n.data;u||(u=document.createElement("canvas"),u.width=QE);const f=u.getContext("2d",{willReadFrequently:!0});tw(f,r,s,i);const{mapping:d,canvasHeight:h,xOffset:p,yOffset:g}=n8({getFontWidth:E=>f.measureText(E).width,fontHeight:s*ew,buffer:o,characterSet:e,maxCanvasWidth:QE,...n&&{mapping:n.mapping,xOffset:n.xOffset,yOffset:n.yOffset}});if(u.height!==h){const E=f.getImageData(0,0,u.width,u.height);u.height=h,f.putImageData(E,0,0)}if(tw(f,r,s,i),a){const E=new QV({fontSize:s,buffer:o,radius:l,cutoff:c,fontFamily:r,fontWeight:"".concat(i)});for(const m of e){const{data:y,width:v,height:b,glyphTop:T}=E.draw(m);d[m].width=v,d[m].layoutOffsetY=s*JE-T;const S=f.createImageData(v,b);u8(y,S),f.putImageData(S,d[m].x,d[m].y)}}else for(const E of e)f.fillText(E,d[E].x,d[E].y+o+s*JE);return{xOffset:p,yOffset:g,mapping:d,data:u,width:u.width,height:u.height}}_getKey(){const{fontFamily:e,fontWeight:n,fontSize:r,buffer:i,sdf:s,radius:o,cutoff:a}=this.props;return s?"".concat(e," ").concat(n," ").concat(r," ").concat(i," ").concat(o," ").concat(a):"".concat(e," ").concat(n," ").concat(r," ").concat(i)}}const h8=`#define SHADER_NAME text-background-layer-vertex-shader

attribute vec2 positions;

attribute vec3 instancePositions;
attribute vec3 instancePositions64Low;
attribute vec4 instanceRects;
attribute float instanceSizes;
attribute float instanceAngles;
attribute vec2 instancePixelOffsets;
attribute float instanceLineWidths;
attribute vec4 instanceFillColors;
attribute vec4 instanceLineColors;
attribute vec3 instancePickingColors;

uniform bool billboard;
uniform float opacity;
uniform float sizeScale;
uniform float sizeMinPixels;
uniform float sizeMaxPixels;
uniform vec4 padding;
uniform int sizeUnits;

varying vec4 vFillColor;
varying vec4 vLineColor;
varying float vLineWidth;
varying vec2 uv;
varying vec2 dimensions;

vec2 rotate_by_angle(vec2 vertex, float angle) {
  float angle_radian = radians(angle);
  float cos_angle = cos(angle_radian);
  float sin_angle = sin(angle_radian);
  mat2 rotationMatrix = mat2(cos_angle, -sin_angle, sin_angle, cos_angle);
  return rotationMatrix * vertex;
}

void main(void) {
  geometry.worldPosition = instancePositions;
  geometry.uv = positions;
  geometry.pickingColor = instancePickingColors;
  uv = positions;
  vLineWidth = instanceLineWidths;
  float sizePixels = clamp(
    project_size_to_pixel(instanceSizes * sizeScale, sizeUnits),
    sizeMinPixels, sizeMaxPixels
  );

  dimensions = instanceRects.zw * sizePixels + padding.xy + padding.zw;

  vec2 pixelOffset = (positions * instanceRects.zw + instanceRects.xy) * sizePixels + mix(-padding.xy, padding.zw, positions);
  pixelOffset = rotate_by_angle(pixelOffset, instanceAngles);
  pixelOffset += instancePixelOffsets;
  pixelOffset.y *= -1.0;

  if (billboard)  {
    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);
    DECKGL_FILTER_GL_POSITION(gl_Position, geometry);
    vec3 offset = vec3(pixelOffset, 0.0);
    DECKGL_FILTER_SIZE(offset, geometry);
    gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);
  } else {
    vec3 offset_common = vec3(project_pixel_size(pixelOffset), 0.0);
    DECKGL_FILTER_SIZE(offset_common, geometry);
    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset_common, geometry.position);
    DECKGL_FILTER_GL_POSITION(gl_Position, geometry);
  }
  vFillColor = vec4(instanceFillColors.rgb, instanceFillColors.a * opacity);
  DECKGL_FILTER_COLOR(vFillColor, geometry);
  vLineColor = vec4(instanceLineColors.rgb, instanceLineColors.a * opacity);
  DECKGL_FILTER_COLOR(vLineColor, geometry);
}
`,p8=`#define SHADER_NAME text-background-layer-fragment-shader

precision highp float;

uniform bool stroked;

varying vec4 vFillColor;
varying vec4 vLineColor;
varying float vLineWidth;
varying vec2 uv;
varying vec2 dimensions;

void main(void) {
  geometry.uv = uv;

  vec2 pixelPosition = uv * dimensions;
  if (stroked) {
    float distToEdge = min(
      min(pixelPosition.x, dimensions.x - pixelPosition.x),
      min(pixelPosition.y, dimensions.y - pixelPosition.y)
    );
    float isBorder = smoothedge(distToEdge, vLineWidth);
    gl_FragColor = mix(vFillColor, vLineColor, isBorder);
  } else {
    gl_FragColor = vFillColor;
  }

  DECKGL_FILTER_COLOR(gl_FragColor, geometry);
}
`,g8={billboard:!0,sizeScale:1,sizeUnits:"pixels",sizeMinPixels:0,sizeMaxPixels:Number.MAX_SAFE_INTEGER,padding:{type:"array",value:[0,0,0,0]},getPosition:{type:"accessor",value:t=>t.position},getSize:{type:"accessor",value:1},getAngle:{type:"accessor",value:0},getPixelOffset:{type:"accessor",value:[0,0]},getBoundingRect:{type:"accessor",value:[0,0,0,0]},getFillColor:{type:"accessor",value:[0,0,0,255]},getLineColor:{type:"accessor",value:[0,0,0,255]},getLineWidth:{type:"accessor",value:1}};class xv extends ei{constructor(...e){super(...e),_(this,"state",void 0)}getShaders(){return super.getShaders({vs:h8,fs:p8,modules:[Sc,Pc]})}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceSizes:{size:1,transition:!0,accessor:"getSize",defaultValue:1},instanceAngles:{size:1,transition:!0,accessor:"getAngle"},instanceRects:{size:4,accessor:"getBoundingRect"},instancePixelOffsets:{size:2,transition:!0,accessor:"getPixelOffset"},instanceFillColors:{size:4,transition:!0,normalized:!0,type:5121,accessor:"getFillColor",defaultValue:[0,0,0,255]},instanceLineColors:{size:4,transition:!0,normalized:!0,type:5121,accessor:"getLineColor",defaultValue:[0,0,0,255]},instanceLineWidths:{size:1,transition:!0,accessor:"getLineWidth",defaultValue:1}})}updateState(e){super.updateState(e);const{changeFlags:n}=e;if(n.extensionsChanged){var r;const{gl:i}=this.context;(r=this.state.model)===null||r===void 0||r.delete(),this.state.model=this._getModel(i),this.getAttributeManager().invalidateAll()}}draw({uniforms:e}){const{billboard:n,sizeScale:r,sizeUnits:i,sizeMinPixels:s,sizeMaxPixels:o,getLineWidth:a}=this.props;let{padding:l}=this.props;l.length<4&&(l=[l[0],l[1],l[0],l[1]]),this.state.model.setUniforms(e).setUniforms({billboard:n,stroked:!!a,padding:l,sizeUnits:Ts[i],sizeScale:r,sizeMinPixels:s,sizeMaxPixels:o}).draw()}_getModel(e){const n=[0,0,1,0,1,1,0,1];return new Ps(e,{...this.getShaders(),id:this.props.id,geometry:new xc({drawMode:6,vertexCount:4,attributes:{positions:{size:2,value:new Float32Array(n)}}}),isInstanced:!0})}}_(xv,"defaultProps",g8);_(xv,"layerName","TextBackgroundLayer");const nw={start:1,middle:0,end:-1},rw={top:1,center:0,bottom:-1},_g=[0,0,0,255],m8=1,y8={billboard:!0,sizeScale:1,sizeUnits:"pixels",sizeMinPixels:0,sizeMaxPixels:Number.MAX_SAFE_INTEGER,background:!1,getBackgroundColor:{type:"accessor",value:[255,255,255,255]},getBorderColor:{type:"accessor",value:_g},getBorderWidth:{type:"accessor",value:0},backgroundPadding:{type:"array",value:[0,0,0,0]},characterSet:{type:"object",value:No.characterSet},fontFamily:No.fontFamily,fontWeight:No.fontWeight,lineHeight:m8,outlineWidth:{type:"number",value:0,min:0},outlineColor:{type:"color",value:_g},fontSettings:{type:"object",value:{},compare:1},wordBreak:"break-word",maxWidth:{type:"number",value:-1},getText:{type:"accessor",value:t=>t.text},getPosition:{type:"accessor",value:t=>t.position},getColor:{type:"accessor",value:_g},getSize:{type:"accessor",value:32},getAngle:{type:"accessor",value:0},getTextAnchor:{type:"accessor",value:"middle"},getAlignmentBaseline:{type:"accessor",value:"center"},getPixelOffset:{type:"accessor",value:[0,0]},backgroundColor:{deprecatedFor:["background","getBackgroundColor"]}};class Tv extends cv{constructor(...e){super(...e),_(this,"state",void 0),_(this,"getBoundingRect",(n,r)=>{let{size:[i,s]}=this.transformParagraph(n,r);const{fontSize:o}=this.state.fontAtlasManager.props;i/=o,s/=o;const{getTextAnchor:a,getAlignmentBaseline:l}=this.props,c=nw[typeof a=="function"?a(n,r):a],u=rw[typeof l=="function"?l(n,r):l];return[(c-1)*i/2,(u-1)*s/2,i,s]}),_(this,"getIconOffsets",(n,r)=>{const{getTextAnchor:i,getAlignmentBaseline:s}=this.props,{x:o,y:a,rowWidth:l,size:[c,u]}=this.transformParagraph(n,r),f=nw[typeof i=="function"?i(n,r):i],d=rw[typeof s=="function"?s(n,r):s],h=o.length,p=new Array(h*2);let g=0;for(let E=0;E<h;E++){const m=(1-f)*(c-l[E])/2;p[g++]=(f-1)*c/2+m+o[E],p[g++]=(d-1)*u/2+a[E]}return p})}initializeState(){this.state={styleVersion:0,fontAtlasManager:new d8},this.props.maxWidth>0&&ae.warn("v8.9 breaking change: TextLayer maxWidth is now relative to text size")()}updateState(e){const{props:n,oldProps:r,changeFlags:i}=e;(i.dataChanged||i.updateTriggersChanged&&(i.updateTriggersChanged.all||i.updateTriggersChanged.getText))&&this._updateText(),(this._updateFontAtlas()||n.lineHeight!==r.lineHeight||n.wordBreak!==r.wordBreak||n.maxWidth!==r.maxWidth)&&this.setState({styleVersion:this.state.styleVersion+1})}getPickingInfo({info:e}){return e.object=e.index>=0?this.props.data[e.index]:null,e}_updateFontAtlas(){const{fontSettings:e,fontFamily:n,fontWeight:r}=this.props,{fontAtlasManager:i,characterSet:s}=this.state,o={...e,characterSet:s,fontFamily:n,fontWeight:r};if(!i.mapping)return i.setProps(o),!0;for(const a in o)if(o[a]!==i.props[a])return i.setProps(o),!0;return!1}_updateText(){var e;const{data:n,characterSet:r}=this.props,i=(e=n.attributes)===null||e===void 0?void 0:e.getText;let{getText:s}=this.props,o=n.startIndices,a;const l=r==="auto"&&new Set;if(i&&o){const{texts:c,characterCount:u}=a8({...ArrayBuffer.isView(i)?{value:i}:i,length:n.length,startIndices:o,characterSet:l});a=u,s=(f,{index:d})=>c[d]}else{const{iterable:c,objectInfo:u}=ph(n);o=[0],a=0;for(const f of c){u.index++;const d=Array.from(s(f,u)||"");l&&d.forEach(l.add,l),a+=d.length,o.push(a)}}this.setState({getText:s,startIndices:o,numInstances:a,characterSet:l||r})}transformParagraph(e,n){const{fontAtlasManager:r}=this.state,i=r.mapping,s=this.state.getText,{wordBreak:o,lineHeight:a,maxWidth:l}=this.props,c=s(e,n)||"";return o8(c,a,o,l*r.props.fontSize,i)}renderLayers(){const{startIndices:e,numInstances:n,getText:r,fontAtlasManager:{scale:i,texture:s,mapping:o},styleVersion:a}=this.state,{data:l,_dataDiff:c,getPosition:u,getColor:f,getSize:d,getAngle:h,getPixelOffset:p,getBackgroundColor:g,getBorderColor:E,getBorderWidth:m,backgroundPadding:y,background:v,billboard:b,fontSettings:T,outlineWidth:S,outlineColor:P,sizeScale:R,sizeUnits:O,sizeMinPixels:L,sizeMaxPixels:M,transitions:j,updateTriggers:U}=this.props,V=this.getSubLayerClass("characters",wv),X=this.getSubLayerClass("background",xv);return[v&&new X({getFillColor:g,getLineColor:E,getLineWidth:m,padding:y,getPosition:u,getSize:d,getAngle:h,getPixelOffset:p,billboard:b,sizeScale:R,sizeUnits:O,sizeMinPixels:L,sizeMaxPixels:M,transitions:j&&{getPosition:j.getPosition,getAngle:j.getAngle,getSize:j.getSize,getFillColor:j.getBackgroundColor,getLineColor:j.getBorderColor,getLineWidth:j.getBorderWidth,getPixelOffset:j.getPixelOffset}},this.getSubLayerProps({id:"background",updateTriggers:{getPosition:U.getPosition,getAngle:U.getAngle,getSize:U.getSize,getFillColor:U.getBackgroundColor,getLineColor:U.getBorderColor,getLineWidth:U.getBorderWidth,getPixelOffset:U.getPixelOffset,getBoundingRect:{getText:U.getText,getTextAnchor:U.getTextAnchor,getAlignmentBaseline:U.getAlignmentBaseline,styleVersion:a}}}),{data:l.attributes&&l.attributes.background?{length:l.length,attributes:l.attributes.background}:l,_dataDiff:c,autoHighlight:!1,getBoundingRect:this.getBoundingRect}),new V({sdf:T.sdf,smoothing:Number.isFinite(T.smoothing)?T.smoothing:No.smoothing,outlineWidth:S/(T.radius||No.radius),outlineColor:P,iconAtlas:s,iconMapping:o,getPosition:u,getColor:f,getSize:d,getAngle:h,getPixelOffset:p,billboard:b,sizeScale:R*i,sizeUnits:O,sizeMinPixels:L*i,sizeMaxPixels:M*i,transitions:j&&{getPosition:j.getPosition,getAngle:j.getAngle,getColor:j.getColor,getSize:j.getSize,getPixelOffset:j.getPixelOffset}},this.getSubLayerProps({id:"characters",updateTriggers:{all:U.getText,getPosition:U.getPosition,getAngle:U.getAngle,getColor:U.getColor,getSize:U.getSize,getPixelOffset:U.getPixelOffset,getIconOffsets:{getTextAnchor:U.getTextAnchor,getAlignmentBaseline:U.getAlignmentBaseline,styleVersion:a}}}),{data:l,_dataDiff:c,startIndices:e,numInstances:n,getIconOffsets:this.getIconOffsets,getIcon:r})]}static set fontAtlasCacheLimit(e){f8(e)}}_(Tv,"defaultProps",y8);_(Tv,"layerName","TextLayer");const pf={circle:{type:vv,props:{filled:"filled",stroked:"stroked",lineWidthMaxPixels:"lineWidthMaxPixels",lineWidthMinPixels:"lineWidthMinPixels",lineWidthScale:"lineWidthScale",lineWidthUnits:"lineWidthUnits",pointRadiusMaxPixels:"radiusMaxPixels",pointRadiusMinPixels:"radiusMinPixels",pointRadiusScale:"radiusScale",pointRadiusUnits:"radiusUnits",pointAntialiasing:"antialiasing",pointBillboard:"billboard",getFillColor:"getFillColor",getLineColor:"getLineColor",getLineWidth:"getLineWidth",getPointRadius:"getRadius"}},icon:{type:Ic,props:{iconAtlas:"iconAtlas",iconMapping:"iconMapping",iconSizeMaxPixels:"sizeMaxPixels",iconSizeMinPixels:"sizeMinPixels",iconSizeScale:"sizeScale",iconSizeUnits:"sizeUnits",iconAlphaCutoff:"alphaCutoff",iconBillboard:"billboard",getIcon:"getIcon",getIconAngle:"getAngle",getIconColor:"getColor",getIconPixelOffset:"getPixelOffset",getIconSize:"getSize"}},text:{type:Tv,props:{textSizeMaxPixels:"sizeMaxPixels",textSizeMinPixels:"sizeMinPixels",textSizeScale:"sizeScale",textSizeUnits:"sizeUnits",textBackground:"background",textBackgroundPadding:"backgroundPadding",textFontFamily:"fontFamily",textFontWeight:"fontWeight",textLineHeight:"lineHeight",textMaxWidth:"maxWidth",textOutlineColor:"outlineColor",textOutlineWidth:"outlineWidth",textWordBreak:"wordBreak",textCharacterSet:"characterSet",textBillboard:"billboard",textFontSettings:"fontSettings",getText:"getText",getTextAngle:"getAngle",getTextColor:"getColor",getTextPixelOffset:"getPixelOffset",getTextSize:"getSize",getTextAnchor:"getTextAnchor",getTextAlignmentBaseline:"getAlignmentBaseline",getTextBackgroundColor:"getBackgroundColor",getTextBorderColor:"getBorderColor",getTextBorderWidth:"getBorderWidth"}}},gf={type:_v,props:{lineWidthUnits:"widthUnits",lineWidthScale:"widthScale",lineWidthMinPixels:"widthMinPixels",lineWidthMaxPixels:"widthMaxPixels",lineJointRounded:"jointRounded",lineCapRounded:"capRounded",lineMiterLimit:"miterLimit",lineBillboard:"billboard",getLineColor:"getColor",getLineWidth:"getWidth"}},g0={type:Ev,props:{extruded:"extruded",filled:"filled",wireframe:"wireframe",elevationScale:"elevationScale",material:"material",_full3d:"_full3d",getElevation:"getElevation",getFillColor:"getFillColor",getLineColor:"getLineColor"}};function Ha({type:t,props:e}){const n={};for(const r in e)n[r]=t.defaultProps[e[r]];return n}function bg(t,e){const{transitions:n,updateTriggers:r}=t.props,i={updateTriggers:{},transitions:n&&{getPosition:n.geometry}};for(const s in e){const o=e[s];let a=t.props[s];s.startsWith("get")&&(a=t.getSubLayerAccessor(a),i.updateTriggers[o]=r[s],n&&(i.transitions[o]=n[s])),i[o]=a}return i}function v8(t){if(Array.isArray(t))return t;switch(ae.assert(t.type,"GeoJSON does not have type"),t.type){case"Feature":return[t];case"FeatureCollection":return ae.assert(Array.isArray(t.features),"GeoJSON does not have features array"),t.features;default:return[{geometry:t}]}}function iw(t,e,n={}){const r={pointFeatures:[],lineFeatures:[],polygonFeatures:[],polygonOutlineFeatures:[]},{startRow:i=0,endRow:s=t.length}=n;for(let o=i;o<s;o++){const a=t[o],{geometry:l}=a;if(l)if(l.type==="GeometryCollection"){ae.assert(Array.isArray(l.geometries),"GeoJSON does not have geometries array");const{geometries:c}=l;for(let u=0;u<c.length;u++){const f=c[u];sw(f,r,e,a,o)}}else sw(l,r,e,a,o)}return r}function sw(t,e,n,r,i){const{type:s,coordinates:o}=t,{pointFeatures:a,lineFeatures:l,polygonFeatures:c,polygonOutlineFeatures:u}=e;if(!b8(s,o)){ae.warn("".concat(s," coordinates are malformed"))();return}switch(s){case"Point":a.push(n({geometry:t},r,i));break;case"MultiPoint":o.forEach(f=>{a.push(n({geometry:{type:"Point",coordinates:f}},r,i))});break;case"LineString":l.push(n({geometry:t},r,i));break;case"MultiLineString":o.forEach(f=>{l.push(n({geometry:{type:"LineString",coordinates:f}},r,i))});break;case"Polygon":c.push(n({geometry:t},r,i)),o.forEach(f=>{u.push(n({geometry:{type:"LineString",coordinates:f}},r,i))});break;case"MultiPolygon":o.forEach(f=>{c.push(n({geometry:{type:"Polygon",coordinates:f}},r,i)),f.forEach(d=>{u.push(n({geometry:{type:"LineString",coordinates:d}},r,i))})});break}}const _8={Point:1,MultiPoint:2,LineString:2,MultiLineString:3,Polygon:3,MultiPolygon:4};function b8(t,e){let n=_8[t];for(ae.assert(n,"Unknown GeoJSON type ".concat(t));e&&--n>0;)e=e[0];return e&&Number.isFinite(e[0])}function pC(){return{points:{},lines:{},polygons:{},polygonsOutline:{}}}function Mu(t){return t.geometry.coordinates}function E8(t,e){const n=pC(),{pointFeatures:r,lineFeatures:i,polygonFeatures:s,polygonOutlineFeatures:o}=t;return n.points.data=r,n.points._dataDiff=e.pointFeatures&&(()=>e.pointFeatures),n.points.getPosition=Mu,n.lines.data=i,n.lines._dataDiff=e.lineFeatures&&(()=>e.lineFeatures),n.lines.getPath=Mu,n.polygons.data=s,n.polygons._dataDiff=e.polygonFeatures&&(()=>e.polygonFeatures),n.polygons.getPolygon=Mu,n.polygonsOutline.data=o,n.polygonsOutline._dataDiff=e.polygonOutlineFeatures&&(()=>e.polygonOutlineFeatures),n.polygonsOutline.getPath=Mu,n}function w8(t,e){const n=pC(),{points:r,lines:i,polygons:s}=t,o=KV(t,e);return n.points.data={length:r.positions.value.length/r.positions.size,attributes:{...r.attributes,getPosition:r.positions,instancePickingColors:{size:3,value:o.points}},properties:r.properties,numericProps:r.numericProps,featureIds:r.featureIds},n.lines.data={length:i.pathIndices.value.length-1,startIndices:i.pathIndices.value,attributes:{...i.attributes,getPath:i.positions,instancePickingColors:{size:3,value:o.lines}},properties:i.properties,numericProps:i.numericProps,featureIds:i.featureIds},n.lines._pathType="open",n.polygons.data={length:s.polygonIndices.value.length-1,startIndices:s.polygonIndices.value,attributes:{...s.attributes,getPolygon:s.positions,pickingColors:{size:3,value:o.polygons}},properties:s.properties,numericProps:s.numericProps,featureIds:s.featureIds},n.polygons._normalize=!1,s.triangles&&(n.polygons.data.attributes.indices=s.triangles.value),n.polygonsOutline.data={length:s.primitivePolygonIndices.value.length-1,startIndices:s.primitivePolygonIndices.value,attributes:{...s.attributes,getPath:s.positions,instancePickingColors:{size:3,value:o.polygons}},properties:s.properties,numericProps:s.numericProps,featureIds:s.featureIds},n.polygonsOutline._pathType="open",n}const x8=["points","linestrings","polygons"],T8={...Ha(pf.circle),...Ha(pf.icon),...Ha(pf.text),...Ha(gf),...Ha(g0),stroked:!0,filled:!0,extruded:!1,wireframe:!1,_full3d:!1,iconAtlas:{type:"object",value:null},iconMapping:{type:"object",value:{}},getIcon:{type:"accessor",value:t=>t.properties.icon},getText:{type:"accessor",value:t=>t.properties.text},pointType:"circle",getRadius:{deprecatedFor:"getPointRadius"}};class Ah extends cv{initializeState(){this.state={layerProps:{},features:{}}}updateState({props:e,changeFlags:n}){if(!n.dataChanged)return;const{data:r}=this.props,i=r&&"points"in r&&"polygons"in r&&"lines"in r;this.setState({binary:i}),i?this._updateStateBinary({props:e,changeFlags:n}):this._updateStateJSON({props:e,changeFlags:n})}_updateStateBinary({props:e,changeFlags:n}){const r=w8(e.data,this.encodePickingColor);this.setState({layerProps:r})}_updateStateJSON({props:e,changeFlags:n}){const r=v8(e.data),i=this.getSubLayerRow.bind(this);let s={};const o={};if(Array.isArray(n.dataChanged)){const l=this.state.features;for(const c in l)s[c]=l[c].slice(),o[c]=[];for(const c of n.dataChanged){const u=iw(r,i,c);for(const f in l)o[f].push(HV({data:s[f],getIndex:d=>d.__source.index,dataRange:c,replace:u[f]}))}}else s=iw(r,i);const a=E8(s,o);this.setState({features:s,featuresDiff:o,layerProps:a})}getPickingInfo(e){const n=super.getPickingInfo(e),{index:r,sourceLayer:i}=n;return n.featureType=x8.find(s=>i.id.startsWith("".concat(this.id,"-").concat(s,"-"))),r>=0&&i.id.startsWith("".concat(this.id,"-points-text"))&&this.state.binary&&(n.index=this.props.data.points.globalFeatureIds.value[r]),n}_updateAutoHighlight(e){const n="".concat(this.id,"-points-"),r=e.featureType==="points";for(const i of this.getSubLayers())i.id.startsWith(n)===r&&i.updateAutoHighlight(e)}_renderPolygonLayer(){const{extruded:e,wireframe:n}=this.props,{layerProps:r}=this.state,i="polygons-fill",s=this.shouldRenderSubLayer(i,r.polygons.data)&&this.getSubLayerClass(i,g0.type);if(s){const o=bg(this,g0.props),a=e&&n;return a||delete o.getLineColor,o.updateTriggers.lineColors=a,new s(o,this.getSubLayerProps({id:i,updateTriggers:o.updateTriggers}),r.polygons)}return null}_renderLineLayers(){const{extruded:e,stroked:n}=this.props,{layerProps:r}=this.state,i="polygons-stroke",s="linestrings",o=!e&&n&&this.shouldRenderSubLayer(i,r.polygonsOutline.data)&&this.getSubLayerClass(i,gf.type),a=this.shouldRenderSubLayer(s,r.lines.data)&&this.getSubLayerClass(s,gf.type);if(o||a){const l=bg(this,gf.props);return[o&&new o(l,this.getSubLayerProps({id:i,updateTriggers:l.updateTriggers}),r.polygonsOutline),a&&new a(l,this.getSubLayerProps({id:s,updateTriggers:l.updateTriggers}),r.lines)]}return null}_renderPointLayers(){const{pointType:e}=this.props,{layerProps:n,binary:r}=this.state;let{highlightedObjectIndex:i}=this.props;!r&&Number.isFinite(i)&&(i=n.points.data.findIndex(a=>a.__source.index===i));const s=new Set(e.split("+")),o=[];for(const a of s){const l="points-".concat(a),c=pf[a],u=c&&this.shouldRenderSubLayer(l,n.points.data)&&this.getSubLayerClass(l,c.type);if(u){const f=bg(this,c.props);let d=n.points;if(a==="text"&&r){const{instancePickingColors:h,...p}=d.data.attributes;d={...d,data:{...d.data,attributes:p}}}o.push(new u(f,this.getSubLayerProps({id:l,updateTriggers:f.updateTriggers,highlightedObjectIndex:i}),d))}}return o}renderLayers(){const{extruded:e}=this.props,n=this._renderPolygonLayer(),r=this._renderLineLayers(),i=this._renderPointLayers();return[!e&&n,r,i,e&&n]}getSubLayerAccessor(e){const{binary:n}=this.state;return!n||typeof e!="function"?super.getSubLayerAccessor(e):(r,i)=>{const{data:s,index:o}=i,a=XV(s,o);return e(a,i)}}}_(Ah,"layerName","GeoJsonLayer");_(Ah,"defaultProps",T8);const gC=[{cropId:1,cropName:"avocados"},{cropId:2,cropName:"lettuces"},{cropId:3,cropName:"cabbages"},{cropId:4,cropName:"tomatoes"},{cropId:5,cropName:"potatoes"}],S8=(t,e,n,r)=>{if(n){const i=gC.find(s=>s.cropId===e.properties.crop);if(i.cropId===1)return[86,130,3,200];if(i.cropId===2)return[191,213,142,200];if(i.cropId===3)return[136,221,191,200];if(i.cropId===4)return[255,99,71,200];if(i.cropId===5)return[183,146,104,200]}return t&&e.properties.irrigating?[24,144,255,185]:r&&e.properties.failure?[255,0,2,185]:[255,255,255,100]},P8=(t,e,n)=>t&&e.properties.irrigating?4:n&&e.properties.failure?6:0,A8=(t,e,n)=>t&&e.properties.irrigating?[255,255,255,200]:n&&e.properties.failure?[255,255,255,200]:[255,255,255,0],C8=(t,e,n,r)=>t.features.map(i=>new Ah({id:`${i.properties.deviceName}-sector_${i.properties.sector}-ID_${i.properties.id}`,data:i,filled:!0,pickable:!0,autoHighlight:!1,getFillColor:S8(e,i,n,r),getLineColor:A8(e,i,r),getLineWidth:P8(e,i,r)})),L8=(t,e)=>t.features.filter(i=>i.properties.sector===e.properties.sector&&i.properties.deviceName===e.properties.deviceName).map(i=>new Ah({id:`${i.properties.deviceName}-sector_${i.properties.sector}-ID_${i.properties.id}-highlights`,data:i,filled:!0,pickable:!0,autoHighlight:!1,getFillColor:[0,0,0,0],getLineColor:[255,204,0,255],getLineWidth:8})),R8=t=>t.isHovering?"pointer":t.isDragging?"grabbing":(!t.isHovering||!t.isDragging,"grab"),O8=t=>{const e=t.toLowerCase();return t.charAt(0).toUpperCase()+e.slice(1)},I8=t=>{const e=`${t.properties.deviceName} (${t.properties.device}) | SECTOR ${t.properties.sector}`,n=gC.find(r=>r.cropId===t.properties.crop);return t&&{html:`        <div>
          <div>
            <b>${e}</b><br>
            <b>Crop: ${O8(n.cropName)}</b>
          </div>
        </div>
      `,style:{backgroundColor:"#D9D9D9",color:"#5D6571",letterSpacing:"0.15px",fontFamily:"'Gill Sans', 'Gill Sans MT', Calibri, 'Trebuchet MS', sans-serif",fontWeight:600,fontSize:"14px",width:"120px auto",height:"auto",border:"1px solid #212B36",borderRadius:"4px",lineHeight:"20px",padding:"9px 17px"}}},M8=t=>{const e=t.layer.id.split(";"),n={id:Number,name:String,connected:String,irrigating:String,failure:String};return e.forEach(r=>{const i=r.split(":"),s=i[0];n[s]=i[1]}),t&&{html:`        <div>
          <div>
            <b>${n.name} | ${n.id}</b><br>
            ${n.connected==="true"?"<b>Device on!</b><br>":""}
            ${n.irrigating==="true"?"<b>Irrigating!</b><br>":""}
            ${n.failure==="true"?"<b>Failure!</b><br>":""}
          </div>
        </div>
      `,style:{backgroundColor:"#D9D9D9",color:"#5D6571",letterSpacing:"0.15px",fontFamily:"'Gill Sans', 'Gill Sans MT', Calibri, 'Trebuchet MS', sans-serif",fontWeight:600,fontSize:"14px",width:"120px auto",height:"auto",border:"1px solid #212B36",borderRadius:"4px",lineHeight:"20px",padding:"9px 17px"}}},k8={black:"#000",white:"#fff"},tc=k8,N8={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},to=N8,F8={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},no=F8,D8={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},ro=D8,B8={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},io=B8,z8={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},so=z8,U8={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},Xa=U8,j8={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},V8=j8;function Nr(t){return t!==null&&typeof t=="object"&&t.constructor===Object}function mC(t){if(!Nr(t))return t;const e={};return Object.keys(t).forEach(n=>{e[n]=mC(t[n])}),e}function Qn(t,e,n={clone:!0}){const r=n.clone?F({},t):t;return Nr(t)&&Nr(e)&&Object.keys(e).forEach(i=>{i!=="__proto__"&&(Nr(e[i])&&i in t&&Nr(t[i])?r[i]=Qn(t[i],e[i],n):n.clone?r[i]=Nr(e[i])?mC(e[i]):e[i]:r[i]=e[i])}),r}function aa(t){let e="https://mui.com/production-error/?code="+t;for(let n=1;n<arguments.length;n+=1)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified MUI error #"+t+"; visit "+e+" for the full message."}function Xe(t){if(typeof t!="string")throw new Error(aa(7));return t.charAt(0).toUpperCase()+t.slice(1)}function ow(t){return t&&t.ownerDocument||document}function m0(t,e){typeof t=="function"?t(e):t&&(t.current=e)}const $8=typeof window<"u"?A.useLayoutEffect:A.useEffect,nc=$8;let aw=0;function G8(t){const[e,n]=A.useState(t),r=t||e;return A.useEffect(()=>{e==null&&(aw+=1,n(`mui-${aw}`))},[e]),r}const lw=Mg["useId".toString()];function W8(t){if(lw!==void 0){const e=lw();return t??e}return G8(t)}function H8({controlled:t,default:e,name:n,state:r="value"}){const{current:i}=A.useRef(t!==void 0),[s,o]=A.useState(e),a=i?t:s,l=A.useCallback(c=>{i||o(c)},[]);return[a,l]}function sl(t){const e=A.useRef(t);return nc(()=>{e.current=t}),A.useCallback((...n)=>(0,e.current)(...n),[])}function Bi(...t){return A.useMemo(()=>t.every(e=>e==null)?null:e=>{t.forEach(n=>{m0(n,e)})},t)}let Ch=!0,y0=!1,cw;const X8={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function Y8(t){const{type:e,tagName:n}=t;return!!(n==="INPUT"&&X8[e]&&!t.readOnly||n==="TEXTAREA"&&!t.readOnly||t.isContentEditable)}function K8(t){t.metaKey||t.altKey||t.ctrlKey||(Ch=!0)}function Eg(){Ch=!1}function q8(){this.visibilityState==="hidden"&&y0&&(Ch=!0)}function Z8(t){t.addEventListener("keydown",K8,!0),t.addEventListener("mousedown",Eg,!0),t.addEventListener("pointerdown",Eg,!0),t.addEventListener("touchstart",Eg,!0),t.addEventListener("visibilitychange",q8,!0)}function Q8(t){const{target:e}=t;try{return e.matches(":focus-visible")}catch{}return Ch||Y8(e)}function yC(){const t=A.useCallback(i=>{i!=null&&Z8(i.ownerDocument)},[]),e=A.useRef(!1);function n(){return e.current?(y0=!0,window.clearTimeout(cw),cw=window.setTimeout(()=>{y0=!1},100),e.current=!1,!0):!1}function r(i){return Q8(i)?(e.current=!0,!0):!1}return{isFocusVisibleRef:e,onFocus:r,onBlur:n,ref:t}}function Sv(t,e){const n=F({},e);return Object.keys(t).forEach(r=>{if(r.toString().match(/^(components|slots)$/))n[r]=F({},t[r],n[r]);else if(r.toString().match(/^(componentsProps|slotProps)$/)){const i=t[r]||{},s=e[r];n[r]={},!s||!Object.keys(s)?n[r]=i:!i||!Object.keys(i)?n[r]=s:(n[r]=F({},s),Object.keys(i).forEach(o=>{n[r][o]=Sv(i[o],s[o])}))}else n[r]===void 0&&(n[r]=t[r])}),n}function Bs(t,e,n=void 0){const r={};return Object.keys(t).forEach(i=>{r[i]=t[i].reduce((s,o)=>{if(o){const a=e(o);a!==""&&s.push(a),n&&n[o]&&s.push(n[o])}return s},[]).join(" ")}),r}const uw=t=>t,J8=()=>{let t=uw;return{configure(e){t=e},generate(e){return t(e)},reset(){t=uw}}},e$=J8(),vC=e$,t$={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function $i(t,e,n="Mui"){const r=t$[e];return r?`${n}-${r}`:`${vC.generate(t)}-${e}`}function Gi(t,e,n="Mui"){const r={};return e.forEach(i=>{r[i]=$i(t,i,n)}),r}const Lh="$$material";function _C(t){var e=Object.create(null);return function(n){return e[n]===void 0&&(e[n]=t(n)),e[n]}}var n$=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,r$=_C(function(t){return n$.test(t)||t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)<91});function i$(t){if(t.sheet)return t.sheet;for(var e=0;e<document.styleSheets.length;e++)if(document.styleSheets[e].ownerNode===t)return document.styleSheets[e]}function s$(t){var e=document.createElement("style");return e.setAttribute("data-emotion",t.key),t.nonce!==void 0&&e.setAttribute("nonce",t.nonce),e.appendChild(document.createTextNode("")),e.setAttribute("data-s",""),e}var o$=function(){function t(n){var r=this;this._insertTag=function(i){var s;r.tags.length===0?r.insertionPoint?s=r.insertionPoint.nextSibling:r.prepend?s=r.container.firstChild:s=r.before:s=r.tags[r.tags.length-1].nextSibling,r.container.insertBefore(i,s),r.tags.push(i)},this.isSpeedy=n.speedy===void 0?!0:n.speedy,this.tags=[],this.ctr=0,this.nonce=n.nonce,this.key=n.key,this.container=n.container,this.prepend=n.prepend,this.insertionPoint=n.insertionPoint,this.before=null}var e=t.prototype;return e.hydrate=function(r){r.forEach(this._insertTag)},e.insert=function(r){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(s$(this));var i=this.tags[this.tags.length-1];if(this.isSpeedy){var s=i$(i);try{s.insertRule(r,s.cssRules.length)}catch{}}else i.appendChild(document.createTextNode(r));this.ctr++},e.flush=function(){this.tags.forEach(function(r){return r.parentNode&&r.parentNode.removeChild(r)}),this.tags=[],this.ctr=0},t}(),At="-ms-",hd="-moz-",me="-webkit-",bC="comm",Pv="rule",Av="decl",a$="@import",EC="@keyframes",l$="@layer",c$=Math.abs,Rh=String.fromCharCode,u$=Object.assign;function f$(t,e){return Et(t,0)^45?(((e<<2^Et(t,0))<<2^Et(t,1))<<2^Et(t,2))<<2^Et(t,3):0}function wC(t){return t.trim()}function d$(t,e){return(t=e.exec(t))?t[0]:t}function ye(t,e,n){return t.replace(e,n)}function v0(t,e){return t.indexOf(e)}function Et(t,e){return t.charCodeAt(e)|0}function rc(t,e,n){return t.slice(e,n)}function lr(t){return t.length}function Cv(t){return t.length}function ku(t,e){return e.push(t),t}function h$(t,e){return t.map(e).join("")}var Oh=1,la=1,xC=0,Qt=0,st=0,ba="";function Ih(t,e,n,r,i,s,o){return{value:t,root:e,parent:n,type:r,props:i,children:s,line:Oh,column:la,length:o,return:""}}function Ya(t,e){return u$(Ih("",null,null,"",null,null,0),t,{length:-t.length},e)}function p$(){return st}function g$(){return st=Qt>0?Et(ba,--Qt):0,la--,st===10&&(la=1,Oh--),st}function gn(){return st=Qt<xC?Et(ba,Qt++):0,la++,st===10&&(la=1,Oh++),st}function vr(){return Et(ba,Qt)}function mf(){return Qt}function Mc(t,e){return rc(ba,t,e)}function ic(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function TC(t){return Oh=la=1,xC=lr(ba=t),Qt=0,[]}function SC(t){return ba="",t}function yf(t){return wC(Mc(Qt-1,_0(t===91?t+2:t===40?t+1:t)))}function m$(t){for(;(st=vr())&&st<33;)gn();return ic(t)>2||ic(st)>3?"":" "}function y$(t,e){for(;--e&&gn()&&!(st<48||st>102||st>57&&st<65||st>70&&st<97););return Mc(t,mf()+(e<6&&vr()==32&&gn()==32))}function _0(t){for(;gn();)switch(st){case t:return Qt;case 34:case 39:t!==34&&t!==39&&_0(st);break;case 40:t===41&&_0(t);break;case 92:gn();break}return Qt}function v$(t,e){for(;gn()&&t+st!==47+10;)if(t+st===42+42&&vr()===47)break;return"/*"+Mc(e,Qt-1)+"*"+Rh(t===47?t:gn())}function _$(t){for(;!ic(vr());)gn();return Mc(t,Qt)}function b$(t){return SC(vf("",null,null,null,[""],t=TC(t),0,[0],t))}function vf(t,e,n,r,i,s,o,a,l){for(var c=0,u=0,f=o,d=0,h=0,p=0,g=1,E=1,m=1,y=0,v="",b=i,T=s,S=r,P=v;E;)switch(p=y,y=gn()){case 40:if(p!=108&&Et(P,f-1)==58){v0(P+=ye(yf(y),"&","&\f"),"&\f")!=-1&&(m=-1);break}case 34:case 39:case 91:P+=yf(y);break;case 9:case 10:case 13:case 32:P+=m$(p);break;case 92:P+=y$(mf()-1,7);continue;case 47:switch(vr()){case 42:case 47:ku(E$(v$(gn(),mf()),e,n),l);break;default:P+="/"}break;case 123*g:a[c++]=lr(P)*m;case 125*g:case 59:case 0:switch(y){case 0:case 125:E=0;case 59+u:m==-1&&(P=ye(P,/\f/g,"")),h>0&&lr(P)-f&&ku(h>32?dw(P+";",r,n,f-1):dw(ye(P," ","")+";",r,n,f-2),l);break;case 59:P+=";";default:if(ku(S=fw(P,e,n,c,u,i,a,v,b=[],T=[],f),s),y===123)if(u===0)vf(P,e,S,S,b,s,f,a,T);else switch(d===99&&Et(P,3)===110?100:d){case 100:case 108:case 109:case 115:vf(t,S,S,r&&ku(fw(t,S,S,0,0,i,a,v,i,b=[],f),T),i,T,f,a,r?b:T);break;default:vf(P,S,S,S,[""],T,0,a,T)}}c=u=h=0,g=m=1,v=P="",f=o;break;case 58:f=1+lr(P),h=p;default:if(g<1){if(y==123)--g;else if(y==125&&g++==0&&g$()==125)continue}switch(P+=Rh(y),y*g){case 38:m=u>0?1:(P+="\f",-1);break;case 44:a[c++]=(lr(P)-1)*m,m=1;break;case 64:vr()===45&&(P+=yf(gn())),d=vr(),u=f=lr(v=P+=_$(mf())),y++;break;case 45:p===45&&lr(P)==2&&(g=0)}}return s}function fw(t,e,n,r,i,s,o,a,l,c,u){for(var f=i-1,d=i===0?s:[""],h=Cv(d),p=0,g=0,E=0;p<r;++p)for(var m=0,y=rc(t,f+1,f=c$(g=o[p])),v=t;m<h;++m)(v=wC(g>0?d[m]+" "+y:ye(y,/&\f/g,d[m])))&&(l[E++]=v);return Ih(t,e,n,i===0?Pv:a,l,c,u)}function E$(t,e,n){return Ih(t,e,n,bC,Rh(p$()),rc(t,2,-2),0)}function dw(t,e,n,r){return Ih(t,e,n,Av,rc(t,0,r),rc(t,r+1,-1),r)}function Fo(t,e){for(var n="",r=Cv(t),i=0;i<r;i++)n+=e(t[i],i,t,e)||"";return n}function w$(t,e,n,r){switch(t.type){case l$:if(t.children.length)break;case a$:case Av:return t.return=t.return||t.value;case bC:return"";case EC:return t.return=t.value+"{"+Fo(t.children,r)+"}";case Pv:t.value=t.props.join(",")}return lr(n=Fo(t.children,r))?t.return=t.value+"{"+n+"}":""}function x$(t){var e=Cv(t);return function(n,r,i,s){for(var o="",a=0;a<e;a++)o+=t[a](n,r,i,s)||"";return o}}function T$(t){return function(e){e.root||(e=e.return)&&t(e)}}var S$=function(e,n,r){for(var i=0,s=0;i=s,s=vr(),i===38&&s===12&&(n[r]=1),!ic(s);)gn();return Mc(e,Qt)},P$=function(e,n){var r=-1,i=44;do switch(ic(i)){case 0:i===38&&vr()===12&&(n[r]=1),e[r]+=S$(Qt-1,n,r);break;case 2:e[r]+=yf(i);break;case 4:if(i===44){e[++r]=vr()===58?"&\f":"",n[r]=e[r].length;break}default:e[r]+=Rh(i)}while(i=gn());return e},A$=function(e,n){return SC(P$(TC(e),n))},hw=new WeakMap,C$=function(e){if(!(e.type!=="rule"||!e.parent||e.length<1)){for(var n=e.value,r=e.parent,i=e.column===r.column&&e.line===r.line;r.type!=="rule";)if(r=r.parent,!r)return;if(!(e.props.length===1&&n.charCodeAt(0)!==58&&!hw.get(r))&&!i){hw.set(e,!0);for(var s=[],o=A$(n,s),a=r.props,l=0,c=0;l<o.length;l++)for(var u=0;u<a.length;u++,c++)e.props[c]=s[l]?o[l].replace(/&\f/g,a[u]):a[u]+" "+o[l]}}},L$=function(e){if(e.type==="decl"){var n=e.value;n.charCodeAt(0)===108&&n.charCodeAt(2)===98&&(e.return="",e.value="")}};function PC(t,e){switch(f$(t,e)){case 5103:return me+"print-"+t+t;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return me+t+t;case 5349:case 4246:case 4810:case 6968:case 2756:return me+t+hd+t+At+t+t;case 6828:case 4268:return me+t+At+t+t;case 6165:return me+t+At+"flex-"+t+t;case 5187:return me+t+ye(t,/(\w+).+(:[^]+)/,me+"box-$1$2"+At+"flex-$1$2")+t;case 5443:return me+t+At+"flex-item-"+ye(t,/flex-|-self/,"")+t;case 4675:return me+t+At+"flex-line-pack"+ye(t,/align-content|flex-|-self/,"")+t;case 5548:return me+t+At+ye(t,"shrink","negative")+t;case 5292:return me+t+At+ye(t,"basis","preferred-size")+t;case 6060:return me+"box-"+ye(t,"-grow","")+me+t+At+ye(t,"grow","positive")+t;case 4554:return me+ye(t,/([^-])(transform)/g,"$1"+me+"$2")+t;case 6187:return ye(ye(ye(t,/(zoom-|grab)/,me+"$1"),/(image-set)/,me+"$1"),t,"")+t;case 5495:case 3959:return ye(t,/(image-set\([^]*)/,me+"$1$`$1");case 4968:return ye(ye(t,/(.+:)(flex-)?(.*)/,me+"box-pack:$3"+At+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+me+t+t;case 4095:case 3583:case 4068:case 2532:return ye(t,/(.+)-inline(.+)/,me+"$1$2")+t;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(lr(t)-1-e>6)switch(Et(t,e+1)){case 109:if(Et(t,e+4)!==45)break;case 102:return ye(t,/(.+:)(.+)-([^]+)/,"$1"+me+"$2-$3$1"+hd+(Et(t,e+3)==108?"$3":"$2-$3"))+t;case 115:return~v0(t,"stretch")?PC(ye(t,"stretch","fill-available"),e)+t:t}break;case 4949:if(Et(t,e+1)!==115)break;case 6444:switch(Et(t,lr(t)-3-(~v0(t,"!important")&&10))){case 107:return ye(t,":",":"+me)+t;case 101:return ye(t,/(.+:)([^;!]+)(;|!.+)?/,"$1"+me+(Et(t,14)===45?"inline-":"")+"box$3$1"+me+"$2$3$1"+At+"$2box$3")+t}break;case 5936:switch(Et(t,e+11)){case 114:return me+t+At+ye(t,/[svh]\w+-[tblr]{2}/,"tb")+t;case 108:return me+t+At+ye(t,/[svh]\w+-[tblr]{2}/,"tb-rl")+t;case 45:return me+t+At+ye(t,/[svh]\w+-[tblr]{2}/,"lr")+t}return me+t+At+t+t}return t}var R$=function(e,n,r,i){if(e.length>-1&&!e.return)switch(e.type){case Av:e.return=PC(e.value,e.length);break;case EC:return Fo([Ya(e,{value:ye(e.value,"@","@"+me)})],i);case Pv:if(e.length)return h$(e.props,function(s){switch(d$(s,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return Fo([Ya(e,{props:[ye(s,/:(read-\w+)/,":"+hd+"$1")]})],i);case"::placeholder":return Fo([Ya(e,{props:[ye(s,/:(plac\w+)/,":"+me+"input-$1")]}),Ya(e,{props:[ye(s,/:(plac\w+)/,":"+hd+"$1")]}),Ya(e,{props:[ye(s,/:(plac\w+)/,At+"input-$1")]})],i)}return""})}},O$=[R$],I$=function(e){var n=e.key;if(n==="css"){var r=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(r,function(g){var E=g.getAttribute("data-emotion");E.indexOf(" ")!==-1&&(document.head.appendChild(g),g.setAttribute("data-s",""))})}var i=e.stylisPlugins||O$,s={},o,a=[];o=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+n+' "]'),function(g){for(var E=g.getAttribute("data-emotion").split(" "),m=1;m<E.length;m++)s[E[m]]=!0;a.push(g)});var l,c=[C$,L$];{var u,f=[w$,T$(function(g){u.insert(g)})],d=x$(c.concat(i,f)),h=function(E){return Fo(b$(E),d)};l=function(E,m,y,v){u=y,h(E?E+"{"+m.styles+"}":m.styles),v&&(p.inserted[m.name]=!0)}}var p={key:n,sheet:new o$({key:n,container:o,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:s,registered:{},insert:l};return p.sheet.hydrate(a),p},M$=!0;function k$(t,e,n){var r="";return n.split(" ").forEach(function(i){t[i]!==void 0?e.push(t[i]+";"):r+=i+" "}),r}var AC=function(e,n,r){var i=e.key+"-"+n.name;(r===!1||M$===!1)&&e.registered[i]===void 0&&(e.registered[i]=n.styles)},N$=function(e,n,r){AC(e,n,r);var i=e.key+"-"+n.name;if(e.inserted[n.name]===void 0){var s=n;do e.insert(n===s?"."+i:"",s,e.sheet,!0),s=s.next;while(s!==void 0)}};function F$(t){for(var e=0,n,r=0,i=t.length;i>=4;++r,i-=4)n=t.charCodeAt(r)&255|(t.charCodeAt(++r)&255)<<8|(t.charCodeAt(++r)&255)<<16|(t.charCodeAt(++r)&255)<<24,n=(n&65535)*1540483477+((n>>>16)*59797<<16),n^=n>>>24,e=(n&65535)*1540483477+((n>>>16)*59797<<16)^(e&65535)*1540483477+((e>>>16)*59797<<16);switch(i){case 3:e^=(t.charCodeAt(r+2)&255)<<16;case 2:e^=(t.charCodeAt(r+1)&255)<<8;case 1:e^=t.charCodeAt(r)&255,e=(e&65535)*1540483477+((e>>>16)*59797<<16)}return e^=e>>>13,e=(e&65535)*1540483477+((e>>>16)*59797<<16),((e^e>>>15)>>>0).toString(36)}var D$={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},B$=/[A-Z]|^ms/g,z$=/_EMO_([^_]+?)_([^]*?)_EMO_/g,CC=function(e){return e.charCodeAt(1)===45},pw=function(e){return e!=null&&typeof e!="boolean"},wg=_C(function(t){return CC(t)?t:t.replace(B$,"-$&").toLowerCase()}),gw=function(e,n){switch(e){case"animation":case"animationName":if(typeof n=="string")return n.replace(z$,function(r,i,s){return cr={name:i,styles:s,next:cr},i})}return D$[e]!==1&&!CC(e)&&typeof n=="number"&&n!==0?n+"px":n};function sc(t,e,n){if(n==null)return"";if(n.__emotion_styles!==void 0)return n;switch(typeof n){case"boolean":return"";case"object":{if(n.anim===1)return cr={name:n.name,styles:n.styles,next:cr},n.name;if(n.styles!==void 0){var r=n.next;if(r!==void 0)for(;r!==void 0;)cr={name:r.name,styles:r.styles,next:cr},r=r.next;var i=n.styles+";";return i}return U$(t,e,n)}case"function":{if(t!==void 0){var s=cr,o=n(t);return cr=s,sc(t,e,o)}break}}if(e==null)return n;var a=e[n];return a!==void 0?a:n}function U$(t,e,n){var r="";if(Array.isArray(n))for(var i=0;i<n.length;i++)r+=sc(t,e,n[i])+";";else for(var s in n){var o=n[s];if(typeof o!="object")e!=null&&e[o]!==void 0?r+=s+"{"+e[o]+"}":pw(o)&&(r+=wg(s)+":"+gw(s,o)+";");else if(Array.isArray(o)&&typeof o[0]=="string"&&(e==null||e[o[0]]===void 0))for(var a=0;a<o.length;a++)pw(o[a])&&(r+=wg(s)+":"+gw(s,o[a])+";");else{var l=sc(t,e,o);switch(s){case"animation":case"animationName":{r+=wg(s)+":"+l+";";break}default:r+=s+"{"+l+"}"}}}return r}var mw=/label:\s*([^\s;\n{]+)\s*(;|$)/g,cr,LC=function(e,n,r){if(e.length===1&&typeof e[0]=="object"&&e[0]!==null&&e[0].styles!==void 0)return e[0];var i=!0,s="";cr=void 0;var o=e[0];o==null||o.raw===void 0?(i=!1,s+=sc(r,n,o)):s+=o[0];for(var a=1;a<e.length;a++)s+=sc(r,n,e[a]),i&&(s+=o[a]);mw.lastIndex=0;for(var l="",c;(c=mw.exec(s))!==null;)l+="-"+c[1];var u=F$(s)+l;return{name:u,styles:s,next:cr}},j$=function(e){return e()},V$=Mg["useInsertionEffect"]?Mg["useInsertionEffect"]:!1,$$=V$||j$,RC=A.createContext(typeof HTMLElement<"u"?I$({key:"css"}):null);RC.Provider;var G$=function(e){return A.forwardRef(function(n,r){var i=A.useContext(RC);return e(n,i,r)})},OC=A.createContext({});function W$(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return LC(e)}var Lv=function(){var e=W$.apply(void 0,arguments),n="animation-"+e.name;return{name:n,styles:"@keyframes "+n+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}},H$=r$,X$=function(e){return e!=="theme"},yw=function(e){return typeof e=="string"&&e.charCodeAt(0)>96?H$:X$},vw=function(e,n,r){var i;if(n){var s=n.shouldForwardProp;i=e.__emotion_forwardProp&&s?function(o){return e.__emotion_forwardProp(o)&&s(o)}:s}return typeof i!="function"&&r&&(i=e.__emotion_forwardProp),i},Y$=function(e){var n=e.cache,r=e.serialized,i=e.isStringTag;return AC(n,r,i),$$(function(){return N$(n,r,i)}),null},K$=function t(e,n){var r=e.__emotion_real===e,i=r&&e.__emotion_base||e,s,o;n!==void 0&&(s=n.label,o=n.target);var a=vw(e,n,r),l=a||yw(i),c=!l("as");return function(){var u=arguments,f=r&&e.__emotion_styles!==void 0?e.__emotion_styles.slice(0):[];if(s!==void 0&&f.push("label:"+s+";"),u[0]==null||u[0].raw===void 0)f.push.apply(f,u);else{f.push(u[0][0]);for(var d=u.length,h=1;h<d;h++)f.push(u[h],u[0][h])}var p=G$(function(g,E,m){var y=c&&g.as||i,v="",b=[],T=g;if(g.theme==null){T={};for(var S in g)T[S]=g[S];T.theme=A.useContext(OC)}typeof g.className=="string"?v=k$(E.registered,b,g.className):g.className!=null&&(v=g.className+" ");var P=LC(f.concat(b),E.registered,T);v+=E.key+"-"+P.name,o!==void 0&&(v+=" "+o);var R=c&&a===void 0?yw(y):l,O={};for(var L in g)c&&L==="as"||R(L)&&(O[L]=g[L]);return O.className=v,O.ref=m,A.createElement(A.Fragment,null,A.createElement(Y$,{cache:E,serialized:P,isStringTag:typeof y=="string"}),A.createElement(y,O))});return p.displayName=s!==void 0?s:"Styled("+(typeof i=="string"?i:i.displayName||i.name||"Component")+")",p.defaultProps=e.defaultProps,p.__emotion_real=p,p.__emotion_base=i,p.__emotion_styles=f,p.__emotion_forwardProp=a,Object.defineProperty(p,"toString",{value:function(){return"."+o}}),p.withComponent=function(g,E){return t(g,F({},n,E,{shouldForwardProp:vw(p,E,!0)})).apply(void 0,f)},p}},q$=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],b0=K$.bind();q$.forEach(function(t){b0[t]=b0(t)});/**
 * @mui/styled-engine v5.14.14
 *
 * @license MIT
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */function IC(t,e){return b0(t,e)}const Z$=(t,e)=>{Array.isArray(t.__emotion_styles)&&(t.__emotion_styles=e(t.__emotion_styles))},Q$=["values","unit","step"],J$=t=>{const e=Object.keys(t).map(n=>({key:n,val:t[n]}))||[];return e.sort((n,r)=>n.val-r.val),e.reduce((n,r)=>F({},n,{[r.key]:r.val}),{})};function eG(t){const{values:e={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:n="px",step:r=5}=t,i=Ge(t,Q$),s=J$(e),o=Object.keys(s);function a(d){return`@media (min-width:${typeof e[d]=="number"?e[d]:d}${n})`}function l(d){return`@media (max-width:${(typeof e[d]=="number"?e[d]:d)-r/100}${n})`}function c(d,h){const p=o.indexOf(h);return`@media (min-width:${typeof e[d]=="number"?e[d]:d}${n}) and (max-width:${(p!==-1&&typeof e[o[p]]=="number"?e[o[p]]:h)-r/100}${n})`}function u(d){return o.indexOf(d)+1<o.length?c(d,o[o.indexOf(d)+1]):a(d)}function f(d){const h=o.indexOf(d);return h===0?a(o[1]):h===o.length-1?l(o[h]):c(d,o[o.indexOf(d)+1]).replace("@media","@media not all and")}return F({keys:o,values:s,up:a,down:l,between:c,only:u,not:f,unit:n},i)}const tG={borderRadius:4},nG=tG;function wl(t,e){return e?Qn(t,e,{clone:!1}):t}const Rv={xs:0,sm:600,md:900,lg:1200,xl:1536},_w={keys:["xs","sm","md","lg","xl"],up:t=>`@media (min-width:${Rv[t]}px)`};function Dn(t,e,n){const r=t.theme||{};if(Array.isArray(e)){const s=r.breakpoints||_w;return e.reduce((o,a,l)=>(o[s.up(s.keys[l])]=n(e[l]),o),{})}if(typeof e=="object"){const s=r.breakpoints||_w;return Object.keys(e).reduce((o,a)=>{if(Object.keys(s.values||Rv).indexOf(a)!==-1){const l=s.up(a);o[l]=n(e[a],a)}else{const l=a;o[l]=e[l]}return o},{})}return n(e)}function rG(t={}){var e;return((e=t.keys)==null?void 0:e.reduce((r,i)=>{const s=t.up(i);return r[s]={},r},{}))||{}}function iG(t,e){return t.reduce((n,r)=>{const i=n[r];return(!i||Object.keys(i).length===0)&&delete n[r],n},e)}function sG(t,e){if(typeof t!="object")return{};const n={},r=Object.keys(e);return Array.isArray(t)?r.forEach((i,s)=>{s<t.length&&(n[i]=!0)}):r.forEach(i=>{t[i]!=null&&(n[i]=!0)}),n}function Mh({values:t,breakpoints:e,base:n}){const r=n||sG(t,e),i=Object.keys(r);if(i.length===0)return t;let s;return i.reduce((o,a,l)=>(Array.isArray(t)?(o[a]=t[l]!=null?t[l]:t[s],s=l):typeof t=="object"?(o[a]=t[a]!=null?t[a]:t[s],s=a):o[a]=t,o),{})}function kh(t,e,n=!0){if(!e||typeof e!="string")return null;if(t&&t.vars&&n){const r=`vars.${e}`.split(".").reduce((i,s)=>i&&i[s]?i[s]:null,t);if(r!=null)return r}return e.split(".").reduce((r,i)=>r&&r[i]!=null?r[i]:null,t)}function pd(t,e,n,r=n){let i;return typeof t=="function"?i=t(n):Array.isArray(t)?i=t[n]||r:i=kh(t,n)||r,e&&(i=e(i,r,t)),i}function Ee(t){const{prop:e,cssProperty:n=t.prop,themeKey:r,transform:i}=t,s=o=>{if(o[e]==null)return null;const a=o[e],l=o.theme,c=kh(l,r)||{};return Dn(o,a,f=>{let d=pd(c,i,f);return f===d&&typeof f=="string"&&(d=pd(c,i,`${e}${f==="default"?"":Xe(f)}`,f)),n===!1?d:{[n]:d}})};return s.propTypes={},s.filterProps=[e],s}function oG(t){const e={};return n=>(e[n]===void 0&&(e[n]=t(n)),e[n])}const aG={m:"margin",p:"padding"},lG={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},bw={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},cG=oG(t=>{if(t.length>2)if(bw[t])t=bw[t];else return[t];const[e,n]=t.split(""),r=aG[e],i=lG[n]||"";return Array.isArray(i)?i.map(s=>r+s):[r+i]}),Ov=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],Iv=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...Ov,...Iv];function kc(t,e,n,r){var i;const s=(i=kh(t,e,!1))!=null?i:n;return typeof s=="number"?o=>typeof o=="string"?o:s*o:Array.isArray(s)?o=>typeof o=="string"?o:s[o]:typeof s=="function"?s:()=>{}}function MC(t){return kc(t,"spacing",8)}function Nc(t,e){if(typeof e=="string"||e==null)return e;const n=Math.abs(e),r=t(n);return e>=0?r:typeof r=="number"?-r:`-${r}`}function uG(t,e){return n=>t.reduce((r,i)=>(r[i]=Nc(e,n),r),{})}function fG(t,e,n,r){if(e.indexOf(n)===-1)return null;const i=cG(n),s=uG(i,r),o=t[n];return Dn(t,o,s)}function kC(t,e){const n=MC(t.theme);return Object.keys(t).map(r=>fG(t,e,r,n)).reduce(wl,{})}function Ze(t){return kC(t,Ov)}Ze.propTypes={};Ze.filterProps=Ov;function Qe(t){return kC(t,Iv)}Qe.propTypes={};Qe.filterProps=Iv;function dG(t=8){if(t.mui)return t;const e=MC({spacing:t}),n=(...r)=>(r.length===0?[1]:r).map(s=>{const o=e(s);return typeof o=="number"?`${o}px`:o}).join(" ");return n.mui=!0,n}function Nh(...t){const e=t.reduce((r,i)=>(i.filterProps.forEach(s=>{r[s]=i}),r),{}),n=r=>Object.keys(r).reduce((i,s)=>e[s]?wl(i,e[s](r)):i,{});return n.propTypes={},n.filterProps=t.reduce((r,i)=>r.concat(i.filterProps),[]),n}function dr(t){return typeof t!="number"?t:`${t}px solid`}const hG=Ee({prop:"border",themeKey:"borders",transform:dr}),pG=Ee({prop:"borderTop",themeKey:"borders",transform:dr}),gG=Ee({prop:"borderRight",themeKey:"borders",transform:dr}),mG=Ee({prop:"borderBottom",themeKey:"borders",transform:dr}),yG=Ee({prop:"borderLeft",themeKey:"borders",transform:dr}),vG=Ee({prop:"borderColor",themeKey:"palette"}),_G=Ee({prop:"borderTopColor",themeKey:"palette"}),bG=Ee({prop:"borderRightColor",themeKey:"palette"}),EG=Ee({prop:"borderBottomColor",themeKey:"palette"}),wG=Ee({prop:"borderLeftColor",themeKey:"palette"}),Fh=t=>{if(t.borderRadius!==void 0&&t.borderRadius!==null){const e=kc(t.theme,"shape.borderRadius",4),n=r=>({borderRadius:Nc(e,r)});return Dn(t,t.borderRadius,n)}return null};Fh.propTypes={};Fh.filterProps=["borderRadius"];Nh(hG,pG,gG,mG,yG,vG,_G,bG,EG,wG,Fh);const Dh=t=>{if(t.gap!==void 0&&t.gap!==null){const e=kc(t.theme,"spacing",8),n=r=>({gap:Nc(e,r)});return Dn(t,t.gap,n)}return null};Dh.propTypes={};Dh.filterProps=["gap"];const Bh=t=>{if(t.columnGap!==void 0&&t.columnGap!==null){const e=kc(t.theme,"spacing",8),n=r=>({columnGap:Nc(e,r)});return Dn(t,t.columnGap,n)}return null};Bh.propTypes={};Bh.filterProps=["columnGap"];const zh=t=>{if(t.rowGap!==void 0&&t.rowGap!==null){const e=kc(t.theme,"spacing",8),n=r=>({rowGap:Nc(e,r)});return Dn(t,t.rowGap,n)}return null};zh.propTypes={};zh.filterProps=["rowGap"];const xG=Ee({prop:"gridColumn"}),TG=Ee({prop:"gridRow"}),SG=Ee({prop:"gridAutoFlow"}),PG=Ee({prop:"gridAutoColumns"}),AG=Ee({prop:"gridAutoRows"}),CG=Ee({prop:"gridTemplateColumns"}),LG=Ee({prop:"gridTemplateRows"}),RG=Ee({prop:"gridTemplateAreas"}),OG=Ee({prop:"gridArea"});Nh(Dh,Bh,zh,xG,TG,SG,PG,AG,CG,LG,RG,OG);function Do(t,e){return e==="grey"?e:t}const IG=Ee({prop:"color",themeKey:"palette",transform:Do}),MG=Ee({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:Do}),kG=Ee({prop:"backgroundColor",themeKey:"palette",transform:Do});Nh(IG,MG,kG);function un(t){return t<=1&&t!==0?`${t*100}%`:t}const NG=Ee({prop:"width",transform:un}),Mv=t=>{if(t.maxWidth!==void 0&&t.maxWidth!==null){const e=n=>{var r,i;const s=((r=t.theme)==null||(r=r.breakpoints)==null||(r=r.values)==null?void 0:r[n])||Rv[n];return s?((i=t.theme)==null||(i=i.breakpoints)==null?void 0:i.unit)!=="px"?{maxWidth:`${s}${t.theme.breakpoints.unit}`}:{maxWidth:s}:{maxWidth:un(n)}};return Dn(t,t.maxWidth,e)}return null};Mv.filterProps=["maxWidth"];const FG=Ee({prop:"minWidth",transform:un}),DG=Ee({prop:"height",transform:un}),BG=Ee({prop:"maxHeight",transform:un}),zG=Ee({prop:"minHeight",transform:un});Ee({prop:"size",cssProperty:"width",transform:un});Ee({prop:"size",cssProperty:"height",transform:un});const UG=Ee({prop:"boxSizing"});Nh(NG,Mv,FG,DG,BG,zG,UG);const jG={border:{themeKey:"borders",transform:dr},borderTop:{themeKey:"borders",transform:dr},borderRight:{themeKey:"borders",transform:dr},borderBottom:{themeKey:"borders",transform:dr},borderLeft:{themeKey:"borders",transform:dr},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:Fh},color:{themeKey:"palette",transform:Do},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:Do},backgroundColor:{themeKey:"palette",transform:Do},p:{style:Qe},pt:{style:Qe},pr:{style:Qe},pb:{style:Qe},pl:{style:Qe},px:{style:Qe},py:{style:Qe},padding:{style:Qe},paddingTop:{style:Qe},paddingRight:{style:Qe},paddingBottom:{style:Qe},paddingLeft:{style:Qe},paddingX:{style:Qe},paddingY:{style:Qe},paddingInline:{style:Qe},paddingInlineStart:{style:Qe},paddingInlineEnd:{style:Qe},paddingBlock:{style:Qe},paddingBlockStart:{style:Qe},paddingBlockEnd:{style:Qe},m:{style:Ze},mt:{style:Ze},mr:{style:Ze},mb:{style:Ze},ml:{style:Ze},mx:{style:Ze},my:{style:Ze},margin:{style:Ze},marginTop:{style:Ze},marginRight:{style:Ze},marginBottom:{style:Ze},marginLeft:{style:Ze},marginX:{style:Ze},marginY:{style:Ze},marginInline:{style:Ze},marginInlineStart:{style:Ze},marginInlineEnd:{style:Ze},marginBlock:{style:Ze},marginBlockStart:{style:Ze},marginBlockEnd:{style:Ze},displayPrint:{cssProperty:!1,transform:t=>({"@media print":{display:t}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:Dh},rowGap:{style:zh},columnGap:{style:Bh},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:un},maxWidth:{style:Mv},minWidth:{transform:un},height:{transform:un},maxHeight:{transform:un},minHeight:{transform:un},boxSizing:{},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}},Uh=jG;function VG(...t){const e=t.reduce((r,i)=>r.concat(Object.keys(i)),[]),n=new Set(e);return t.every(r=>n.size===Object.keys(r).length)}function $G(t,e){return typeof t=="function"?t(e):t}function GG(){function t(n,r,i,s){const o={[n]:r,theme:i},a=s[n];if(!a)return{[n]:r};const{cssProperty:l=n,themeKey:c,transform:u,style:f}=a;if(r==null)return null;if(c==="typography"&&r==="inherit")return{[n]:r};const d=kh(i,c)||{};return f?f(o):Dn(o,r,p=>{let g=pd(d,u,p);return p===g&&typeof p=="string"&&(g=pd(d,u,`${n}${p==="default"?"":Xe(p)}`,p)),l===!1?g:{[l]:g}})}function e(n){var r;const{sx:i,theme:s={}}=n||{};if(!i)return null;const o=(r=s.unstable_sxConfig)!=null?r:Uh;function a(l){let c=l;if(typeof l=="function")c=l(s);else if(typeof l!="object")return l;if(!c)return null;const u=rG(s.breakpoints),f=Object.keys(u);let d=u;return Object.keys(c).forEach(h=>{const p=$G(c[h],s);if(p!=null)if(typeof p=="object")if(o[h])d=wl(d,t(h,p,s,o));else{const g=Dn({theme:s},p,E=>({[h]:E}));VG(g,p)?d[h]=e({sx:p,theme:s}):d=wl(d,g)}else d=wl(d,t(h,p,s,o))}),iG(f,d)}return Array.isArray(i)?i.map(a):a(i)}return e}const NC=GG();NC.filterProps=["sx"];const jh=NC,WG=["breakpoints","palette","spacing","shape"];function kv(t={},...e){const{breakpoints:n={},palette:r={},spacing:i,shape:s={}}=t,o=Ge(t,WG),a=eG(n),l=dG(i);let c=Qn({breakpoints:a,direction:"ltr",components:{},palette:F({mode:"light"},r),spacing:l,shape:F({},nG,s)},o);return c=e.reduce((u,f)=>Qn(u,f),c),c.unstable_sxConfig=F({},Uh,o==null?void 0:o.unstable_sxConfig),c.unstable_sx=function(f){return jh({sx:f,theme:this})},c}function HG(t){return Object.keys(t).length===0}function FC(t=null){const e=A.useContext(OC);return!e||HG(e)?t:e}const XG=kv();function Nv(t=XG){return FC(t)}const YG=["sx"],KG=t=>{var e,n;const r={systemProps:{},otherProps:{}},i=(e=t==null||(n=t.theme)==null?void 0:n.unstable_sxConfig)!=null?e:Uh;return Object.keys(t).forEach(s=>{i[s]?r.systemProps[s]=t[s]:r.otherProps[s]=t[s]}),r};function Fv(t){const{sx:e}=t,n=Ge(t,YG),{systemProps:r,otherProps:i}=KG(n);let s;return Array.isArray(e)?s=[r,...e]:typeof e=="function"?s=(...o)=>{const a=e(...o);return Nr(a)?F({},r,a):r}:s=F({},r,e),F({},i,{sx:s})}function DC(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t))for(e=0;e<t.length;e++)t[e]&&(n=DC(t[e]))&&(r&&(r+=" "),r+=n);else for(e in t)t[e]&&(r&&(r+=" "),r+=e);return r}function et(){for(var t,e,n=0,r="";n<arguments.length;)(t=arguments[n++])&&(e=DC(t))&&(r&&(r+=" "),r+=e);return r}const qG=["className","component"];function ZG(t={}){const{themeId:e,defaultTheme:n,defaultClassName:r="MuiBox-root",generateClassName:i}=t,s=IC("div",{shouldForwardProp:a=>a!=="theme"&&a!=="sx"&&a!=="as"})(jh);return A.forwardRef(function(l,c){const u=Nv(n),f=Fv(l),{className:d,component:h="div"}=f,p=Ge(f,qG);return N.jsx(s,F({as:h,ref:c,className:et(d,i?i(r):r),theme:e&&u[e]||u},p))})}const QG=["variant"];function Ew(t){return t.length===0}function BC(t){const{variant:e}=t,n=Ge(t,QG);let r=e||"";return Object.keys(n).sort().forEach(i=>{i==="color"?r+=Ew(r)?t[i]:Xe(t[i]):r+=`${Ew(r)?i:Xe(i)}${Xe(t[i].toString())}`}),r}const JG=["name","slot","skipVariantsResolver","skipSx","overridesResolver"];function eW(t){return Object.keys(t).length===0}function tW(t){return typeof t=="string"&&t.charCodeAt(0)>96}const nW=(t,e)=>e.components&&e.components[t]&&e.components[t].styleOverrides?e.components[t].styleOverrides:null,gd=t=>{const e={};return t&&t.forEach(n=>{const r=BC(n.props);e[r]=n.style}),e},rW=(t,e)=>{let n=[];return e&&e.components&&e.components[t]&&e.components[t].variants&&(n=e.components[t].variants),gd(n)},md=(t,e,n)=>{const{ownerState:r={}}=t,i=[];return n&&n.forEach(s=>{let o=!0;Object.keys(s.props).forEach(a=>{r[a]!==s.props[a]&&t[a]!==s.props[a]&&(o=!1)}),o&&i.push(e[BC(s.props)])}),i},iW=(t,e,n,r)=>{var i;const s=n==null||(i=n.components)==null||(i=i[r])==null?void 0:i.variants;return md(t,e,s)};function _f(t){return t!=="ownerState"&&t!=="theme"&&t!=="sx"&&t!=="as"}const sW=kv(),oW=t=>t&&t.charAt(0).toLowerCase()+t.slice(1);function bf({defaultTheme:t,theme:e,themeId:n}){return eW(e)?t:e[n]||e}function aW(t){return t?(e,n)=>n[t]:null}const ww=({styledArg:t,props:e,defaultTheme:n,themeId:r})=>{const i=t(F({},e,{theme:bf(F({},e,{defaultTheme:n,themeId:r}))}));let s;if(i&&i.variants&&(s=i.variants,delete i.variants),s){const o=md(e,gd(s),s);return[i,...o]}return i};function lW(t={}){const{themeId:e,defaultTheme:n=sW,rootShouldForwardProp:r=_f,slotShouldForwardProp:i=_f}=t,s=o=>jh(F({},o,{theme:bf(F({},o,{defaultTheme:n,themeId:e}))}));return s.__mui_systemSx=!0,(o,a={})=>{Z$(o,b=>b.filter(T=>!(T!=null&&T.__mui_systemSx)));const{name:l,slot:c,skipVariantsResolver:u,skipSx:f,overridesResolver:d=aW(oW(c))}=a,h=Ge(a,JG),p=u!==void 0?u:c&&c!=="Root"&&c!=="root"||!1,g=f||!1;let E,m=_f;c==="Root"||c==="root"?m=r:c?m=i:tW(o)&&(m=void 0);const y=IC(o,F({shouldForwardProp:m,label:E},h)),v=(b,...T)=>{const S=T?T.map(L=>{if(typeof L=="function"&&L.__emotion_real!==L)return M=>ww({styledArg:L,props:M,defaultTheme:n,themeId:e});if(Nr(L)){let M=L,j;return L&&L.variants&&(j=L.variants,delete M.variants,M=U=>{let V=L;return md(U,gd(j),j).forEach(q=>{V=Qn(V,q)}),V}),M}return L}):[];let P=b;if(Nr(b)){let L;b&&b.variants&&(L=b.variants,delete P.variants,P=M=>{let j=b;return md(M,gd(L),L).forEach(V=>{j=Qn(j,V)}),j})}else typeof b=="function"&&b.__emotion_real!==b&&(P=L=>ww({styledArg:b,props:L,defaultTheme:n,themeId:e}));l&&d&&S.push(L=>{const M=bf(F({},L,{defaultTheme:n,themeId:e})),j=nW(l,M);if(j){const U={};return Object.entries(j).forEach(([V,X])=>{U[V]=typeof X=="function"?X(F({},L,{theme:M})):X}),d(L,U)}return null}),l&&!p&&S.push(L=>{const M=bf(F({},L,{defaultTheme:n,themeId:e}));return iW(L,rW(l,M),M,l)}),g||S.push(s);const R=S.length-T.length;if(Array.isArray(b)&&R>0){const L=new Array(R).fill("");P=[...b,...L],P.raw=[...b.raw,...L]}const O=y(P,...S);return o.muiName&&(O.muiName=o.muiName),O};return y.withConfig&&(v.withConfig=y.withConfig),v}}function cW(t){const{theme:e,name:n,props:r}=t;return!e||!e.components||!e.components[n]||!e.components[n].defaultProps?r:Sv(e.components[n].defaultProps,r)}function uW({props:t,name:e,defaultTheme:n,themeId:r}){let i=Nv(n);return r&&(i=i[r]||i),cW({theme:i,name:e,props:t})}function Dv(t,e=0,n=1){return Math.min(Math.max(e,t),n)}function fW(t){t=t.slice(1);const e=new RegExp(`.{1,${t.length>=6?2:1}}`,"g");let n=t.match(e);return n&&n[0].length===1&&(n=n.map(r=>r+r)),n?`rgb${n.length===4?"a":""}(${n.map((r,i)=>i<3?parseInt(r,16):Math.round(parseInt(r,16)/255*1e3)/1e3).join(", ")})`:""}function Ls(t){if(t.type)return t;if(t.charAt(0)==="#")return Ls(fW(t));const e=t.indexOf("("),n=t.substring(0,e);if(["rgb","rgba","hsl","hsla","color"].indexOf(n)===-1)throw new Error(aa(9,t));let r=t.substring(e+1,t.length-1),i;if(n==="color"){if(r=r.split(" "),i=r.shift(),r.length===4&&r[3].charAt(0)==="/"&&(r[3]=r[3].slice(1)),["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(i)===-1)throw new Error(aa(10,i))}else r=r.split(",");return r=r.map(s=>parseFloat(s)),{type:n,values:r,colorSpace:i}}function Vh(t){const{type:e,colorSpace:n}=t;let{values:r}=t;return e.indexOf("rgb")!==-1?r=r.map((i,s)=>s<3?parseInt(i,10):i):e.indexOf("hsl")!==-1&&(r[1]=`${r[1]}%`,r[2]=`${r[2]}%`),e.indexOf("color")!==-1?r=`${n} ${r.join(" ")}`:r=`${r.join(", ")}`,`${e}(${r})`}function dW(t){t=Ls(t);const{values:e}=t,n=e[0],r=e[1]/100,i=e[2]/100,s=r*Math.min(i,1-i),o=(c,u=(c+n/30)%12)=>i-s*Math.max(Math.min(u-3,9-u,1),-1);let a="rgb";const l=[Math.round(o(0)*255),Math.round(o(8)*255),Math.round(o(4)*255)];return t.type==="hsla"&&(a+="a",l.push(e[3])),Vh({type:a,values:l})}function xw(t){t=Ls(t);let e=t.type==="hsl"||t.type==="hsla"?Ls(dW(t)).values:t.values;return e=e.map(n=>(t.type!=="color"&&(n/=255),n<=.03928?n/12.92:((n+.055)/1.055)**2.4)),Number((.2126*e[0]+.7152*e[1]+.0722*e[2]).toFixed(3))}function hW(t,e){const n=xw(t),r=xw(e);return(Math.max(n,r)+.05)/(Math.min(n,r)+.05)}function Po(t,e){return t=Ls(t),e=Dv(e),(t.type==="rgb"||t.type==="hsl")&&(t.type+="a"),t.type==="color"?t.values[3]=`/${e}`:t.values[3]=e,Vh(t)}function pW(t,e){if(t=Ls(t),e=Dv(e),t.type.indexOf("hsl")!==-1)t.values[2]*=1-e;else if(t.type.indexOf("rgb")!==-1||t.type.indexOf("color")!==-1)for(let n=0;n<3;n+=1)t.values[n]*=1-e;return Vh(t)}function gW(t,e){if(t=Ls(t),e=Dv(e),t.type.indexOf("hsl")!==-1)t.values[2]+=(100-t.values[2])*e;else if(t.type.indexOf("rgb")!==-1)for(let n=0;n<3;n+=1)t.values[n]+=(255-t.values[n])*e;else if(t.type.indexOf("color")!==-1)for(let n=0;n<3;n+=1)t.values[n]+=(1-t.values[n])*e;return Vh(t)}function mW(t,e){return F({toolbar:{minHeight:56,[t.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[t.up("sm")]:{minHeight:64}}},e)}const yW=["mode","contrastThreshold","tonalOffset"],Tw={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:tc.white,default:tc.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},xg={text:{primary:tc.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:tc.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function Sw(t,e,n,r){const i=r.light||r,s=r.dark||r*1.5;t[e]||(t.hasOwnProperty(n)?t[e]=t[n]:e==="light"?t.light=gW(t.main,i):e==="dark"&&(t.dark=pW(t.main,s)))}function vW(t="light"){return t==="dark"?{main:ro[200],light:ro[50],dark:ro[400]}:{main:ro[700],light:ro[400],dark:ro[800]}}function _W(t="light"){return t==="dark"?{main:no[200],light:no[50],dark:no[400]}:{main:no[500],light:no[300],dark:no[700]}}function bW(t="light"){return t==="dark"?{main:to[500],light:to[300],dark:to[700]}:{main:to[700],light:to[400],dark:to[800]}}function EW(t="light"){return t==="dark"?{main:io[400],light:io[300],dark:io[700]}:{main:io[700],light:io[500],dark:io[900]}}function wW(t="light"){return t==="dark"?{main:so[400],light:so[300],dark:so[700]}:{main:so[800],light:so[500],dark:so[900]}}function xW(t="light"){return t==="dark"?{main:Xa[400],light:Xa[300],dark:Xa[700]}:{main:"#ed6c02",light:Xa[500],dark:Xa[900]}}function TW(t){const{mode:e="light",contrastThreshold:n=3,tonalOffset:r=.2}=t,i=Ge(t,yW),s=t.primary||vW(e),o=t.secondary||_W(e),a=t.error||bW(e),l=t.info||EW(e),c=t.success||wW(e),u=t.warning||xW(e);function f(g){return hW(g,xg.text.primary)>=n?xg.text.primary:Tw.text.primary}const d=({color:g,name:E,mainShade:m=500,lightShade:y=300,darkShade:v=700})=>{if(g=F({},g),!g.main&&g[m]&&(g.main=g[m]),!g.hasOwnProperty("main"))throw new Error(aa(11,E?` (${E})`:"",m));if(typeof g.main!="string")throw new Error(aa(12,E?` (${E})`:"",JSON.stringify(g.main)));return Sw(g,"light",y,r),Sw(g,"dark",v,r),g.contrastText||(g.contrastText=f(g.main)),g},h={dark:xg,light:Tw};return Qn(F({common:F({},tc),mode:e,primary:d({color:s,name:"primary"}),secondary:d({color:o,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:d({color:a,name:"error"}),warning:d({color:u,name:"warning"}),info:d({color:l,name:"info"}),success:d({color:c,name:"success"}),grey:V8,contrastThreshold:n,getContrastText:f,augmentColor:d,tonalOffset:r},h[e]),i)}const SW=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"];function PW(t){return Math.round(t*1e5)/1e5}const Pw={textTransform:"uppercase"},Aw='"Roboto", "Helvetica", "Arial", sans-serif';function AW(t,e){const n=typeof e=="function"?e(t):e,{fontFamily:r=Aw,fontSize:i=14,fontWeightLight:s=300,fontWeightRegular:o=400,fontWeightMedium:a=500,fontWeightBold:l=700,htmlFontSize:c=16,allVariants:u,pxToRem:f}=n,d=Ge(n,SW),h=i/14,p=f||(m=>`${m/c*h}rem`),g=(m,y,v,b,T)=>F({fontFamily:r,fontWeight:m,fontSize:p(y),lineHeight:v},r===Aw?{letterSpacing:`${PW(b/y)}em`}:{},T,u),E={h1:g(s,96,1.167,-1.5),h2:g(s,60,1.2,-.5),h3:g(o,48,1.167,0),h4:g(o,34,1.235,.25),h5:g(o,24,1.334,0),h6:g(a,20,1.6,.15),subtitle1:g(o,16,1.75,.15),subtitle2:g(a,14,1.57,.1),body1:g(o,16,1.5,.15),body2:g(o,14,1.43,.15),button:g(a,14,1.75,.4,Pw),caption:g(o,12,1.66,.4),overline:g(o,12,2.66,1,Pw),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return Qn(F({htmlFontSize:c,pxToRem:p,fontFamily:r,fontSize:i,fontWeightLight:s,fontWeightRegular:o,fontWeightMedium:a,fontWeightBold:l},E),d,{clone:!1})}const CW=.2,LW=.14,RW=.12;function je(...t){return[`${t[0]}px ${t[1]}px ${t[2]}px ${t[3]}px rgba(0,0,0,${CW})`,`${t[4]}px ${t[5]}px ${t[6]}px ${t[7]}px rgba(0,0,0,${LW})`,`${t[8]}px ${t[9]}px ${t[10]}px ${t[11]}px rgba(0,0,0,${RW})`].join(",")}const OW=["none",je(0,2,1,-1,0,1,1,0,0,1,3,0),je(0,3,1,-2,0,2,2,0,0,1,5,0),je(0,3,3,-2,0,3,4,0,0,1,8,0),je(0,2,4,-1,0,4,5,0,0,1,10,0),je(0,3,5,-1,0,5,8,0,0,1,14,0),je(0,3,5,-1,0,6,10,0,0,1,18,0),je(0,4,5,-2,0,7,10,1,0,2,16,1),je(0,5,5,-3,0,8,10,1,0,3,14,2),je(0,5,6,-3,0,9,12,1,0,3,16,2),je(0,6,6,-3,0,10,14,1,0,4,18,3),je(0,6,7,-4,0,11,15,1,0,4,20,3),je(0,7,8,-4,0,12,17,2,0,5,22,4),je(0,7,8,-4,0,13,19,2,0,5,24,4),je(0,7,9,-4,0,14,21,2,0,5,26,4),je(0,8,9,-5,0,15,22,2,0,6,28,5),je(0,8,10,-5,0,16,24,2,0,6,30,5),je(0,8,11,-5,0,17,26,2,0,6,32,5),je(0,9,11,-5,0,18,28,2,0,7,34,6),je(0,9,12,-6,0,19,29,2,0,7,36,6),je(0,10,13,-6,0,20,31,3,0,8,38,7),je(0,10,13,-6,0,21,33,3,0,8,40,7),je(0,10,14,-6,0,22,35,3,0,8,42,7),je(0,11,14,-7,0,23,36,3,0,9,44,8),je(0,11,15,-7,0,24,38,3,0,9,46,8)],IW=OW,MW=["duration","easing","delay"],kW={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},NW={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function Cw(t){return`${Math.round(t)}ms`}function FW(t){if(!t)return 0;const e=t/36;return Math.round((4+15*e**.25+e/5)*10)}function DW(t){const e=F({},kW,t.easing),n=F({},NW,t.duration);return F({getAutoHeightDuration:FW,create:(i=["all"],s={})=>{const{duration:o=n.standard,easing:a=e.easeInOut,delay:l=0}=s;return Ge(s,MW),(Array.isArray(i)?i:[i]).map(c=>`${c} ${typeof o=="string"?o:Cw(o)} ${a} ${typeof l=="string"?l:Cw(l)}`).join(",")}},t,{easing:e,duration:n})}const BW={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500},zW=BW,UW=["breakpoints","mixins","spacing","palette","transitions","typography","shape"];function zC(t={},...e){const{mixins:n={},palette:r={},transitions:i={},typography:s={}}=t,o=Ge(t,UW);if(t.vars)throw new Error(aa(18));const a=TW(r),l=kv(t);let c=Qn(l,{mixins:mW(l.breakpoints,n),palette:a,shadows:IW.slice(),typography:AW(a,s),transitions:DW(i),zIndex:F({},zW)});return c=Qn(c,o),c=e.reduce((u,f)=>Qn(u,f),c),c.unstable_sxConfig=F({},Uh,o==null?void 0:o.unstable_sxConfig),c.unstable_sx=function(f){return jh({sx:f,theme:this})},c}const jW=zC(),Bv=jW;function zv(){const t=Nv(Bv);return t[Lh]||t}function Wi({props:t,name:e}){return uW({props:t,name:e,defaultTheme:Bv,themeId:Lh})}const UC=t=>_f(t)&&t!=="classes",VW=lW({themeId:Lh,defaultTheme:Bv,rootShouldForwardProp:UC}),Jt=VW;function $W(t){return $i("MuiSvgIcon",t)}Gi("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const GW=["children","className","color","component","fontSize","htmlColor","inheritViewBox","titleAccess","viewBox"],WW=t=>{const{color:e,fontSize:n,classes:r}=t,i={root:["root",e!=="inherit"&&`color${Xe(e)}`,`fontSize${Xe(n)}`]};return Bs(i,$W,r)},HW=Jt("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.color!=="inherit"&&e[`color${Xe(n.color)}`],e[`fontSize${Xe(n.fontSize)}`]]}})(({theme:t,ownerState:e})=>{var n,r,i,s,o,a,l,c,u,f,d,h,p;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:e.hasSvgAsChild?void 0:"currentColor",flexShrink:0,transition:(n=t.transitions)==null||(r=n.create)==null?void 0:r.call(n,"fill",{duration:(i=t.transitions)==null||(i=i.duration)==null?void 0:i.shorter}),fontSize:{inherit:"inherit",small:((s=t.typography)==null||(o=s.pxToRem)==null?void 0:o.call(s,20))||"1.25rem",medium:((a=t.typography)==null||(l=a.pxToRem)==null?void 0:l.call(a,24))||"1.5rem",large:((c=t.typography)==null||(u=c.pxToRem)==null?void 0:u.call(c,35))||"2.1875rem"}[e.fontSize],color:(f=(d=(t.vars||t).palette)==null||(d=d[e.color])==null?void 0:d.main)!=null?f:{action:(h=(t.vars||t).palette)==null||(h=h.action)==null?void 0:h.active,disabled:(p=(t.vars||t).palette)==null||(p=p.action)==null?void 0:p.disabled,inherit:void 0}[e.color]}}),jC=A.forwardRef(function(e,n){const r=Wi({props:e,name:"MuiSvgIcon"}),{children:i,className:s,color:o="inherit",component:a="svg",fontSize:l="medium",htmlColor:c,inheritViewBox:u=!1,titleAccess:f,viewBox:d="0 0 24 24"}=r,h=Ge(r,GW),p=A.isValidElement(i)&&i.type==="svg",g=F({},r,{color:o,component:a,fontSize:l,instanceFontSize:e.fontSize,inheritViewBox:u,viewBox:d,hasSvgAsChild:p}),E={};u||(E.viewBox=d);const m=WW(g);return N.jsxs(HW,F({as:a,className:et(m.root,s),focusable:"false",color:c,"aria-hidden":f?void 0:!0,role:f?"img":void 0,ref:n},E,h,p&&i.props,{ownerState:g,children:[p?i.props.children:i,f?N.jsx("title",{children:f}):null]}))});jC.muiName="SvgIcon";const Lw=jC;function Fc(t,e){function n(r,i){return N.jsx(Lw,F({"data-testid":`${e}Icon`,ref:i},r,{children:t}))}return n.muiName=Lw.muiName,A.memo(A.forwardRef(n))}function E0(t,e){return E0=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},E0(t,e)}function VC(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,E0(t,e)}const Rw={disabled:!1},yd=Wt.createContext(null);var XW=function(e){return e.scrollTop},ol="unmounted",os="exited",as="entering",co="entered",w0="exiting",ti=function(t){VC(e,t);function e(r,i){var s;s=t.call(this,r,i)||this;var o=i,a=o&&!o.isMounting?r.enter:r.appear,l;return s.appearStatus=null,r.in?a?(l=os,s.appearStatus=as):l=co:r.unmountOnExit||r.mountOnEnter?l=ol:l=os,s.state={status:l},s.nextCallback=null,s}e.getDerivedStateFromProps=function(i,s){var o=i.in;return o&&s.status===ol?{status:os}:null};var n=e.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(i){var s=null;if(i!==this.props){var o=this.state.status;this.props.in?o!==as&&o!==co&&(s=as):(o===as||o===co)&&(s=w0)}this.updateStatus(!1,s)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var i=this.props.timeout,s,o,a;return s=o=a=i,i!=null&&typeof i!="number"&&(s=i.exit,o=i.enter,a=i.appear!==void 0?i.appear:o),{exit:s,enter:o,appear:a}},n.updateStatus=function(i,s){if(i===void 0&&(i=!1),s!==null)if(this.cancelNextCallback(),s===as){if(this.props.unmountOnExit||this.props.mountOnEnter){var o=this.props.nodeRef?this.props.nodeRef.current:hu.findDOMNode(this);o&&XW(o)}this.performEnter(i)}else this.performExit();else this.props.unmountOnExit&&this.state.status===os&&this.setState({status:ol})},n.performEnter=function(i){var s=this,o=this.props.enter,a=this.context?this.context.isMounting:i,l=this.props.nodeRef?[a]:[hu.findDOMNode(this),a],c=l[0],u=l[1],f=this.getTimeouts(),d=a?f.appear:f.enter;if(!i&&!o||Rw.disabled){this.safeSetState({status:co},function(){s.props.onEntered(c)});return}this.props.onEnter(c,u),this.safeSetState({status:as},function(){s.props.onEntering(c,u),s.onTransitionEnd(d,function(){s.safeSetState({status:co},function(){s.props.onEntered(c,u)})})})},n.performExit=function(){var i=this,s=this.props.exit,o=this.getTimeouts(),a=this.props.nodeRef?void 0:hu.findDOMNode(this);if(!s||Rw.disabled){this.safeSetState({status:os},function(){i.props.onExited(a)});return}this.props.onExit(a),this.safeSetState({status:w0},function(){i.props.onExiting(a),i.onTransitionEnd(o.exit,function(){i.safeSetState({status:os},function(){i.props.onExited(a)})})})},n.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(i,s){s=this.setNextCallback(s),this.setState(i,s)},n.setNextCallback=function(i){var s=this,o=!0;return this.nextCallback=function(a){o&&(o=!1,s.nextCallback=null,i(a))},this.nextCallback.cancel=function(){o=!1},this.nextCallback},n.onTransitionEnd=function(i,s){this.setNextCallback(s);var o=this.props.nodeRef?this.props.nodeRef.current:hu.findDOMNode(this),a=i==null&&!this.props.addEndListener;if(!o||a){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var l=this.props.nodeRef?[this.nextCallback]:[o,this.nextCallback],c=l[0],u=l[1];this.props.addEndListener(c,u)}i!=null&&setTimeout(this.nextCallback,i)},n.render=function(){var i=this.state.status;if(i===ol)return null;var s=this.props,o=s.children;s.in,s.mountOnEnter,s.unmountOnExit,s.appear,s.enter,s.exit,s.timeout,s.addEndListener,s.onEnter,s.onEntering,s.onEntered,s.onExit,s.onExiting,s.onExited,s.nodeRef;var a=Ge(s,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return Wt.createElement(yd.Provider,{value:null},typeof o=="function"?o(i,a):Wt.cloneElement(Wt.Children.only(o),a))},e}(Wt.Component);ti.contextType=yd;ti.propTypes={};function oo(){}ti.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:oo,onEntering:oo,onEntered:oo,onExit:oo,onExiting:oo,onExited:oo};ti.UNMOUNTED=ol;ti.EXITED=os;ti.ENTERING=as;ti.ENTERED=co;ti.EXITING=w0;const YW=ti;function KW(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Uv(t,e){var n=function(s){return e&&A.isValidElement(s)?e(s):s},r=Object.create(null);return t&&A.Children.map(t,function(i){return i}).forEach(function(i){r[i.key]=n(i)}),r}function qW(t,e){t=t||{},e=e||{};function n(u){return u in e?e[u]:t[u]}var r=Object.create(null),i=[];for(var s in t)s in e?i.length&&(r[s]=i,i=[]):i.push(s);var o,a={};for(var l in e){if(r[l])for(o=0;o<r[l].length;o++){var c=r[l][o];a[r[l][o]]=n(c)}a[l]=n(l)}for(o=0;o<i.length;o++)a[i[o]]=n(i[o]);return a}function hs(t,e,n){return n[e]!=null?n[e]:t.props[e]}function ZW(t,e){return Uv(t.children,function(n){return A.cloneElement(n,{onExited:e.bind(null,n),in:!0,appear:hs(n,"appear",t),enter:hs(n,"enter",t),exit:hs(n,"exit",t)})})}function QW(t,e,n){var r=Uv(t.children),i=qW(e,r);return Object.keys(i).forEach(function(s){var o=i[s];if(A.isValidElement(o)){var a=s in e,l=s in r,c=e[s],u=A.isValidElement(c)&&!c.props.in;l&&(!a||u)?i[s]=A.cloneElement(o,{onExited:n.bind(null,o),in:!0,exit:hs(o,"exit",t),enter:hs(o,"enter",t)}):!l&&a&&!u?i[s]=A.cloneElement(o,{in:!1}):l&&a&&A.isValidElement(c)&&(i[s]=A.cloneElement(o,{onExited:n.bind(null,o),in:c.props.in,exit:hs(o,"exit",t),enter:hs(o,"enter",t)}))}}),i}var JW=Object.values||function(t){return Object.keys(t).map(function(e){return t[e]})},e9={component:"div",childFactory:function(e){return e}},jv=function(t){VC(e,t);function e(r,i){var s;s=t.call(this,r,i)||this;var o=s.handleExited.bind(KW(s));return s.state={contextValue:{isMounting:!0},handleExited:o,firstRender:!0},s}var n=e.prototype;return n.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},n.componentWillUnmount=function(){this.mounted=!1},e.getDerivedStateFromProps=function(i,s){var o=s.children,a=s.handleExited,l=s.firstRender;return{children:l?ZW(i,a):QW(i,o,a),firstRender:!1}},n.handleExited=function(i,s){var o=Uv(this.props.children);i.key in o||(i.props.onExited&&i.props.onExited(s),this.mounted&&this.setState(function(a){var l=F({},a.children);return delete l[i.key],{children:l}}))},n.render=function(){var i=this.props,s=i.component,o=i.childFactory,a=Ge(i,["component","childFactory"]),l=this.state.contextValue,c=JW(this.state.children).map(o);return delete a.appear,delete a.enter,delete a.exit,s===null?Wt.createElement(yd.Provider,{value:l},c):Wt.createElement(yd.Provider,{value:l},Wt.createElement(s,a,c))},e}(Wt.Component);jv.propTypes={};jv.defaultProps=e9;const t9=jv,n9=t=>t.scrollTop;function Ow(t,e){var n,r;const{timeout:i,easing:s,style:o={}}=t;return{duration:(n=o.transitionDuration)!=null?n:typeof i=="number"?i:i[e.mode]||0,easing:(r=o.transitionTimingFunction)!=null?r:typeof s=="object"?s[e.mode]:s,delay:o.transitionDelay}}function r9(t){const{className:e,classes:n,pulsate:r=!1,rippleX:i,rippleY:s,rippleSize:o,in:a,onExited:l,timeout:c}=t,[u,f]=A.useState(!1),d=et(e,n.ripple,n.rippleVisible,r&&n.ripplePulsate),h={width:o,height:o,top:-(o/2)+s,left:-(o/2)+i},p=et(n.child,u&&n.childLeaving,r&&n.childPulsate);return!a&&!u&&f(!0),A.useEffect(()=>{if(!a&&l!=null){const g=setTimeout(l,c);return()=>{clearTimeout(g)}}},[l,a,c]),N.jsx("span",{className:d,style:h,children:N.jsx("span",{className:p})})}const i9=Gi("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),An=i9,s9=["center","classes","className"];let $h=t=>t,Iw,Mw,kw,Nw;const x0=550,o9=80,a9=Lv(Iw||(Iw=$h`
  0% {
    transform: scale(0);
    opacity: 0.1;
  }

  100% {
    transform: scale(1);
    opacity: 0.3;
  }
`)),l9=Lv(Mw||(Mw=$h`
  0% {
    opacity: 1;
  }

  100% {
    opacity: 0;
  }
`)),c9=Lv(kw||(kw=$h`
  0% {
    transform: scale(1);
  }

  50% {
    transform: scale(0.92);
  }

  100% {
    transform: scale(1);
  }
`)),u9=Jt("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),f9=Jt(r9,{name:"MuiTouchRipple",slot:"Ripple"})(Nw||(Nw=$h`
  opacity: 0;
  position: absolute;

  &.${0} {
    opacity: 0.3;
    transform: scale(1);
    animation-name: ${0};
    animation-duration: ${0}ms;
    animation-timing-function: ${0};
  }

  &.${0} {
    animation-duration: ${0}ms;
  }

  & .${0} {
    opacity: 1;
    display: block;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background-color: currentColor;
  }

  & .${0} {
    opacity: 0;
    animation-name: ${0};
    animation-duration: ${0}ms;
    animation-timing-function: ${0};
  }

  & .${0} {
    position: absolute;
    /* @noflip */
    left: 0px;
    top: 0;
    animation-name: ${0};
    animation-duration: 2500ms;
    animation-timing-function: ${0};
    animation-iteration-count: infinite;
    animation-delay: 200ms;
  }
`),An.rippleVisible,a9,x0,({theme:t})=>t.transitions.easing.easeInOut,An.ripplePulsate,({theme:t})=>t.transitions.duration.shorter,An.child,An.childLeaving,l9,x0,({theme:t})=>t.transitions.easing.easeInOut,An.childPulsate,c9,({theme:t})=>t.transitions.easing.easeInOut),d9=A.forwardRef(function(e,n){const r=Wi({props:e,name:"MuiTouchRipple"}),{center:i=!1,classes:s={},className:o}=r,a=Ge(r,s9),[l,c]=A.useState([]),u=A.useRef(0),f=A.useRef(null);A.useEffect(()=>{f.current&&(f.current(),f.current=null)},[l]);const d=A.useRef(!1),h=A.useRef(0),p=A.useRef(null),g=A.useRef(null);A.useEffect(()=>()=>{h.current&&clearTimeout(h.current)},[]);const E=A.useCallback(b=>{const{pulsate:T,rippleX:S,rippleY:P,rippleSize:R,cb:O}=b;c(L=>[...L,N.jsx(f9,{classes:{ripple:et(s.ripple,An.ripple),rippleVisible:et(s.rippleVisible,An.rippleVisible),ripplePulsate:et(s.ripplePulsate,An.ripplePulsate),child:et(s.child,An.child),childLeaving:et(s.childLeaving,An.childLeaving),childPulsate:et(s.childPulsate,An.childPulsate)},timeout:x0,pulsate:T,rippleX:S,rippleY:P,rippleSize:R},u.current)]),u.current+=1,f.current=O},[s]),m=A.useCallback((b={},T={},S=()=>{})=>{const{pulsate:P=!1,center:R=i||T.pulsate,fakeElement:O=!1}=T;if((b==null?void 0:b.type)==="mousedown"&&d.current){d.current=!1;return}(b==null?void 0:b.type)==="touchstart"&&(d.current=!0);const L=O?null:g.current,M=L?L.getBoundingClientRect():{width:0,height:0,left:0,top:0};let j,U,V;if(R||b===void 0||b.clientX===0&&b.clientY===0||!b.clientX&&!b.touches)j=Math.round(M.width/2),U=Math.round(M.height/2);else{const{clientX:X,clientY:q}=b.touches&&b.touches.length>0?b.touches[0]:b;j=Math.round(X-M.left),U=Math.round(q-M.top)}if(R)V=Math.sqrt((2*M.width**2+M.height**2)/3),V%2===0&&(V+=1);else{const X=Math.max(Math.abs((L?L.clientWidth:0)-j),j)*2+2,q=Math.max(Math.abs((L?L.clientHeight:0)-U),U)*2+2;V=Math.sqrt(X**2+q**2)}b!=null&&b.touches?p.current===null&&(p.current=()=>{E({pulsate:P,rippleX:j,rippleY:U,rippleSize:V,cb:S})},h.current=setTimeout(()=>{p.current&&(p.current(),p.current=null)},o9)):E({pulsate:P,rippleX:j,rippleY:U,rippleSize:V,cb:S})},[i,E]),y=A.useCallback(()=>{m({},{pulsate:!0})},[m]),v=A.useCallback((b,T)=>{if(clearTimeout(h.current),(b==null?void 0:b.type)==="touchend"&&p.current){p.current(),p.current=null,h.current=setTimeout(()=>{v(b,T)});return}p.current=null,c(S=>S.length>0?S.slice(1):S),f.current=T},[]);return A.useImperativeHandle(n,()=>({pulsate:y,start:m,stop:v}),[y,m,v]),N.jsx(u9,F({className:et(An.root,s.root,o),ref:g},a,{children:N.jsx(t9,{component:null,exit:!0,children:l})}))}),h9=d9;function p9(t){return $i("MuiButtonBase",t)}const g9=Gi("MuiButtonBase",["root","disabled","focusVisible"]),m9=g9,y9=["action","centerRipple","children","className","component","disabled","disableRipple","disableTouchRipple","focusRipple","focusVisibleClassName","LinkComponent","onBlur","onClick","onContextMenu","onDragLeave","onFocus","onFocusVisible","onKeyDown","onKeyUp","onMouseDown","onMouseLeave","onMouseUp","onTouchEnd","onTouchMove","onTouchStart","tabIndex","TouchRippleProps","touchRippleRef","type"],v9=t=>{const{disabled:e,focusVisible:n,focusVisibleClassName:r,classes:i}=t,o=Bs({root:["root",e&&"disabled",n&&"focusVisible"]},p9,i);return n&&r&&(o.root+=` ${r}`),o},_9=Jt("button",{name:"MuiButtonBase",slot:"Root",overridesResolver:(t,e)=>e.root})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},[`&.${m9.disabled}`]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}}),b9=A.forwardRef(function(e,n){const r=Wi({props:e,name:"MuiButtonBase"}),{action:i,centerRipple:s=!1,children:o,className:a,component:l="button",disabled:c=!1,disableRipple:u=!1,disableTouchRipple:f=!1,focusRipple:d=!1,LinkComponent:h="a",onBlur:p,onClick:g,onContextMenu:E,onDragLeave:m,onFocus:y,onFocusVisible:v,onKeyDown:b,onKeyUp:T,onMouseDown:S,onMouseLeave:P,onMouseUp:R,onTouchEnd:O,onTouchMove:L,onTouchStart:M,tabIndex:j=0,TouchRippleProps:U,touchRippleRef:V,type:X}=r,q=Ge(r,y9),J=A.useRef(null),D=A.useRef(null),G=Bi(D,V),{isFocusVisibleRef:Y,onFocus:re,onBlur:ee,ref:tt}=yC(),[he,Re]=A.useState(!1);c&&he&&Re(!1),A.useImperativeHandle(i,()=>({focusVisible:()=>{Re(!0),J.current.focus()}}),[]);const[ke,ue]=A.useState(!1);A.useEffect(()=>{ue(!0)},[]);const Le=ke&&!u&&!c;A.useEffect(()=>{he&&d&&!u&&ke&&D.current.pulsate()},[u,d,he,ke]);function Q(Z,Mt,er=f){return sl(xn=>(Mt&&Mt(xn),!er&&D.current&&D.current[Z](xn),!0))}const we=Q("start",S),it=Q("stop",E),se=Q("stop",m),ie=Q("stop",R),xe=Q("stop",Z=>{he&&Z.preventDefault(),P&&P(Z)}),te=Q("start",M),ve=Q("stop",O),nt=Q("stop",L),_e=Q("stop",Z=>{ee(Z),Y.current===!1&&Re(!1),p&&p(Z)},!1),Ne=sl(Z=>{J.current||(J.current=Z.currentTarget),re(Z),Y.current===!0&&(Re(!0),v&&v(Z)),y&&y(Z)}),be=()=>{const Z=J.current;return l&&l!=="button"&&!(Z.tagName==="A"&&Z.href)},Oe=A.useRef(!1),Vt=sl(Z=>{d&&!Oe.current&&he&&D.current&&Z.key===" "&&(Oe.current=!0,D.current.stop(Z,()=>{D.current.start(Z)})),Z.target===Z.currentTarget&&be()&&Z.key===" "&&Z.preventDefault(),b&&b(Z),Z.target===Z.currentTarget&&be()&&Z.key==="Enter"&&!c&&(Z.preventDefault(),g&&g(Z))}),en=sl(Z=>{d&&Z.key===" "&&D.current&&he&&!Z.defaultPrevented&&(Oe.current=!1,D.current.stop(Z,()=>{D.current.pulsate(Z)})),T&&T(Z),g&&Z.target===Z.currentTarget&&be()&&Z.key===" "&&!Z.defaultPrevented&&g(Z)});let Pe=l;Pe==="button"&&(q.href||q.to)&&(Pe=h);const Fe={};Pe==="button"?(Fe.type=X===void 0?"button":X,Fe.disabled=c):(!q.href&&!q.to&&(Fe.role="button"),c&&(Fe["aria-disabled"]=c));const dt=Bi(n,tt,J),tn=F({},r,{centerRipple:s,component:l,disabled:c,disableRipple:u,disableTouchRipple:f,focusRipple:d,tabIndex:j,focusVisible:he}),nn=v9(tn);return N.jsxs(_9,F({as:Pe,className:et(nn.root,a),ownerState:tn,onBlur:_e,onClick:g,onContextMenu:it,onFocus:Ne,onKeyDown:Vt,onKeyUp:en,onMouseDown:we,onMouseLeave:xe,onMouseUp:ie,onDragLeave:se,onTouchEnd:ve,onTouchMove:nt,onTouchStart:te,ref:dt,tabIndex:c?-1:j,type:X},Fe,q,{children:[o,Le?N.jsx(h9,F({ref:G,center:s},U)):null]}))}),E9=b9;function w9(t){return $i("MuiTypography",t)}Gi("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]);const x9=["align","className","component","gutterBottom","noWrap","paragraph","variant","variantMapping"],T9=t=>{const{align:e,gutterBottom:n,noWrap:r,paragraph:i,variant:s,classes:o}=t,a={root:["root",s,t.align!=="inherit"&&`align${Xe(e)}`,n&&"gutterBottom",r&&"noWrap",i&&"paragraph"]};return Bs(a,w9,o)},S9=Jt("span",{name:"MuiTypography",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.variant&&e[n.variant],n.align!=="inherit"&&e[`align${Xe(n.align)}`],n.noWrap&&e.noWrap,n.gutterBottom&&e.gutterBottom,n.paragraph&&e.paragraph]}})(({theme:t,ownerState:e})=>F({margin:0},e.variant==="inherit"&&{font:"inherit"},e.variant!=="inherit"&&t.typography[e.variant],e.align!=="inherit"&&{textAlign:e.align},e.noWrap&&{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},e.gutterBottom&&{marginBottom:"0.35em"},e.paragraph&&{marginBottom:16})),Fw={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},P9={primary:"primary.main",textPrimary:"text.primary",secondary:"secondary.main",textSecondary:"text.secondary",error:"error.main"},A9=t=>P9[t]||t,C9=A.forwardRef(function(e,n){const r=Wi({props:e,name:"MuiTypography"}),i=A9(r.color),s=Fv(F({},r,{color:i})),{align:o="inherit",className:a,component:l,gutterBottom:c=!1,noWrap:u=!1,paragraph:f=!1,variant:d="body1",variantMapping:h=Fw}=s,p=Ge(s,x9),g=F({},s,{align:o,color:i,className:a,component:l,gutterBottom:c,noWrap:u,paragraph:f,variant:d,variantMapping:h}),E=l||(f?"p":h[d]||Fw[d])||"span",m=T9(g);return N.jsx(S9,F({as:E,ref:n,ownerState:g,className:et(m.root,a)},p))}),Dw=C9;function L9(t){return typeof t=="string"}function al(t,e,n){return t===void 0||L9(t)?e:F({},e,{ownerState:F({},e.ownerState,n)})}const R9={disableDefaultClasses:!1},O9=A.createContext(R9);function I9(t){const{disableDefaultClasses:e}=A.useContext(O9);return n=>e?"":t(n)}function M9(t,e=[]){if(t===void 0)return{};const n={};return Object.keys(t).filter(r=>r.match(/^on[A-Z]/)&&typeof t[r]=="function"&&!e.includes(r)).forEach(r=>{n[r]=t[r]}),n}function k9(t,e,n){return typeof t=="function"?t(e,n):t}function Bw(t){if(t===void 0)return{};const e={};return Object.keys(t).filter(n=>!(n.match(/^on[A-Z]/)&&typeof t[n]=="function")).forEach(n=>{e[n]=t[n]}),e}function N9(t){const{getSlotProps:e,additionalProps:n,externalSlotProps:r,externalForwardedProps:i,className:s}=t;if(!e){const h=et(i==null?void 0:i.className,r==null?void 0:r.className,s,n==null?void 0:n.className),p=F({},n==null?void 0:n.style,i==null?void 0:i.style,r==null?void 0:r.style),g=F({},n,i,r);return h.length>0&&(g.className=h),Object.keys(p).length>0&&(g.style=p),{props:g,internalRef:void 0}}const o=M9(F({},i,r)),a=Bw(r),l=Bw(i),c=e(o),u=et(c==null?void 0:c.className,n==null?void 0:n.className,s,i==null?void 0:i.className,r==null?void 0:r.className),f=F({},c==null?void 0:c.style,n==null?void 0:n.style,i==null?void 0:i.style,r==null?void 0:r.style),d=F({},c,n,l,a);return u.length>0&&(d.className=u),Object.keys(f).length>0&&(d.style=f),{props:d,internalRef:c.ref}}const F9=["elementType","externalSlotProps","ownerState","skipResolvingSlotProps"];function D9(t){var e;const{elementType:n,externalSlotProps:r,ownerState:i,skipResolvingSlotProps:s=!1}=t,o=Ge(t,F9),a=s?{}:k9(r,i),{props:l,internalRef:c}=N9(F({},o,{externalSlotProps:a})),u=Bi(c,a==null?void 0:a.ref,(e=t.additionalProps)==null?void 0:e.ref);return al(n,F({},l,{ref:u}),i)}var qt="top",Bn="bottom",zn="right",Zt="left",Vv="auto",Dc=[qt,Bn,zn,Zt],ca="start",oc="end",B9="clippingParents",$C="viewport",Ka="popper",z9="reference",zw=Dc.reduce(function(t,e){return t.concat([e+"-"+ca,e+"-"+oc])},[]),GC=[].concat(Dc,[Vv]).reduce(function(t,e){return t.concat([e,e+"-"+ca,e+"-"+oc])},[]),U9="beforeRead",j9="read",V9="afterRead",$9="beforeMain",G9="main",W9="afterMain",H9="beforeWrite",X9="write",Y9="afterWrite",K9=[U9,j9,V9,$9,G9,W9,H9,X9,Y9];function xr(t){return t?(t.nodeName||"").toLowerCase():null}function vn(t){if(t==null)return window;if(t.toString()!=="[object Window]"){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function Rs(t){var e=vn(t).Element;return t instanceof e||t instanceof Element}function kn(t){var e=vn(t).HTMLElement;return t instanceof e||t instanceof HTMLElement}function $v(t){if(typeof ShadowRoot>"u")return!1;var e=vn(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}function q9(t){var e=t.state;Object.keys(e.elements).forEach(function(n){var r=e.styles[n]||{},i=e.attributes[n]||{},s=e.elements[n];!kn(s)||!xr(s)||(Object.assign(s.style,r),Object.keys(i).forEach(function(o){var a=i[o];a===!1?s.removeAttribute(o):s.setAttribute(o,a===!0?"":a)}))})}function Z9(t){var e=t.state,n={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,n.popper),e.styles=n,e.elements.arrow&&Object.assign(e.elements.arrow.style,n.arrow),function(){Object.keys(e.elements).forEach(function(r){var i=e.elements[r],s=e.attributes[r]||{},o=Object.keys(e.styles.hasOwnProperty(r)?e.styles[r]:n[r]),a=o.reduce(function(l,c){return l[c]="",l},{});!kn(i)||!xr(i)||(Object.assign(i.style,a),Object.keys(s).forEach(function(l){i.removeAttribute(l)}))})}}const Q9={name:"applyStyles",enabled:!0,phase:"write",fn:q9,effect:Z9,requires:["computeStyles"]};function _r(t){return t.split("-")[0]}var vs=Math.max,vd=Math.min,ua=Math.round;function T0(){var t=navigator.userAgentData;return t!=null&&t.brands&&Array.isArray(t.brands)?t.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function WC(){return!/^((?!chrome|android).)*safari/i.test(T0())}function fa(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!1);var r=t.getBoundingClientRect(),i=1,s=1;e&&kn(t)&&(i=t.offsetWidth>0&&ua(r.width)/t.offsetWidth||1,s=t.offsetHeight>0&&ua(r.height)/t.offsetHeight||1);var o=Rs(t)?vn(t):window,a=o.visualViewport,l=!WC()&&n,c=(r.left+(l&&a?a.offsetLeft:0))/i,u=(r.top+(l&&a?a.offsetTop:0))/s,f=r.width/i,d=r.height/s;return{width:f,height:d,top:u,right:c+f,bottom:u+d,left:c,x:c,y:u}}function Gv(t){var e=fa(t),n=t.offsetWidth,r=t.offsetHeight;return Math.abs(e.width-n)<=1&&(n=e.width),Math.abs(e.height-r)<=1&&(r=e.height),{x:t.offsetLeft,y:t.offsetTop,width:n,height:r}}function HC(t,e){var n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&$v(n)){var r=e;do{if(r&&t.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function Kr(t){return vn(t).getComputedStyle(t)}function J9(t){return["table","td","th"].indexOf(xr(t))>=0}function Hi(t){return((Rs(t)?t.ownerDocument:t.document)||window.document).documentElement}function Gh(t){return xr(t)==="html"?t:t.assignedSlot||t.parentNode||($v(t)?t.host:null)||Hi(t)}function Uw(t){return!kn(t)||Kr(t).position==="fixed"?null:t.offsetParent}function eH(t){var e=/firefox/i.test(T0()),n=/Trident/i.test(T0());if(n&&kn(t)){var r=Kr(t);if(r.position==="fixed")return null}var i=Gh(t);for($v(i)&&(i=i.host);kn(i)&&["html","body"].indexOf(xr(i))<0;){var s=Kr(i);if(s.transform!=="none"||s.perspective!=="none"||s.contain==="paint"||["transform","perspective"].indexOf(s.willChange)!==-1||e&&s.willChange==="filter"||e&&s.filter&&s.filter!=="none")return i;i=i.parentNode}return null}function Bc(t){for(var e=vn(t),n=Uw(t);n&&J9(n)&&Kr(n).position==="static";)n=Uw(n);return n&&(xr(n)==="html"||xr(n)==="body"&&Kr(n).position==="static")?e:n||eH(t)||e}function Wv(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function xl(t,e,n){return vs(t,vd(e,n))}function tH(t,e,n){var r=xl(t,e,n);return r>n?n:r}function XC(){return{top:0,right:0,bottom:0,left:0}}function YC(t){return Object.assign({},XC(),t)}function KC(t,e){return e.reduce(function(n,r){return n[r]=t,n},{})}var nH=function(e,n){return e=typeof e=="function"?e(Object.assign({},n.rects,{placement:n.placement})):e,YC(typeof e!="number"?e:KC(e,Dc))};function rH(t){var e,n=t.state,r=t.name,i=t.options,s=n.elements.arrow,o=n.modifiersData.popperOffsets,a=_r(n.placement),l=Wv(a),c=[Zt,zn].indexOf(a)>=0,u=c?"height":"width";if(!(!s||!o)){var f=nH(i.padding,n),d=Gv(s),h=l==="y"?qt:Zt,p=l==="y"?Bn:zn,g=n.rects.reference[u]+n.rects.reference[l]-o[l]-n.rects.popper[u],E=o[l]-n.rects.reference[l],m=Bc(s),y=m?l==="y"?m.clientHeight||0:m.clientWidth||0:0,v=g/2-E/2,b=f[h],T=y-d[u]-f[p],S=y/2-d[u]/2+v,P=xl(b,S,T),R=l;n.modifiersData[r]=(e={},e[R]=P,e.centerOffset=P-S,e)}}function iH(t){var e=t.state,n=t.options,r=n.element,i=r===void 0?"[data-popper-arrow]":r;i!=null&&(typeof i=="string"&&(i=e.elements.popper.querySelector(i),!i)||HC(e.elements.popper,i)&&(e.elements.arrow=i))}const sH={name:"arrow",enabled:!0,phase:"main",fn:rH,effect:iH,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function da(t){return t.split("-")[1]}var oH={top:"auto",right:"auto",bottom:"auto",left:"auto"};function aH(t,e){var n=t.x,r=t.y,i=e.devicePixelRatio||1;return{x:ua(n*i)/i||0,y:ua(r*i)/i||0}}function jw(t){var e,n=t.popper,r=t.popperRect,i=t.placement,s=t.variation,o=t.offsets,a=t.position,l=t.gpuAcceleration,c=t.adaptive,u=t.roundOffsets,f=t.isFixed,d=o.x,h=d===void 0?0:d,p=o.y,g=p===void 0?0:p,E=typeof u=="function"?u({x:h,y:g}):{x:h,y:g};h=E.x,g=E.y;var m=o.hasOwnProperty("x"),y=o.hasOwnProperty("y"),v=Zt,b=qt,T=window;if(c){var S=Bc(n),P="clientHeight",R="clientWidth";if(S===vn(n)&&(S=Hi(n),Kr(S).position!=="static"&&a==="absolute"&&(P="scrollHeight",R="scrollWidth")),S=S,i===qt||(i===Zt||i===zn)&&s===oc){b=Bn;var O=f&&S===T&&T.visualViewport?T.visualViewport.height:S[P];g-=O-r.height,g*=l?1:-1}if(i===Zt||(i===qt||i===Bn)&&s===oc){v=zn;var L=f&&S===T&&T.visualViewport?T.visualViewport.width:S[R];h-=L-r.width,h*=l?1:-1}}var M=Object.assign({position:a},c&&oH),j=u===!0?aH({x:h,y:g},vn(n)):{x:h,y:g};if(h=j.x,g=j.y,l){var U;return Object.assign({},M,(U={},U[b]=y?"0":"",U[v]=m?"0":"",U.transform=(T.devicePixelRatio||1)<=1?"translate("+h+"px, "+g+"px)":"translate3d("+h+"px, "+g+"px, 0)",U))}return Object.assign({},M,(e={},e[b]=y?g+"px":"",e[v]=m?h+"px":"",e.transform="",e))}function lH(t){var e=t.state,n=t.options,r=n.gpuAcceleration,i=r===void 0?!0:r,s=n.adaptive,o=s===void 0?!0:s,a=n.roundOffsets,l=a===void 0?!0:a,c={placement:_r(e.placement),variation:da(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:i,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,jw(Object.assign({},c,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:o,roundOffsets:l})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,jw(Object.assign({},c,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}const cH={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:lH,data:{}};var Nu={passive:!0};function uH(t){var e=t.state,n=t.instance,r=t.options,i=r.scroll,s=i===void 0?!0:i,o=r.resize,a=o===void 0?!0:o,l=vn(e.elements.popper),c=[].concat(e.scrollParents.reference,e.scrollParents.popper);return s&&c.forEach(function(u){u.addEventListener("scroll",n.update,Nu)}),a&&l.addEventListener("resize",n.update,Nu),function(){s&&c.forEach(function(u){u.removeEventListener("scroll",n.update,Nu)}),a&&l.removeEventListener("resize",n.update,Nu)}}const fH={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:uH,data:{}};var dH={left:"right",right:"left",bottom:"top",top:"bottom"};function Ef(t){return t.replace(/left|right|bottom|top/g,function(e){return dH[e]})}var hH={start:"end",end:"start"};function Vw(t){return t.replace(/start|end/g,function(e){return hH[e]})}function Hv(t){var e=vn(t),n=e.pageXOffset,r=e.pageYOffset;return{scrollLeft:n,scrollTop:r}}function Xv(t){return fa(Hi(t)).left+Hv(t).scrollLeft}function pH(t,e){var n=vn(t),r=Hi(t),i=n.visualViewport,s=r.clientWidth,o=r.clientHeight,a=0,l=0;if(i){s=i.width,o=i.height;var c=WC();(c||!c&&e==="fixed")&&(a=i.offsetLeft,l=i.offsetTop)}return{width:s,height:o,x:a+Xv(t),y:l}}function gH(t){var e,n=Hi(t),r=Hv(t),i=(e=t.ownerDocument)==null?void 0:e.body,s=vs(n.scrollWidth,n.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),o=vs(n.scrollHeight,n.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),a=-r.scrollLeft+Xv(t),l=-r.scrollTop;return Kr(i||n).direction==="rtl"&&(a+=vs(n.clientWidth,i?i.clientWidth:0)-s),{width:s,height:o,x:a,y:l}}function Yv(t){var e=Kr(t),n=e.overflow,r=e.overflowX,i=e.overflowY;return/auto|scroll|overlay|hidden/.test(n+i+r)}function qC(t){return["html","body","#document"].indexOf(xr(t))>=0?t.ownerDocument.body:kn(t)&&Yv(t)?t:qC(Gh(t))}function Tl(t,e){var n;e===void 0&&(e=[]);var r=qC(t),i=r===((n=t.ownerDocument)==null?void 0:n.body),s=vn(r),o=i?[s].concat(s.visualViewport||[],Yv(r)?r:[]):r,a=e.concat(o);return i?a:a.concat(Tl(Gh(o)))}function S0(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function mH(t,e){var n=fa(t,!1,e==="fixed");return n.top=n.top+t.clientTop,n.left=n.left+t.clientLeft,n.bottom=n.top+t.clientHeight,n.right=n.left+t.clientWidth,n.width=t.clientWidth,n.height=t.clientHeight,n.x=n.left,n.y=n.top,n}function $w(t,e,n){return e===$C?S0(pH(t,n)):Rs(e)?mH(e,n):S0(gH(Hi(t)))}function yH(t){var e=Tl(Gh(t)),n=["absolute","fixed"].indexOf(Kr(t).position)>=0,r=n&&kn(t)?Bc(t):t;return Rs(r)?e.filter(function(i){return Rs(i)&&HC(i,r)&&xr(i)!=="body"}):[]}function vH(t,e,n,r){var i=e==="clippingParents"?yH(t):[].concat(e),s=[].concat(i,[n]),o=s[0],a=s.reduce(function(l,c){var u=$w(t,c,r);return l.top=vs(u.top,l.top),l.right=vd(u.right,l.right),l.bottom=vd(u.bottom,l.bottom),l.left=vs(u.left,l.left),l},$w(t,o,r));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function ZC(t){var e=t.reference,n=t.element,r=t.placement,i=r?_r(r):null,s=r?da(r):null,o=e.x+e.width/2-n.width/2,a=e.y+e.height/2-n.height/2,l;switch(i){case qt:l={x:o,y:e.y-n.height};break;case Bn:l={x:o,y:e.y+e.height};break;case zn:l={x:e.x+e.width,y:a};break;case Zt:l={x:e.x-n.width,y:a};break;default:l={x:e.x,y:e.y}}var c=i?Wv(i):null;if(c!=null){var u=c==="y"?"height":"width";switch(s){case ca:l[c]=l[c]-(e[u]/2-n[u]/2);break;case oc:l[c]=l[c]+(e[u]/2-n[u]/2);break}}return l}function ac(t,e){e===void 0&&(e={});var n=e,r=n.placement,i=r===void 0?t.placement:r,s=n.strategy,o=s===void 0?t.strategy:s,a=n.boundary,l=a===void 0?B9:a,c=n.rootBoundary,u=c===void 0?$C:c,f=n.elementContext,d=f===void 0?Ka:f,h=n.altBoundary,p=h===void 0?!1:h,g=n.padding,E=g===void 0?0:g,m=YC(typeof E!="number"?E:KC(E,Dc)),y=d===Ka?z9:Ka,v=t.rects.popper,b=t.elements[p?y:d],T=vH(Rs(b)?b:b.contextElement||Hi(t.elements.popper),l,u,o),S=fa(t.elements.reference),P=ZC({reference:S,element:v,strategy:"absolute",placement:i}),R=S0(Object.assign({},v,P)),O=d===Ka?R:S,L={top:T.top-O.top+m.top,bottom:O.bottom-T.bottom+m.bottom,left:T.left-O.left+m.left,right:O.right-T.right+m.right},M=t.modifiersData.offset;if(d===Ka&&M){var j=M[i];Object.keys(L).forEach(function(U){var V=[zn,Bn].indexOf(U)>=0?1:-1,X=[qt,Bn].indexOf(U)>=0?"y":"x";L[U]+=j[X]*V})}return L}function _H(t,e){e===void 0&&(e={});var n=e,r=n.placement,i=n.boundary,s=n.rootBoundary,o=n.padding,a=n.flipVariations,l=n.allowedAutoPlacements,c=l===void 0?GC:l,u=da(r),f=u?a?zw:zw.filter(function(p){return da(p)===u}):Dc,d=f.filter(function(p){return c.indexOf(p)>=0});d.length===0&&(d=f);var h=d.reduce(function(p,g){return p[g]=ac(t,{placement:g,boundary:i,rootBoundary:s,padding:o})[_r(g)],p},{});return Object.keys(h).sort(function(p,g){return h[p]-h[g]})}function bH(t){if(_r(t)===Vv)return[];var e=Ef(t);return[Vw(t),e,Vw(e)]}function EH(t){var e=t.state,n=t.options,r=t.name;if(!e.modifiersData[r]._skip){for(var i=n.mainAxis,s=i===void 0?!0:i,o=n.altAxis,a=o===void 0?!0:o,l=n.fallbackPlacements,c=n.padding,u=n.boundary,f=n.rootBoundary,d=n.altBoundary,h=n.flipVariations,p=h===void 0?!0:h,g=n.allowedAutoPlacements,E=e.options.placement,m=_r(E),y=m===E,v=l||(y||!p?[Ef(E)]:bH(E)),b=[E].concat(v).reduce(function(he,Re){return he.concat(_r(Re)===Vv?_H(e,{placement:Re,boundary:u,rootBoundary:f,padding:c,flipVariations:p,allowedAutoPlacements:g}):Re)},[]),T=e.rects.reference,S=e.rects.popper,P=new Map,R=!0,O=b[0],L=0;L<b.length;L++){var M=b[L],j=_r(M),U=da(M)===ca,V=[qt,Bn].indexOf(j)>=0,X=V?"width":"height",q=ac(e,{placement:M,boundary:u,rootBoundary:f,altBoundary:d,padding:c}),J=V?U?zn:Zt:U?Bn:qt;T[X]>S[X]&&(J=Ef(J));var D=Ef(J),G=[];if(s&&G.push(q[j]<=0),a&&G.push(q[J]<=0,q[D]<=0),G.every(function(he){return he})){O=M,R=!1;break}P.set(M,G)}if(R)for(var Y=p?3:1,re=function(Re){var ke=b.find(function(ue){var Le=P.get(ue);if(Le)return Le.slice(0,Re).every(function(Q){return Q})});if(ke)return O=ke,"break"},ee=Y;ee>0;ee--){var tt=re(ee);if(tt==="break")break}e.placement!==O&&(e.modifiersData[r]._skip=!0,e.placement=O,e.reset=!0)}}const wH={name:"flip",enabled:!0,phase:"main",fn:EH,requiresIfExists:["offset"],data:{_skip:!1}};function Gw(t,e,n){return n===void 0&&(n={x:0,y:0}),{top:t.top-e.height-n.y,right:t.right-e.width+n.x,bottom:t.bottom-e.height+n.y,left:t.left-e.width-n.x}}function Ww(t){return[qt,zn,Bn,Zt].some(function(e){return t[e]>=0})}function xH(t){var e=t.state,n=t.name,r=e.rects.reference,i=e.rects.popper,s=e.modifiersData.preventOverflow,o=ac(e,{elementContext:"reference"}),a=ac(e,{altBoundary:!0}),l=Gw(o,r),c=Gw(a,i,s),u=Ww(l),f=Ww(c);e.modifiersData[n]={referenceClippingOffsets:l,popperEscapeOffsets:c,isReferenceHidden:u,hasPopperEscaped:f},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":f})}const TH={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:xH};function SH(t,e,n){var r=_r(t),i=[Zt,qt].indexOf(r)>=0?-1:1,s=typeof n=="function"?n(Object.assign({},e,{placement:t})):n,o=s[0],a=s[1];return o=o||0,a=(a||0)*i,[Zt,zn].indexOf(r)>=0?{x:a,y:o}:{x:o,y:a}}function PH(t){var e=t.state,n=t.options,r=t.name,i=n.offset,s=i===void 0?[0,0]:i,o=GC.reduce(function(u,f){return u[f]=SH(f,e.rects,s),u},{}),a=o[e.placement],l=a.x,c=a.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=l,e.modifiersData.popperOffsets.y+=c),e.modifiersData[r]=o}const AH={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:PH};function CH(t){var e=t.state,n=t.name;e.modifiersData[n]=ZC({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})}const LH={name:"popperOffsets",enabled:!0,phase:"read",fn:CH,data:{}};function RH(t){return t==="x"?"y":"x"}function OH(t){var e=t.state,n=t.options,r=t.name,i=n.mainAxis,s=i===void 0?!0:i,o=n.altAxis,a=o===void 0?!1:o,l=n.boundary,c=n.rootBoundary,u=n.altBoundary,f=n.padding,d=n.tether,h=d===void 0?!0:d,p=n.tetherOffset,g=p===void 0?0:p,E=ac(e,{boundary:l,rootBoundary:c,padding:f,altBoundary:u}),m=_r(e.placement),y=da(e.placement),v=!y,b=Wv(m),T=RH(b),S=e.modifiersData.popperOffsets,P=e.rects.reference,R=e.rects.popper,O=typeof g=="function"?g(Object.assign({},e.rects,{placement:e.placement})):g,L=typeof O=="number"?{mainAxis:O,altAxis:O}:Object.assign({mainAxis:0,altAxis:0},O),M=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,j={x:0,y:0};if(S){if(s){var U,V=b==="y"?qt:Zt,X=b==="y"?Bn:zn,q=b==="y"?"height":"width",J=S[b],D=J+E[V],G=J-E[X],Y=h?-R[q]/2:0,re=y===ca?P[q]:R[q],ee=y===ca?-R[q]:-P[q],tt=e.elements.arrow,he=h&&tt?Gv(tt):{width:0,height:0},Re=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:XC(),ke=Re[V],ue=Re[X],Le=xl(0,P[q],he[q]),Q=v?P[q]/2-Y-Le-ke-L.mainAxis:re-Le-ke-L.mainAxis,we=v?-P[q]/2+Y+Le+ue+L.mainAxis:ee+Le+ue+L.mainAxis,it=e.elements.arrow&&Bc(e.elements.arrow),se=it?b==="y"?it.clientTop||0:it.clientLeft||0:0,ie=(U=M==null?void 0:M[b])!=null?U:0,xe=J+Q-ie-se,te=J+we-ie,ve=xl(h?vd(D,xe):D,J,h?vs(G,te):G);S[b]=ve,j[b]=ve-J}if(a){var nt,_e=b==="x"?qt:Zt,Ne=b==="x"?Bn:zn,be=S[T],Oe=T==="y"?"height":"width",Vt=be+E[_e],en=be-E[Ne],Pe=[qt,Zt].indexOf(m)!==-1,Fe=(nt=M==null?void 0:M[T])!=null?nt:0,dt=Pe?Vt:be-P[Oe]-R[Oe]-Fe+L.altAxis,tn=Pe?be+P[Oe]+R[Oe]-Fe-L.altAxis:en,nn=h&&Pe?tH(dt,be,tn):xl(h?dt:Vt,be,h?tn:en);S[T]=nn,j[T]=nn-be}e.modifiersData[r]=j}}const IH={name:"preventOverflow",enabled:!0,phase:"main",fn:OH,requiresIfExists:["offset"]};function MH(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function kH(t){return t===vn(t)||!kn(t)?Hv(t):MH(t)}function NH(t){var e=t.getBoundingClientRect(),n=ua(e.width)/t.offsetWidth||1,r=ua(e.height)/t.offsetHeight||1;return n!==1||r!==1}function FH(t,e,n){n===void 0&&(n=!1);var r=kn(e),i=kn(e)&&NH(e),s=Hi(e),o=fa(t,i,n),a={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(r||!r&&!n)&&((xr(e)!=="body"||Yv(s))&&(a=kH(e)),kn(e)?(l=fa(e,!0),l.x+=e.clientLeft,l.y+=e.clientTop):s&&(l.x=Xv(s))),{x:o.left+a.scrollLeft-l.x,y:o.top+a.scrollTop-l.y,width:o.width,height:o.height}}function DH(t){var e=new Map,n=new Set,r=[];t.forEach(function(s){e.set(s.name,s)});function i(s){n.add(s.name);var o=[].concat(s.requires||[],s.requiresIfExists||[]);o.forEach(function(a){if(!n.has(a)){var l=e.get(a);l&&i(l)}}),r.push(s)}return t.forEach(function(s){n.has(s.name)||i(s)}),r}function BH(t){var e=DH(t);return K9.reduce(function(n,r){return n.concat(e.filter(function(i){return i.phase===r}))},[])}function zH(t){var e;return function(){return e||(e=new Promise(function(n){Promise.resolve().then(function(){e=void 0,n(t())})})),e}}function UH(t){var e=t.reduce(function(n,r){var i=n[r.name];return n[r.name]=i?Object.assign({},i,r,{options:Object.assign({},i.options,r.options),data:Object.assign({},i.data,r.data)}):r,n},{});return Object.keys(e).map(function(n){return e[n]})}var Hw={placement:"bottom",modifiers:[],strategy:"absolute"};function Xw(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return!e.some(function(r){return!(r&&typeof r.getBoundingClientRect=="function")})}function jH(t){t===void 0&&(t={});var e=t,n=e.defaultModifiers,r=n===void 0?[]:n,i=e.defaultOptions,s=i===void 0?Hw:i;return function(a,l,c){c===void 0&&(c=s);var u={placement:"bottom",orderedModifiers:[],options:Object.assign({},Hw,s),modifiersData:{},elements:{reference:a,popper:l},attributes:{},styles:{}},f=[],d=!1,h={state:u,setOptions:function(m){var y=typeof m=="function"?m(u.options):m;g(),u.options=Object.assign({},s,u.options,y),u.scrollParents={reference:Rs(a)?Tl(a):a.contextElement?Tl(a.contextElement):[],popper:Tl(l)};var v=BH(UH([].concat(r,u.options.modifiers)));return u.orderedModifiers=v.filter(function(b){return b.enabled}),p(),h.update()},forceUpdate:function(){if(!d){var m=u.elements,y=m.reference,v=m.popper;if(Xw(y,v)){u.rects={reference:FH(y,Bc(v),u.options.strategy==="fixed"),popper:Gv(v)},u.reset=!1,u.placement=u.options.placement,u.orderedModifiers.forEach(function(L){return u.modifiersData[L.name]=Object.assign({},L.data)});for(var b=0;b<u.orderedModifiers.length;b++){if(u.reset===!0){u.reset=!1,b=-1;continue}var T=u.orderedModifiers[b],S=T.fn,P=T.options,R=P===void 0?{}:P,O=T.name;typeof S=="function"&&(u=S({state:u,options:R,name:O,instance:h})||u)}}}},update:zH(function(){return new Promise(function(E){h.forceUpdate(),E(u)})}),destroy:function(){g(),d=!0}};if(!Xw(a,l))return h;h.setOptions(c).then(function(E){!d&&c.onFirstUpdate&&c.onFirstUpdate(E)});function p(){u.orderedModifiers.forEach(function(E){var m=E.name,y=E.options,v=y===void 0?{}:y,b=E.effect;if(typeof b=="function"){var T=b({state:u,name:m,instance:h,options:v}),S=function(){};f.push(T||S)}})}function g(){f.forEach(function(E){return E()}),f=[]}return h}}var VH=[fH,LH,cH,Q9,AH,wH,IH,sH,TH],$H=jH({defaultModifiers:VH});function GH(t){return typeof t=="function"?t():t}const WH=A.forwardRef(function(e,n){const{children:r,container:i,disablePortal:s=!1}=e,[o,a]=A.useState(null),l=Bi(A.isValidElement(r)?r.ref:null,n);if(nc(()=>{s||a(GH(i)||document.body)},[i,s]),nc(()=>{if(o&&!s)return m0(n,o),()=>{m0(n,null)}},[n,o,s]),s){if(A.isValidElement(r)){const c={ref:l};return A.cloneElement(r,c)}return N.jsx(A.Fragment,{children:r})}return N.jsx(A.Fragment,{children:o&&ya.createPortal(r,o)})});function HH(t){return $i("MuiPopper",t)}Gi("MuiPopper",["root"]);const XH=["anchorEl","children","direction","disablePortal","modifiers","open","placement","popperOptions","popperRef","slotProps","slots","TransitionProps","ownerState"],YH=["anchorEl","children","container","direction","disablePortal","keepMounted","modifiers","open","placement","popperOptions","popperRef","style","transition","slotProps","slots"];function KH(t,e){if(e==="ltr")return t;switch(t){case"bottom-end":return"bottom-start";case"bottom-start":return"bottom-end";case"top-end":return"top-start";case"top-start":return"top-end";default:return t}}function P0(t){return typeof t=="function"?t():t}function qH(t){return t.nodeType!==void 0}const ZH=()=>Bs({root:["root"]},I9(HH)),QH={},JH=A.forwardRef(function(e,n){var r;const{anchorEl:i,children:s,direction:o,disablePortal:a,modifiers:l,open:c,placement:u,popperOptions:f,popperRef:d,slotProps:h={},slots:p={},TransitionProps:g}=e,E=Ge(e,XH),m=A.useRef(null),y=Bi(m,n),v=A.useRef(null),b=Bi(v,d),T=A.useRef(b);nc(()=>{T.current=b},[b]),A.useImperativeHandle(d,()=>v.current,[]);const S=KH(u,o),[P,R]=A.useState(S),[O,L]=A.useState(P0(i));A.useEffect(()=>{v.current&&v.current.forceUpdate()}),A.useEffect(()=>{i&&L(P0(i))},[i]),nc(()=>{if(!O||!c)return;const X=D=>{R(D.placement)};let q=[{name:"preventOverflow",options:{altBoundary:a}},{name:"flip",options:{altBoundary:a}},{name:"onUpdate",enabled:!0,phase:"afterWrite",fn:({state:D})=>{X(D)}}];l!=null&&(q=q.concat(l)),f&&f.modifiers!=null&&(q=q.concat(f.modifiers));const J=$H(O,m.current,F({placement:S},f,{modifiers:q}));return T.current(J),()=>{J.destroy(),T.current(null)}},[O,a,l,c,f,S]);const M={placement:P};g!==null&&(M.TransitionProps=g);const j=ZH(),U=(r=p.root)!=null?r:"div",V=D9({elementType:U,externalSlotProps:h.root,externalForwardedProps:E,additionalProps:{role:"tooltip",ref:y},ownerState:e,className:j.root});return N.jsx(U,F({},V,{children:typeof s=="function"?s(M):s}))}),e7=A.forwardRef(function(e,n){const{anchorEl:r,children:i,container:s,direction:o="ltr",disablePortal:a=!1,keepMounted:l=!1,modifiers:c,open:u,placement:f="bottom",popperOptions:d=QH,popperRef:h,style:p,transition:g=!1,slotProps:E={},slots:m={}}=e,y=Ge(e,YH),[v,b]=A.useState(!0),T=()=>{b(!1)},S=()=>{b(!0)};if(!l&&!u&&(!g||v))return null;let P;if(s)P=s;else if(r){const L=P0(r);P=L&&qH(L)?ow(L).body:ow(null).body}const R=!u&&l&&(!g||v)?"none":void 0,O=g?{in:u,onEnter:T,onExited:S}:void 0;return N.jsx(WH,{disablePortal:a,container:P,children:N.jsx(JH,F({anchorEl:r,direction:o,disablePortal:a,modifiers:c,ref:n,open:g?!v:u,placement:f,popperOptions:d,popperRef:h,slotProps:E,slots:m},y,{style:F({position:"fixed",top:0,left:0,display:R},p),TransitionProps:O,children:i}))})}),t7=["anchorEl","component","components","componentsProps","container","disablePortal","keepMounted","modifiers","open","placement","popperOptions","popperRef","transition","slots","slotProps"],n7=Jt(e7,{name:"MuiPopper",slot:"Root",overridesResolver:(t,e)=>e.root})({}),r7=A.forwardRef(function(e,n){var r;const i=FC(),s=Wi({props:e,name:"MuiPopper"}),{anchorEl:o,component:a,components:l,componentsProps:c,container:u,disablePortal:f,keepMounted:d,modifiers:h,open:p,placement:g,popperOptions:E,popperRef:m,transition:y,slots:v,slotProps:b}=s,T=Ge(s,t7),S=(r=v==null?void 0:v.root)!=null?r:l==null?void 0:l.Root,P=F({anchorEl:o,container:u,disablePortal:f,keepMounted:d,modifiers:h,open:p,placement:g,popperOptions:E,popperRef:m,transition:y},T);return N.jsx(n7,F({as:a,direction:i==null?void 0:i.direction,slots:{root:S},slotProps:b??c},P,{ref:n}))}),QC=r7,i7=zC(),s7=ZG({themeId:Lh,defaultTheme:i7,defaultClassName:"MuiBox-root",generateClassName:vC.generate}),ps=s7;function o7(t){return $i("MuiButton",t)}const a7=Gi("MuiButton",["root","text","textInherit","textPrimary","textSecondary","textSuccess","textError","textInfo","textWarning","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","outlinedSuccess","outlinedError","outlinedInfo","outlinedWarning","contained","containedInherit","containedPrimary","containedSecondary","containedSuccess","containedError","containedInfo","containedWarning","disableElevation","focusVisible","disabled","colorInherit","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","iconSizeSmall","iconSizeMedium","iconSizeLarge"]),Fu=a7,l7=A.createContext({}),c7=l7,u7=A.createContext(void 0),f7=u7,d7=["children","color","component","className","disabled","disableElevation","disableFocusRipple","endIcon","focusVisibleClassName","fullWidth","size","startIcon","type","variant"],h7=t=>{const{color:e,disableElevation:n,fullWidth:r,size:i,variant:s,classes:o}=t,a={root:["root",s,`${s}${Xe(e)}`,`size${Xe(i)}`,`${s}Size${Xe(i)}`,e==="inherit"&&"colorInherit",n&&"disableElevation",r&&"fullWidth"],label:["label"],startIcon:["startIcon",`iconSize${Xe(i)}`],endIcon:["endIcon",`iconSize${Xe(i)}`]},l=Bs(a,o7,o);return F({},o,l)},JC=t=>F({},t.size==="small"&&{"& > *:nth-of-type(1)":{fontSize:18}},t.size==="medium"&&{"& > *:nth-of-type(1)":{fontSize:20}},t.size==="large"&&{"& > *:nth-of-type(1)":{fontSize:22}}),p7=Jt(E9,{shouldForwardProp:t=>UC(t)||t==="classes",name:"MuiButton",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[n.variant],e[`${n.variant}${Xe(n.color)}`],e[`size${Xe(n.size)}`],e[`${n.variant}Size${Xe(n.size)}`],n.color==="inherit"&&e.colorInherit,n.disableElevation&&e.disableElevation,n.fullWidth&&e.fullWidth]}})(({theme:t,ownerState:e})=>{var n,r;const i=t.palette.mode==="light"?t.palette.grey[300]:t.palette.grey[800],s=t.palette.mode==="light"?t.palette.grey.A100:t.palette.grey[700];return F({},t.typography.button,{minWidth:64,padding:"6px 16px",borderRadius:(t.vars||t).shape.borderRadius,transition:t.transitions.create(["background-color","box-shadow","border-color","color"],{duration:t.transitions.duration.short}),"&:hover":F({textDecoration:"none",backgroundColor:t.vars?`rgba(${t.vars.palette.text.primaryChannel} / ${t.vars.palette.action.hoverOpacity})`:Po(t.palette.text.primary,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},e.variant==="text"&&e.color!=="inherit"&&{backgroundColor:t.vars?`rgba(${t.vars.palette[e.color].mainChannel} / ${t.vars.palette.action.hoverOpacity})`:Po(t.palette[e.color].main,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},e.variant==="outlined"&&e.color!=="inherit"&&{border:`1px solid ${(t.vars||t).palette[e.color].main}`,backgroundColor:t.vars?`rgba(${t.vars.palette[e.color].mainChannel} / ${t.vars.palette.action.hoverOpacity})`:Po(t.palette[e.color].main,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},e.variant==="contained"&&{backgroundColor:t.vars?t.vars.palette.Button.inheritContainedHoverBg:s,boxShadow:(t.vars||t).shadows[4],"@media (hover: none)":{boxShadow:(t.vars||t).shadows[2],backgroundColor:(t.vars||t).palette.grey[300]}},e.variant==="contained"&&e.color!=="inherit"&&{backgroundColor:(t.vars||t).palette[e.color].dark,"@media (hover: none)":{backgroundColor:(t.vars||t).palette[e.color].main}}),"&:active":F({},e.variant==="contained"&&{boxShadow:(t.vars||t).shadows[8]}),[`&.${Fu.focusVisible}`]:F({},e.variant==="contained"&&{boxShadow:(t.vars||t).shadows[6]}),[`&.${Fu.disabled}`]:F({color:(t.vars||t).palette.action.disabled},e.variant==="outlined"&&{border:`1px solid ${(t.vars||t).palette.action.disabledBackground}`},e.variant==="contained"&&{color:(t.vars||t).palette.action.disabled,boxShadow:(t.vars||t).shadows[0],backgroundColor:(t.vars||t).palette.action.disabledBackground})},e.variant==="text"&&{padding:"6px 8px"},e.variant==="text"&&e.color!=="inherit"&&{color:(t.vars||t).palette[e.color].main},e.variant==="outlined"&&{padding:"5px 15px",border:"1px solid currentColor"},e.variant==="outlined"&&e.color!=="inherit"&&{color:(t.vars||t).palette[e.color].main,border:t.vars?`1px solid rgba(${t.vars.palette[e.color].mainChannel} / 0.5)`:`1px solid ${Po(t.palette[e.color].main,.5)}`},e.variant==="contained"&&{color:t.vars?t.vars.palette.text.primary:(n=(r=t.palette).getContrastText)==null?void 0:n.call(r,t.palette.grey[300]),backgroundColor:t.vars?t.vars.palette.Button.inheritContainedBg:i,boxShadow:(t.vars||t).shadows[2]},e.variant==="contained"&&e.color!=="inherit"&&{color:(t.vars||t).palette[e.color].contrastText,backgroundColor:(t.vars||t).palette[e.color].main},e.color==="inherit"&&{color:"inherit",borderColor:"currentColor"},e.size==="small"&&e.variant==="text"&&{padding:"4px 5px",fontSize:t.typography.pxToRem(13)},e.size==="large"&&e.variant==="text"&&{padding:"8px 11px",fontSize:t.typography.pxToRem(15)},e.size==="small"&&e.variant==="outlined"&&{padding:"3px 9px",fontSize:t.typography.pxToRem(13)},e.size==="large"&&e.variant==="outlined"&&{padding:"7px 21px",fontSize:t.typography.pxToRem(15)},e.size==="small"&&e.variant==="contained"&&{padding:"4px 10px",fontSize:t.typography.pxToRem(13)},e.size==="large"&&e.variant==="contained"&&{padding:"8px 22px",fontSize:t.typography.pxToRem(15)},e.fullWidth&&{width:"100%"})},({ownerState:t})=>t.disableElevation&&{boxShadow:"none","&:hover":{boxShadow:"none"},[`&.${Fu.focusVisible}`]:{boxShadow:"none"},"&:active":{boxShadow:"none"},[`&.${Fu.disabled}`]:{boxShadow:"none"}}),g7=Jt("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.startIcon,e[`iconSize${Xe(n.size)}`]]}})(({ownerState:t})=>F({display:"inherit",marginRight:8,marginLeft:-4},t.size==="small"&&{marginLeft:-2},JC(t))),m7=Jt("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.endIcon,e[`iconSize${Xe(n.size)}`]]}})(({ownerState:t})=>F({display:"inherit",marginRight:-4,marginLeft:8},t.size==="small"&&{marginRight:-2},JC(t))),y7=A.forwardRef(function(e,n){const r=A.useContext(c7),i=A.useContext(f7),s=Sv(r,e),o=Wi({props:s,name:"MuiButton"}),{children:a,color:l="primary",component:c="button",className:u,disabled:f=!1,disableElevation:d=!1,disableFocusRipple:h=!1,endIcon:p,focusVisibleClassName:g,fullWidth:E=!1,size:m="medium",startIcon:y,type:v,variant:b="text"}=o,T=Ge(o,d7),S=F({},o,{color:l,component:c,disabled:f,disableElevation:d,disableFocusRipple:h,fullWidth:E,size:m,type:v,variant:b}),P=h7(S),R=y&&N.jsx(g7,{className:P.startIcon,ownerState:S,children:y}),O=p&&N.jsx(m7,{className:P.endIcon,ownerState:S,children:p}),L=i||"";return N.jsxs(p7,F({ownerState:S,className:et(r.className,P.root,u,L),component:c,disabled:f,focusRipple:!h,focusVisibleClassName:et(P.focusVisible,g),ref:n,type:v},T,{classes:P,children:[R,a,O]}))}),Du=y7,v7=A.createContext(),Yw=v7;function _7(t){return $i("MuiGrid",t)}const b7=[0,1,2,3,4,5,6,7,8,9,10],E7=["column-reverse","column","row-reverse","row"],w7=["nowrap","wrap-reverse","wrap"],qa=["auto",!0,1,2,3,4,5,6,7,8,9,10,11,12],lc=Gi("MuiGrid",["root","container","item","zeroMinWidth",...b7.map(t=>`spacing-xs-${t}`),...E7.map(t=>`direction-xs-${t}`),...w7.map(t=>`wrap-xs-${t}`),...qa.map(t=>`grid-xs-${t}`),...qa.map(t=>`grid-sm-${t}`),...qa.map(t=>`grid-md-${t}`),...qa.map(t=>`grid-lg-${t}`),...qa.map(t=>`grid-xl-${t}`)]),x7=["className","columns","columnSpacing","component","container","direction","item","rowSpacing","spacing","wrap","zeroMinWidth"];function Bo(t){const e=parseFloat(t);return`${e}${String(t).replace(String(e),"")||"px"}`}function T7({theme:t,ownerState:e}){let n;return t.breakpoints.keys.reduce((r,i)=>{let s={};if(e[i]&&(n=e[i]),!n)return r;if(n===!0)s={flexBasis:0,flexGrow:1,maxWidth:"100%"};else if(n==="auto")s={flexBasis:"auto",flexGrow:0,flexShrink:0,maxWidth:"none",width:"auto"};else{const o=Mh({values:e.columns,breakpoints:t.breakpoints.values}),a=typeof o=="object"?o[i]:o;if(a==null)return r;const l=`${Math.round(n/a*1e8)/1e6}%`;let c={};if(e.container&&e.item&&e.columnSpacing!==0){const u=t.spacing(e.columnSpacing);if(u!=="0px"){const f=`calc(${l} + ${Bo(u)})`;c={flexBasis:f,maxWidth:f}}}s=F({flexBasis:l,flexGrow:0,maxWidth:l},c)}return t.breakpoints.values[i]===0?Object.assign(r,s):r[t.breakpoints.up(i)]=s,r},{})}function S7({theme:t,ownerState:e}){const n=Mh({values:e.direction,breakpoints:t.breakpoints.values});return Dn({theme:t},n,r=>{const i={flexDirection:r};return r.indexOf("column")===0&&(i[`& > .${lc.item}`]={maxWidth:"none"}),i})}function e2({breakpoints:t,values:e}){let n="";Object.keys(e).forEach(i=>{n===""&&e[i]!==0&&(n=i)});const r=Object.keys(t).sort((i,s)=>t[i]-t[s]);return r.slice(0,r.indexOf(n))}function P7({theme:t,ownerState:e}){const{container:n,rowSpacing:r}=e;let i={};if(n&&r!==0){const s=Mh({values:r,breakpoints:t.breakpoints.values});let o;typeof s=="object"&&(o=e2({breakpoints:t.breakpoints.values,values:s})),i=Dn({theme:t},s,(a,l)=>{var c;const u=t.spacing(a);return u!=="0px"?{marginTop:`-${Bo(u)}`,[`& > .${lc.item}`]:{paddingTop:Bo(u)}}:(c=o)!=null&&c.includes(l)?{}:{marginTop:0,[`& > .${lc.item}`]:{paddingTop:0}}})}return i}function A7({theme:t,ownerState:e}){const{container:n,columnSpacing:r}=e;let i={};if(n&&r!==0){const s=Mh({values:r,breakpoints:t.breakpoints.values});let o;typeof s=="object"&&(o=e2({breakpoints:t.breakpoints.values,values:s})),i=Dn({theme:t},s,(a,l)=>{var c;const u=t.spacing(a);return u!=="0px"?{width:`calc(100% + ${Bo(u)})`,marginLeft:`-${Bo(u)}`,[`& > .${lc.item}`]:{paddingLeft:Bo(u)}}:(c=o)!=null&&c.includes(l)?{}:{width:"100%",marginLeft:0,[`& > .${lc.item}`]:{paddingLeft:0}}})}return i}function C7(t,e,n={}){if(!t||t<=0)return[];if(typeof t=="string"&&!Number.isNaN(Number(t))||typeof t=="number")return[n[`spacing-xs-${String(t)}`]];const r=[];return e.forEach(i=>{const s=t[i];Number(s)>0&&r.push(n[`spacing-${i}-${String(s)}`])}),r}const L7=Jt("div",{name:"MuiGrid",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t,{container:r,direction:i,item:s,spacing:o,wrap:a,zeroMinWidth:l,breakpoints:c}=n;let u=[];r&&(u=C7(o,c,e));const f=[];return c.forEach(d=>{const h=n[d];h&&f.push(e[`grid-${d}-${String(h)}`])}),[e.root,r&&e.container,s&&e.item,l&&e.zeroMinWidth,...u,i!=="row"&&e[`direction-xs-${String(i)}`],a!=="wrap"&&e[`wrap-xs-${String(a)}`],...f]}})(({ownerState:t})=>F({boxSizing:"border-box"},t.container&&{display:"flex",flexWrap:"wrap",width:"100%"},t.item&&{margin:0},t.zeroMinWidth&&{minWidth:0},t.wrap!=="wrap"&&{flexWrap:t.wrap}),S7,P7,A7,T7);function R7(t,e){if(!t||t<=0)return[];if(typeof t=="string"&&!Number.isNaN(Number(t))||typeof t=="number")return[`spacing-xs-${String(t)}`];const n=[];return e.forEach(r=>{const i=t[r];if(Number(i)>0){const s=`spacing-${r}-${String(i)}`;n.push(s)}}),n}const O7=t=>{const{classes:e,container:n,direction:r,item:i,spacing:s,wrap:o,zeroMinWidth:a,breakpoints:l}=t;let c=[];n&&(c=R7(s,l));const u=[];l.forEach(d=>{const h=t[d];h&&u.push(`grid-${d}-${String(h)}`)});const f={root:["root",n&&"container",i&&"item",a&&"zeroMinWidth",...c,r!=="row"&&`direction-xs-${String(r)}`,o!=="wrap"&&`wrap-xs-${String(o)}`,...u]};return Bs(f,_7,e)},I7=A.forwardRef(function(e,n){const r=Wi({props:e,name:"MuiGrid"}),{breakpoints:i}=zv(),s=Fv(r),{className:o,columns:a,columnSpacing:l,component:c="div",container:u=!1,direction:f="row",item:d=!1,rowSpacing:h,spacing:p=0,wrap:g="wrap",zeroMinWidth:E=!1}=s,m=Ge(s,x7),y=h||p,v=l||p,b=A.useContext(Yw),T=u?a||12:b,S={},P=F({},m);i.keys.forEach(L=>{m[L]!=null&&(S[L]=m[L],delete P[L])});const R=F({},s,{columns:T,container:u,direction:f,item:d,rowSpacing:y,columnSpacing:v,wrap:g,zeroMinWidth:E,spacing:p},S,{breakpoints:i.keys}),O=O7(R);return N.jsx(Yw.Provider,{value:T,children:N.jsx(L7,F({ownerState:R,className:et(O.root,o),as:c,ref:n},P))})}),ao=I7,M7=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"];function A0(t){return`scale(${t}, ${t**2})`}const k7={entering:{opacity:1,transform:A0(1)},entered:{opacity:1,transform:"none"}},Tg=typeof navigator<"u"&&/^((?!chrome|android).)*(safari|mobile)/i.test(navigator.userAgent)&&/(os |version\/)15(.|_)4/i.test(navigator.userAgent),t2=A.forwardRef(function(e,n){const{addEndListener:r,appear:i=!0,children:s,easing:o,in:a,onEnter:l,onEntered:c,onEntering:u,onExit:f,onExited:d,onExiting:h,style:p,timeout:g="auto",TransitionComponent:E=YW}=e,m=Ge(e,M7),y=A.useRef(),v=A.useRef(),b=zv(),T=A.useRef(null),S=Bi(T,s.ref,n),P=X=>q=>{if(X){const J=T.current;q===void 0?X(J):X(J,q)}},R=P(u),O=P((X,q)=>{n9(X);const{duration:J,delay:D,easing:G}=Ow({style:p,timeout:g,easing:o},{mode:"enter"});let Y;g==="auto"?(Y=b.transitions.getAutoHeightDuration(X.clientHeight),v.current=Y):Y=J,X.style.transition=[b.transitions.create("opacity",{duration:Y,delay:D}),b.transitions.create("transform",{duration:Tg?Y:Y*.666,delay:D,easing:G})].join(","),l&&l(X,q)}),L=P(c),M=P(h),j=P(X=>{const{duration:q,delay:J,easing:D}=Ow({style:p,timeout:g,easing:o},{mode:"exit"});let G;g==="auto"?(G=b.transitions.getAutoHeightDuration(X.clientHeight),v.current=G):G=q,X.style.transition=[b.transitions.create("opacity",{duration:G,delay:J}),b.transitions.create("transform",{duration:Tg?G:G*.666,delay:Tg?J:J||G*.333,easing:D})].join(","),X.style.opacity=0,X.style.transform=A0(.75),f&&f(X)}),U=P(d),V=X=>{g==="auto"&&(y.current=setTimeout(X,v.current||0)),r&&r(T.current,X)};return A.useEffect(()=>()=>{clearTimeout(y.current)},[]),N.jsx(E,F({appear:i,in:a,nodeRef:T,onEnter:O,onEntered:L,onEntering:R,onExit:j,onExited:U,onExiting:M,addEndListener:V,timeout:g==="auto"?null:g},m,{children:(X,q)=>A.cloneElement(s,F({style:F({opacity:0,transform:A0(.75),visibility:X==="exited"&&!a?"hidden":void 0},k7[X],p,s.props.style),ref:S},q))}))});t2.muiSupportAuto=!0;const Kw=t2;function N7(t){return $i("MuiTooltip",t)}const F7=Gi("MuiTooltip",["popper","popperInteractive","popperArrow","popperClose","tooltip","tooltipArrow","touch","tooltipPlacementLeft","tooltipPlacementRight","tooltipPlacementTop","tooltipPlacementBottom","arrow"]),zr=F7,D7=["arrow","children","classes","components","componentsProps","describeChild","disableFocusListener","disableHoverListener","disableInteractive","disableTouchListener","enterDelay","enterNextDelay","enterTouchDelay","followCursor","id","leaveDelay","leaveTouchDelay","onClose","onOpen","open","placement","PopperComponent","PopperProps","slotProps","slots","title","TransitionComponent","TransitionProps"];function B7(t){return Math.round(t*1e5)/1e5}const z7=t=>{const{classes:e,disableInteractive:n,arrow:r,touch:i,placement:s}=t,o={popper:["popper",!n&&"popperInteractive",r&&"popperArrow"],tooltip:["tooltip",r&&"tooltipArrow",i&&"touch",`tooltipPlacement${Xe(s.split("-")[0])}`],arrow:["arrow"]};return Bs(o,N7,e)},U7=Jt(QC,{name:"MuiTooltip",slot:"Popper",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.popper,!n.disableInteractive&&e.popperInteractive,n.arrow&&e.popperArrow,!n.open&&e.popperClose]}})(({theme:t,ownerState:e,open:n})=>F({zIndex:(t.vars||t).zIndex.tooltip,pointerEvents:"none"},!e.disableInteractive&&{pointerEvents:"auto"},!n&&{pointerEvents:"none"},e.arrow&&{[`&[data-popper-placement*="bottom"] .${zr.arrow}`]:{top:0,marginTop:"-0.71em","&::before":{transformOrigin:"0 100%"}},[`&[data-popper-placement*="top"] .${zr.arrow}`]:{bottom:0,marginBottom:"-0.71em","&::before":{transformOrigin:"100% 0"}},[`&[data-popper-placement*="right"] .${zr.arrow}`]:F({},e.isRtl?{right:0,marginRight:"-0.71em"}:{left:0,marginLeft:"-0.71em"},{height:"1em",width:"0.71em","&::before":{transformOrigin:"100% 100%"}}),[`&[data-popper-placement*="left"] .${zr.arrow}`]:F({},e.isRtl?{left:0,marginLeft:"-0.71em"}:{right:0,marginRight:"-0.71em"},{height:"1em",width:"0.71em","&::before":{transformOrigin:"0 0"}})})),j7=Jt("div",{name:"MuiTooltip",slot:"Tooltip",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.tooltip,n.touch&&e.touch,n.arrow&&e.tooltipArrow,e[`tooltipPlacement${Xe(n.placement.split("-")[0])}`]]}})(({theme:t,ownerState:e})=>F({backgroundColor:t.vars?t.vars.palette.Tooltip.bg:Po(t.palette.grey[700],.92),borderRadius:(t.vars||t).shape.borderRadius,color:(t.vars||t).palette.common.white,fontFamily:t.typography.fontFamily,padding:"4px 8px",fontSize:t.typography.pxToRem(11),maxWidth:300,margin:2,wordWrap:"break-word",fontWeight:t.typography.fontWeightMedium},e.arrow&&{position:"relative",margin:0},e.touch&&{padding:"8px 16px",fontSize:t.typography.pxToRem(14),lineHeight:`${B7(16/14)}em`,fontWeight:t.typography.fontWeightRegular},{[`.${zr.popper}[data-popper-placement*="left"] &`]:F({transformOrigin:"right center"},e.isRtl?F({marginLeft:"14px"},e.touch&&{marginLeft:"24px"}):F({marginRight:"14px"},e.touch&&{marginRight:"24px"})),[`.${zr.popper}[data-popper-placement*="right"] &`]:F({transformOrigin:"left center"},e.isRtl?F({marginRight:"14px"},e.touch&&{marginRight:"24px"}):F({marginLeft:"14px"},e.touch&&{marginLeft:"24px"})),[`.${zr.popper}[data-popper-placement*="top"] &`]:F({transformOrigin:"center bottom",marginBottom:"14px"},e.touch&&{marginBottom:"24px"}),[`.${zr.popper}[data-popper-placement*="bottom"] &`]:F({transformOrigin:"center top",marginTop:"14px"},e.touch&&{marginTop:"24px"})})),V7=Jt("span",{name:"MuiTooltip",slot:"Arrow",overridesResolver:(t,e)=>e.arrow})(({theme:t})=>({overflow:"hidden",position:"absolute",width:"1em",height:"0.71em",boxSizing:"border-box",color:t.vars?t.vars.palette.Tooltip.bg:Po(t.palette.grey[700],.9),"&::before":{content:'""',margin:"auto",display:"block",width:"100%",height:"100%",backgroundColor:"currentColor",transform:"rotate(45deg)"}}));let Bu=!1,Sg=null,Za={x:0,y:0};function zu(t,e){return n=>{e&&e(n),t(n)}}const $7=A.forwardRef(function(e,n){var r,i,s,o,a,l,c,u,f,d,h,p,g,E,m,y,v,b,T;const S=Wi({props:e,name:"MuiTooltip"}),{arrow:P=!1,children:R,components:O={},componentsProps:L={},describeChild:M=!1,disableFocusListener:j=!1,disableHoverListener:U=!1,disableInteractive:V=!1,disableTouchListener:X=!1,enterDelay:q=100,enterNextDelay:J=0,enterTouchDelay:D=700,followCursor:G=!1,id:Y,leaveDelay:re=0,leaveTouchDelay:ee=1500,onClose:tt,onOpen:he,open:Re,placement:ke="bottom",PopperComponent:ue,PopperProps:Le={},slotProps:Q={},slots:we={},title:it,TransitionComponent:se=Kw,TransitionProps:ie}=S,xe=Ge(S,D7),te=A.isValidElement(R)?R:N.jsx("span",{children:R}),ve=zv(),nt=ve.direction==="rtl",[_e,Ne]=A.useState(),[be,Oe]=A.useState(null),Vt=A.useRef(!1),en=V||G,Pe=A.useRef(),Fe=A.useRef(),dt=A.useRef(),tn=A.useRef(),[nn,Z]=H8({controlled:Re,default:!1,name:"Tooltip",state:"open"});let Mt=nn;const er=W8(Y),xn=A.useRef(),Xi=A.useCallback(()=>{xn.current!==void 0&&(document.body.style.WebkitUserSelect=xn.current,xn.current=void 0),clearTimeout(tn.current)},[]);A.useEffect(()=>()=>{clearTimeout(Pe.current),clearTimeout(Fe.current),clearTimeout(dt.current),Xi()},[Xi]);const zc=ne=>{clearTimeout(Sg),Bu=!0,Z(!0),he&&!Mt&&he(ne)},zs=sl(ne=>{clearTimeout(Sg),Sg=setTimeout(()=>{Bu=!1},800+re),Z(!1),tt&&Mt&&tt(ne),clearTimeout(Pe.current),Pe.current=setTimeout(()=>{Vt.current=!1},ve.transitions.duration.shortest)}),wa=ne=>{Vt.current&&ne.type!=="touchstart"||(_e&&_e.removeAttribute("title"),clearTimeout(Fe.current),clearTimeout(dt.current),q||Bu&&J?Fe.current=setTimeout(()=>{zc(ne)},Bu?J:q):zc(ne))},Uc=ne=>{clearTimeout(Fe.current),clearTimeout(dt.current),dt.current=setTimeout(()=>{zs(ne)},re)},{isFocusVisibleRef:Yi,onBlur:Wh,onFocus:Hh,ref:jc}=yC(),[,xa]=A.useState(!1),Us=ne=>{Wh(ne),Yi.current===!1&&(xa(!1),Uc(ne))},Vc=ne=>{_e||Ne(ne.currentTarget),Hh(ne),Yi.current===!0&&(xa(!0),wa(ne))},$c=ne=>{Vt.current=!0;const Nt=te.props;Nt.onTouchStart&&Nt.onTouchStart(ne)},Gc=wa,Ta=Uc,Xh=ne=>{$c(ne),clearTimeout(dt.current),clearTimeout(Pe.current),Xi(),xn.current=document.body.style.WebkitUserSelect,document.body.style.WebkitUserSelect="none",tn.current=setTimeout(()=>{document.body.style.WebkitUserSelect=xn.current,wa(ne)},D)},Yh=ne=>{te.props.onTouchEnd&&te.props.onTouchEnd(ne),Xi(),clearTimeout(dt.current),dt.current=setTimeout(()=>{zs(ne)},ee)};A.useEffect(()=>{if(!Mt)return;function ne(Nt){(Nt.key==="Escape"||Nt.key==="Esc")&&zs(Nt)}return document.addEventListener("keydown",ne),()=>{document.removeEventListener("keydown",ne)}},[zs,Mt]);const Kh=Bi(te.ref,jc,Ne,n);!it&&it!==0&&(Mt=!1);const ni=A.useRef(),qh=ne=>{const Nt=te.props;Nt.onMouseMove&&Nt.onMouseMove(ne),Za={x:ne.clientX,y:ne.clientY},ni.current&&ni.current.update()},Ki={},js=typeof it=="string";M?(Ki.title=!Mt&&js&&!U?it:null,Ki["aria-describedby"]=Mt?er:null):(Ki["aria-label"]=js?it:null,Ki["aria-labelledby"]=Mt&&!js?er:null);const kt=F({},Ki,xe,te.props,{className:et(xe.className,te.props.className),onTouchStart:$c,ref:Kh},G?{onMouseMove:qh}:{}),qi={};X||(kt.onTouchStart=Xh,kt.onTouchEnd=Yh),U||(kt.onMouseOver=zu(Gc,kt.onMouseOver),kt.onMouseLeave=zu(Ta,kt.onMouseLeave),en||(qi.onMouseOver=Gc,qi.onMouseLeave=Ta)),j||(kt.onFocus=zu(Vc,kt.onFocus),kt.onBlur=zu(Us,kt.onBlur),en||(qi.onFocus=Vc,qi.onBlur=Us));const Wc=A.useMemo(()=>{var ne;let Nt=[{name:"arrow",enabled:!!be,options:{element:be,padding:4}}];return(ne=Le.popperOptions)!=null&&ne.modifiers&&(Nt=Nt.concat(Le.popperOptions.modifiers)),F({},Le.popperOptions,{modifiers:Nt})},[be,Le]),Zi=F({},S,{isRtl:nt,arrow:P,disableInteractive:en,placement:ke,PopperComponentProp:ue,touch:Vt.current}),Vs=z7(Zi),Sa=(r=(i=we.popper)!=null?i:O.Popper)!=null?r:U7,Pa=(s=(o=(a=we.transition)!=null?a:O.Transition)!=null?o:se)!=null?s:Kw,Aa=(l=(c=we.tooltip)!=null?c:O.Tooltip)!=null?l:j7,$s=(u=(f=we.arrow)!=null?f:O.Arrow)!=null?u:V7,Sr=al(Sa,F({},Le,(d=Q.popper)!=null?d:L.popper,{className:et(Vs.popper,Le==null?void 0:Le.className,(h=(p=Q.popper)!=null?p:L.popper)==null?void 0:h.className)}),Zi),Qi=al(Pa,F({},ie,(g=Q.transition)!=null?g:L.transition),Zi),Ji=al(Aa,F({},(E=Q.tooltip)!=null?E:L.tooltip,{className:et(Vs.tooltip,(m=(y=Q.tooltip)!=null?y:L.tooltip)==null?void 0:m.className)}),Zi),Gs=al($s,F({},(v=Q.arrow)!=null?v:L.arrow,{className:et(Vs.arrow,(b=(T=Q.arrow)!=null?T:L.arrow)==null?void 0:b.className)}),Zi);return N.jsxs(A.Fragment,{children:[A.cloneElement(te,kt),N.jsx(Sa,F({as:ue??QC,placement:ke,anchorEl:G?{getBoundingClientRect:()=>({top:Za.y,left:Za.x,right:Za.x,bottom:Za.y,width:0,height:0})}:_e,popperRef:ni,open:_e?Mt:!1,id:er,transition:!0},qi,Sr,{popperOptions:Wc,children:({TransitionProps:ne})=>N.jsx(Pa,F({timeout:ve.transitions.duration.shorter},ne,Qi,{children:N.jsxs(Aa,F({},Ji,{children:[it,P?N.jsx($s,F({},Gs,{ref:Oe})):null]}))}))}))]})}),G7=$7,Uu=t=>({width:"auto",maxWidth:"102px",height:"30px",backgroundColor:"rgba(255, 255, 254, 1)",color:t?"rgba(24, 144, 185, 1)":"#222",border:t?"3px solid rgba(24, 144, 185, .6)":"2px solid #fff",borderRadius:"14px",":hover":{backgroundColor:"rgba(245, 245, 245, 1)",border:t?"3px solid rgba(24, 144, 185, .6)":"2px solid rgba(245, 245, 245, 1)",boxShadow:"0 0 10px #222"},fontSize:"12px",fontWeight:t?600:400,marginRight:"12px"}),W7=()=>({padding:"12px 10px",display:"flex",flexDirection:"row"}),qw=()=>({color:"#d9d9d9",margin:"4px 12px 0 0",fontSize:"16px",transform:"all .4s ease-in-out",":hover":{fontWeight:"600",cursor:"default"}}),H7=()=>({width:"1px",height:"30px",backgroundColor:"#d9d9d9",marginRight:"10px"}),ju=Fc(N.jsx("path",{d:"M9 16.17 4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"}),"Check"),X7=Fc(N.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"}),"Error"),Y7=Fc(N.jsx("path",{d:"M21 3H3c-1.11 0-2 .89-2 2v12c0 1.1.89 2 2 2h5v2h8v-2h5c1.1 0 1.99-.9 1.99-2L23 5c0-1.11-.9-2-2-2zm0 14H3V5h18v12z"}),"PersonalVideo"),K7=Fc([N.jsx("circle",{cx:"8",cy:"17",r:"1"},"0"),N.jsx("circle",{cx:"12",cy:"17",r:"1"},"1"),N.jsx("circle",{cx:"16",cy:"17",r:"1"},"2"),N.jsx("path",{d:"M13 5.08V3h-2v2.08C7.61 5.57 5 8.47 5 12v2h14v-2c0-3.53-2.61-6.43-6-6.92z"},"3"),N.jsx("circle",{cx:"8",cy:"20",r:"1"},"4"),N.jsx("circle",{cx:"12",cy:"20",r:"1"},"5"),N.jsx("circle",{cx:"16",cy:"20",r:"1"},"6")],"Shower"),q7=Fc([N.jsx("path",{d:"M8.55 12c-1.07-.71-2.25-1.27-3.53-1.61 1.28.34 2.46.9 3.53 1.61zm10.43-1.61c-1.29.34-2.49.91-3.57 1.64 1.08-.73 2.28-1.3 3.57-1.64z"},"0"),N.jsx("path",{d:"M15.49 9.63c-.18-2.79-1.31-5.51-3.43-7.63-2.14 2.14-3.32 4.86-3.55 7.63 1.28.68 2.46 1.56 3.49 2.63 1.03-1.06 2.21-1.94 3.49-2.63zm-6.5 2.65c-.14-.1-.3-.19-.45-.29.15.11.31.19.45.29zm6.42-.25c-.13.09-.27.16-.4.26.13-.1.27-.17.4-.26zM12 15.45C9.85 12.17 6.18 10 2 10c0 5.32 3.36 9.82 8.03 11.49.63.23 1.29.4 1.97.51.68-.12 1.33-.29 1.97-.51C18.64 19.82 22 15.32 22 10c-4.18 0-7.85 2.17-10 5.45z"},"1")],"Spa"),Z7=({handleIrrigating:t,handleCrops:e,handleUnits:n,handleFailure:r,filterByIrrigating:i,filterByCrop:s,showUnits:o,showFailures:a})=>N.jsxs(ps,{sx:W7,children:[N.jsx(Dw,{sx:qw,children:"Filter"}),N.jsx(Du,{id:"irrigating",onClick:t,sx:Uu(i),endIcon:i?N.jsx(ju,{color:"primary"}):N.jsx(K7,{}),children:"Irrigating"}),N.jsx(Du,{id:"Crops",onClick:e,sx:Uu(s),endIcon:s?N.jsx(ju,{color:"primary"}):N.jsx(q7,{}),children:"Crops"}),N.jsx(Du,{id:"Failures",onClick:r,sx:Uu(a),endIcon:a?N.jsx(ju,{color:"primary"}):N.jsx(X7,{}),children:"Failures"}),N.jsx(ps,{sx:H7}),N.jsx(Dw,{sx:qw,children:"Complement"}),N.jsx(Du,{id:"Units",onClick:n,sx:Uu(o),endIcon:o?N.jsx(ju,{color:"primary"}):N.jsx(Y7,{}),children:"Units"})]}),Q7=async t=>{try{return(await Th.get(`units/${t}`)).data}catch(e){console.log(e)}},J7=async t=>{try{return(await Th.get(`unitsMarkers/${t}`)).data}catch(e){console.log(e)}},eX=()=>{const{data:t,error:e,isLoading:n}=vh("units-la-vega-baja.json",Q7,{suspense:!0});return{dataUnits:t,errorUnits:e,loadingUnits:n}},tX=()=>{const{data:t,error:e,isLoading:n}=vh("unitsMarkers.json",J7,{suspense:!0});return{dataMarkers:t,errorMarkers:e,loadingMarkers:n}},nX="/your-crop-app/assets/avocado-pattern-86b661b5.png",rX="/your-crop-app/assets/markerUnit-d0082f83.png",iX={avocado_pattern:nX,markerUnit:rX},sX={marker:{x:0,y:0,width:512,height:512}},oX=t=>t.features.map(n=>new Ic({id:`name:${n.properties.name};id:${n.properties.deviceId};connected:${n.properties.connected};irrigating:${n.properties.irrigating};failure:${n.properties.failure}`,data:[n.geometry,n.properties],pickable:!0,iconAtlas:iX.markerUnit,iconMapping:sX,getIcon:()=>"marker",sizeScale:12,getPosition:r=>r.coordinates,sizeUnits:"meters",sizeMinPixels:3,getSize:()=>8})),aX={height:"calc(100vh - 180px)",width:"100%",position:"relative",borderRadius:"0 0 10px 0"},lX=()=>{const{dataMap:t,errorMap:e,loadingMap:n}=F6(),{dataAreas:r,errorAreas:i,loadingAreas:s}=B6(),{dataMarkers:o,errorMarkers:a,loadingMarkers:l}=tX(),[c,u]=A.useState(!1),[f,d]=A.useState(!1),[h,p]=A.useState(!1),[g,E]=A.useState(!1),[m,y]=A.useState([]);if(n||s||l)return N.jsx("h2",{children:"Loading map..."});if(e)return N.jsx("p",{children:e});if(i)return N.jsx("p",{children:i});if(a)return N.jsx("p",{children:a});function v(R){const O=R.center.split(";"),L=Number.parseFloat(O[0]),M=Number.parseFloat(O[1]),j=R.zoom;return{latitude:L,longitude:M,zoom:j,minZoom:13,maxZoom:17}}const b=()=>{f&&d(!1),g&&E(!1),u(R=>!R)},T=()=>{c&&u(!1),g&&E(!1),d(R=>!R)},S=()=>{c&&u(!1),f&&d(!1),E(R=>!R)},P=()=>{p(R=>!R)};return N.jsx(A.Suspense,{fallback:N.jsx("h2",{children:"Loading map..."}),children:N.jsxs(hU,{initialViewState:v(t),controller:!0,style:aX,layers:[C8(r,c,f,g),h&&oX(o),m],getCursor:R=>R8(R),getTooltip:R=>{if(R.object)return R.object.coordinates?M8(R):I8(R.object)},onHover:R=>{if(R.object){if(R.object.coordinates)return;const O=L8(r,R.object);y(O)}else m.length>0&&y([])},children:[N.jsx(UU,{id:"map",mapStyle:jU,mapboxAccessToken:VU,minZoom:13,maxZoom:17}),N.jsx(Z7,{handleIrrigating:b,handleCrops:T,handleUnits:P,handleFailure:S,filterByIrrigating:c,filterByCrop:f,showUnits:h,showFailures:g})]})})};function Hn(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+t+(n.length?" "+n.map(function(i){return"'"+i+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function zi(t){return!!t&&!!t[Ve]}function qr(t){var e;return!!t&&(function(n){if(!n||typeof n!="object")return!1;var r=Object.getPrototypeOf(n);if(r===null)return!0;var i=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;return i===Object||typeof i=="function"&&Function.toString.call(i)===yX}(t)||Array.isArray(t)||!!t[rx]||!!(!((e=t.constructor)===null||e===void 0)&&e[rx])||Kv(t)||qv(t))}function Os(t,e,n){n===void 0&&(n=!1),Ea(t)===0?(n?Object.keys:Uo)(t).forEach(function(r){n&&typeof r=="symbol"||e(r,t[r],t)}):t.forEach(function(r,i){return e(i,r,t)})}function Ea(t){var e=t[Ve];return e?e.i>3?e.i-4:e.i:Array.isArray(t)?1:Kv(t)?2:qv(t)?3:0}function zo(t,e){return Ea(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function cX(t,e){return Ea(t)===2?t.get(e):t[e]}function n2(t,e,n){var r=Ea(t);r===2?t.set(e,n):r===3?t.add(n):t[e]=n}function r2(t,e){return t===e?t!==0||1/t==1/e:t!=t&&e!=e}function Kv(t){return gX&&t instanceof Map}function qv(t){return mX&&t instanceof Set}function ls(t){return t.o||t.t}function Zv(t){if(Array.isArray(t))return Array.prototype.slice.call(t);var e=s2(t);delete e[Ve];for(var n=Uo(e),r=0;r<n.length;r++){var i=n[r],s=e[i];s.writable===!1&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(e[i]={configurable:!0,writable:!0,enumerable:s.enumerable,value:t[i]})}return Object.create(Object.getPrototypeOf(t),e)}function Qv(t,e){return e===void 0&&(e=!1),Jv(t)||zi(t)||!qr(t)||(Ea(t)>1&&(t.set=t.add=t.clear=t.delete=uX),Object.freeze(t),e&&Os(t,function(n,r){return Qv(r,!0)},!0)),t}function uX(){Hn(2)}function Jv(t){return t==null||typeof t!="object"||Object.isFrozen(t)}function br(t){var e=O0[t];return e||Hn(18,t),e}function fX(t,e){O0[t]||(O0[t]=e)}function C0(){return cc}function Pg(t,e){e&&(br("Patches"),t.u=[],t.s=[],t.v=e)}function _d(t){L0(t),t.p.forEach(dX),t.p=null}function L0(t){t===cc&&(cc=t.l)}function Zw(t){return cc={p:[],l:cc,h:t,m:!0,_:0}}function dX(t){var e=t[Ve];e.i===0||e.i===1?e.j():e.g=!0}function Ag(t,e){e._=e.p.length;var n=e.p[0],r=t!==void 0&&t!==n;return e.h.O||br("ES5").S(e,t,r),r?(n[Ve].P&&(_d(e),Hn(4)),qr(t)&&(t=bd(e,t),e.l||Ed(e,t)),e.u&&br("Patches").M(n[Ve].t,t,e.u,e.s)):t=bd(e,n,[]),_d(e),e.u&&e.v(e.u,e.s),t!==i2?t:void 0}function bd(t,e,n){if(Jv(e))return e;var r=e[Ve];if(!r)return Os(e,function(a,l){return Qw(t,r,e,a,l,n)},!0),e;if(r.A!==t)return e;if(!r.P)return Ed(t,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=r.i===4||r.i===5?r.o=Zv(r.k):r.o,s=i,o=!1;r.i===3&&(s=new Set(i),i.clear(),o=!0),Os(s,function(a,l){return Qw(t,r,i,a,l,n,o)}),Ed(t,i,!1),n&&t.u&&br("Patches").N(r,n,t.u,t.s)}return r.o}function Qw(t,e,n,r,i,s,o){if(zi(i)){var a=bd(t,i,s&&e&&e.i!==3&&!zo(e.R,r)?s.concat(r):void 0);if(n2(n,r,a),!zi(a))return;t.m=!1}else o&&n.add(i);if(qr(i)&&!Jv(i)){if(!t.h.D&&t._<1)return;bd(t,i),e&&e.A.l||Ed(t,i)}}function Ed(t,e,n){n===void 0&&(n=!1),!t.l&&t.h.D&&t.m&&Qv(e,n)}function Cg(t,e){var n=t[Ve];return(n?ls(n):t)[e]}function Jw(t,e){if(e in t)for(var n=Object.getPrototypeOf(t);n;){var r=Object.getOwnPropertyDescriptor(n,e);if(r)return r;n=Object.getPrototypeOf(n)}}function gi(t){t.P||(t.P=!0,t.l&&gi(t.l))}function Lg(t){t.o||(t.o=Zv(t.t))}function R0(t,e,n){var r=Kv(e)?br("MapSet").F(e,n):qv(e)?br("MapSet").T(e,n):t.O?function(i,s){var o=Array.isArray(i),a={i:o?1:0,A:s?s.A:C0(),P:!1,I:!1,R:{},l:s,t:i,k:null,o:null,j:null,C:!1},l=a,c=uc;o&&(l=[a],c=ll);var u=Proxy.revocable(l,c),f=u.revoke,d=u.proxy;return a.k=d,a.j=f,d}(e,n):br("ES5").J(e,n);return(n?n.A:C0()).p.push(r),r}function hX(t){return zi(t)||Hn(22,t),function e(n){if(!qr(n))return n;var r,i=n[Ve],s=Ea(n);if(i){if(!i.P&&(i.i<4||!br("ES5").K(i)))return i.t;i.I=!0,r=ex(n,s),i.I=!1}else r=ex(n,s);return Os(r,function(o,a){i&&cX(i.t,o)===a||n2(r,o,e(a))}),s===3?new Set(r):r}(t)}function ex(t,e){switch(e){case 2:return new Map(t);case 3:return Array.from(t)}return Zv(t)}function pX(){function t(s,o){var a=i[s];return a?a.enumerable=o:i[s]=a={configurable:!0,enumerable:o,get:function(){var l=this[Ve];return uc.get(l,s)},set:function(l){var c=this[Ve];uc.set(c,s,l)}},a}function e(s){for(var o=s.length-1;o>=0;o--){var a=s[o][Ve];if(!a.P)switch(a.i){case 5:r(a)&&gi(a);break;case 4:n(a)&&gi(a)}}}function n(s){for(var o=s.t,a=s.k,l=Uo(a),c=l.length-1;c>=0;c--){var u=l[c];if(u!==Ve){var f=o[u];if(f===void 0&&!zo(o,u))return!0;var d=a[u],h=d&&d[Ve];if(h?h.t!==f:!r2(d,f))return!0}}var p=!!o[Ve];return l.length!==Uo(o).length+(p?0:1)}function r(s){var o=s.k;if(o.length!==s.t.length)return!0;var a=Object.getOwnPropertyDescriptor(o,o.length-1);if(a&&!a.get)return!0;for(var l=0;l<o.length;l++)if(!o.hasOwnProperty(l))return!0;return!1}var i={};fX("ES5",{J:function(s,o){var a=Array.isArray(s),l=function(u,f){if(u){for(var d=Array(f.length),h=0;h<f.length;h++)Object.defineProperty(d,""+h,t(h,!0));return d}var p=s2(f);delete p[Ve];for(var g=Uo(p),E=0;E<g.length;E++){var m=g[E];p[m]=t(m,u||!!p[m].enumerable)}return Object.create(Object.getPrototypeOf(f),p)}(a,s),c={i:a?5:4,A:o?o.A:C0(),P:!1,I:!1,R:{},l:o,t:s,k:l,o:null,g:!1,C:!1};return Object.defineProperty(l,Ve,{value:c,writable:!0}),l},S:function(s,o,a){a?zi(o)&&o[Ve].A===s&&e(s.p):(s.u&&function l(c){if(c&&typeof c=="object"){var u=c[Ve];if(u){var f=u.t,d=u.k,h=u.R,p=u.i;if(p===4)Os(d,function(v){v!==Ve&&(f[v]!==void 0||zo(f,v)?h[v]||l(d[v]):(h[v]=!0,gi(u)))}),Os(f,function(v){d[v]!==void 0||zo(d,v)||(h[v]=!1,gi(u))});else if(p===5){if(r(u)&&(gi(u),h.length=!0),d.length<f.length)for(var g=d.length;g<f.length;g++)h[g]=!1;else for(var E=f.length;E<d.length;E++)h[E]=!0;for(var m=Math.min(d.length,f.length),y=0;y<m;y++)d.hasOwnProperty(y)||(h[y]=!0),h[y]===void 0&&l(d[y])}}}}(s.p[0]),e(s.p))},K:function(s){return s.i===4?n(s):r(s)}})}var tx,cc,e_=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",gX=typeof Map<"u",mX=typeof Set<"u",nx=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",i2=e_?Symbol.for("immer-nothing"):((tx={})["immer-nothing"]=!0,tx),rx=e_?Symbol.for("immer-draftable"):"__$immer_draftable",Ve=e_?Symbol.for("immer-state"):"__$immer_state",yX=""+Object.prototype.constructor,Uo=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:Object.getOwnPropertyNames,s2=Object.getOwnPropertyDescriptors||function(t){var e={};return Uo(t).forEach(function(n){e[n]=Object.getOwnPropertyDescriptor(t,n)}),e},O0={},uc={get:function(t,e){if(e===Ve)return t;var n=ls(t);if(!zo(n,e))return function(i,s,o){var a,l=Jw(s,o);return l?"value"in l?l.value:(a=l.get)===null||a===void 0?void 0:a.call(i.k):void 0}(t,n,e);var r=n[e];return t.I||!qr(r)?r:r===Cg(t.t,e)?(Lg(t),t.o[e]=R0(t.A.h,r,t)):r},has:function(t,e){return e in ls(t)},ownKeys:function(t){return Reflect.ownKeys(ls(t))},set:function(t,e,n){var r=Jw(ls(t),e);if(r!=null&&r.set)return r.set.call(t.k,n),!0;if(!t.P){var i=Cg(ls(t),e),s=i==null?void 0:i[Ve];if(s&&s.t===n)return t.o[e]=n,t.R[e]=!1,!0;if(r2(n,i)&&(n!==void 0||zo(t.t,e)))return!0;Lg(t),gi(t)}return t.o[e]===n&&(n!==void 0||e in t.o)||Number.isNaN(n)&&Number.isNaN(t.o[e])||(t.o[e]=n,t.R[e]=!0),!0},deleteProperty:function(t,e){return Cg(t.t,e)!==void 0||e in t.t?(t.R[e]=!1,Lg(t),gi(t)):delete t.R[e],t.o&&delete t.o[e],!0},getOwnPropertyDescriptor:function(t,e){var n=ls(t),r=Reflect.getOwnPropertyDescriptor(n,e);return r&&{writable:!0,configurable:t.i!==1||e!=="length",enumerable:r.enumerable,value:n[e]}},defineProperty:function(){Hn(11)},getPrototypeOf:function(t){return Object.getPrototypeOf(t.t)},setPrototypeOf:function(){Hn(12)}},ll={};Os(uc,function(t,e){ll[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}}),ll.deleteProperty=function(t,e){return ll.set.call(this,t,e,void 0)},ll.set=function(t,e,n){return uc.set.call(this,t[0],e,n,t[0])};var vX=function(){function t(n){var r=this;this.O=nx,this.D=!0,this.produce=function(i,s,o){if(typeof i=="function"&&typeof s!="function"){var a=s;s=i;var l=r;return function(g){var E=this;g===void 0&&(g=a);for(var m=arguments.length,y=Array(m>1?m-1:0),v=1;v<m;v++)y[v-1]=arguments[v];return l.produce(g,function(b){var T;return(T=s).call.apply(T,[E,b].concat(y))})}}var c;if(typeof s!="function"&&Hn(6),o!==void 0&&typeof o!="function"&&Hn(7),qr(i)){var u=Zw(r),f=R0(r,i,void 0),d=!0;try{c=s(f),d=!1}finally{d?_d(u):L0(u)}return typeof Promise<"u"&&c instanceof Promise?c.then(function(g){return Pg(u,o),Ag(g,u)},function(g){throw _d(u),g}):(Pg(u,o),Ag(c,u))}if(!i||typeof i!="object"){if((c=s(i))===void 0&&(c=i),c===i2&&(c=void 0),r.D&&Qv(c,!0),o){var h=[],p=[];br("Patches").M(i,c,h,p),o(h,p)}return c}Hn(21,i)},this.produceWithPatches=function(i,s){if(typeof i=="function")return function(c){for(var u=arguments.length,f=Array(u>1?u-1:0),d=1;d<u;d++)f[d-1]=arguments[d];return r.produceWithPatches(c,function(h){return i.apply(void 0,[h].concat(f))})};var o,a,l=r.produce(i,s,function(c,u){o=c,a=u});return typeof Promise<"u"&&l instanceof Promise?l.then(function(c){return[c,o,a]}):[l,o,a]},typeof(n==null?void 0:n.useProxies)=="boolean"&&this.setUseProxies(n.useProxies),typeof(n==null?void 0:n.autoFreeze)=="boolean"&&this.setAutoFreeze(n.autoFreeze)}var e=t.prototype;return e.createDraft=function(n){qr(n)||Hn(8),zi(n)&&(n=hX(n));var r=Zw(this),i=R0(this,n,void 0);return i[Ve].C=!0,L0(r),i},e.finishDraft=function(n,r){var i=n&&n[Ve],s=i.A;return Pg(s,r),Ag(void 0,s)},e.setAutoFreeze=function(n){this.D=n},e.setUseProxies=function(n){n&&!nx&&Hn(20),this.O=n},e.applyPatches=function(n,r){var i;for(i=r.length-1;i>=0;i--){var s=r[i];if(s.path.length===0&&s.op==="replace"){n=s.value;break}}i>-1&&(r=r.slice(i+1));var o=br("Patches").$;return zi(n)?o(n,r):this.produce(n,function(a){return o(a,r)})},t}(),_n=new vX,o2=_n.produce;_n.produceWithPatches.bind(_n);_n.setAutoFreeze.bind(_n);_n.setUseProxies.bind(_n);_n.applyPatches.bind(_n);_n.createDraft.bind(_n);_n.finishDraft.bind(_n);function ix(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function sx(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ix(Object(n),!0).forEach(function(r){_(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ix(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Ct(t){return"Minified Redux error #"+t+"; visit https://redux.js.org/Errors?code="+t+" for the full message or use the non-minified dev environment for full errors. "}var ox=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),Rg=function(){return Math.random().toString(36).substring(7).split("").join(".")},wd={INIT:"@@redux/INIT"+Rg(),REPLACE:"@@redux/REPLACE"+Rg(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+Rg()}};function _X(t){if(typeof t!="object"||t===null)return!1;for(var e=t;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function a2(t,e,n){var r;if(typeof e=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(Ct(0));if(typeof e=="function"&&typeof n>"u"&&(n=e,e=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(Ct(1));return n(a2)(t,e)}if(typeof t!="function")throw new Error(Ct(2));var i=t,s=e,o=[],a=o,l=!1;function c(){a===o&&(a=o.slice())}function u(){if(l)throw new Error(Ct(3));return s}function f(g){if(typeof g!="function")throw new Error(Ct(4));if(l)throw new Error(Ct(5));var E=!0;return c(),a.push(g),function(){if(E){if(l)throw new Error(Ct(6));E=!1,c();var y=a.indexOf(g);a.splice(y,1),o=null}}}function d(g){if(!_X(g))throw new Error(Ct(7));if(typeof g.type>"u")throw new Error(Ct(8));if(l)throw new Error(Ct(9));try{l=!0,s=i(s,g)}finally{l=!1}for(var E=o=a,m=0;m<E.length;m++){var y=E[m];y()}return g}function h(g){if(typeof g!="function")throw new Error(Ct(10));i=g,d({type:wd.REPLACE})}function p(){var g,E=f;return g={subscribe:function(y){if(typeof y!="object"||y===null)throw new Error(Ct(11));function v(){y.next&&y.next(u())}v();var b=E(v);return{unsubscribe:b}}},g[ox]=function(){return this},g}return d({type:wd.INIT}),r={dispatch:d,subscribe:f,getState:u,replaceReducer:h},r[ox]=p,r}function bX(t){Object.keys(t).forEach(function(e){var n=t[e],r=n(void 0,{type:wd.INIT});if(typeof r>"u")throw new Error(Ct(12));if(typeof n(void 0,{type:wd.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Ct(13))})}function EX(t){for(var e=Object.keys(t),n={},r=0;r<e.length;r++){var i=e[r];typeof t[i]=="function"&&(n[i]=t[i])}var s=Object.keys(n),o;try{bX(n)}catch(a){o=a}return function(l,c){if(l===void 0&&(l={}),o)throw o;for(var u=!1,f={},d=0;d<s.length;d++){var h=s[d],p=n[h],g=l[h],E=p(g,c);if(typeof E>"u")throw c&&c.type,new Error(Ct(14));f[h]=E,u=u||E!==g}return u=u||s.length!==Object.keys(l).length,u?f:l}}function xd(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.length===0?function(r){return r}:e.length===1?e[0]:e.reduce(function(r,i){return function(){return r(i.apply(void 0,arguments))}})}function wX(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(r){return function(){var i=r.apply(void 0,arguments),s=function(){throw new Error(Ct(15))},o={getState:i.getState,dispatch:function(){return s.apply(void 0,arguments)}},a=e.map(function(l){return l(o)});return s=xd.apply(void 0,a)(i.dispatch),sx(sx({},i),{},{dispatch:s})}}}function l2(t){var e=function(r){var i=r.dispatch,s=r.getState;return function(o){return function(a){return typeof a=="function"?a(i,s,t):o(a)}}};return e}var c2=l2();c2.withExtraArgument=l2;const ax=c2;var u2=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),xX=globalThis&&globalThis.__generator||function(t,e){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(u){return l([c,u])}}function l(c){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(s=c[0]&2?i.return:c[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,c[1])).done)return s;switch(i=0,s&&(c=[c[0]&2,s.value]),c[0]){case 0:case 1:s=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,i=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!s||c[1]>s[0]&&c[1]<s[3])){n.label=c[1];break}if(c[0]===6&&n.label<s[1]){n.label=s[1],s=c;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(c);break}s[2]&&n.ops.pop(),n.trys.pop();continue}c=e.call(t,n)}catch(u){c=[6,u],i=0}finally{r=s=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},ha=globalThis&&globalThis.__spreadArray||function(t,e){for(var n=0,r=e.length,i=t.length;n<r;n++,i++)t[i]=e[n];return t},TX=Object.defineProperty,SX=Object.defineProperties,PX=Object.getOwnPropertyDescriptors,lx=Object.getOwnPropertySymbols,AX=Object.prototype.hasOwnProperty,CX=Object.prototype.propertyIsEnumerable,cx=function(t,e,n){return e in t?TX(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n},Ii=function(t,e){for(var n in e||(e={}))AX.call(e,n)&&cx(t,n,e[n]);if(lx)for(var r=0,i=lx(e);r<i.length;r++){var n=i[r];CX.call(e,n)&&cx(t,n,e[n])}return t},Og=function(t,e){return SX(t,PX(e))},LX=function(t,e,n){return new Promise(function(r,i){var s=function(l){try{a(n.next(l))}catch(c){i(c)}},o=function(l){try{a(n.throw(l))}catch(c){i(c)}},a=function(l){return l.done?r(l.value):Promise.resolve(l.value).then(s,o)};a((n=n.apply(t,e)).next())})},RX=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?xd:xd.apply(null,arguments)};function OX(t){if(typeof t!="object"||t===null)return!1;var e=Object.getPrototypeOf(t);if(e===null)return!0;for(var n=e;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return e===n}function Mi(t,e){function n(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];if(e){var s=e.apply(void 0,r);if(!s)throw new Error("prepareAction did not return an object");return Ii(Ii({type:t,payload:s.payload},"meta"in s&&{meta:s.meta}),"error"in s&&{error:s.error})}return{type:t,payload:r[0]}}return n.toString=function(){return""+t},n.type=t,n.match=function(r){return r.type===t},n}var IX=function(t){u2(e,t);function e(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=t.apply(this,n)||this;return Object.setPrototypeOf(i,e.prototype),i}return Object.defineProperty(e,Symbol.species,{get:function(){return e},enumerable:!1,configurable:!0}),e.prototype.concat=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return t.prototype.concat.apply(this,n)},e.prototype.prepend=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.length===1&&Array.isArray(n[0])?new(e.bind.apply(e,ha([void 0],n[0].concat(this)))):new(e.bind.apply(e,ha([void 0],n.concat(this))))},e}(Array),MX=function(t){u2(e,t);function e(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=t.apply(this,n)||this;return Object.setPrototypeOf(i,e.prototype),i}return Object.defineProperty(e,Symbol.species,{get:function(){return e},enumerable:!1,configurable:!0}),e.prototype.concat=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return t.prototype.concat.apply(this,n)},e.prototype.prepend=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.length===1&&Array.isArray(n[0])?new(e.bind.apply(e,ha([void 0],n[0].concat(this)))):new(e.bind.apply(e,ha([void 0],n.concat(this))))},e}(Array);function I0(t){return qr(t)?o2(t,function(){}):t}function kX(t){return typeof t=="boolean"}function NX(){return function(e){return FX(e)}}function FX(t){t===void 0&&(t={});var e=t.thunk,n=e===void 0?!0:e;t.immutableCheck,t.serializableCheck,t.actionCreatorCheck;var r=new IX;return n&&(kX(n)?r.push(ax):r.push(ax.withExtraArgument(n.extraArgument))),r}var DX=!0;function BX(t){var e=NX(),n=t||{},r=n.reducer,i=r===void 0?void 0:r,s=n.middleware,o=s===void 0?e():s,a=n.devTools,l=a===void 0?!0:a,c=n.preloadedState,u=c===void 0?void 0:c,f=n.enhancers,d=f===void 0?void 0:f,h;if(typeof i=="function")h=i;else if(OX(i))h=EX(i);else throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');var p=o;typeof p=="function"&&(p=p(e));var g=wX.apply(void 0,p),E=xd;l&&(E=RX(Ii({trace:!DX},typeof l=="object"&&l)));var m=new MX(g),y=m;Array.isArray(d)?y=ha([g],d):typeof d=="function"&&(y=d(m));var v=E.apply(void 0,y);return a2(h,u,v)}function f2(t){var e={},n=[],r,i={addCase:function(s,o){var a=typeof s=="string"?s:s.type;if(!a)throw new Error("`builder.addCase` cannot be called with an empty action type");if(a in e)throw new Error("`builder.addCase` cannot be called with two reducers for the same action type");return e[a]=o,i},addMatcher:function(s,o){return n.push({matcher:s,reducer:o}),i},addDefaultCase:function(s){return r=s,i}};return t(i),[e,n,r]}function zX(t){return typeof t=="function"}function UX(t,e,n,r){n===void 0&&(n=[]);var i=typeof e=="function"?f2(e):[e,n,r],s=i[0],o=i[1],a=i[2],l;if(zX(t))l=function(){return I0(t())};else{var c=I0(t);l=function(){return c}}function u(f,d){f===void 0&&(f=l());var h=ha([s[d.type]],o.filter(function(p){var g=p.matcher;return g(d)}).map(function(p){var g=p.reducer;return g}));return h.filter(function(p){return!!p}).length===0&&(h=[a]),h.reduce(function(p,g){if(g)if(zi(p)){var E=p,m=g(E,d);return m===void 0?p:m}else{if(qr(p))return o2(p,function(y){return g(y,d)});var m=g(p,d);if(m===void 0){if(p===null)return p;throw Error("A case reducer on a non-draftable value must not return undefined")}return m}return p},f)}return u.getInitialState=l,u}function jX(t,e){return t+"/"+e}function VX(t){var e=t.name;if(!e)throw new Error("`name` is a required option for createSlice");typeof process<"u";var n=typeof t.initialState=="function"?t.initialState:I0(t.initialState),r=t.reducers||{},i=Object.keys(r),s={},o={},a={};i.forEach(function(u){var f=r[u],d=jX(e,u),h,p;"reducer"in f?(h=f.reducer,p=f.prepare):h=f,s[u]=h,o[d]=h,a[u]=p?Mi(d,p):Mi(d)});function l(){var u=typeof t.extraReducers=="function"?f2(t.extraReducers):[t.extraReducers],f=u[0],d=f===void 0?{}:f,h=u[1],p=h===void 0?[]:h,g=u[2],E=g===void 0?void 0:g,m=Ii(Ii({},d),o);return UX(n,function(y){for(var v in m)y.addCase(v,m[v]);for(var b=0,T=p;b<T.length;b++){var S=T[b];y.addMatcher(S.matcher,S.reducer)}E&&y.addDefaultCase(E)})}var c;return{name:e,reducer:function(u,f){return c||(c=l()),c(u,f)},actions:a,caseReducers:s,getInitialState:function(){return c||(c=l()),c.getInitialState()}}}var $X="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",GX=function(t){t===void 0&&(t=21);for(var e="",n=t;n--;)e+=$X[Math.random()*64|0];return e},WX=["name","message","stack","code"],Ig=function(){function t(e,n){this.payload=e,this.meta=n}return t}(),ux=function(){function t(e,n){this.payload=e,this.meta=n}return t}(),HX=function(t){if(typeof t=="object"&&t!==null){for(var e={},n=0,r=WX;n<r.length;n++){var i=r[n];typeof t[i]=="string"&&(e[i]=t[i])}return e}return{message:String(t)}};(function(){function t(e,n,r){var i=Mi(e+"/fulfilled",function(c,u,f,d){return{payload:c,meta:Og(Ii({},d||{}),{arg:f,requestId:u,requestStatus:"fulfilled"})}}),s=Mi(e+"/pending",function(c,u,f){return{payload:void 0,meta:Og(Ii({},f||{}),{arg:u,requestId:c,requestStatus:"pending"})}}),o=Mi(e+"/rejected",function(c,u,f,d,h){return{payload:d,error:(r&&r.serializeError||HX)(c||"Rejected"),meta:Og(Ii({},h||{}),{arg:f,requestId:u,rejectedWithValue:!!d,requestStatus:"rejected",aborted:(c==null?void 0:c.name)==="AbortError",condition:(c==null?void 0:c.name)==="ConditionError"})}}),a=typeof AbortController<"u"?AbortController:function(){function c(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return c.prototype.abort=function(){},c}();function l(c){return function(u,f,d){var h=r!=null&&r.idGenerator?r.idGenerator(c):GX(),p=new a,g;function E(y){g=y,p.abort()}var m=function(){return LX(this,null,function(){var y,v,b,T,S,P,R;return xX(this,function(O){switch(O.label){case 0:return O.trys.push([0,4,,5]),T=(y=r==null?void 0:r.condition)==null?void 0:y.call(r,c,{getState:f,extra:d}),YX(T)?[4,T]:[3,2];case 1:T=O.sent(),O.label=2;case 2:if(T===!1||p.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return S=new Promise(function(L,M){return p.signal.addEventListener("abort",function(){return M({name:"AbortError",message:g||"Aborted"})})}),u(s(h,c,(v=r==null?void 0:r.getPendingMeta)==null?void 0:v.call(r,{requestId:h,arg:c},{getState:f,extra:d}))),[4,Promise.race([S,Promise.resolve(n(c,{dispatch:u,getState:f,extra:d,requestId:h,signal:p.signal,abort:E,rejectWithValue:function(L,M){return new Ig(L,M)},fulfillWithValue:function(L,M){return new ux(L,M)}})).then(function(L){if(L instanceof Ig)throw L;return L instanceof ux?i(L.payload,h,c,L.meta):i(L,h,c)})])];case 3:return b=O.sent(),[3,5];case 4:return P=O.sent(),b=P instanceof Ig?o(null,h,c,P.payload,P.meta):o(P,h,c),[3,5];case 5:return R=r&&!r.dispatchConditionRejection&&o.match(b)&&b.meta.condition,R||u(b),[2,b]}})})}();return Object.assign(m,{abort:E,requestId:h,arg:c,unwrap:function(){return m.then(XX)}})}}return Object.assign(l,{pending:s,rejected:o,fulfilled:i,typePrefix:e})}return t.withTypes=function(){return t},t})();function XX(t){if(t.meta&&t.meta.rejectedWithValue)throw t.payload;if(t.error)throw t.error;return t.payload}function YX(t){return t!==null&&typeof t=="object"&&typeof t.then=="function"}var t_="listenerMiddleware";Mi(t_+"/add");Mi(t_+"/removeAll");Mi(t_+"/remove");var fx;typeof queueMicrotask=="function"&&queueMicrotask.bind(typeof window<"u"?window:typeof global<"u"?global:globalThis);pX();const KX={layersHighlights:[]},qX=VX({name:"areas",initialState:KX,reducers:{handleLayersHighlights:(t,{payload:e})=>{t.layersHighlights=e}}}),ZX=qX.reducer,QX=BX({reducer:{areas:ZX}});const Vu=Jt(({className:t,...e})=>N.jsx(G7,{...e,classes:{popper:t}}))(({theme:t})=>({[`& .${zr.tooltip}`]:{backgroundColor:"#2f3542",color:"rgba(255, 255, 255, 0.7)",maxWidth:120,fontSize:t.typography.pxToRem(12),border:"1px solid #dadde9",position:"relative",top:"38px"}})),JX=()=>{const{dataUnits:t,errorUnits:e,loadingUnits:n}=eX();if(n)return N.jsx("h2",{children:"Loading Units..."});if(e)return N.jsx("p",{children:e});const r=t.filter(o=>o.irrigating).length,i=t.filter(o=>!o.connected).length,s=t.filter(o=>o.failure).length;return N.jsx(A.Suspense,{fallback:N.jsx("h3",{children:"Loading..."}),children:N.jsxs(ao,{container:!0,direction:"row",className:"containerCounters",children:[N.jsx(ao,{item:!0,className:"boxCounter",children:N.jsx("span",{className:"titleMap",children:"La Vega Baja map | Units counter"})}),N.jsx(Vu,{title:"Total devices",placement:"top",children:N.jsxs(ao,{item:!0,className:"boxCounter",children:[N.jsxs(ps,{className:"subBoxCounter",children:[N.jsx("span",{children:"Total"}),N.jsx("div",{className:"statusCounter total"})]}),N.jsx("span",{children:t.length})]})}),N.jsx(Vu,{title:"Total devices irrigating",placement:"top",children:N.jsxs(ao,{item:!0,className:"boxCounter",children:[N.jsxs(ps,{className:"subBoxCounter",children:[N.jsx("span",{children:"Irrigation"}),N.jsx("div",{className:"statusCounter irrigating"})]}),N.jsx("span",{children:r})]})}),N.jsx(Vu,{title:"Total devices inactive",placement:"top",children:N.jsxs(ao,{item:!0,className:"boxCounter",children:[N.jsxs(ps,{className:"subBoxCounter",children:[N.jsx("span",{children:"Inactive"}),N.jsx("div",{className:"statusCounter inactive"})]}),N.jsx("span",{children:i})]})}),N.jsx(Vu,{title:"Total devices failures",placement:"top",children:N.jsxs(ao,{item:!0,className:"boxCounter",children:[N.jsxs(ps,{className:"subBoxCounter",children:[N.jsx("span",{children:"Failure"}),N.jsx("div",{className:"statusCounter failure"})]}),N.jsx("span",{children:s})]})})]})})};const eY=()=>N.jsx(xO,{store:QX,children:N.jsxs(ps,{style:{width:"70%",height:"calc(100vh - 180px)",position:"absolute",left:"50%",transform:"translateX(-50%)",top:"7%"},children:[N.jsx(JX,{}),N.jsx(lX,{})]})});const tY=PS(document.getElementById("root"));tY.render(N.jsx(Wt.StrictMode,{children:N.jsx(eY,{})}));export{nY as c,Td as g};
